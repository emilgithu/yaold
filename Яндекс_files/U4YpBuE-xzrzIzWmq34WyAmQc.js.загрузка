var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

if(window.Ya&&Ya.Rum){Ya.Rum.sendTimeMark("2095.2154");}function getcss(t){setTimeout(function(){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head").item(0).appendChild(e)},0)}function MordaRT(){this.listRE={}}function CoversAPI(){this.current=null,this.currentStatus=0,this.area=null,this.shareInstance=null,this.fadeTimeout=600}function cp(t,e,i){var n="clck/lid="+t;Lego.params.statRoot&&(n+="/sid="+Lego.params.msid);try{if(i=i||{},i.host=Lego.params?Lego.params["click-host"]:null,home&&home.getData&&home.getData("i-counter.useBeacon")){var o=function(t){if(!("sendBeacon"in navigator))return!1;for(var e,i,n=t.split("."),o=0;o<n.length;++o){var s={ctag:n[o]};i?i.children=[s]:e=[s],i=s}var r="/dtype=clck/session_id="+Lego.params.msid+'/events=[{"event":"click","parent-path":"'+Lego.params.statRoot+'","blocks":'+JSON.stringify(e)+"}]/*";return navigator.sendBeacon(home.getData("i-counter.clckBase")+"counter",r)},s=t.indexOf("news")>-1;if(o(t.replace(Lego.params.statRoot+".","")+(s?".beacon":"")))return!0;s&&(n=n.replace(t,t+".redir"))}Lego.c(n,e,i)}catch(r){}}function cpr(t,e,i){try{Lego.cred(t,e,i)}catch(n){}}function cpt(t,e){t+=(document.getElementById("form").text.value?".full":".empty")+"/u="+(new Date).getTime(),cp(t,e)}function c0(t){try{Lego.c(t)}catch(e){}}function csh(t,e){try{cp(t,e)}catch(i){}}function csh_ifmsid(t,e){Lego.params.statRoot&&csh(t,e)}function cpa(t){return t&&"undefined"!=typeof Lego.params.msid?"onmousedown=\"Lego.cp('132','71946','"+t+"',this)\"":""}function statRedirect(t,e,i){var n,o,s=e&&Lego.params.statRoot;return s&&(t=BEM.blocks["i-global"].param("click-href")+"redir/dtype=clck/lid="+e+"/sid="+Lego.params.msid+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(t.match(/^http/)?t:location.protocol+"//"+location.host+(t.match("^/")?t:"/"+t)))),"_blank"===i?(n=$("<form />"),o=function(){var e,i,o,r;if(s)return t;if(e=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),e&&e[2])for(i=e[2].split("&"),o=i.length;o--;)r=i[o].split("="),n.append($("<input/>").attr({type:"hidden",name:r[0],value:r[1]}));return e?e[1]:t}(),void n.attr({action:o,target:i}).appendTo($("body"))[0].submit()):void(location.href=t)}function CAWBrowser(){var t,e=[],i=6,n=35;for(t=i;n>t;t++)e[t]=!1;var o=navigator.userAgent;this.msie=o&&parseFloat(navigator.appVersion)>=4&&o.indexOf("Opera")<0&&o.indexOf("MSIE 4")<0&&o.indexOf("MSIE")>=0,this.win=o&&(o.indexOf("Windows 95")>=0||o.indexOf("Windows NT")>=0||o.indexOf("Windows 98")>=0),this.mac=navigator.platform&&-1!==navigator.platform.indexOf("Mac"),this.opera7=-1!==o.indexOf("Opera")&&window.opera&&document.readyState?1:0,this.gecko=-1!==o.toLowerCase().indexOf("gecko")&&-1===o.indexOf("safari");var s=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(s)for(t=i;n>t;t++)e[t]=s,e[t]=parseInt(e[t].description.substring(e[t].description.indexOf(".")-2),10)>=t;else if(this.msie&&this.win&&!this.mac)for(t=i;n>t;t++)try{e[t]=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t)}catch(r){}for(this.other=!((this.gecko||this.msie)&&this.win&&!this.mac),this.flash=0,t=i;n>t;t++)e[t]&&(this.flash=t);this.full_version=this.flash+"",s&&s.version&&(this.full_version=s.version+"")}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):e(t)}("undefined"!=typeof global?global:this,function(t){var e=function(t){};if(e.version="1.0.29",e.isDebug=!1,e.isArray=function(t){return t instanceof Array},e.isArrayLike=function(t){return e.isObject(t)&&!e.isArray(t)&&"length"in t},e.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},e.isFunction=function(){for(var t=0,e=arguments.length;e>t;t++)if(!(arguments[t]instanceof Function))return!1;return!0},e.isObject=function(t){return"object"==typeof t},e.isString=function(){for(var t=0,e=arguments.length;e>t;t++)if("string"!=typeof arguments[t])return!1;return!0},e.stringf=function(t,e){var i=Array.prototype.slice.call(arguments,1);return t.replace(/%s/g,function(){return i.shift()||""})},"undefined"==typeof JSON)throw new Error("JSON is not supported");e.JSON=JSON,e.console={slog:function(t){this.log(e.stringf.apply(this,arguments))},log:function(e){"undefined"!=typeof debug?debug(e):t.console&&t.console.log&&t.console.log(e)},error:function(t){throw new Error(t)},dir:function(t){this.log(e.JSON.stringify(t))}},e.log=e.console.log,e.error=e.console.error;var i=/^https?:\/\/\S+/i;e.isURL=function(t){return"string"!=typeof t&&e.error("isURL expects string parameter instead "+typeof t),i.test(t)};var n=Array.prototype.filter?function(t,e){return t.filter(e)}:function(t,i){var n=[];return e.each(t,function(t,e){i(t,e,this)&&n.push(t)}),n};e.filter=function(t,i){return e.isArray(t)||e.error("first argument is expected to be an array instead of "+typeof t),e.isFunction(i)||e.error("second argument is expected to be a function instead of "+typeof i),n(t,i)},e.forEach=function(t,e,i){var n,o;for(i=i||t,n=0,o=t.length;o>n;n++)e.call(i,t[n],n,t);return this},e.indexOf=function(t,e,i){if(i=i||0,!(t instanceof Array))throw new Error("Function expects array as first argument");if("indexOf"in Array.prototype)return t.indexOf(e,i);for(var n=0,o=t.length;o>n;n++)if(t[n]===e&&n>=i)return n;return-1},e.map=function(t,i){var n=[];if(e.isArray(t)&&i instanceof Function)if(x.isFunction(t.map))n=t.map(i);else for(var o=0,s=t.length;s>o;o++)n[o]=i(t[o],o,t);return n},function(){var t=Array.prototype.some?function(t,e){return t.some(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e(t[i],i,t))return!0;return!1};e.some=function(i,n){return e.isArray(i)||e.error("first argument is expected to be an array instead of "+typeof i),e.isFunction(n)||e.error("second argument is expected to be a function instead of "+typeof n),t(i,n)}}();var o={};e.each=o.each=function(t,i,n){if(e.isArray(t))e.forEach.apply(this,arguments);else{var o,s=n||t;for(o in t)t.hasOwnProperty(o)&&i.call(s,t[o],o,t)}return this};var s,r;"function"==typeof Object.create?s=Object.create:(r=function(){},s=function(t){return r.prototype=t,new r}),e.beget=function(t,e){var i=s(t);for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},e.getRandom=function(t){return Math.floor(Math.random()*(t||1e3))},e.getElementId=function(t){e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t);var i=t.getAttribute("id");return i||(i="_"+e.getRandom(1e16),t.setAttribute("id",i)),i};var a=function(t){for(var e=document.all,i=[],n=0,o=e.length;o>n;++n)"string"==typeof e[n].getAttribute(t)&&i.push(e[n]);return i};e.getElementsByAttr=function(e){var i=[],n=arguments[1]||t.document||null;if("getAttribute"in n&&n.getAttribute(e)&&i.push(n),n&&n.querySelectorAll)try{i=i.concat(Array.prototype.slice.call(n.querySelectorAll("["+e+"]")))}catch(o){}return i.length||(i=i.concat(a(e))),i};var l=(new RegExp).compile(/^\s+|\s+$/g);e.trim=function(t){var i=typeof t;return"string"!==i&&e.error("Argument must be string but"+i+" passed"),t.trim instanceof Function?t.trim():t.replace(l,"")},e.stripSpaces=function(t){return t.split(" ").join("")},e.bind=function(t,e){return function(){return t.apply(e,arguments)}};e.query=function(t,e){for(var i=e||this||{},n=t.split("."),o=0;i[n[o]];)i=i[n[o++]];return o===n.length?i:null},e.getJPathValue=function(t,i){return x.bind(e.query,t)(i)},e.getObject=function(t){return t.beget=function(t){return e.beget(this,t)},e.beget(t)},e.bem={getAttributes:function(t){if(!t)return"";var e,i="";for(e in t)if(t.hasOwnProperty(e)){var n=t[e];(n||0===n)&&(n=n.toString().replace(/"/g,"&quot;"),i+=" "+e+'="'+n+'"')}return i},getClassname:function(t,e){var i,n=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),n)for(i in n)n.hasOwnProperty(i)&&(n[i]||0===n[i])&&(o+=" "+t+"_"+i+"_"+n[i]);return o},getBEMParams:function(t){return JSON.stringify(t).replace(/"/g,"&quot;")}},e.create=function(t){var e=function(){};return e.prototype=t,new e},e.constructURL=function(t,e){var i,n="",o=[],s=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),r=s&&s[3]?s[3]:"";if(s&&s[2])for(var a=s[2].split("&"),l=a.length;l--;)o.push(a[l]);for(i in e)e.hasOwnProperty(i)&&o.push(i+"="+e[i]);return n=s?s[1]+"?"+o.join("&")+r:t+"?"+o.join("&")+r};var c=/([a-z]{1})([A-Z]{1})/g;e.decamelCase=function(t){return t.replace(c,function(t,e,i){return e+"-"+i.toLowerCase()})},e.data=function(t,i){return e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t),t.getAttribute("data-"+i)},e.ComponentBase={data:function(t){var i=this.element;return i?e.data(i,t):void 0},setId:function(t){return this.id=t,this},baseInit:function(t,i){var n=this;this.element=i,e.each(e.dataset(i),function(t,e){n[x.decamelCase(e)]=t})}},e.Component=function(){var t=[],i=[],n={},o="data-xapp";return{extend:function(o){var s,r=t.length;if(e.isObject(o))s=e.beget(e.ComponentBase,o);else if(e.isString(o)&&e.isFunction(arguments[1]))s=e.beget(e.ComponentBase,{id:o,init:arguments[1]});else{if(!e.isString(o)||!e.isArray(arguments[1]))throw new Error('Unknown definition structure, try to use extend("yourName", function() { ... init code ... })');var a=arguments[1];s=e.beget(e.ComponentBase,{id:o,init:function(){var t=e.filter(a,function(t){return e.isString(t)});t=e.map(t,function(t){if(!i[t])throw new Error("Service "+t+" hasnt defined");return i[t]()});var n=e.filter(a,function(t){return e.isFunction(t)});if(n.length>1)throw new Error("Too much declaration functions");n[0].apply(this,t)}})}return s.id||e.error("extend method expects id field in description object"),t.push(s),n[s.id]=r,t[r]},factory:function(t,e){i[t]=e},initByHTML:function(t){var i=t||document,n=this,s=e.getElementsByAttr(o,i);return e.forEach(s,function(t){var i=e.data(t,"xapp");e.forEach(i.split(" "),function(i){n.initById(i,e.getElementId(t),t)})}),this},initById:function(e,i,o){var s=e in n?t[n[e]]:null;s&&("undefined"!=typeof i&&s.setId(i),s.baseInit(i,o),s.init(i))}}}();var u=/-([\da-z])/gi;e.camelCase=function(t){return t.replace(u,function(t,e){return e.toUpperCase()})},e.dataset=function(t){var i={};return e.isElement(t)&&(t.dataset&&"hasOwnProperty"in t.dataset&&e.isFunction(t.dataset.hasOwnProperty)?i=t.dataset:e.forEach(t.attributes,function(t){0===t.name.indexOf("data-")&&(i[x.camelCase(t.name.substr(5))]=t.value)})),i},e.generateId=function(){return String(Math.random()).substr(2)},e.ns=function(t,e,i){return t[e]||(t[e]={}),"undefined"!=typeof i&&i.call(t[e]),this},e.extend=function(t,e){var i=function(){};t.superclass=i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,e.prototype.constructor===Object.prototype.constructor&&(e.prototype.constructor=e)},e.Interface=function(t,i){var n=this;2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected exactly 2"),this.methods=[],this.name=t,e.forEach(i,function(t){"string"!=typeof t&&e.error("Interface constructor expects method names to be passed in as a string"),n.methods.push(t)})},e.Interface.ensureImplements=function(t,i){return 2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected at least 2"),e.forEach(i,function(i){i.constructor!==e.Interface&&e.error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface."),e.forEach(i.methods,function(n){t[n]&&"function"==typeof t[n]||e.error("Function Interface.ensureImplements: object does not implement the "+i.name+" interface. Method "+n+" was not found.")})}),!0},e.View=function(t){this.templates=t&&t.templates?e.beget(t.templates):{},this.re={parse:this.re.parse,rule:this.re.rule}},e.View.prototype={templates:{},re:{parse:/\[\%\s+([^%]+)\s+\%\]/g,rule:/:/},setParseRe:function(t){this.re.parse=t},getCustomRender:function(){var t="undefined"!==arguments[0]?arguments[0].split(this.re.rule):null;return t&&2===t.length?this.parseRules[t[0]]&&this.parseRules[t[0]].call(this,t[1]):void 0},parseRules:{l10n:function(t){return function(i){return e.isDebug&&!i.l10n(t)&&e.console.error("There is no translation for "+t),i.l10n?i.l10n(t):t}},jpath:function(t){return function(i){return e.getJPathValue(i,t)||""}},view:function(t){var e=this;return function(i){return e.get(t,i)}},bem:function(t){t=t.split(".");var i=t.pop(),n=t.pop(),o=t.pop();switch(i){case"class":return function(t){return e.bem.getClassname(n,(o?t[o]:t)||{})};case"attrs":return function(t){return e.bem.getAttributes(t[n||"attrs"])};case"js":return function(t){return e.bem.getBEMParams(t[n||"js"]||{})}}}},ruleFunction:function(t,i,n){var o=this;return this.getCustomRender(t)||function(s){var r=s&&s[t]||s&&s.views&&s.views.get(t,s)||"";return r||(r=n[t]?o.getContent(n[t],s):i?i[t]:""),e.isDebug&&!r&&e.console.log("Undefined variable "+t),r||""}},getContent:function(t,i){var n="";return n=e.isArray(t)?e.map(t,function(t){return"string"==typeof t?t:t(i)}).join(""):e.isFunction(t)?t(i):t.toString()},get:function(t,e){var i=this,n=e&&e.views?e.views.templates[t]:this.templates[t];return n?i.getContent(n,e):""}},e.View.prototype.let=function(t,i,n){var o=this.templates[t]=[],s=this,r=0;return e.isFunction(i)?this.templates[t]=i:(i.replace(this.re.parse,function(t,e,a){o.push(i.substr(r,a-r),s.ruleFunction(e,n,s.templates)),r=a+t.length}),r<i.length&&o.push(i.substr(r))),this},e.views=new e.View,e.getViewsForLangs=function(t,e){var i={},n=this;return t.forEach(function(t){var o;if(e){if(!(t in e))throw new Error('No lang "'+t+'" in base views.');o=e[t]}i[t]=new n.View(o)}),i},e.toArray=function(t){return Array.prototype.slice.call(t)};var h={},d={};return e.amd={define:function(t,e,i){return i=i||!0,h[t]=e,i&&(d[t]=!0),this},require:function(){var t=e.toArray(arguments).slice(0,arguments.length-1),i=arguments[arguments.length-1];return t=e.map(t,function(t){if(!h[t])throw new Error("Unmet dependency:"+t);return d[t]?(h[t]=e.isFunction(h[t])?h[t]():h[t],h[t]):h[t]()}),i.apply(this,t),this}},e.debounce=function(t,e,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,i||t.apply(o,s)},a=i&&!n;clearTimeout(n),n=setTimeout(r,e),a&&t.apply(o,s)}},e.Set=function(){this.items=[]},e.Set.prototype={add:function(t){return this.has(t)||this.items.push(t),this},has:function(t){return-1!==x.indexOf(this.items,t)},remove:function(t){var e;return this.has(t)&&(e=this.items.splice(x.indexOf(this.items,t),1)),e},removeFirst:function(){var t;return this.isEmpty()||(t=this.items.splice(0,1)),t},iterate:function(t){for(var e=0,i=this.items.length;i>e;e++)t(this.items[e],e,this.items);return this},size:function(){return this.items.length},isEmpty:function(){return 0===this.items.length}},e.range=function(t,e){var i=t.split("..."),n=0,o=0;for(i[0]&&!isNaN(i[0])&&(n=i[0]),i[1]&&!isNaN(i[1])&&(o=i[1]);o>n;)e(n++)},"function"==typeof define&&define.amd&&define("franky",[],function(){return e}),t.x=t.franky=e,e}),function(t){function e(t){var e=r(t);if(u)for(var i,n=0;i=p[n++];)t.hasOwnProperty(i)&&e.push(i);return e}function i(i,n,o){function s(e,o){var s=function(){var t=this.__base;this.__base=s.__base;var e=o.apply(this,arguments);return this.__base=t,e};return s.__base=i[e]?i[e]:"__constructor"===e?n.__self.__parent:t.noop,s}for(var r,a,l=e(o),u=0,h=l.length;h>u;)"__self"!==(r=l[u++])&&(a=o[r],n[r]=c(a)&&a.toString().indexOf(".__base")>-1?s(r,a):a)}function n(e,i){for(var n,o=1;n=e[o++];)i?c(n)?t.inheritSelf(i,n.prototype,n):t.inheritSelf(i,n):i=c(n)?t.inherit(e[0],n.prototype,n):t.inherit(e[0],n);return i||e[0]}var o=function(){},s=Object.create||function(t){var e=function(){};return e.prototype=t,new e},r=Object.keys,a=t.extend,l=Array.isArray,c=t.isFunction,u=!0,h={toString:""};for(var d in h)h.hasOwnProperty(d)&&(u=!1);var p=u?["toString","valueOf"]:null;t.inherit=function(){var t=arguments,e=l(t[0]),r=e||c(t[0]),u=r?e?n(t[0]):t[0]:o,h=t[r?1:0]||{},d=t[r?2:1],p=h.__constructor||r&&u.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:r?function(){return u.apply(this,arguments)}:function(){};if(!r)return p.prototype=h,p.prototype.__self=p.prototype.constructor=p,a(p,d);a(p,u),p.__parent=u;var f=u.prototype,m=p.prototype=s(f);return m.__self=m.constructor=p,h&&i(f,m,h),d&&i(u,p,d),p},t.inheritSelf=function(){var t=arguments,e=l(t[0]),o=e?n(t[0],t[0][0]):t[0],s=t[1],r=t[2],a=o.prototype;return s&&i(a,a,s),r&&i(o,o,r),o},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,i="__"+Number(new Date),n=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return n();var o="uniqueID"in t?"uniqueID":i;return e||o in t?t[o]:t[o]=n()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",i=function(e,i){return t.identify(e)+(i?t.identify(i):"")},n={buildEventName:function(t){return t},on:function(n,o,s,r,a){if("string"==typeof n){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var l,c=i(s,r),u=this[e]||(this[e]={}),h=n.split(" "),d=0;n=h[d++];)if(n=this.buildEventName(n),l=u[n]||(u[n]={ids:{},list:{}}),!(c in l.ids)){var p=l.list,f={fn:s,data:o,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,l.ids[c]=p.last=f}}else{var m=this;t.each(n,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},un:function(n,o,s){if("string"==typeof n||"undefined"==typeof n){var r=this[e];if(r)if(n){for(var a,l=n.split(" "),c=0;n=l[c++];)if(n=this.buildEventName(n),a=r[n])if(o){var u=i(o,s),h=a.ids;if(u in h){var d=a.list,p=h[u],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[u]}}else delete this[e][n]}else delete this[e]}else{var _=this;s=o,t.each(n,function(t,e){_.un(t,e,s)})}return this},trigger:function(i,n){var o=this[e],s="string"==typeof i,r=s?i:i.type,a=this.buildEventName(r);if(s||(i.type=a,i.target||(i.target=this)),o&&(o=o[a])){var l,c=o.list.first;for(c&&s&&(i=t.Event(a),i.target=this);c;)i.data=c.data,l=c.fn.call(c.ctx||this,i,n),"undefined"!=typeof l&&(i.result=l,l===!1&&(i.preventDefault(),i.stopPropagation())),c.special&&c.special.one&&this.un(r,c.fn,c.ctx),c=c.next}return this}};t.observable=t.inherit(n,n)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,n=t.call(arguments,1);return function(){return i.apply(e,n.concat(t.call(arguments)))}})}(),function(t,e){function i(t,e,i){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(i?"_"+i:"")}function n(t,e,n){if(l(t))return void(e[i(n,"*","*")]=t);var o,s,r;for(o in t)if(c(t,o))if(r=t[o],l(r))e[i(n,o,"*")]=r;else for(s in r)c(r,s)&&(e[i(n,o,s)]=r[s])}function o(t,e){return e?Array.isArray(e)?function(i){for(var n=0,o=e.length;o>n;)if(i.hasMod(t,e[n++]))return!0;return!1}:function(i){return i.hasMod(t,e)}:function(e){return e.hasMod(t)}}function s(t){t.onSetMod&&(n(t.onSetMod,t),delete t.onSetMod);var e,i;if(t.onElemSetMod){for(e in t.onElemSetMod)c(t.onElemSetMod,e)&&(i=t.onElemSetMod[e],n(i,t,e));delete t.onElemSetMod}}var r=[],a=t.inherit,l=t.isFunction,c=Function.prototype.call.bind(Object.prototype.hasOwnProperty),u={},h="_",d="__",p={};this.BEM=a(t.observable,{__constructor:function(t,e,i){var n=this;n._modCache=t||{},n._processingMods={},n._params=e,n.params=null,i!==!1?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(t.bind(e||this))},on:function(e,i,n,o){return"object"==typeof e&&(t.isFunction(i)||t.isFunction(n))&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"==typeof e&&t.isFunction(i)&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},trigger:function(e,i){var n=!0;return"object"!=typeof e||e instanceof t.Event||(n="js"===e.modName||this.hasMod("js"),e=this.__self._buildModEventName(e)),n&&(this.__base(e=this.buildEvent(e),i),this._trigger(e,i)),this},_trigger:function(t,e){this.__self.trigger(t,e)},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,i,n){var o=arguments.length,s=!1;1==o?(n="",i=t,t=e,s=!0):2==o&&("string"==typeof t?(n=i,i=t,t=e):(n="",s=!0));var r=this.getMod(t,i)===n;return s?!r:r},getMod:function(t,e){var i=typeof t;if("string"===i||"undefined"===i){e=t||e;var n=this._modCache,o=e in n?n[e]:n[e]=this._extractModVal(e);return o}return this._getElemMod(e,t)},_getElemMod:function(t,e,i){return this._extractModVal(t,e,i)},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,n=[].slice.call(arguments,e?1:0);return n.length?n.reduce(function(t,e){return e in i&&(t[e]=i[e]),t},{}):i},setMod:function(i,n,o){"undefined"==typeof o&&("string"==typeof i?(o="undefined"==typeof n?!0:n,n=i,i=e):o=!0);var s=this;if(!i||i[0]){o===!1||null===o?o="":o!==!0&&(o=o.toString());var r=(i&&i[0]?t.identify(i[0]):"")+"_"+n;if(this._processingMods[r])return s;var a,l=i?s._getElemMod(n,i,a=s.__self._extractElemNameFrom(i)):s.getMod(n);if(l===o)return s;this._processingMods[r]=!0;var c=!0,u=[n,o,l];i&&u.unshift(i),[["*","*"],[n,"*"],[n,o]].forEach(function(t){c=s._callModFn(a,t[0],t[1],u)!==!1&&c}),!i&&c&&(s._modCache[n]=o),c&&s._afterSetMod(n,o,l,i,a),delete this._processingMods[r]}return s},_afterSetMod:function(t,e,i,n,o){var s={modName:t,modVal:e,oldModVal:i};n&&(s.elem=n),this.trigger({modName:t,modVal:"*",elem:o},s).trigger({modName:t,modVal:e,elem:o},s)},toggleMod:function(t,i,n,o,s){"string"==typeof t&&(s=o,o=n,n=i,i=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,i);return(r==n||r==o)&&this.setMod(t,i,"boolean"==typeof s?s?n:o:this.hasMod(t,i,n)?o:n),this},delMod:function(t,i){return i||(i=t,t=e),this.setMod(t,i,"")},_callModFn:function(t,n,o,s){var r=i(t,n,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){var t={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:t.modName,modVal:t.modVal},t)}},t.extend(this.BEM,{_name:"i-bem",blocks:u,decl:function(i,n,r){"string"==typeof i?i={block:i}:i.name&&(i.block=i.name),s(n||(n={}));var c=u[i.baseBlock||i.block]||this;if(i.modName){var h=o(i.modName,i.modVal);t.each(n,function(t,i){l(i)&&(n[t]=function(){var o;if(h(this))o=i;else{var s=c.prototype[t];s&&s!==n[t]&&(o=this.__base)}return o?o.apply(this,arguments):e})})}if(r&&"boolean"==typeof r.live){var d=r.live;r.live=function(){return d}}var p,f=c;return i.baseMix&&(f=[f],i.baseMix.forEach(function(t){f.push(u[t])})),i.block==c._name?(p=a.self(f,n,r))._processLive(!0):((p=u[i.block]=a(f,n,r))._name=i.block,delete p._liveInitable),p},declMix:function(t,e,i){return s(e||(e={})),t=u[t]=a(e,i)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new u[t.block](t.mods,e)},getName:function(){return this._name},on:function(e,i,n,o){return"object"==typeof e&&(t.isFunction(i)||t.isFunction(n))&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"==typeof e&&t.isFunction(i)&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},_buildModEventName:function(t){var e=h+t.modName+h+(t.modVal===!1?"":t.modVal);return t.elem&&(e=d+t.elem+e),e},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==r.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=r.length;t&&r.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,i=e?0:1,n=arguments.length;for(e&&(t=this);n>i;)delete t[arguments[i++]];return this},channel:function(i,n){return"boolean"==typeof i&&(n=i,i=e),i||(i="default"),n?void(p[i]&&(p[i].un(),delete p[i])):p[i]||(p[i]=new t.observable)}}))}(jQuery),function(t,e,i){function n(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e}function o(t,e,i){null!=e&&e!==!1&&(i.push(l,t),e!==!0&&i.push(l,e))}function s(t,e,i,n){n.push(t),o(e,i,n)}function r(t,e,i,n,r){s(t,a,a,r),r.push(c,e),o(i,n,r)}var a,l="_",c="__",u="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:u,MOD_DELIM:l,ELEM_DELIM:c,buildModPostfix:function(t,e,i){var n=i||[];return o(t,e,n),i?n:n.join("")},buildClass:function(t,e,i,o,l){if(n(i)?n(o)||(l=o,o=i,i=e,e=a):"undefined"!=typeof i?(l=i,i=a):e&&"string"!=typeof e&&(l=e,e=a),!e&&"undefined"==typeof i&&!l)return t;var c=l||[];return e?r(t,e,i,o,c):s(t,i,o,c),l?c:c.join("")},buildClasses:function(t,n,o,a){n&&"string"!=typeof n&&(a=o,o=n,n=i);var l=a||[];return n?r(t,n,i,i,l):s(t,i,i,l),o&&e.each(o,function(e,i){i&&(l.push(" "),n?r(t,n,e,i,l):s(t,e,i,l))}),a?l:l.join("")}}}(BEM,jQuery),BEM.decl("framebuster",{onSetMod:{js:{inited:function(){var t=this._getWindow();if(t.top.location!==t.location){var e=this.matchDomain(t.document.referrer);e&&!this.isInWhitelist(e)&&(t.top.location=t.location)}}}},matchDomain:function(t){if(!t)return null;var e=t.match(/^https?:\/\/([^:\/\s]+)\/?.*/);return e&&e[1]},isInWhitelist:function(t){if(!t)return!0;var e=this.defaultWhitelist().concat(this.params.whitelist||[]);return e.some(function(e){return"string"==typeof e?e===t||-1!==t.indexOf(e,t.length-e.length):!!e.test(t)})},defaultWhitelist:function(){return[]},_getWindow:function(){return window}}),x.ns(this,"ya"),x.ns(this,"home"),function(t,e,i){function n(t,i){var n=t[0];e.each(a(n),function(r,a){s(a,n,r,i);var l=f[a.uniqId];l?l.domElem.index(n)<0&&(l.domElem=l.domElem.add(t),e.extend(l._params,a)):o(r,t,a)})}function o(t,n,o,r,l){"boolean"==typeof o&&(l=r,r=o,o=i);var c=n[0];o=s(o||a(c)[t],c,t);var u=o.uniqId;if(f[u])return f[u]._init();p[u]=p[u]?p[u].add(n):n;var h=c.parentNode;h&&11!==h.nodeType||e.unique(p[u]);var d=v[t]||C.decl(t,{},{live:!0});if(!(d._liveInitable=Boolean(d._processLive()))||r||o.live===!1){r&&n.addClass("i-bem");var m=new d(p[u],o,Boolean(r));return delete p[u],l&&l.apply(m,T.call(arguments,4)),m}}function s(t,i,n,o){(t||(t={})).uniqId||(t.uniqId=(t.id?n+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(i),r=m[s]||(m[s]={});return r[n]||(r[n]=t),t}function r(t,e,i){var n=t.find(e);return i?n:n.add(t.filter(e))}function a(t){var i=e.identify(t);return m[i]||(m[i]=l(t))}function l(t){var e,i=t.getAttribute("data-bem");return i?JSON.parse(i):e?e():{}}function c(t){delete m[e.identify(t)]}function u(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),p={},f={},m={},_={},g={},v=t.blocks,b=t.INTERNAL,y=b.NAME_PATTERN,w=b.MOD_DELIM,k=b.ELEM_DELIM,E=RegExp("[^"+w+"]"+w+"("+y+")(?:"+w+"("+y+"))?$"),M=b.buildModPostfix,x=b.buildClass,T=Array.prototype.slice,S=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var C=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,i,n){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},o._blockInsideCache={},f[o._uniqId=i.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,i,n)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._findBlocks("find",t,e,!0);return this._blockInsideCache[i]=n,n},blockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._blockInsideCache[i];return n||(n=this.findBlockInside(t,e)),n},dropBlockInsideCache:function(t,e){t||e?this._blockInsideCache[this._buildBlockCacheKey(t,e)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(t,e){e||(e=t,t="");var i="string"==typeof e?e:x(e.block,e.modName,e.modVal),n="string"==typeof t?t:t.__bemElemName;return n+":"+i},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,n,s,r){if(!this.domElem)return r?null:[];s||(s=n,n=i);var a=n?"string"==typeof n?this.findElem(n):n:this.domElem,l="string"==typeof s,c=l?s:s.block||s.blockName,u="."+(l?c:x(c,s.modName,s.modVal))+(r?":first":""),h=a.filter(u);if(t&&(h=h.add(a[t](u))),r)return h[0]?o(c,h.eq(0),!0):null;var d=[],p={};return e.each(h,function(t,i){var n=o(c,e(i),!0);p[n._uniqId]||(p[n._uniqId]=!0,d.push(n))}),d},bindToDomElem:function(t,n,o,s){e.isFunction(o)&&(s=o,o=i);var r=this,a=function(t){return(t.data||(t.data={})).domElem=e(this),s.apply(r,arguments)};return s?t.bind(r._buildEventName(n),o,(a.guid=s.guid=s.guid||e.guid++,a)):e.each(n,function(e,i){r.bindToDomElem(t,e,o,i)}),r},bindToDoc:function(t,e,i){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e,i)},bindToWin:function(t,n,o){e.isFunction(n)&&(o=n,n=i);var s,r,a=o;return"resize"===t&&(o=function(){var t=window.innerHeight|0+h.outerHeight(),e=window.innerWidth|0+h.outerWidth();r===e&&s===t||(s=t,r=e,a.apply(this,arguments))},o.guid=a.guid=a.guid||e.guid++),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,n,o)},bindTo:function(t,i,n,o){var s=arguments.length;switch(s){case 3:e.isFunction(n)&&(o=n,"object"==typeof i&&(n=i,i=t,t=this.domElem));break;case 2:e.isFunction(i)?(o=i,i=t,t=this.domElem):"string"==typeof t||t instanceof e||(n=i,i=t,t=this.domElem);break;case 1:i=t,t=this.domElem}return"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,i,n,o)},unbindFromDomElem:function(t,e,i){return t.unbind(this._buildEventName(e),i),this},unbindFromDoc:function(t,e){return this.unbindFromDomElem(d,t,e)},unbindFromWin:function(t,e){return this.unbindFromDomElem(h,t,e)},unbindFrom:function(t,i,n){var o=arguments.length;return 1===o?(i=t,t=this.domElem):2===o&&e.isFunction(i)?(n=i,i=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.unbindFromDomElem(t,i,n)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var i="."+this._uniqId;if(-1===t.indexOf("."))return e[t]=t+i,e[t];var n=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+n:n+"_"+t}).join("")+i,e[t]},_trigger:function(t,e){this.__base.apply(this,arguments),this._ctxTrigger(t,e)},_ctxTrigger:function(t,i){var n=this,o=_[n.__self._buildCtxEventName(t.type)],s={};o&&n.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var l=e.identify(r,!0);if(l){if(s[l])break;var c=o.ctxs[l];c&&(e.each(c,function(e,o){o.fn.call(o.ctx||n,t,i)}),a--),s[l]=!0}r=r.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,o=[].slice.call(arguments,e?1:0),s=this._extractMods(o,e?t:i);return e||(o.length?o.forEach(function(t){n[t]=s[t]}):n=s),s},setMod:function(t,i,n){if(t&&"undefined"!=typeof n&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,i,n)}),o}return this.__base(t,i,n)},_extractModVal:function(t,e,i){var n,o=(e||this.domElem).eq(0);return o.length&&(n=o.attr("class").match(this.__self._buildModValRE(t,i||e))),n?n[2]||!0:""},_extractMods:function(t,e){var i={},n=!t.length,o=0;return((e||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(n?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=t.match(E);i[e[1]]=e[2]||!0,++o}),o<t.length&&t.forEach(function(t){
t in i||(i[t]="")}),i},_afterSetMod:function(t,i,n,o,s){if(this._isDestructing)return this.__base.apply(this,arguments);var r=this.__self,a=r._buildModClassPrefix(t,s),l=r._buildModValRE(t,s,"g"),c=""===i||i===!1;(o||this.domElem).each(function(){var t=e(this),o=t.attr("class"),s=a;i!==!0&&(s+=w+i),(n===!0?l.test(o):(" "+o).indexOf(" "+a+w)>-1)?t.attr("class",o.replace(l,c?"":"$1"+s)):c||t.addClass(s)}),s&&this.dropElemCache(s,t,n).dropElemCache(s,t,i),this.__base.apply(this,arguments)},findElem:function(t,e,i,n){arguments.length%2?(n=i,i=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),s=M(i,n),a=[],l=e.map(function(t){return a.push("."+x(o,t,i,n)),t+s}),c=1===l.length,u=r(t,a.join(","));return t===this.domElem&&a.forEach(function(t,i){(this._elemCache[l[i]]=c?u:u.filter(t)).__bemElemName=e[i]},this),u},_elem:function(t,e,i){return this._elemCache[t+M(e,i)]||this.findElem(t,e,i)},elem:function(t,i,n){if(2===arguments.length&&(n=!0),i&&"string"!=typeof i)return i.__bemElemName=t,i;if(t.indexOf(" ")<0)return this._elem(t,i,n);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,i,n))},this),o},dropElemCache:function(t,e,i){if(t){var n=M(e,i);t.indexOf(" ")<0?delete this._elemCache[t+n]:t.split(" ").forEach(function(t){delete this._elemCache[t+n]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),l(t[0])[x(this.__self.getName(),e)]||{}},elemify:function(t,i){return(t=e(t)).__bemElemName=i,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,i){return this.__self.buildSelector(t,e,i)},destruct:function(t){var i=this,n=i.__self;i._isDestructing||(i._isDestructing=!0,i._needSpecialUnbind&&n.doc.add(n.win).unbind("."+i._uniqId),i.dropElemCache().domElem.each(function(t,i){var n=a(i);e.each(n,function(t,e){var n=f[e.uniqId];n?n._isDestructing||u(n,i):delete p[e.uniqId]}),c(i)}),t||i.domElem.remove(),i.__base(),delete f[i.un()._uniqId],delete i.domElem,delete i._elemCache)}},{scope:null,doc:d,win:h,html:e(document.documentElement),_processLive:function(t){var e=this._liveInitable;if("live"in this){var i="undefined"==typeof e;if(i^t){e=this.live()!==!1;var n=this.getName(),o=this.live;this.live=function(){return this.getName()===n?e:o.apply(this,arguments)}}}return e},init:function(t,i,o){!t||e.isFunction(t)?(o=i,i=t,t=d):"string"==typeof t&&(t=e(t));var s=e.identify();return r(t,".i-bem").each(function(){n(e(this),s)}),i&&this.afterCurrentEvent(function(){i.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,n,o){"boolean"!=typeof t&&(o=n,n=t,t=i),n&&(S.call(r(n,".i-bem",o)).each(function(t,i){var n=a(this);e.each(n,function(t,e){if(e.uniqId){var n=f[e.uniqId];n?u(n,i):delete p[e.uniqId]}}),c(this)}),t||(o?n.empty():n.remove()))},update:function(t,e,i,n){return this.destruct(t,!0),this.init(t.html(e),i,n)},replace:function(t,i){return this.destruct(!0,t),this.init(e(i).replaceAll(t))},append:function(t,i){return this.init(e(i).appendTo(t))},prepend:function(t,i){return this.init(e(i).prependTo(t))},before:function(t,i){return this.init(e(i).insertBefore(t))},after:function(t,i){return this.init(e(i).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,i,n,o){var s=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(e){s._liveClassBind(t,e,n,o)});else{var r=g[i],a=e.identify(n);r||(r=g[i]={},d.bind(i,s._liveClassTrigger.bind(s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(n,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,i,n){var o=g[i];if(o)if(n){if(o=o[t]){var s=e.identify(n);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);a>r;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var i=g[t.type];if(i){var n=t.target,o=Object.keys(i);do for(var s,r=" "+n.className+" ",a=0;s=o[a++];)if(-1!==r.indexOf(" "+s+" ")){for(var l=!1,c=i[s].fns,u=0;u<c.length;u++)c[u].fn.apply(e(n),arguments)===!1&&(l=!0);if(l&&t.preventDefault(),l||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(t,i){var n=this;return function(s){var r=[n._name,((s.data||(s.data={})).domElem=e(this)).closest(n.buildSelector()),!0],a=o.apply(null,i?r.concat([t,s]):r);return a&&!i&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,i){return this.liveBindTo(t,e,i,!0)},liveBindTo:function(t,n,o,s){n&&!e.isFunction(n)||(o=n,n=t,t=i),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(x(r._name,e,t.modName,t.modVal),n,o,s)}),r):r._liveClassBind(x(r._name,t.elem,t.modName,t.modVal),n,o,s)},liveUnbindFrom:function(t,n,o){n&&!e.isFunction(n)||(o=n,n=t,t=i);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(x(s._name,t),n,o)}),s):s._liveClassUnbind(x(s._name,t),n,o)},_liveInitOnBlockEvent:function(t,e,i,n){var o=this._name;return v[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[n](o);i&&s.forEach(function(t){i.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOutside")},on:function(t,e,i,n,o){return t.jquery?this._liveCtxBind(t,e,i,n,o):this.__base(t,e,i,n,o)},un:function(t,e,i,n){return t.jquery?this._liveCtxUnbind(t,e,i,n):this.__base(t,e,i)},liveCtxBind:function(t,e,i,n,o){return this._liveCtxBind(t,e,i,n,o)},_liveCtxBind:function(t,n,o,s,r){var a=this;if("object"==typeof n&&(e.isFunction(o)||e.isFunction(s))&&(n=this._buildModEventName(n)),"string"==typeof n)if(e.isFunction(o)&&(r=s,s=o,o=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var l=a._buildCtxEventName(n),c=_[l]||(_[l]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),i=c.ctxs[t];i||(i=c.ctxs[t]={},++c.counter),i[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(n,function(e,i){a._liveCtxBind(t,e,i,o)});return a},liveCtxUnbind:function(t,e,i,n){return this._liveCtxUnbind(t,e,i,n)},_liveCtxUnbind:function(t,i,n,o){"object"==typeof i&&e.isFunction(n)&&(i=this._buildModEventName(i));var s=this,r=_[i=s._buildCtxEventName(i)];return r&&(t.each(function(){var t,i=e.identify(this,!0);i&&(t=r.ctxs[i])&&(n&&delete t[e.identify(n)+(o?e.identify(o):"")],n&&!e.isEmptyObject(t)||(r.counter--,delete r.ctxs[i]))}),r.counter||delete _[i]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t.eq(0).attr("class").match(this._buildElemNameRE());return e?e[1]:i},extractParams:l,_buildModClassPrefix:function(t,e){return this._name+(e?k+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+w+t},_buildModValRE:function(t,e,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"(?:"+w+"("+y+"))?(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+k+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,i){return"."+x(this._name,t,e,i)},getBlockByUniqId:function(t){return f[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(t){BEM.decl("i-visibilitychange",{init:function(){var e=t.document,i=this.changeThis(this.normalize);this.hiddenProp="hidden",this.hiddenProp in e?e.addEventListener("visibilitychange",this.changeThis(function(){this.change(e.hidden)})):(this.hiddenProp="mozHidden")in e?e.addEventListener("mozvisibilitychange",i):(this.hiddenProp="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",i):(this.hiddenProp="msHidden")in e?e.addEventListener("msvisibilitychange",i):"onfocusin"in e?e.onfocusin=e.onfocusout=i:t.onpageshow=t.onpagehide=t.onfocus=t.onblur=i},normalize:function(e){var i,n=t.document,o={focus:!1,focusin:!1,pageshow:!1,blur:!0,focusout:!0,pagehide:!0};e=e||t.event,i=e.type in o?o[e.type]:n[this.hiddenProp],n.hidden=i,$(t).trigger("visibilitychange"),this.change(i)},change:function(t){this.channel("sys").trigger("visibilitychange",{hidden:t}),this.channel("sys").trigger(t?"hidden":"visible")}}),BEM.create("i-visibilitychange").init()}(window),function(t){t.home=t.home||{},home.lang=home.lang||{},home.l10n=function(t){return x.query(t,home.lang)||""}}(this),function(t){var e,i;try{e=t.localStorage,i="ya_ls_test",e.setItem(i,"1"),"1"!==e.getItem(i)?e=null:e.removeItem(i)}catch(n){e=null}var o=t.home||(t.home={}),s=t.console&&function(t){console.log(t)}||function(){},r=function(t){var e="localStorage is disabled. "+(t?t:"");s(e)},a=function(t){try{return t()}catch(e){r(e)}};e?o.localStorage={setItem:function(t,i){return a(function(){return e.setItem(t,i)})},getItem:function(t){return a(function(){return e.getItem(t)})},removeItem:function(t){return a(function(){return e.removeItem(t)})},clear:function(){return a(function(){return e.clear()})},key:function(t){return a(function(){return e.key(t)})}}:(o.localStorage={removeItem:r,setItem:r,getItem:r,clear:r},o.disabledLS=!0)}(window),function(t){"use strict";for(var e,i=["ms","moz","webkit","o"],n={},o=[],s=0;s<i.length&&!t.requestAnimationFrame;++s)t.requestAnimationFrame=t[i[s]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[s]+"CancelAnimationFrame"]||t[i[s]+"CancelRequestAnimationFrame"];if(void 0===t.requestAnimationFrame){var r=+new Date,a=0,l=function(){return Date.now()+Math.round(1e4*Math.random())},c=function(){var t,i=o,s=n;o=[],n={},a=+new Date,e=0;for(var l=0,c=i.length;c>l;l++)t=i[l].requestid,s[t]||i[l].callback(a-r)};t.requestAnimationFrame=function(i){var n=l();if(o.push({requestid:n,callback:i}),!e){var s=+new Date,r=Math.max(0,16-(s-a));e=t.setTimeout(c,r)}return n},t.requestAnimationFrame.fallback=!0}void 0===t.cancelAnimationFrame&&(t.cancelAnimationFrame=function(t){t&&!n[t]&&(n[t]=1)})}(this),home.getTouchEvents=function(t){var e=t.originalEvent;return e.touches&&e.touches.length?e.touches:e.changedTouches},home.getTouchEvent=function(t){var e,i,n,o=home.getTouchEvents(t);return e=o&&o.length?o[0]:t.originalEvent,i=e.pageX||e.clientX,n=e.pageY||e.clientY,{x:i,y:n}},function(t,e,i){function n(t,e){var i={},n=t.originalEvent||{};e||(e={});for(var o,s=0;l>s;s++)o=r[s],i[o]=e[o]||t[o]||n[o]||a[s];return i.x=i.clientX,i.y=i.clientY,i.pressure=i.pressure||(i.buttons?.5:0),i.buttons||c||(i.buttons=u[i.which]||0),i.originalEvent=t.originalEvent||null,e.preventDefault?i.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(i.preventDefault=function(){t.preventDefault()},i._preventScroll=function(){}),i}function o(t,e){var n=i.Event(t),o=e.preventDefault,s=n.preventDefault.bind(n);return jQuery.extend(n,e),n.preventDefault=function(){o(),s()},n}var s={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},r=Object.keys(s),a=r.map(function(t){return s[t]}),l=r.length,c=!1,u=[0,1,4,2];try{c=1===new MouseEvent("test",{buttons:1}).buttons}catch(h){}var d=t.Map&&t.Map.prototype.forEach,p=d?new t.Map:{array:[],size:0,set:function(t,e){return void 0===e?this["delete"](t):(this.has(t)||this.size++,void(this.array[t]=e))},has:function(t){return void 0!==this.array[t]},"delete":function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(i,n){t.call(e,i,n,this)},this)}},f={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var i=e.events;i&&(i.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,i=this.eventSourceList.length,n=0;i>n&&(e=this.eventSourceList[n]);n++)e.register.call(e,t)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;i>n&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},contains:function(t,e){return t.contains?t.contains(e):!1},getCommonAncestor:function(t,i){for(;t&&t!==e.documentElement;){if(t.contains&&t.contains(i))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){i(t).on(e,this.boundHandler)},removeEvent:function(t,e){i(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=o(t,e);return i._target=i._target||e.target,i},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,n){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t),i(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n}))},releaseCapture:function(t){var n=this.captureInfo[t];n&&(this.captureInfo[t]=void 0,i(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n})))},dispatchEvent:function(t){var e=this.getTarget(t);return e?i.event.trigger(t,null,e,!t.bubbles):void 0},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};f.boundHandler=f.eventHandler.bind(f);var m,_,g={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,n=t.clientX,o=t.clientY,s=0,r=i.length;r>s&&(e=i[s]);s++){var a=Math.abs(n-e.x),l=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&l<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return n(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(p.has(this.POINTER_ID)&&this.cancel(t),p.set(this.POINTER_ID,t),f.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||f.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=p.get(this.POINTER_ID);e&&e.button===t.button&&(f.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||f.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||f.leaveOut(this.prepareEvent(t))},cancel:function(t){f.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){p["delete"](this.POINTER_ID)}},v={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===p.size||1===p.size&&p.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,o=this.currentTouchEvent,s=t.identifier+2;return n(o,i.extend({},t,{pointerId:s,target:f.captureInfo[s]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(o.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var i=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var n,o=0;o<i.length;o++)n=i[o],e.call(this,this.touchToPointer(n))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e,i=this.scrollTypes;return t===i.EMITTER?e="none":t===i.XSCROLLER?e="X":t===i.YSCROLLER?e="Y":i.SCROLLER.exec(t)&&(e="XY"),e},shouldScroll:function(t){if(void 0!==this.shouldScrollCache)return this.shouldScrollCache;if(!this.firstXY)return!0;var e,i,n=this.firstTouchTarget;do{if(e=n.getAttribute("touch-action"),null!==e)break;n=n.parentNode}while(n!==document);var o=this.touchActionToScrollType(e);if("none"===o)i=!1;else if("XY"===o||void 0===o)i=!0;else{var s=t.originalEvent.changedTouches[0],r=o,a="Y"===o?"X":"Y",l=Math.abs(s["client"+r]-this.firstXY[r]),c=Math.abs(s["client"+a]-this.firstXY[a]);i=l>=c}return this.shouldScrollCache=i,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(t,e){for(var i,n=0,o=t.length;o>n&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(p.size>=e.length){var i=[];p.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var o=t.out;i.push(o)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){p.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),f.over(t),f.enter(t),f.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=p.get(t.pointerId);if(e){var i=e.out,n=e.outTarget;f.move(t),i&&n!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=n,i.target=n,t.target?(f.leaveOut(i),f.enterOver(t)):(t.target=n,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(f.up(t),f.out(t),f.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){f.cancel(t),f.out(t),f.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){p["delete"](t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=g.lastTouches;if(this.isPrimaryTouch(t)){var i={x:t.clientX,y:t.clientY};e.push(i);var n=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}.bind(null,e,i);setTimeout(n,this.DEDUP_TIMEOUT)}}},b={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},prepareEvent:function(t){var e=n(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){p["delete"](t)},MSPointerDown:function(t){p.set(t.originalEvent.pointerId,t),f.down(this.prepareEvent(t))},MSPointerMove:function(t){f.move(this.prepareEvent(t))},MSPointerUp:function(t){f.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){f.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){f.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){f.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){f.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){f.fireEvent("lostpointercapture",this.prepareEvent(t))}},y=function(t){if(!p.has(t))throw new Error("InvalidPointerId")};t.Element&&Element.prototype.setPointerCapture?(m=function(t,e){t.setPointerCapture(e)},_=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(m=function(t,e){y(e),t.msSetPointerCapture(e)},_=function(t,e){y(e),t.msReleasePointerCapture(e)}):(m=function(t,e){y(e),f.setCapture(e,t)},_=function(t,e){y(e),f.releaseCapture(e,t)}),i.fn.extend({setPointerCapture:function(t){m(this[0],t)},releasePointerCapture:function(t){_(this[0],t)}}),t._pointerPolyfillInited||(t._pointerPolyfillInited=!0,t.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e=jQuery.event.fixHooks,i="pointer"+t;e[i]||(e[i]={}),e[i].props=r.concat(e[i].props||[])}):(delete i.event.special.pointerenter,delete i.event.special.pointerleave,t.navigator.msPointerEnabled?f.registerSource("ms",b):(f.registerSource("mouse",g),void 0!==t.ontouchstart&&f.registerSource("touch",v)),f.register(document)))}(window,document,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,i){function n(i){var n,o=i.type;return"mouse"===i.pointerType&&1!==i.which||(i.type=e,n=t.event.dispatch.apply(this,arguments),i.type=o),n}t.event.special[e]={setup:function(){t(this).on(i,n)},teardown:function(){t(this).off(i,n)}}})}(jQuery),$.extend({util:{}}),function(){function t(t){return"[object Object]"===n.call(t)}function e(i,n,o){var s,r;i=Object(i),n=Object(n);for(s in n)r=o&&o(i[s],n[s],s),void 0!==r?i[s]=r:t(i[s])&&t(n[s])?i[s]=e(i[s],n[s],o):i[s]=n[s];return i}function i(t,i){return e(t,i,function(t,e,i){return"mix"===i?[].concat(t,e):void 0})}var n=Object.prototype.toString;$.extend($.util,{merge:e,mergeBemjson:i})}(),jQuery.cookie=function(t,e,i){if("undefined"==typeof e){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){n=decodeURIComponent(r.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+24*i.expires*60*60*1e3)):l=i.expires,a="; expires="+l.toUTCString()}var c=i.path?"; path="+i.path:"",u=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,c,u,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return n[t]||t})}function i(t,i){var n="";try{n=t(i)}catch(o){try{n=t(e(i))}catch(s){n=i}}return n}var n={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return i(decodeURI,t)},decodeURIComponent:function(t){return i(decodeURIComponent,t)}})}(jQuery),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://wayback.archive-it.org/all/20180620162258/https://passport.yandex.ru","pass-host":"https://wayback.archive-it.org/all/20180620162258/https://pass.yandex.ru","social-host":"https://wayback.archive-it.org/all/20180620162258/https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){return"undefined"==typeof e?(this._params||{})[t]:void(this._params&&(this._params[t]=e))}}),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(-1===i)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(-1===n?e.substring(i):e.substring(i,n))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(i){return(i=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://wayback.archive-it.org/all/20180620162258/https://passport.yandex.ru","pass-host":"https://wayback.archive-it.org/all/20180620162258/https://pass.yandex.ru","passport-msg":i.id,"social-host":"https://wayback.archive-it.org/all/20180620162258/https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},i,e.params))["show-counters"]=Math.round(100*Math.random())<=i["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},i),i}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(i,n){i=i||document,n=n||".g-js",t(i).find(n).each(function(){var i=t(this),n=i.data("bem")||(this.onclick?this.onclick():{}),o=n.name||"",s=e.block[o];s&&!i.data(o)&&(s.call(i,n),i.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=Boolean(t(document).ready(function(){e.blockInit()})))}(jQuery,window.Lego),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return Boolean(t.getCookie("yandex_login"))}}(window.Lego),function(t,e){var i={};/msie|trident/i.test(e)?i.ie=parseInt(e.split(/msie|rv:/i)[1],10):-1!==e.indexOf("Opera")&&(i.opera=parseInt(e.split(/Version\//i)[1],10));var n,o={},s={};(n=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?o.wp=n[1]:(n=e.match(/Android\s+([\d.]+)/))?o.android=n[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?o.android="2.3":(n=e.match(/iPhone\sOS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.iphone=!0):(n=e.match(/iPad.*OS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.ipad=!0):(n=e.match(/Bada\/([\d.]+)/))?o.bada=n[1]:(n=e.match(/MSIE\s9/))?o.wp="7.5":o.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(i){return t[i]&&(e=i)}),this.setMod("platform",e)}}},setVersion:function(){var t=this.parseVersion();t&&(this.setMod(t.platform,t.major),this.setMod(t.platform+"-subversion",t.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var t=this.__self.ios||this.__self.android,e=t.split("."),i=e.shift(),n=e.join("-"),o=this.getMod("platform");return{platform:o,major:i,subversion:n}}}},{ios:o.ios,iphone:s.iphone,ipad:s.ipad,android:o.android,bada:o.bada,wp:o.wp,other:o.other,ua:e,ie:i.ie,opera:i.opera})}(window,navigator.userAgent),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){return this.hasMod("disabled")?!1:void(this._focused||(this._focus(),this.trigger("focus")))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(t,e){var i=this._getControl();i.prop("disabled",Boolean(e)).attr("aria-disabled",Boolean(e)),i.attr("tabindex",e?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex).attr("href",this._url||this.params._url)},yes:function(){this.__base.apply(this,arguments),this._url=this.domElem.attr("href")||this.params._url,void 0!==this._url&&this.domElem.attr("tabindex",-1),this.domElem.removeAttr("href"),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),function(t,e){function i(t){t.isPrimary&&(m.push(t),setTimeout(Array.prototype.shift.bind(m),p))}function n(t,e){return Math.abs(t.clientX-e.clientX)>h||Math.abs(t.clientY-e.clientY)>h}function o(t){var e=t.clientX,i=t.clientY,n="_compat"+t.type;if(!t._sourcePoint){for(var o=0;o<m.length;o++){var s=m[o],r=s.target===t.target;if(!s[n]&&(r||!(Math.abs(e-s.clientX)>d||Math.abs(i-s.clientY)>d))&&(r||document.elementFromPoint(s.clientX,s.clientY)!==s.target)){
t._sourcePoint=s,s[n]=t;break}}_.push(t),setTimeout(Array.prototype.shift.bind(_),p)}}function s(t){for(var e=0;e<_.length;e++)if(_[e]===t)return _[e]._sourcePoint}function r(t){var e=s(t);return Boolean(e)&&e.target!==t.target}function a(t){var i,n=t.type;return t.button||(t.type="pointerclick",i=e.event.dispatch.apply(this,arguments),t.type=n),i}if(!e.event.special.pointerclick){var l,c=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,u="touchAction"in document.documentElement.style,h=10,d=25,p=900,f=250,m=[],_=[],g=null,v=null,b=u?function(t){function e(t){return t&&t!==document.documentElement?"manipulation"===getComputedStyle(t)["touch-action"]||e(t.parentElement):!1}return e(t)}:function(){return!1};c?(l={click:function(t){var e=Object(t.originalEvent)._sourcePoint;return e?void(e.isDefaultPrevented()&&t.preventDefault()):a.apply(this,arguments)},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==e&&"pointerup"!==e||!b(t.target)))if("pointerdown"===e)v=t;else if("pointermove"===e&&v&&(v.target!==t.target||n(v,t)))v=null;else if("pointerleave"===e||"pointercancel"===e)v=null;else if("pointerup"===e){if(i(t),!v)return;if(!(t.timeStamp-v.timeStamp>f))return g||(g=setTimeout(function(){g=v=null})),a.apply(this,arguments);v=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){o(t),r(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):l={click:function(t){return a.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(l)},teardown:function(){e(this).off(l)}}}}(window,jQuery),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(t))},_onKeydown:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}),this.__base()}}),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),function(){function t(){i.hasClass("pointerfocus")&&(o=!0,setTimeout(function(){o=!1}))}var e=$(window),i=$(document.documentElement),n=0,o=!1;document.documentMode<=11?i.on("focusin",function(e){var i=e.originalEvent;!i||i.fromElement||i.relatedTarget||t()}):e.on("blur",function(){e.one("focus",t)}),i.addClass("utilityfocus").on({focusin:function(){i.toggleClass("pointerfocus",o).toggleClass("utilityfocus",!o)},keydown:function(){clearTimeout(n),o=!1},"pointerdown pointerup click":function(t){o=!0,clearTimeout(n),n=setTimeout(function(){o=!1},600)}})}(),window.home=window.home||{},function(t){t.getData=function(e,i){var n,o,s,r,a="export",l=e.split("."),c=l.length;if(c>1){for(o=t[a]||{},s=0;c>s;s++)if(n=l[s],o=o[n],"undefined"==typeof o)return"undefined"==typeof o?i:o;return"undefined"==typeof o?i:o}return a="export",r=t&&t[a]&&t[a][e],"undefined"==typeof r?i:r},t.dataCallbacks=t.dataCallbacks||[],t.subscribeData=function(e){t["export"]?e():t.dataCallbacks.push(e)}}(home),function(){var t,e={isAuthenticated:!1,isFeedbackReceived:!1,isRequestSent:!1},i=function(){};BEM.decl("i-mda-auth",{},{authenticate:function(n){if(t=Lego.params["mda-auth-url"]||home.getData("i-mda-auth.url")||"",""===t)return!1;var o=Lego.params["mda-auth-delay"]||10;i=n||function(){},setTimeout(function(){var i=document.createElement("iframe");i.style.visibility="hidden",i.style.position="absolute",i.setAttribute("src",t),i.name="i-mda-auth"+(Math.random()+"").substr(3,7),i.style.top=i.style.left=i.style.width=i.style.height=0,document.getElementsByTagName("body")[0].appendChild(i),e.isRequestSent=!0},o)},isRequestSent:function(){return e.isRequestSent},isFeedbackReceived:function(){return e.isFeedbackReceived},isAuthenticated:function(){return e.isAuthenticated},getUrl:function(){return t},registerFeedback:function(t){var n="success"===t;e.isFeedbackReceived=!0,e.isAuthenticated=n,i(n)}})}(),function(){"use strict";var t,e=!1,i=[];home.pseudoReady=function(n){e?setTimeout(n,0):(i.push(n),t||(t=setTimeout(function o(){if(document.body&&home["export"]){e=!0;for(var t=0;t<i.length;++t)setTimeout(i[t],0)}else setTimeout(o,100)},100)))}}(),function(){function t(t,e,i){n||(n=a('<iframe style="display:none" src="'+t+'" name="ga"></iframe>'));var r=function(){n.contentWindow.postMessage&&n.contentWindow.postMessage({type:"params",params:e,labels:i},"*")};s?r():n.onload=function(){s=!0,r()},o||(document.body.appendChild(n),o=!0)}function e(t){l||(l=a('<iframe style="display:none" src="'+t+'" name="ga-ex"></iframe>')),c||(document.body.appendChild(l),c=!0)}function i(){return window.home&&home.getData&&home.getData("ga-counter.data")}var n=null,o=!1,s=!1,r=document.createElement("div"),a=function(t){return r.innerHTML=t,r.firstChild},l=null,c=!1;window.home=window.home||{},window.home.gaCounter={track:function(e){var n=i();n&&n.customLabels&&n.customLabels[e]&&t(n.iframeSrc,null,n.customLabels[e])},trackCancel:function(){this.track("cancel")},trackCancelPopup:function(){this.track("cancelPopup")}},home.pseudoReady(function(){function n(){return d.swb}function o(){if(n())return!0;var t;try{t=localStorage.getItem("gaCounterShowTime")}catch(e){}return!t||Number(t)<d.ignoreLSBefore||+new Date-Number(t)>d.showTimeout}function s(){try{localStorage.setItem("gaCounterShowTime",+new Date)}catch(t){}}function r(){var t=window.performance&&performance.timing&&performance.timing.responseEnd&&performance.timing.responseStart?performance.timing.responseEnd-performance.timing.responseStart:null;if(d.statDownloadTime&&t){if(t>Number(d.statDownloadTime[1]))return"slow=2";if(t>Number(d.statDownloadTime[0]))return"slow=1"}return""}function a(){return d.csc?"csc="+d.csc:""}function l(){return d.refg?"refg=1":""}function c(){return d.swb?"swb=1":""}function u(){for(var t=[],e=0,i=arguments.length;i>e;e++)arguments[e]&&t.push(arguments[e]);return t.length?"?"+t.join("&"):""}function h(){d.iframeSrcEx?e(d.iframeSrcEx+u(r(),a(),l(),c())):d.iframeSrc&&t(d.iframeSrc,d.params,d.labels)}var d=i();d&&o()&&setTimeout(function(){h(),s()},d.timeout)})}(),BEM.DOM.decl("b-sethome",{hide:function(){this.setMod("state","hidden")}},{live:!0}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"chrome"},{_action:function(){var t=this,e=this.params;return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:"chrome"}},$.extend(e,{callbacks:{yes:function(){t.hide()}}}))),home.stat.logPath("click",e.counters.link),this._inlineInstall.request().fail(function(){t.hide()}),!1}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("link","pointerclick",function(){return this._action()})}}),BEM.KEYS={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,HOME:36,END:35},function(){var t={};for(var e in BEM.KEYS)BEM.KEYS.hasOwnProperty(e)&&(t[BEM.KEYS[e]]=e);var i={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"},n=function(e){var n=t[e.which]||"";for(var o in i)i.hasOwnProperty(o)&&e[i[o]]&&(n=o+"+"+n);return n},o=function(t){var e={};return t.split(" ").forEach(function(t){var n=t.split("+");n.forEach(function(e){var n=e.toUpperCase();if(!(n in i||n in BEM.KEYS))throw"i-keys.js: Unknown key "+t}),e[t.toUpperCase()]=!0}),e};BEM.DOM.liveBindKey=function(t,e,i){var s;return $.isFunction(e)&&(i=e,e=t,t=void 0),s=o(e),this.liveBindTo(t,"keydown",function(t){var e=n(t);e in s&&i.call(this,t)===!1&&t.preventDefault()})},BEM.DOM.prototype.bindKeyTo=function(t,e,i){function s(t){var e=n(t);e in r&&i.call(this,t)===!1&&t.preventDefault()}var r;return $.isFunction(e)&&(i=e,e=t,t=void 0),r=o(e),t===document?this.bindToDoc("keydown",s):t===window?this.bindToWin("keydown",s):this.bindTo(t,"keydown",s)}}(),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,i=t.findBlockOn(t.elem(e.popupElem),"popup");t._popup=i,i.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.forEach(function(e){t[e]=i[e].bind(i)}),t.elem("switcher").attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var i="open"===e;this.elem("switcher").attr("aria-expanded",i),this._getButton()&&this._getButton().toggleMod("arrow","up","down",i)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){var t=["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this);t&&!this._popup.isShown()||this._popup.toggle(this.elem("switcher"))},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),i=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===i.ENTER||t.keyCode===i.SPACE)&&(t.preventDefault(),this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.decl("dropdown",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._switcher=this._switcher||this.elem("switcher")}},_onSwitcherClick:function(t){this._toggle(),t.preventDefault()}}),BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,i=this._repackDirParams(t.directions),n=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(n);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],n=i.directions[t];return n||(n=i.directions[e.to]),this._directions[t]=this._mergeParams(n,e,{tail:this._tailParamsHook}),t},this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){if(this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e,e.length){var i="_"+this.__self.getName()+"-destructor";this._destructor=e.addClass("i-bem "+i).bem(i)}var n=this._findParent(e);n&&this.setParent(n)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide&&t.hide(),t.delMod("visible")}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var i=this;return this.beforeHide(function(){i.domElem&&i.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setScope:function(t){return this._scope=t,this._inContainer=!1,this},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild&&t.addChild(this),this},addChild:function(t){for(var e=this._childs,i=e.length,n=0;i>n;n++)if(e[n]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),t.on("beforeClose",function(){this.afterCurrentEvent(function(){this.removeChild(t)})},this),e.push(t)},_getParentPopup:function(){return this._parent},removeChild:function(t){for(var e=this._childs,i=e.length,n=0;i>n;n++)if(e[n]._uniqId===t._uniqId)return void e.splice(n,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this.domElem&&this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,i){var n={},o=Object.prototype.hasOwnProperty;return i||(i={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(s){var r=o.call(i,s)?i[s].call(this,t[s],e[s]):e[s];!r||"object"!=typeof r||Array.isArray(r)?n[s]=r:t[s]?n[s]=this._mergeParams(t[s],r,i):n[s]=r},this),n},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],i=e,n=t.length,o=[],s=0;n>s;s++)for(var r=t[s],a=r.length,l=0;a>l;l++)for(var c=e[s],u=c.length,h=0;u>h;h++)for(var d=i[s],p=d.length,f=0;p>f;f++)o.push({direction:r[l],axis:c[h],tail:{axis:d[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e={},i=[];return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),i=t.map(function(t){if("string"==typeof t){var i=t.split("-");t={to:i[0],tail:{}},i[1]&&(t.axis=i[1]),i[2]&&(t.tail.axis=i[2])}var n=t.to;return e[n]||(e[n]=t),t.axis&&(n+="-"+t.axis),t.key=n,e[n]=t,n},this),{directions:e,keys:i}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,i=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;i>t;t++){var n=e[t],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),i=this.getOwnerSize(),n=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-n.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+i.width}}return r},_calcTop:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=n.top:"middle"===t?e+=n.top+o.height/2-i.height/2:"bottom"===t&&(e+=n.top+o.height-i.height),e},_calcLeft:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=n.left:"center"===t?e+=n.left+o.width/2-i.width/2:"right"===t&&(e+=n.left+o.width-i.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,i=this._cache.offset||(this._cache.offset={}),n=t.key,o=t.offset;if(i[n])return i[n];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(n){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return i[n]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,i){i!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),i):(i=e,Object.keys(t).forEach(function(e){this._sum(t[e],i)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(i){t[i]=(t[i]||0)+e[i]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,i,n=this._viewport,o=this._getSizeOf(n),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},l=this.hasMod("position","fixed")?{top:0,left:0}:{top:n.scrollTop(),left:n.scrollLeft()},c=r.top+a.top-l.top,u=r.left+a.left-l.left,h=u+s.width-o.width,d=c+s.height-o.height,p={height:s.height,width:s.width},f=100;return d>0&&(p.height-=d),0>c&&(p.height+=c),0>u&&(p.width+=u),h>0&&(p.width-=h),p.height<0||p.width<0?f=0:(i=Math.abs(p.height*p.width),e=s.height*s.width,e!==i&&(f=i/e*100)),f},_findParent:function(t){var e=t.closest(".popup, .popup2");return this.findBlockOn(e,"popup")||this.findBlockOn(e,"popup2")},destruct:function(){return this._childs.forEach(function(t){t.domElem&&BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t):t},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var i="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(i=""),t.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),i=!0;return parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility")?!1:($(this).parentsUntil(e).each(function(){var t=$(this);return"none"===t.css("display")?i=!1:void 0}),i)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{_getPosOf:function(t){var e,i=t.offset();return i?(this._getPosOfTmpElem||(this._getPosOfTmpElem=$('<div class="popup__getposoffix" style="position:absolute;left:0;top:0">').appendTo("body")),e=this._getPosOfTmpElem.offset(),i.left-=e.left,i.top-=e.top,i):{left:0,top:0}}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t,t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem).css("z-index",this._zIndex):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;t.removeAttr("style"),this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindTo("pointerdown pointerclick",function(){var t=this;do t._preventHideByClick=!0,t=t._getParentPopup();while(t)}),this.bindToDoc("pointerclick",function(t){if(this._preventHideByClick)return void(this._preventHideByClick=null);if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var i,n=this._childs.length;for(i=0;n>i;i++)if(this.containsDomElem.call({domElem:this._childs[i].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,i=this.getCurrPos(),n={opacity:1,top:i.top,left:i.left},o={opacity:0,top:i.top,left:i.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=e.to,n=this.getCurrPos(),o=this.domElem,s={top:n.top,left:n.left,opacity:0};return"bottom"===i?s.top+=10:"top"===i?s.top-=10:"left"===i?s.left-=10:"right"===i&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,function(){t(),o.css("opacity","")})}}),function(t){t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,i=this._positions[t.key],n=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(n,i):"left"!==e&&"right"!==e||(o.top=this._calcTailTop(n,i)),o},_calcTailTop:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,l=o.top-e.top,c=e.top+r.height-(o.top+n.height);return l>0&&(i+=l,a-=l),c>0&&(a-=c),"middle"===t?(a-=s,i+=a/2):"bottom"===t&&(a-=s,i+=a),0>i&&(i=0),i},_calcTailLeft:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,l=r.width,c=e.left+r.width-(o.left+n.width);return a>0&&(i+=a,l-=a),c>0&&(l-=c),"center"===t?(l-=s,i+=l/2):"right"===t&&(l-=s,i+=l),i},_calcOffsetByTail:function(t){var e=this.params.tail,i=e.height,n={};switch(t.to){case"top":n={top:-i};break;case"bottom":n={top:i};break;case"right":n={left:i};break;case"left":n={left:-i}}return n},_calcTailOffset:function(t){var e={},i=t.to,n=t.tail,o=n.offset,s=n.axis;return o?("top"===i||"bottom"===i?(e.left=0,"left"===s?e.left+=o.left:"center"===s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===s&&(e.left-=o.right)):"left"!==i&&"right"!==i||(e.top=0,"top"===s?e.top+=o.top:"middle"===s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===s&&(e.top-=o.bottom)),e):!1},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),$(function(){"use strict";var t=home.getData("i-bannerid.csl");BEM.decl("i-bannerid",{},{save:function(e){if(!t)throw new Error("i-bannerid: Cookie set link wasn't passed");if(!e)throw new Error("i-bannerid: Bannerid wasn't passed");var i=$(".i-bannerid"),n=x.stringf(t,e);i.length||(i=$('<iframe class="i-bannerid" name="i-bannerid" style="display:none"/>'),$(document.body).append(i)),i.attr("src")!==n&&i.attr("src",n)}})}),BEM.decl("i-inline-install",{init:function(){if(!this.params||!this.params.url)throw new Error("Inline installation requires url of extension");this.message=null,this.agreement=null,this.inited=null,this.visitParams=this.__self._constructVisitParams(this.params.metrikaParams),this.counters=this.__self._getCounters(this.params.statPath),this.requestDeferred=null,this.reqStart=null;var t=this.params.metrikaParams||{};return t.goals&&t.id&&(this.metrika=this.__self._getPortalMetrika(t.id)),this.curtain=BEM.blocks["promo-curtain"].get(this.params.curtainOpts,this),
this.__self._appendInlineUrlToHead(this.params.url),this.inited=!0,this},request:function(){if(this.inited||this.init(),this.requestDeferred&&"pending"===this.requestDeferred.state())return this.requestDeferred.promise();if(this.requestDeferred=$.Deferred(),this.reqStart=Date.now(),!this._checkApi())return home.stat.logPath("tech",this.counters.bad_ua),this.requestDeferred.reject().promise();try{this.trigger("request"),this._requestApi(this.params.url,this._onSuccess.bind(this),this._onFailure.bind(this)),["yes","no","bad_ua","bad_ext_url","fast_reject","install_error","error"].forEach(function(t){home.stat.logPath("show",this.counters[t])},this)}catch(t){this.requestDeferred.reject(),this.trigger("error"),"string"==typeof t&&0===t.indexOf("Invalid")?home.stat.logPath("tech",this.counters.bad_ext_url):(home.stat.logPath("tech",this.counters.error),this.__self._blockError([t&&t.message?"message:"+t.message:"",this.params.statPath?"stat:"+this.params.statPath:""].filter(Boolean).join(", ")))}return this.requestDeferred.promise()},_onSuccess:function(){this.requestDeferred.resolve(),home.stat.logPath("click",this.counters.yes),this._reachGoal("yes"),this._fireExternalCallback("yes"),this.trigger("success"),this.__self._saveToYsCookie(this.params.bannerid)},_onFailure:function(t,e){return this.trigger("cancel"),e&&"userCancelled"!==e?(this.requestDeferred.reject(),void home.stat.logPath("tech",this.counters.install_error)):(this.requestDeferred.resolve(),home.stat.logPath("click",this.counters.no),this._reachGoal("no"),this._fireExternalCallback("no"),Date.now()-this.reqStart<1e3&&home.stat.logPath("tech",this.counters.fast_reject),void window.home.gaCounter.trackCancel())},_fireExternalCallback:function(t){var e=this.params.callbacks||{};e[t]&&e[t]()},_checkApi:function(){},_requestApi:function(){return!1},_reachGoal:function(t){var e=this,i=this.params.metrikaParams;i&&i.goals&&i.goals[t]&&this.metrika.done(function(n){n.reachGoal(i.goals[t],e.visitParams)})}},{_constructVisitParams:function(t){if(t&&t.channel&&t.bannerid){var e={channel:{}};return e.channel[t.channel]={banner_id:t.bannerid},e}},_getPortalMetrika:function(t){var e=$.Deferred();try{window["yaCounter"+t]?e.resolve(window["yaCounter"+t]):(window["yaCounter"+t]=new window.Ya.Metrika({id:t,triggerEvent:!0}),$(document).one("yacounter"+t+"inited",function(){e.resolve(window["yaCounter"+t])}))}catch(i){e.reject()}return e.promise()},_saveToYsCookie:function(t){t&&BEM.blocks["i-bannerid"].save(t)},_getCounters:function(t){return t?{yes:t+".yes",no:t+".no",error:t+".error",fast_reject:t+".fast_reject",bad_ua:t+".bad_ua",bad_ext_url:t+".bad_ext_url",install_error:t+".install_error"}:{}},_appendInlineUrlToHead:function(t){return $(document.head).append($("<link />",{rel:"chrome-webstore-item",href:t}))},_blockError:function(t){home.getData("i-inline-install.logDisabled")||home.error.logError({block:"i-inline-install",message:t})}}),BEM.DOM.decl("promo-curtain",{onSetMod:{js:function(){this.params.langs=this.params.langs||home.getData("promo-curtain.langs"),this.params.offset={top:this.params.offset&&this.params.offset.top||this._getMessageOffsetTop(this.params.gap),left:this.__self.MESSAGE_OFFSET_LEFT},$(home.view("promo-curtain__message",this.params)).appendTo(this.domElem),this.params.owner&&this.params.owner.on({request:this.show,"success cancel error":this.hide},this)}},show:function(){this.afterCurrentEvent(function(){this.setMod("active","yes")}),BEM.DOM.scope.addClass("b-page_overflow_hidden")},hide:function(){this.delMod("active"),BEM.DOM.scope.removeClass("b-page_overflow_hidden")},_getMessageOffsetTop:function(t){var e=this.__self.MESSAGE_OFFSET_TOP,i=this.__self["tr"===navigator.language?"GAP_TOP_OFFSET_COMTR":"GAP_TOP_OFFSET"][t];return i&&(e+=i),e}},{get:function(t,e){if(t&&t.theme){var i={};return e&&(i.owner=e),$(home.view("promo-curtain__layout",{mods:{theme:t.theme}})).appendTo("body").bem("promo-curtain",$.extend(t,i))}},GAP_TOP_OFFSET:{s:20,m:40,l:60},GAP_TOP_OFFSET_COMTR:{s:20,m:70,l:110},SHOW_MESSAGE_TIMEOUT:500,MESSAGE_OFFSET_TOP:335,MESSAGE_OFFSET_LEFT:175}),home.htmlFilter=function(t){var e=String(t);return e.indexOf("&")>-1&&(e=e.replace(/&/g,"&amp;")),e.indexOf("<")>-1&&(e=e.replace(/</g,"&lt;")),e.indexOf(">")>-1&&(e=e.replace(/>/g,"&gt;")),e.indexOf('"')>-1&&(e=e.replace(/"/g,"&quot;")),e},home.getBEMParams=function(t){return home.htmlFilter(JSON.stringify(t))},home.getBEMClassname=function(t,e){var i,n=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),n)for(i in n)n.hasOwnProperty(i)&&(n[i]||0===n[i])&&(o+=" "+t+"_"+i+"_"+n[i]);return o},home.emptyAttr={},home.getAttributes=function(t){if(!t)return"";var e,i="";for(e in t)if(t.hasOwnProperty(e)){var n=t[e];(n||0===n)&&(n===home.emptyAttr?i+=" "+e:(n=n.toString(),n.indexOf('"')>-1&&(n=n.replace(/"/g,"&quot;")),i+=" "+e+'="'+n+'"'))}return i},function(){"use strict";var t=/^(?:(.*?):)?\/\/([^\/?#\s]+)(\/?.*)$/,e=/^(\/?[^?#\s]*)(?:\?([^#]+))?(?:#(.*))?$/;home.parseUrl=function(i){var n,o=i.match(t);if(o?n=o[3].match(e):(o=[],n=i.match(e)),!o&&!n)throw new TypeError('Invalid url "'+i+'"');var s={scheme:o[1]||"",host:o[2]||"",path:n&&n[1]||"",search:n&&n[2]||"",hash:n&&n[3]||"",query:{}};return s.search.split("&").forEach(function(t){if(t){var e=t.match(/([^=]*)=(.*)/);e?s.query[decodeURIComponent(e[1])]=decodeURIComponent(e[2]):s.query[decodeURIComponent(t)]=""}}),s},home.makeUrl=function(t){var e="";if(!t.scheme||!t.host&&t.path||(e+=t.scheme+"://"),t.host&&(t.scheme||(e+="//"),e+=t.host),e&&(t.path&&0!==t.path.indexOf("/")||!t.path)&&"/"!==e.charAt(e.length-1)&&(e+="/"),e+=t.path||"",t.query){var i=t.query,n=[];for(var o in i)i.hasOwnProperty(o)&&void 0!==i[o]&&n.push(encodeURIComponent(o)+(""!==t.query[o]?"="+encodeURIComponent(i[o]):""));n.length&&(e+="?"+n.join("&"))}return t.hash&&(e+="#"+t.hash),e},home.addMsidToUrl=function(t,e){try{if(!e||!e.Requestid)return t;if(!home.exp.check("url_msid",e)&&!home.exp.checkEtalon("url_msid",e))return t;var i=home.parseUrl(t);return i.query.msid=e.Requestid,home.makeUrl(i)}catch(n){return home.debug("unable to add msid to url,"+t+", "+(e&&e.Requestid?e.Requestid:"empty")),t}}}(),function(){"use strict";home.ltgtFilter=function(t){return String(t).replace(/</g,"&lt;").replace(/>/g,"&gt;")},home.urlFilter=function(t){return t.replace(/./g,function(t){return t.match(/[&@\/;:=+?$]/)?t:encodeURIComponent(t)})},home.capitalize=function(t){return t?t[0].toUpperCase()+t.substr(1):""},home.isXivaSupported=function(t){return!t.EditMode&&t.XivaUrl&&!t.isOldIE&&!t.isMSIE9},home.encodeParams=function(t){return JSON.stringify(t).replace(/"/g,"'")},home.getJPathValue=function(t,e){for(var i=t,n=e.split("."),o=0;i&&void 0!==i[n[o]];)i=i[n[o++]];return i instanceof Object?"":i},home.formatNumber=function(t,e,i){if(isNaN(t))return t;t+="",e=e||",",i=i||"&nbsp;";var n=t.lastIndexOf("."),o=[],s="",r=0,a="";for(-1!==n?s=e+t.substr(n+1):n=t.length;--n>-1;)a=t[n]+a,r++,3===r&&(o.push(a),a="",r=0);return a&&o.push(a),o.reverse().join(i)+s},home.deepExtend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(e[i]instanceof Array||"object"!=typeof e[i]?t[i]=e[i]:(t[i]=t[i]||{},home.deepExtend(t[i],e[i])));return t},home.rnd=function(){return String(Math.random()).substr(2)},home.randomInteger=function(t,e){var i=t+Math.random()*(e+1-t);return Math.floor(i)},home.getJPathValue=function(t,e){for(var i=t,n=e.split("."),o=0;i&&void 0!==i[n[o]];)i=i[n[o++]];return i instanceof Object?"":i}}(),function(){var t={},e={log:function(e){t[e.message]||(t[e.message]=!0,setTimeout(function(){delete t[e.message];var i=this._prepareLogMessage(e);this._sendErrorMessage(i,e)}.bind(this),0))},logError:function(t,e){e=this._createError(t,e),this.log(e)},logAjaxError:function(t,e,i,n){var o;n=this._createError(t,n),t.url&&(o=home.parseUrl(t.url),n.url=o.host+o.path),n.sourceType="network","timeout"===i?n.timeout=1:e.status&&(n.status=e.status),this.log(n)},_prepareLogMessage:function(t){var e=t.message;if(e+=t.sourceType?",source_type:"+t.sourceType:"",e+=t.source?",source:"+t.source:"","network"===t.sourceType&&(e+=(t.timeout?",timeout:"+t.timeout:"")+(t.status?",status:"+t.status:"")+(t.url?",url:"+t.url:"")),t.meta){var i;try{i=JSON.stringify(t.meta),e+=",meta:"+i}catch(n){}}return e},_createError:function(t,e){var i;return t=t||{},e=e||{},e instanceof Error?i=e:(i=new Error,i.name="blockerror",i.justCreated=!0,i.meta=e.meta),i.message=[t.message,e.message].filter(function(t){return t}).join("->"),t.sourceType&&(i.sourceType=t.sourceType),t.block&&(i.block=t.block.replace(/-/g,"_")),t.source&&(i.source=t.source),t.meta&&(i.meta=t.meta),t.timeout&&(i.timeout=t.timeout),i.forceStack=t.forceStack,i},_sendErrorMessage:function(t,e){var i,n="";("blockerror"!==e.name||e.forceStack)&&e.stack&&(i=e.justCreated?2:0,n="&trace="+encodeURIComponent(e.stack.split("\n").slice(1+i,4+i).join("->").replace(/\s+/g," "))),this._awaitData().then(function(){var i=home.getData("request.Requestid"),o=home.getData("request.devInstance");this._shouldReport()&&((new Image).src=("/instant/log?type=blockerror&showid=%reqid%&subtype=%block%&message=%message%"+n).replace("%reqid%",i).replace("%message%",encodeURIComponent(t)).replace("%block%",e.block||"unknown").replace(/\s+/g," ")),o&&console.error(e)}.bind(this))},_awaitData:function(){return this._awaitDataPromise||(this._awaitDataPromise=new Promise(function(t){home.subscribeData(t)})),this._awaitDataPromise},_shouldReport:function(){var t=+new Date;return!this._ts||t-this._ts>1e4?(this._ts=t,this._counter=1,!0):this._counter++<10?!0:void 0}};home.error=function(t){e.logError.bind(e)({message:t})},home.deepExtend(home.error,e)}(),BEM.decl({block:"i-inline-install",modName:"api",modVal:"chrome"},{_checkApi:function(){return!!window.chrome&&window.chrome.webstore&&window.chrome.webstore.install},_requestApi:function(t,e,i){window.chrome.webstore.install(t,e,i)}}),window.Ya&&Ya.Rum&&(!function(){"use strict";var t=Ya.Rum;if(!t)throw new Error("Rum: interface is not included");!function(){function e(){removeEventListener("DOMContentLoaded",e),removeEventListener("load",e),U&&setTimeout(function(){t.sendTimeMark=o,t.sendResTiming=l,t.timeEnd=r;for(var e=t._defRes;e.length;){var s=e.shift();l(s[0],s[1])}for(var d=t._defTimes;d.length;){var p=d.shift();o(p[0],p[1],!1,p[2])}Object.keys(z).forEach(a),i(),n(),u(),h(),H&&("complete"===document.readyState?c():addEventListener("load",c))},0)}function i(){var e=L.domContentLoadedEventStart,n=L.domContentLoadedEventEnd;if(0===e&&0===n)return void setTimeout(i,50);var o=d(),s=G.concat(["2129="+U,"1036="+(L.domainLookupStart-U),"1037="+(L.domainLookupEnd-L.domainLookupStart),"1038="+(L.connectEnd-L.connectStart),L.secureConnectionStart&&"1383="+(L.connectEnd-L.secureConnectionStart),"1039="+(L.responseStart-L.connectEnd),"1040="+(L.responseEnd-L.responseStart),"1040.906="+(L.responseEnd-L.domainLookupStart),"1310.2084="+(L.domLoading-L.responseStart),"1310.2085="+(L.domInteractive-L.responseStart),"1310.1309="+(n-e),"1310.1007="+(e-L.responseStart),"2299="+history.length]);t.mark("1039 ttfb",L.responseStart-L.connectEnd),t.mark("1310.1007 dom.loaded",L.domContentLoadedEventStart-L.responseStart),o&&(s.push("2130="+(o-U),"1041="+(o-L.responseStart),"1041.906="+(o-L.domainLookupStart)),t.mark("1041.906 ttfp",o-L.domainLookupStart)),Object.keys(B).forEach(function(t){t in L&&L[t]&&s.push(B[t]+"="+v(L[t],U))}),t.vsStart&&(s.push("1484="+(D[t.vsStart]||2771)),t.vsChanged&&s.push("1484.719=1")),F&&(F.redirectCount&&s.push("1384.1385="+F.redirectCount),1!==F.type&&2!==F.type||s.push("770.76="+F.type)),p(s),b(w,s,["dtype=stred","pid=1","cid=72202"])}function n(){if(H&&!t.isVisibilityChanged())for(var e=j.getEntriesByType("paint"),i=0;i<e.length;i++){var n=e[i],s=A[n.name];s&&o("1926."+s,n.startTime)}}function o(e,i,n,o){void 0===i&&(i=R()),void 0!==n&&n!==!0||t.mark(e,i);var r=_(e);r.push("207="+v(i)),s(r,o)&&(b(k,r),$[e]=$[e]||[],$[e].push(i))}function s(t,e){if(e){if(e.isCanceled&&e.isCanceled())return!1;Object.keys(e).forEach(function(i){"function"!=typeof e[i]&&t.push(i+"="+e[i])})}return!0}function r(t){var e=z[t];e&&0!==e.length&&(e.push(R()),a(t))}function a(e,i,n){var o,r,a=z[e];if("undefined"!=typeof i){var l=t.getTime();o=l-i,r=l}else a&&(o=a[0],r=a[1]);if(void 0!==o&&void 0!==r){var c=_(e);c.push("207.2154="+v(o),"207.1428="+v(r),"2877="+v(r-o)),s(c,n)&&(b(E,c),delete z[e])}}function l(t,e){f(e,function(e){if(e){var i=_(t);g(i,e[0]),b(x,i)}})}function c(){if(removeEventListener("load",c),H){var t=j.getEntriesByType("resource").reduce(function(t,e){var i,n=e.name.match(/^https?:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return n&&(i=n[1],i in t||(t[i]={count:0,size:0}),t[i].count++,e.transferSize&&(t[i].size+=e.transferSize)),t},{}),e="2748=";Object.keys(t).forEach(function(i){e+=i+"!"+t[i].count+"!"+(t[i].size||"")+";"}),b(T,G.concat(e))}}function u(){var t=document.createElement("script");t.src="https://wayback.archive-it.org/all/20180620162258/https://yastatic.net/nearest.js",t.async=!0,t.crossOrigin="",t.onload=function(){var t=window.YaStaticRegion;t&&b(S,G.concat("1822="+t))},document.head.appendChild(t)}function h(e,i,n){if(t._tti){var s=R(),r=function(t,e,r){var a={2796.2797:m(r,i),689.2322:v(s)};n&&Object.keys(n).forEach(function(t){a[t]=n[t]}),o(t||"2795",e,!0,a)},a=function(){var n,o=i||s,l=R(),c=t._tti.events||[],u=c.length;0!==u&&(n=c[u-1],o=Math.max(o,Math.floor(n.startTime+n.duration))),l-o>=P?r(e,o,c):l-o>=I?r(e,(i||s)+I,c):setTimeout(a,1e3)};a()}}function d(){return t.isVisibilityChanged()?void 0:window.chrome&&"function"==typeof window.chrome.loadTimes?1e3*window.chrome.loadTimes().firstPaintTime:L.msFirstPaint?L.msFirstPaint:void 0}function p(t){N&&t.push("2437="+(O[N.type]||2771),N.downlinkMax&&"2439="+N.downlinkMax,N.effectiveType&&"2870="+N.effectiveType)}function f(t,e){function i(){var t=j.getEntriesByName(n);return t.length?e(t):void(o++<C?(setTimeout(i,s),s+=s):e(null))}if(!H)return e(null);W.href=t;var n=W.href,o=0,s=100;setTimeout(i,0)}function m(t,e){return t=t||[],e=e||0,t.filter(function(t){return t.startTime-e>=-50}).map(function(t){var e=t.name?t.name.split("-").map(function(t){return t[0]}).join(""):"u",i=Math.floor(t.startTime),n=Math.floor(i+t.duration);return e+"-"+i+"-"+n}).join(".")}function _(e){return Y.concat(["1701="+e,t.ajaxStart&&"1201.2154="+v(t.ajaxStart),t.ajaxComplete&&"1201.2052="+v(t.ajaxComplete)])}function g(t,e){Object.keys(B).forEach(function(i){if(i in e){var n=e[i];(n||0===n)&&t.push(B[i]+"="+v(n))}})}function v(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}function b(e,i,n,o){var s=i.filter(Boolean).join(","),r=o?{href:o}:null;t.send(r,e,s,null,null,null,n)}if(!t.enabled){var y=function(){};return t.getSetting=function(){return""},t.getVarsList=function(){return[]},t.getResourceTimings=y,t.pushConnectionTypeTo=y,t.pushTimingTo=y,t.normalize=y,t.sendCounter=y,t.sendDelta=y,t.sendTimeMark=y,t.sendResTiming=y,t.sendTTI=y,t.makeSubPage=y,t.sendFirstPaint=y,void(t.sendHeroElement=y)}t.getSetting=function(e){return t._settings[e]||""},t.getVarsList=function(){var e=t._vars;return Object.keys(e).map(function(t){return t+"="+e[t]})};var w="690.1033",k="690.2096.207",E="690.2096.2877",M="690.2096.2892",x="690.2096.2044",T="690.2096.2748",S="690.2096.2335.1822",C=10,P=3e3,I=2e4,B={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137},D={visible:1,hidden:2,prerender:3},O={bluetooth:2064,cellular:2065,ethernet:2066,none:1229,wifi:2067,wimax:2068,other:861,unknown:836,0:836,1:2066,2:2067,3:2070,4:2071,5:2768},A={"first-paint":2793,"first-contentful-paint":2794},R=t.getTime,j=window.performance||{},L=j.timing||{},F=j.navigation||{},N=navigator.connection,$={},z=t._deltaMarks,W=document.createElement("link"),H="function"==typeof j.getEntriesByType,U=L.navigationStart,q=L.responseStart,V=q-U,K=L.domainLookupStart-U,G=t.getVarsList().concat("1042="+encodeURIComponent(navigator.userAgent)),Y=G.concat(["143.2129="+U,"143.2112="+K,"143.2119="+V]);if(t.ajaxStart=0,t.ajaxComplete=0,window.PerformanceObserver)try{new PerformanceObserver(function(t,e){var i=t.getEntriesByType("navigation")[0];if(i){e.disconnect();var n=[];g(n,i),p(n),b(M,G.concat(n))}}).observe({entryTypes:["navigation"]})}catch(J){}"loading"===document.readyState?(addEventListener("DOMContentLoaded",e),addEventListener("load",e)):e(),t.getTimeMarks=function(){return $},t.sendTTI=h,t.sendFirstPaint=function(t){window.requestAnimationFrame?requestAnimationFrame(function(){o("2130",t)}):o("2130",t)},t.sendHeroElement=function(t){o("2876",t)},t._subpages={},t.makeSubPage=function(e){var i=t._subpages[e];"undefined"==typeof i?t._subpages[e]=i=0:t._subpages[e]=++i;var n=!1;return{689.2322:v(Ya.Rum.getTime()),2924:e,2925:i,isCanceled:function(){return n},cancel:function(){n=!0}}},t.getResourceTimings=f,t.pushConnectionTypeTo=p,t.pushTimingTo=g,t.normalize=v,t.sendCounter=b,t.sendDelta=a}()}(),Ya.Rum.enabled&&addEventListener("load",function t(){removeEventListener("load",t),Ya.Rum.sendTimeMark("1724");for(var e=document.querySelectorAll("script[data-rCid], div[data-rCid]"),i=0,n=e.length;n>i;i++){var o=e[i],s=o.src;if(!s){var r=getComputedStyle(o).backgroundImage;if(r){var a=r.match(/^url\(["']?(.*?)["']?\)$/);a&&(s=a[1])}}s&&Ya.Rum.sendResTiming(o.getAttribute("data-rCid"),s)}}),function(){"use strict";function t(){var t=Ya.Rum.getSetting("clck"),e=s.join("\r\n");if(s=[],i=null,t){var n=navigator.sendBeacon&&Ya.Rum.getSetting("beacon"),o=n&&navigator.sendBeacon(t,e);if(!o){var r=new XMLHttpRequest;r.open("POST",t),r.send(e)}}}function e(t,e,i,n,o,s){var r=Ya.Rum.getSetting("slots");return[s?"/"+s.join("/"):"","/path="+e,r?"/slots="+r.join(";"):"",i?"/vars="+i:"","/cts="+(new Date).getTime(),"/*"]}var i,n=42,o=15,s=[];Ya.Rum.send=function(r,a,l,c,u,h,d){clearTimeout(i);var p=e(r,a,l,u,h,d);s.push("/reqid="+Ya.Rum.getSetting("reqid")+p.join("")),s.length<n?i=setTimeout(t,o):t()}}()),window.Ya&&Ya.Rum&&Ya.Rum.enabled&&window.BEM&&BEM.channel("i-bem").onFirst("start-init",function(){Ya.Rum.sendTimeMark("2418")}).onFirst("init",function(){Ya.Rum.sendTimeMark("2295")}),function(t,e){function i(t,i){function _(t,e){g&&(h.call(a,g),g=d),setTimeout(function(){t(e)},0)}if(d=null,!t)return void _(i,d);a=e.body,l=e.createElement,c=e.createDocumentFragment,u=a.appendChild,h=a.removeChild;var g=r(t);u.call(a,g);var v=g.children,b=n(v[0]),y=s(v[1],b);if(1!=y)return void _(i,d);var w=s(v[2],b),k=s(v[3],b),E=w+(k<<f);if(m>E)return void _(i,d);for(var M=c.apply(e),x=y+w+k,T=57348,S=0;2*E+1>S;S++)u.call(M,o(T+S));u.call(g,M);for(var C=[],P=p;p+2*E>P;P+=2){var I=s(v[P],b),B=s(v[P+1],b);C.push(I+(B<<f)),x+=I+B}var D=s(v[P],b);if(D!=(15&x))return void _(i,d);for(var O=0,A=0;A<C.length;A++)O+=C[A]*(1<<8*A);_(i,O)}function n(t){return 16/t.offsetWidth}function o(t){var i=l.call(e,"span");return i.innerText=String.fromCharCode(t),i}function s(t,e){return Math.round(t.offsetWidth*e)-1}function r(t){var i=57344,n=l.call(e,"div"),s='position:absolute;left:0;top:0;width:1px;height:1px;opacity:0;overflow:hidden;font:1000px "'+t+'", serif;';n.setAttribute("style",s),n.setAttribute("aria-hidden","true");for(var r=0;p>r;r++)u.call(n,o(i+r));return n}var a,l,c,u,h,d,p=4,f=4,m=4;t.Ya=t.Ya||{},t.Ya.F=t.Ya.F||{},t.Ya.F.calibrate=i}(window,document),function(){"use strict";$(function(){var t=home&&home.getData&&home.getData("fingerprint.data");t&&t.enabled&&setTimeout(function(){var e=t.zmblt;try{window.Ya.F.calibrate("Yandex-UI-Icons-Private",function(i){null!==i&&Number(i)!==Number(e)&&((new Image).src=t.cookieUrl+"&zmblt="+i+"&empty=1")})}catch(i){}},0)})}(),window.ya=window.ya||{},ya.history=window.history&&history.pushState?function(){return{navigate:function(t){t=t||{},t.url&&(t.title||(t.title=""),t.data||(t.data=""),t.replace?history.replaceState(t.data,t.title,t.url):history.pushState(t.data,t.title,t.url))},onchange:function(t){$(window).on("popstate",function(e){t.call(this,e.originalEvent)})}}}():null,function(){"use strict";function t(){var t=home&&home.getData&&home.getData("i-change-url.data");if(t){var e,i=t.url;try{e=history.state}catch(n){}i&&ya.history&&ya.history.navigate({data:e||null,url:i,replace:!0})}}function e(){window.defaultMetrikaCounter?t():+new Date-i>5e3?t():setTimeout(e,100)}var i=+new Date;e()}(),$(document).ready(function(){function t(i){a.push(i),e(),n=s>=i?setTimeout(function(){t(i+o)},o):null}function e(){if(!window.defaultMetrikaCounter)return void(+new Date<r&&setTimeout(e,100));for(;a.length;){var t=a.pop(),n={};n["time-"+i.content]={},n["time-"+i.content][i.type]={},n["time-"+i.content][i.type][t]=1,window.defaultMetrikaCounter.params(n)}}var i=home&&home.getData&&home.getData("time-count.data");if(i){var n=null,o=i.timeout,s=3e5,r=+new Date+s,a=[];document.hidden||t(0),BEM.channel("sys").on("hidden",function l(){n&&(clearTimeout(n),n=null),BEM.channel("sys").un("hidden",l)})}}),BEM.DOM.decl("xiva-notif",{onSetMod:{js:function(){window.WebSocket&&this.params.url&&(this.isConnected=!1,this.isPageClosed=!1,this.last={},this.connectAttempts=0,this.connectAttemptsTimer=null,this.reconnectTimer=null,this._connect(),this.bindToWin("beforeunload",this._disconnect))}},_update:function(t){this._isFreshMessage(t)&&("insert"!==t.operation&&"update labels"!==t.operation||this.channel("mail").trigger("update",{uid:t.uid,value:t.newCount}))},_isFreshMessage:function(t){var e=t.uid;return e?(e in this.last||(this.last[e]=0),this.last[e]<=t.lcn?(this.last[e]=t.lcn,!0):void 0):!1},_connect:function(){this.last={},this.connectAttempts=0,this.ws=new WebSocket(this.params.url),this.ws.onopen=this._onSocketOpen.bind(this),this.ws.onmessage=this._onSocketMessage.bind(this),this.ws.onclose=this._onSocketClose.bind(this)},_onSocketOpen:function(){this.isConnected=!0,clearTimeout(this.connectAttemptsTimer),this.connectAttemptsTimer=setTimeout(function(){this.isConnected&&(this.connectAttempts=0)}.bind(this),5e3)},_onSocketMessage:function(t){try{var e=JSON.parse(t.data);e.raw_data&&this._update(JSON.parse(e.raw_data))}catch(i){}},_onSocketClose:function(t){if(clearTimeout(this.connectAttemptsTimer),!this.isPageClosed){this.connectAttempts+=1;var e=6e4;this.isConnected=!1,this.connectAttempts<=5?e=3e3:this.connectAttempts<=15&&(e=1e4),4e3===t.code&&(e=3e5),4401!==t.code&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(this._connect.bind(this),e))}},_disconnect:function(){this.isPageClosed=!0,this.ws&&this.ws.close&&this.ws.close(1e3,"unload")}}),MordaRT.prototype.siteInDomainList=function(t,e){for(var i,n=0,o=t.length;o>n;n++)if(i=t[n],this.listRE[i]||(this.listRE[i]=new RegExp("^"+i.replace(/\./g,"\\.").replace(/\*/g,"[^.]+")+"$")),e.match(this.listRE[i]))return!0;return!1},MordaRT.prototype.getHostname=function(t){0!==t.indexOf("http")&&0!==t.indexOf("//")&&(t="//"+t);var e=document.createElement("a");return e.href=t,e.hostname},MordaRT.prototype.getEntries=function(t,e){if(!window.performance||!window.performance.getEntries)return{resources:{},resourcesCount:0};try{var i,n,o=window.performance.getEntries("resources"),s={},r=0;if(o&&o.length)for(var a=0,l=o.length;l>a;a++)if(i=o[a].initiatorType||"unknown",n=this.getHostname(o[a].name),-1!==n.indexOf(".")&&!this.siteInDomainList(t,n)){s[i]||(s[i]={});var c=e?this.quote(o[a].name):n;s[i][c]?s[i][c]++:s[i][c]=1,r++}return{resources:s,resourcesCount:r}}catch(u){return{resources:{},resourcesCount:0}}},MordaRT.prototype.quote=function(t){return t.replace(/"|%22/g,"&quot;")},$(document).ready(function(){function t(){var t=null;"flash"===h.type?t=h.custom.flashV&&(new CAWBrowser).flash>=h.custom.flashV?e():n():"img"===h.type?t=n():"hdpi_img"===h.type?t=null:"iframe"===h.type?t=i():"html"!==h.type&&(t=o());var a=s(),c=r();a&&t?$.extend(t,a):a&&(t=a),c&&t?$.extend(t,c):c&&(t=c),l(),u(t)}function e(){var t=$("#banner > object:eq(0)").attr("classid"),e=$("#banner > #bc > noscript").length,i=$("#banner").children().length,n=$("#banner > #bc").children().length;return t&&"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"===t&&1===e&&2===i&&1===n?null:{horizontal:{flash:1}}}function i(){var t=$(".banner-iframe").attr("src"),e=$("#banner > #bc > noscript").length,i=$("#banner").children().length,n=$("#banner > #bc").children().length,o=$(".banner__expand_inner").length+$(".banner__expand_innerclick").length;return a(t)&&1===e&&(2===i||4===i&&2===o)&&1===n?null:{horizontal:{iframe:1}}}function n(){var t=$("#banner > #bc > noscript").length,e=$("#banner > #bc").children().length,i="",n="";return h.custom.gif?i=$("#banner > img").attr("src"):(n=$("#banner > a").attr("href"),i=$("#banner > a > img").attr("src")),i!==h.custom.img||!h.custom.gif&&n!==h.custom.href||1!==t||1!==e?h.custom.img?{horizontal:{img:1}}:{horizontal:{none:1}}:null}function o(){var t=$(".b-line_adv");return t.length&&0===t.children().length?null:3===$(".main").children().length?null:{horizontal:{none:1}}}function s(){var t=$("img"),e=[],i=!1,n={};if(t.each(function(){var t=$(this).parents("a");this.src&&t.length&&e.push({src:this.src,link:t.attr("href")})}),e.length)for(var o=0,s=e.length;s>o;o++)a(e[o].link)||a(e[o].src)||(i=!0,n[e[o].link]={},n[e[o].link][e[o].src]=1);return i?{image:1,links:n,ignore:1}:null}function r(){var t=$("html")[0].style.cssText;return t?{html:1}:null}function a(t){if(!t||"#"===t||0===$.trim(t).indexOf("javascript"))return!0;var e=d.getHostname(t);return d.siteInDomainList(p,e)}function l(){var t,e,i=home.bnCounts;if(i&&i.length)for(var n=0,o=i.length;o>n;n++)t=document.createElement("a"),t.href=i[n],e=t.host,p.push(e)}function c(t){var e=$('<iframe style="display:none"></iframe>');$("body").append(e),e.attr("name","consistency"+(Math.random()+"").substr(3,7)),e.attr("src",h.url+"&csc="+t+"&empty=1")}function u(t){t&&!t.ignore?c("1"):"1"===h.csc&&c("2"),t&&t.ignore&&delete t.ignore;var e=null,i=d.getEntries(p),n=d.getEntries(p,!0);t&&(e=e||{},e["consistency-"+h.content]=t),i.resourcesCount&&(e=e||{},e["resources-consistency-"+h.content]=i.resources),n.resourcesCount&&i.resources.script&&(e=e||{},e["resources-src-consistency-"+h.content]=n.resources.script),e&&window.defaultMetrikaCounter&&window.defaultMetrikaCounter.params(e)}var h=home&&home.getData&&home.getData("consistency.data"),d=new MordaRT;if(h){var p=["*.*.yandex.*","*.yandex.*","yandex.*","yastatic.net","*.tns-counter.ru","*.hit.gemius.pl"];setTimeout(function(){t()},h.timeout)}}),$(function(){var t=home&&home.getData&&home.getData("consistencyPopup.data");t&&(t.zIndex=1e5+Math.floor(1e3*Math.random()),setTimeout(function(){var e=$(home.view("consistency-popup__html",t));$("a:last",e).click(function(){return(new Image).src=t.closeLink,e.remove(),!1}),$(".button_theme_cpopup__close",e).click(function(){return(new Image).src=t.closeLink,e.remove(),!1}),$("body").append(e),(new Image).src=t.pixel},t.timeout))}),BEM.decl("custom-protocol-detect",{},{protocolCheck:function(t,e,i){var n=this._checkBrowser();return n.isMsLaunchUri?this._openUriWithMsLaunchUri(t,e,i):n.isFirefox?this._openUriUsingFirefox(t,e,i):n.isWebkit?this._openUriWithHiddenFrame(t,e,i):n.isIE?this._openUriUsingIEInOlderWindows(t,e,i):void(i&&i())},_openUriWithHiddenFrame:function(t,e,i){this._blurWindowHack(e,i),this._getHiddenIframe().contentWindow.location.href=t},_openUriUsingFirefox:function(t,e,i){var n=this._getHiddenIframe();try{n.contentWindow.location.href=t,e&&e()}catch(o){i()}},_openUriUsingIEInOlderWindows:function(t,e,i){var n={9:"openUriWithHiddenFrame",10:"openUriUsingIe10InWindows7",11:"openUriWithHiddenFrame"}[home.getData("custom-protocol-detect.ieVersion")];this[n||"_openUriInNewWindowHack"](t,e,i)},_openUriUsingIe10InWindows7:function(t,e,i){var n=this._getHiddenIframe(),o=i?setTimeout(i,1e3):null;BEM.DOM.win.on("blur",function(){o&&clearTimeout(o),e&&e()});try{n.contentWindow.location.href=t}catch(s){i&&i(),clearTimeout(o)}},_openUriInNewWindowHack:function(t,e,i){var n=window.open("","","width=0,height=0");n.document.write("<iframe src='"+t+"'></iframe>"),setTimeout(function(){try{n.location.href=t,n.setTimeout(function(){n.close()},1e3),e&&e()}catch(o){n.close(),i&&i()}},1e3)},_openUriWithMsLaunchUri:function(t,e,i){navigator.msLaunchUri(t,e,i)},_checkBrowser:function(){return{isMsLaunchUri:Boolean(navigator.msLaunchUri),isFirefox:"undefined"!=typeof InstallTrigger,isWebkit:Boolean(window.chrome||window.opr||window.safari),isIE:home.getData("custom-protocol-detect.isMSIE")}},_getHiddenIframe:function(){if(!this.iframe){var t=document.createElement("iframe");t.src="about:blank",t.style.display="none",t.name="custom-protocol-detect",document.body.appendChild(t),this.iframe=t}return this.iframe},_blurWindowHack:function(t,e){function i(){clearTimeout(n),BEM.DOM.win.off("blur",i),t&&t()}var n=setTimeout(function(){BEM.DOM.win.off("blur",i),e&&e()},1e3);BEM.DOM.win.on("blur",i)}}),$(document).ready(function(){var t=home&&home.getData&&home.getData("yandcache.data");t&&window.setTimeout(function(){$.ajaxSetup({cache:!0}),$.getScript(t.url),$.ajaxSetup({cache:!1})},t.timeout)}),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var i=this.domElem;e&&this.delMod("hovered"),this._href&&(e?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i&&i.prop("disabled",e)})},pressed:function(t,e){return this.hasMod("disabled")?!1:void this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.domElem&&this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.trigger("focus"))},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){return this.isDisabled()?!1:void(!e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;!this._keyDowned&&e.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments);
}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="…";return function(e,i,n){return e.length>i+n?e.substring(0,i-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").prop("disabled",e)},yes:function(){this.delMod("focused")}},focused:function(t,e){return this.hasMod("disabled")?!1:(e?this._focused||this._focus():this._focused&&this._blur(),void this.afterCurrentEvent(function(){this.domElem&&this.trigger(e?"focus":"blur")}))}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){var i="undefined"!=typeof t,n=this.elem("control");return t=i?null===t?"":t.toString():n.val(),this._val!==t&&(this._val=t,n.val()!==t&&n.val(t),this.trigger("change",e)),i?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this.domElem&&this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),this.liveBindTo("control","input",function(){this._updateVal()}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._updateVal)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")}))}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),i=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||i)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(this.__base()===!1)return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._updateVal()})}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.liveBindTo("control","dragenter"),this.liveBindTo("control","dragend",function(){this._updateValNextTick()}),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._updateVal),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl("input",{_onIOSTouchStart:function(){}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","pointerclick",function(t){t.preventDefault()})}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerover",function(t){this.setMod(this.elem("clear"),"hovered","yes")}).liveBindTo("clear","pointerout",function(t){this.delMod(this.elem("clear"),"hovered")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{disabled2:function(t,e){var i="yes"===e,n=this.elem("input");i&&(this._origTabIndex=n.attr("tabindex")||null),n.attr("disabled",i?"disabled":null).attr("aria-disabled",i?"true":null).attr("tabindex",i?"-1":this._origTabIndex)}}}),home.pseudoReady(function(){var t=window.home&&home.getData&&home.getData("szm.data");if(t){var e=function(t,e){for(var i in e)if(e.hasOwnProperty(i)&&(!t[i]||Math.abs(parseFloat(t[i])-parseFloat(e[i]))>.01))return!1;return!0};setTimeout(function(){var i,n=window.devicePixelRatio||1,o=screen.width,s=screen.height,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=home.getData("szm.data.szm",null),c=home.getData("szm.data.swap")||!1;n=String(n).replace(".","_"),c&&s>o&&(i=o,o=s,s=i);var u={dpr:n,screenX:o,screenY:s,viewportX:r,viewportY:a};l&&e(l,u)||((new Image).src=t.url+(n+":"+o+"x"+s+":"+r+"x"+a))},t.timeout)}}),$(document).ready(function(){function t(){if(window.defaultMetrikaCounter){var n={};n["connection-type"]={},n["connection-type"][e.content]={},n["connection-type"][e.content][i]=1,window.defaultMetrikaCounter.params(n)}else setTimeout(t,500)}var e=home&&home.getData&&home.getData("network-information.data");if(e){var i=navigator&&navigator.connection&&navigator.connection.type?navigator.connection.type:"";i&&setTimeout(function(){t()},e.timeout)}}),home.pseudoReady(function(){var t=home&&home.getData&&home.getData("referers.data");if(t){var e=location.hash?location.hash.replace(/^#/,""):"",i=e&&e.match(/^[1-578]$/),n=home.getData("timing.reqid")||"";i&&t.referer&&((new Image).src="/instant/log?type=clckerror&showid="+n+"&message="+[i[0],t.content,t.page,t.referer].join("_"))}}),$(function(){var t=window.performance&&performance.navigation&&1===performance.navigation.type;t&&home.stat.logPath("tech","refresh")}),function(){"use strict";var t,e,i={},n={};home.stat={},home.stat.attr="data-statlog",home.stat.getCustomPageParams=function(){var t=home&&home.getData&&home.getData("redir-stats.data")||"",e="",i="";window.Ya&&Ya.Rum&&(e+="/timefs="+Math.floor(Ya.Rum.getTime()));var n=home.getData?home.getData("timing.vars"):"";return n&&(n[1964]?i="/mexp=0":n[1965]&&(i="/mexp=1")),t+e+i};var o,s=function(e){return i.useBeacon&&"sendBeacon"in navigator?navigator.sendBeacon(t,e):void 0},r=function(e,i){var n;if("XDomainRequest"in window?n=new XDomainRequest:"XMLHttpRequest"in window&&(n=new XMLHttpRequest),n){n.open("post",t,!0),n.withCredentials=!0;try{n.setRequestHeader("Accept","text/plain, */*; q=0.01"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}catch(o){}i&&("onreadystatechange"in n?n.onreadystatechange=function(){4===n.readyState&&i()}:n.onload=n.onerror=i),n.send(e)}},a=function(t){return"/dtype=clck"+home.stat.getCustomPageParams()+"/session_id="+i.showId+"/events="+encodeURIComponent(JSON.stringify(t.map(function(t){return{event:t.type,url:t.url,"parent-path":i.statRoot,blocks:t.array}})))+"/*"},l=function(t){if(clearTimeout(o),e){var i=a(e);s(i)?t&&t():r(i,t),e=null}};home.stat.flushQueue=l;var c=function(){clearTimeout(o),o=setTimeout(l,0)},u=function(t){var e=[];t.replace(/([^.(]+)(?:\(([^)]*)\))?\.?/g,function(t,i,n){e.push({key:i,params:n?n.split(";"):[]})});for(var i=[],n=i,o=0;o<e.length;++o){var s,r=e[o].params,a=e[o].key;s={ctag:a},n.push(s),r.length&&r.forEach(function(t){var e=t.match(/^([^=]+)=(.+)$/);s[e[1]]=decodeURIComponent(e[2])}),o+1<e.length&&(n=s.children=s.children||[])}return i},h=function(t){var e=[],i=t.replace(/\(([^)]+)\)/g,function(t,i){return e.push(i.replace(/;/g,",")),""});return e=e.length?"/vars="+e.join(","):"",{counter:i,vars:e}};home.stat.logPath=function(t,o,s){var r,a;if(!i.enabled||!t||!o)return void(s&&s.callback&&setTimeout(s.callback,0));if("show"===t){if(o in n)return;n[o]=!0}e||(e=[]),e.push({type:t,url:s&&s.url,array:u(o)}),s&&s.callback?(r=function(){a||(a=!0,s.callback())},l(r),void 0!==s.callbackTimeout&&setTimeout(r,s.callbackTimeout)):c()},home.stat.redirect=function(e,n){if(!i.enabled||!n)return!0;var o,s,l=e.href;if(i.useBeacon&&"sendBeacon"in navigator&&(s=a([{type:"click",url:l,array:u(n)}]),navigator.sendBeacon(t,s)))return!0;if(void 0!==i.delayedSend)return home.stat.logPath("click",n,{url:l,callbackTimeout:i.delayedSend,callback:function(){location.href=l}}),!1;if("_blank"===e.target)return s=a([{type:"click",url:l,array:u(n)}]),r(s),!0;if(!e.getAttribute("data-statlog-timeout")&&-1===l.indexOf("/lid="+i.statRoot)){if(o=e.getAttribute("data-statlog-url"))e.href=o;else{var c=h(n);e.href=i.redirHost+"redir/dtype=clck"+home.stat.getCustomPageParams()+"/lid="+i.statRoot+"."+c.counter+"/sid="+i.showId+c.vars+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(l.match(/^http/)?l:location.protocol+"//"+location.host+(l.match("^/")?l:"/"+l)))}e.setAttribute("data-statlog-timeout",setTimeout(function(){e.href=l,e.removeAttribute("data-statlog-timeout")},500))}return!0};var d=function(t){return t&&(0!==t.offsetWidth||0!==t.offsetHeight)},p=function(t){var e;if(!t.getAttribute&&"length"in t){e=new Array(t.length);for(var i=0;i<t.length;++i)e[i]=t[i];return e}return[t]};home.stat.logDOMShow=function(t,e){if(i.enabled){var n=[];p(t).forEach(function(t){n=n.concat(p(t.querySelectorAll("["+home.stat.attr+"]"))),t.getAttribute(home.stat.attr)&&n.push(t)}),n.forEach(function(t){var i=t.getAttribute(home.stat.attr),n=t.getAttribute("data-statlog-showed");if(i&&!n){if(!(e&&e.visibilityCheck===!1||d(t)))return;home.stat.logPath("show",i)}})}},home.stat.getRoot=function(){return i.enabled&&i.statRoot||""},home.stat.setCounter=function(t,e){p(t).forEach(function(t){t.setAttribute(home.stat.attr,e)})};var f=function(t){for(var e,i=t.target||t.srcElement;i&&i!==document&&!(e=i.getAttribute(home.stat.attr));)i=i.parentNode;if(e&&i){var n=i.getAttribute("data-statlog-redir");"0"!==n&&i.href?i.href&&"click"===t.type&&!t.defaultPrevented&&t.returnValue!==!1&&(home.stat.redirect(i,e)||("preventDefault"in t?t.preventDefault():t.returnValue=!1)):"mousedown"===t.type&&home.stat.logPath("click",e)}},m=function(t,e){"addEventListener"in document?document.addEventListener(t,e,!1):document.attachEvent("on"+t,e)},_=function(){i.enabled&&(m("mousedown",f),m("click",f))};home.subscribeData(function(){i=home.getData("statlog.config",{}),t=i.clckDemonHost+"counter","querySelectorAll"in document||(i.enabled=!1),_()}),home.stat._processClicks=f,home.stat._setConfig=function(e){i=e,t=i.clckDemonHost+"counter",n={},_()}}(),$(document).ready(function(){function t(){if(window.defaultMetrikaCounter)try{var i,n="yandex."+e.zone,o={"search-provider":{}};window.external&&external.IsSearchProviderInstalled&&(i=external.IsSearchProviderInstalled(n)),"undefined"!=typeof i&&(o["search-provider"][n]=i,window.defaultMetrikaCounter.params(o))}catch(s){return!1}else setTimeout(t,300)}var e=home&&home.getData&&home.getData("search-provider.data");e&&t()}),function(t,e){"use strict";function i(){for(var t,i,n=e.cookie.split("; "),o=0;o<n.length;++o)if(t=n[o].split("="),t[0]===a)return i=s(t.slice(1).join("=")),i||{};return{}}function n(t){var i,n,o,s=r(t),c=new Date,u=c.getTime();s?c.setTime(u+1e3*l):c.setTime(u-487),i="expires="+c.toUTCString(),n="domain="+e.domain.replace(/^\S*yandex/,".yandex"),o="path=/",e.cookie=a+"="+s+"; "+i+"; "+n+"; "+o}function o(t){try{return decodeURIComponent(t)}catch(e){return t}}function s(t){if(!t||"string"!=typeof t||!t.length)return{};/%23\d{10}/.test(t)&&(t=o(t)),t=t.split("#");for(var e,i=Date.now()/1e3,n={},s=0,r=t.length;r>s;s++)e=t[s].split("."),2===e.length?n[e[0]]=o(e[1]):e.length>2&&(isNaN(e[0])?n[e[0]]=o(e.slice(1).join(".")):e[0]>i&&(n[e[1]]={value:o(e.slice(2).join(".")),expires:e[0]}));return n}function r(t){if(t&&"object"==typeof t){for(var e,i,n=[],o=0,s=Object.keys(t),r=s.length;r>o;o++)e=t[s[o]],i=[s[o],encodeURIComponent(e.value||e)],/^\d+$/.test(e.expires)&&i.unshift(e.expires),n.push(i.join("."));return n.join("#")}}var a="yc",l=1209600,c=259200;t.Ya=t.Ya||{};var u=t.Ya.ycCookie=t.Ya.ycCookie||{};u.get=function(t){var e,n,o,s=i(),r={};if(!s[t])return{};e=s[t],e&&e.value&&(e=e.value),n=e.split(",");for(var a=0,l=n.length;l>a;++a)o=n[a].split(":"),r[o[0]]=parseInt(o[1],10);return r},u.set=function(t,e){if(!t||!e||"object"!=typeof e)return this;var o,s,r,a=i(),l=[];for(o=0,r=Object.keys(e),s=r.length;s>o;o++)l.push(r[o]+":"+e[r[o]]);return l.length?(a[t]={value:l.join(","),expires:String(Math.floor(Date.now()/1e3+c))},n(a),this):this},u.remove=function(t){if(!t)return this;var e=i();return delete e[t],n(e),this}}(window,document),window.home=window.home||{},home.rtstats={inited:!1,init:function(){return this.requestId=home.getData("statlog.config.showId"),this.host=home.getData("statlog.config.redirHost"),this.requestId&&(this.host+="/click",this.inited=!0),this.inited},sendOld:function(t,e){if(this.inited||this.init()){var i=["143="+t,"287=213"];for(var n in e)e.hasOwnProperty(n)&&i.push(n+"="+e[n]);var o=["/dtype=stred","/pid=1","/cid=72202","/reqid="+this.requestId,"/path=690.1033","/vars="+i.join(","),"/slots="+(home.getData("timing.exp")||""),"/*"].join(""),s=!1;"sendBeacon"in navigator&&(s=navigator.sendBeacon(this.host,o)),s||((new Image).src=this.host+o)}}},$(document).ready(function(){function t(){var t=$('<div class="b-spec-adv a11y-hidden"></div>');$("body").append(t);var e=0===document.getElementsByClassName("b-spec-adv")[0].offsetWidth;return t.remove(),e}function e(){var t=$('<div class="serp-adv-item a11y-hidden"></div>');$("body").append(t);var e=0===document.getElementsByClassName("serp-adv-item")[0].offsetWidth;return t.remove(),e}function i(){return!$(".media-grid").is(":visible")}function n(){var t=new Date;t.setTime(t.getTime()+2592e5);var e="; expires="+t.toUTCString(),i=home.getData("adb.data.domain")||"ru";document.cookie="bltsr=1"+e+";domain=.yandex."+i+"; path=/"}function o(){if(!u){u=h===c,h++;var s=t(),a=i(),p=AwapsJsonAPI.Json.prototype.checkBannerVisibility(),f={"content-blocking":{}},m={},_=!1;s?(m[1]=1,f["content-blocking"].easylist=1,_=!0):e()&&(m[5]=1,f["content-blocking"].adguard=1,_=!0),a&&(m[3]=1,f["content-blocking"].mediafooter=1,_=!0),home._cbsc&&(m[4]=home._cbsc,f["content-blocking"].styles=home._cbsc,_=!0),p&&(m[2]=p,f["content-blocking"].blocked=p,_=!0),_?(u=!0,Ya.ycCookie.set("cb",m),n(),l=+new Date,r(f)):(d*=2,setTimeout(function(){o()},d))}}function s(t){var e,i={1036:".widgets__col_td_1",1037:".home-arrow",1038:".widgets__col_td_3",1039:".b-widget-data iframe"},n={1038:function(){return!$(".widgets__col_td_3").children().length&&!$(".widgets__col_td_4").children().length}},o=function(t){var e=$(".i-ua_browser_firefox").length;e?t[1040]=1:t[1041]=1,a.skin&&(t[1051]=a.skin)},s={},r=!1;for(var l in i)if(i.hasOwnProperty(l)){e=$(i[l]).length&&!$(i[l]).is(":visible");var c=n[l]?n[l]():!1;c&&(e=!1),e&&!p[l]&&(p[l]=!0,r=!0,s[l]=1)}r&&(o(s),home.rtstats.sendOld(t,s))}function r(t){window.defaultMetrikaCounter?window.defaultMetrikaCounter.params(t):new Date-l<5e3&&setTimeout(function(){r(t)},300)}var a=home&&home.getData&&home.getData("adb.data");if(a){var l,c=2,u=!1,h=1,d=a.timeout,p={},f=5e3;s("28.15.1132.1671"),setTimeout(function(){s("28.15.1132.1671.791")},f),setTimeout(function(){o()},d),home._cbCheck=o()}}),"undefined"!=typeof home&&home.loadManager&&home.loadManager.trigger("js"),function(t){function e(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function n(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void i._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._state?o:s)(e.promise,t._value);var n;try{n=i(t._value)}catch(r){return void s(e.promise,r)}o(e.promise,n)}))}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void r(t);if("function"==typeof n)return void l(n.bind(e),t)}t._state=1,t._value=e,r(t)}catch(o){s(t,o)}}function s(t,e){t._state=2,t._value=e,r(t)}function r(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,o=t._deferreds.length;o>e;e++)n(t,t._deferreds[e]);t._deferreds=null}function a(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function l(t,e){var i=!1;try{t(function(t){i||(i=!0,o(e,t))},function(t){i||(i=!0,s(e,t))})}catch(n){if(i)return;i=!0,s(e,n)}}var c=setTimeout;i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,i){var o=new this.constructor(e);return n(this,new a(t,i,o)),o},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,i){function n(s,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,function(t){n(s,t)},i)}e[s]=r,0===--o&&t(e)}catch(l){i(l)}}if(0===e.length)return t([]);for(var o=e.length,s=0;s<e.length;s++)n(s,e[s])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,i){i(t)})},i.race=function(t){return new i(function(e,i){for(var n=0,o=t.length;o>n;n++)t[n].then(e,i)})},i._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){c(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},t.Promise||(t.Promise=i)}(this),function(){"use strict";var t={},e={};home.bundles={load:function(i,n){if(t[i])return t[i];var o=home.getData("bundles.data"),s=home.getData("bundles.placed",[]);return s.indexOf(i)>-1?(t[i]=new Promise(function(t){e[i]=t}),t[i]):(n=n||{},t[i]=Promise.race([new Promise(function(t,e){setTimeout(e,n.timeout||1e4)}),Promise.all([new Promise(function(t){var e=o.root+"/"+o.page+"__"+i+"/_"+o.page+"__"+i+(o.cssSuffix||"")+".css";home.loadCss(e,{callback:t,noFlash:!0})}),new Promise(function(t,n){var s=document.createElement("script");e[i]=t,s.onerror=n,s.src=o.root+"/"+o.page+"__"+i+"/_"+o.page+"__"+i+"."+o.locale+(o.jsSuffix||"")+".js",document.head.appendChild(s)})])])["catch"](function(e){throw t[i]=null,e}))},notify:function(i){t[i]?e[i]&&e[i]():t[i]=Promise.resolve(),t[i].then(function(){home.bundles.initBlocks()})}}}(),function(t){function e(t,e){function i(){!n&&e&&(n=!0,e.call(t))}var n;t.addEventListener&&t.addEventListener("load",i),t.attachEvent&&t.attachEvent("onload",i),"isApplicationInstalled"in navigator&&"onloadcssdefined"in t&&t.onloadcssdefined(i)}var i=function(e,i,n,o){function s(t){return l.body?t():void setTimeout(function(){s(t)})}function r(){c.addEventListener&&c.removeEventListener("load",r),o||(c.media=n||"all")}var a,l=t.document,c=l.createElement("link");if(i)a=i;else{var u=(l.body||l.getElementsByTagName("head")[0]).childNodes;a=u[u.length-1]}var h=l.styleSheets;c.rel="stylesheet",c.href=e,o?c.media=n||"all":c.media="only x",s(function(){a.parentNode.insertBefore(c,i?a:a.nextSibling)});var d=function(t){for(var e=c.href,i=h.length;i--;)if(h[i].href===e)return t();setTimeout(function(){d(t)})};return c.addEventListener&&c.addEventListener("load",r),c.onloadcssdefined=d,d(r),c};home.loadCss=function(t,n){var o=n||{},s=i(t,o.before,o.media,o.noFlash);o.callback&&e(s,o.callback)}}("undefined"!=typeof global?global:this),home.bundles.initBlocks=function(){$(".i-bundle-bem").each(function(){var t=$(this),e=t.data("bem"),i=!0;for(var n in e)if(e.hasOwnProperty(n)&&!(n in BEM.blocks)){i=!1;break}i&&(t.removeClass("i-bundle-bem").addClass("i-bem"),BEM.DOM.init(t))})},BEM.DOM.decl("i-geolocation",{},{get:function(t,e){if(1===arguments.length&&(e=t,t={}),t=$.extend({enableHighAccuracy:!0,timeout:15,cacheTime:15},t),t.timeout*=1e3,t.maximumAge=1e3*t.cacheTime*60,delete t.cacheTime,"geolocation"in navigator){var i=!1,n=setTimeout(function(){i=!0,e({error:4})},t.timeout+300);navigator.geolocation.getCurrentPosition(function(t){i||(clearTimeout(n),e(t))},function(t){i||(clearTimeout(n),e({error:t.code}))},t)}else e({error:0})}}),function(){"use strict";var t={1:"denied",2:"unavailable",3:"timeout"};BEM.decl("i-geolocation",{},{_firstLocation:!0,locate:function(t){return t=t||{},this._wrapRequest(t,function(){return this._locate(t)})},_wrapRequest:function(t,e){var i;return this._promise?this._promise:(this._triggerEvent("start",t),this._promise=i=this._wrapEnd(t,e.call(this)),this._promise.always(this.changeThis(function(){this._promise=void 0})),i)},_wrapEnd:function(t,e){var i=this;return e&&e.then||(e=$.Deferred().resolve(e)),e.fail(function(e){i._triggerEvent("fail",t,e)}).always(function(){i._triggerEvent("end",t)})},_triggerEvent:function(t,e,i){var n=$.Event(t);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return this.channel("i-geolocation").trigger(n,i),this},_locate:function(t){var e,i=this,n=$.Deferred(),o=home.getData("geo."+(t.background?"background-":"")+"counters",{});try{navigator.geolocation&&navigator.geolocation.getCurrentPosition&&(home.stat.logPath("tech",o.request),e=new Date,navigator.geolocation.getCurrentPosition(function(s){i._saveLocation(s,new Date-e,t).then(function(e){i._triggerEvent("gpsave",t,{id:e.region_id,locale:e.locale,name:e.region_name,address:e.address,address_short:e.address_short}),home.stat.logPath("tech",o.success),n.resolve()},function(t){n.reject(t)})},function(o){o.type="locate",i._saveError(o,new Date-e,t).always(function(){n.reject(o)})},{timeout:1e3*(t.timeout?t.timeout:15),maximumAge:i._firstLocation?3e5:0,enableHighAccuracy:!1}),i._firstLocation=!1)}catch(s){n.reject(s)}return n.promise()},_saveLocation:function(t,e,i){return home.localStorage.setItem("gpallowed","1"),this._location=t.coords,this._saveAjax($.extend(this._extractCoords(t.coords),{persistent:1,timing:e}),i)},_saveError:function(e,i,n){var o;return 1===e.code?home.localStorage.setItem("gpforbidden","1"):home.localStorage.setItem("gpallowed","1"),o=home.getData("geo."+(n.background?"background-":"")+"counters.error",{}),home.stat.logPath("tech",o[t[e.code]]),this._saveAjax($.extend({status:e.code,timing:i},e.data||{}))},_extractCoords:function(t){return{lon:t.longitude,lat:t.latitude,precision:t.accuracy}},_saveAjax:function(t){var e;t.sk=home.getData("geo.sk"),t.device=0,t.format="JSONP",t.laas=home.getData("geo.laas")||0;var i=home.getData("geo.gpsaveUrl");return e={url:i,dataType:"jsonp",data:t},$.ajax(e)}}),$(function(){"permissions"in navigator&&!home.getData("geo.gpauto")&&setTimeout(function(){navigator.permissions.query({name:"geolocation"}).then(function(t){var e=t.state||t.status;"granted"===e&&BEM.blocks["i-geolocation"].locate({background:!0})},function(){})},5e3)})}(),$(function(){var t=home.getData("tech-counters"),e=window.Modernizr;t&&(home.stat.logPath("tech","tech.svg."+Number(detector.isSVGSupported())),home.stat.logPath("tech","tech.localStorage."+Number(!home.disabledLS)),e&&Object.keys(e).forEach(function(t){home.stat.logPath("tech","tech.flex."+t+"."+Number(e[t]))}))}),BEM.decl("sup-manager",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._storage=BEM.create("sup-storage"),this.supported()&&(this.params.unregister?this._unregisterSW():this.params.disableInit||(this._updateDeviceTagOnStart(),this._checkSW()))}}},supported:function(){if(void 0!==this._supported)return this._supported;var t,e="serviceWorker"in navigator&&"PushManager"in window&&PushSubscription.prototype.hasOwnProperty("getKey")&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&"fetch"in window&&"indexedDB"in window,i="Notification"in window&&"granted"===Notification.permission;try{t=!!window.top}catch(n){t=!1}var o;try{o=t&&window.top.location.domain===location.domain}catch(n){o=!1}var s=navigator.userAgent.indexOf("Firefox/")>-1;return this._supported=e&&(i||!t||o||s),this._supported},requestPermission:function(){var t=Date.now();return new Promise(function(t,e){var i=Notification.requestPermission(function(e){t(e)});i&&i.then(t,e)}).then(function(e){return"granted"!==e&&home.stat.logPath("tech","sup.denied"),{permission:e,delay:Date.now()-t}})},getTags:function(t){return this._storage.getTags(t)},getAllTags:function(){return this._storage.getAllTags()},getPermission:function(){return Notification.permission},subscribe:function(t){var e=this;return t=this._prepareTags("add",t),this._getSubscription().then(function(i){return i?e._updateTags(t):e._subscribe(t)}).then(function(){return e._storage.changeTags(t)}).then(function(){e.trigger("updateTags",t)})},unsubscribe:function(t){return t=this._prepareTags("remove",t),this._updateTags(t).then(function(){return this._storage.changeTags(t)}.bind(this)).then(function(){this.trigger("updateTags",t)}.bind(this))},sync:function(t,e){var i=this;if(Date.now()<i.__self._getSessionParameter(i.__self.SS_SYNC_TTL_KEY+t))return this._syncPromise||Promise.resolve();var n=Date.now()+6e5;return i.__self._setSessionParameter(i.__self.SS_SYNC_TTL_KEY+t,n),this._syncPromise=fetch(this.params.supUrl+"/v2/tags/web/"+this.params.id+"/"+t).then(function(t){return t.json()}).then(function(n){if(t===n.name&&n.value&&n.value.length){var o=i._convertTag(n,e);return i._storage.clearTag(t).then(function(){i._storage.changeTags(o)}).then(function(){i.trigger("updateTags",o)})}return i._storage.clearTag(t)})["catch"](function(t){home.error.logError({block:"sup-manager"},t)}),this._syncPromise},_subscribe:function(t){return Promise.all([this._registerSW().then(this._getActiveRegistration.bind(this)),this._getVapid()]).then(function(t){var e=t[0],i=t[1];return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})}).then(function(e){this._sendRegistration(e,t)}.bind(this))},_getVapid:function(){return fetch(this.params.supUrl+"/registrations/web/vapid").then(function(t){return t.text()}).then(function(t){return t=t.replace(/-/g,"+").replace(/_/g,"/")+"=".repeat((4-t.length%4)%4),t=atob(t),new Uint8Array(t.length).map(function(e,i){return t.charCodeAt(i)})})},_registerSW:function(){var t="/portal/service-worker/white/_notifications.js",e=this;return navigator.serviceWorker.register(t,{scope:this.__self.SCOPE_WORKER}).then(function(t){return home.localStorage.setItem(e.__self.LS_SW_KEY,(new Date).getTime()),t},function(t){throw home.stat.logPath("tech","sup.register_error"),t})},_unregisterSW:function(){navigator.serviceWorker.getRegistration(this.__self.SCOPE_WORKER).then(function(t){return t?t.unregister():void 0})["catch"](function(t){home.error.logError({block:"sup-manager"},t)})},_getActiveSW:function(){return navigator.serviceWorker.getRegistration(this.__self.SCOPE_WORKER)},_getSubscription:function(){return this._getActiveSW().then(function(t){return t?t.pushManager.getSubscription():void 0})},_updateDeviceTagOnStart:function(){var t=this;this._getSubscription().then(function(e){return e?t._storage.getParams(["subscriptionEndpoint","userAgent"]).then(function(i){var n=i[0],o=i[1];return n!==e.endpoint||o!==navigator.userAgent?t._sendRegistration(e):void 0}):void 0})},_sendRegistration:function(t,e){var i=this.params.supUrl+"/registrations/web",n={id:this.params.id,webDomain:location.hostname,deviceType:this.params.deviceType,subscription:t,tags:e};return this._post(i,n).then(this._storage.setParams.bind(this._storage,{subscriptionEndpoint:t.endpoint,userAgent:navigator.userAgent}))},_checkSW:function(){var t=home.localStorage.getItem(this.__self.LS_SW_KEY);t&&this._getActiveSW().then(function(e){e||(home.stat.logPath("tech","sup.sw_missing(days="+Math.floor((new Date-t)/864e5)+")"),home.localStorage.removeItem(this.__self.LS_SW_KEY))}.bind(this))},_post:function(t,e){return fetch(t,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then(function(t){return t.ok&&t.status>=200&&t.status<300?t:Promise.reject(new Error(t.status+": "+t.statusText))})},_updateTags:function(t){var e=this.params.supUrl+"/v2/tags/"+this.params.id+"/"+this.params.id;return this._post(e,t)},_getActiveRegistration:function(){return this._getActiveSW().then(function(t){return t.active?t:new Promise(function(e){function i(){t.active&&(this.removeEventListener("statechange",i),e(t))}(t.installing||t.waiting).addEventListener("statechange",i)})})},_prepareTags:function(t,e){return e.map(function(e){return{name:e.name,value:e.value,expiryDate:e.expiryDate,op:t}})},_convertTag:function(t,e){var i=t.name;return t.value.map(function(t){return{name:i,value:t,expiryDate:e,op:"add"}})}},{SCOPE_WORKER:"/notifications/",LS_SW_KEY:"home:notifications-sw",SS_SYNC_TTL_KEY:"home:sync-ttl-tag_",_instance:null,getInstance:function(){return this._instance||(this._instance=BEM.create({block:this.getName()},home.getData("sup-manager.params"))),this._instance},_setSessionParameter:function(t,e){try{window.sessionStorage.setItem(t,e)}catch(i){}},_getSessionParameter:function(t){try{return window.sessionStorage.getItem(t)}catch(e){return null}}}),function(){function t(t){return function(){var e=this,i=arguments;return new Promise(function(n,o){var s=t.apply(e,i);s.onsuccess=function(){n(this.result)},s.onerror=function(){o(this.error)}})}}var e=t(function(t,e){var i=indexedDB.open(t,e);return i.onupgradeneeded=function(){var t=this.result;t.createObjectStore("tags",{keyPath:["name","value"]}).createIndex("expiryDate","expiryDate"),t.createObjectStore("params")},i}),i=function(t,e,i){return t.transaction(e,i).objectStore(e)},n=t(function(t,e){return t.get(e)}),o=t(function(t){return t.getAll()}),s=t(function(t,e,i){return t.put(e,i)}),r=t(function(t,e){return t["delete"](e)}),a=function(t,e){return t.filter(function(t){
return t.name===e}).map(function(t){return{name:t.name,value:t.value,expiryDate:t.expiryDate,op:"remove"}})};BEM.decl("sup-storage",{_openStorage:function(){return this._storage||(this._storage=e(this.__self.STORAGE_NAME,this.__self.STORAGE_VERSION).then(function(t){return t.onclose=function(){delete this._storage}.bind(this),t}.bind(this))["catch"](function(t){throw delete this._storage,t}.bind(this))),this._storage},getParams:function(t){return this._openStorage().then(function(e){var o=i(e,"params");return Promise.all([].concat(t).map(function(t){return n(o,t)}))})},setParams:function(t){return this._openStorage().then(function(e){var n=i(e,"params","readwrite");return Promise.all(Object.keys(t).map(function(e){var i=t[e];return s(n,i,e)}))})},changeTags:function(t){return this._openStorage().then(function(e){var n=i(e,"tags","readwrite");return Promise.all(t.map(function(t){return"remove"===t.op?r(n,[t.name,t.value]):s(n,{name:t.name,value:t.value,expiryDate:new Date(t.expiryDate)})}))})},getTags:function(t){return this._openStorage().then(function(e){var o=i(e,"tags");return Promise.all(t.map(function(t){return n(o,[t.name,t.value])}))})},getAllTags:function(){return this._openStorage().then(function(t){var e=i(t,"tags");return o(e)})},clearTag:function(t){return this.getAllTags().then(function(e){return this.changeTags(a(e,t))}.bind(this))}},{STORAGE_NAME:"notifications",STORAGE_VERSION:1})}(),$(function(){function t(){var t=window.innerHeight,e=$(window).scrollTop(),n=u>e+t*(h?.5:.66);i()||n===h||(h=n,l.toggleClass("media-event-promo__fade-out",!n))}function e(){var t=$(s).offset().top,e=$(window).scrollTop(),n=window.innerHeight;return i()||t+30>e+n}function i(){return a.hasMod("collapsed","yes")}var n=home.getData("media-event-promo.data");if(n&&n.type){var o=n.type,s=".media-event";if("media"!==o&&(s=".media-grid"),$(s).length){var r="CSS"in window&&CSS.supports&&(CSS.supports("position","sticky")||CSS.supports("position","-webkit-sticky"));if(r){var a=$(".media-grid").bem("media-grid");if(e()){var l=$(home.view("media-event-promo__layout",{mods:{type:o,dark:n.darkSkinEnabled?"yes":""},title:n.title}));l.insertAfter(".gap_side_bottom").on("click",function(){i()&&a.delMod("collapsed"),home.stat.logPath("click","media-event.promo."+o),"hockey"===o?BEM.blocks.hockey.highlight():$("html,body").stop().animate({scrollTop:$(s).offset().top},"slow")}),home.stat.logPath("show","media-event.promo."+o);var c=$(s),u=c.offset().top,h=!0;BEM.channel("i-scroll-event").on("scroll",t)}}}}}),function(){var t;t=function(){var t=document,e=window,i={},n=function(){};n.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===i.arrIndexOf(n,e)&&n.push(e)},n.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var n=this._listeners[t],o=i.arrIndexOf(n,e);return-1!==o?void(n.length>1?this._listeners[t]=n.slice(0,o).concat(n.slice(o+1)):delete this._listeners[t]):void 0}},n.prototype.dispatchEvent=function(t){var e=t.type,i=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,i),this._listeners&&e in this._listeners)for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].apply(this,i)};var o=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])};o.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var i=this[e];"function"==typeof i&&(i="[function]"),t.push(e+"="+i)}return"SimpleEvent("+t.join(", ")+")"};var s=function(t){var e=this;e._events=t||[],e._listeners={}};s.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var i=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,i),t in e._listeners)for(var n=0;n<e._listeners[t].length;n++)e._listeners[t][n].apply(e,i)}},s.prototype.on=function(t,e){var i=this;i._verifyType(t),i._nuked||(t in i._listeners||(i._listeners[t]=[]),i._listeners[t].push(e))},s.prototype._verifyType=function(t){var e=this;-1===i.arrIndexOf(e._events,t)&&i.log("Event "+JSON.stringify(t)+" not listed "+JSON.stringify(e._events)+" in "+e)},s.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var r="abcdefghijklmnopqrstuvwxyz0123456789_";i.random_string=function(t,e){e=e||r.length;var i,n=[];for(i=0;t>i;i++)n.push(r.substr(Math.floor(Math.random()*e),1));return n.join("")},i.random_number=function(t){return Math.floor(Math.random()*t)},i.random_number_string=function(t){var e=(""+(t-1)).length,n=Array(e+1).join("0");return(n+i.random_number(t)).slice(-e)},i.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},i.isSameOriginUrl=function(t,i){return i||(i=e.location.href),t.split("/").slice(0,3).join("/")===i.split("/").slice(0,3).join("/")},i.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},i.objectExtend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t};var a="_jp";i.polluteGlobalNamespace=function(){a in e||(e[a]={})},i.closeFrame=function(t,e){return"c"+JSON.stringify([t,e])},i.userSetCode=function(t){return 1e3===t||t>=3e3&&4999>=t},i.countRTO=function(t){var e;return e=t>100?3*t:t+200},i.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},i.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},i.flatUrl=function(t){return-1===t.indexOf("?")&&-1===t.indexOf("#")},i.amendUrl=function(e){var n=t.location;if(!e)throw new Error("Wrong url for SockJS");if(!i.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");return 0===e.indexOf("//")&&(e=n.protocol+e),0===e.indexOf("/")&&(e=n.protocol+"//"+n.host+e),e=e.replace(/[\/]+$/,"")},i.arrIndexOf=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i.arrSkip=function(t,e){var n=i.arrIndexOf(t,e);if(-1===n)return t.slice();var o=t.slice(0,n);return o.concat(t.slice(n+1))},i.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},i.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var l,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","\ufeff":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},h=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(t){return c.lastIndex=0,c.test(t)&&(t=t.replace(c,function(t){return u[t]})),'"'+t+'"'},p=function(t){var e,i={},n=[];for(e=0;65536>e;e++)n.push(String.fromCharCode(e));return t.lastIndex=0,n.join("").replace(t,function(t){return i[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,i};i.quote=function(t){var e=d(t);return h.lastIndex=0,h.test(e)?(l||(l=p(h)),e.replace(h,function(t){return l[t]})):e};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];i.probeProtocols=function(){for(var t={},e=0;e<f.length;e++){var i=f[e];t[i]=M[i]&&M[i].enabled()}return t},i.detectProtocols=function(t,e,i){var n={},o=[];e||(e=f);for(var s=0;s<e.length;s++){var r=e[s];n[r]=t[r]}var a=function(t){var e=t.shift();n[e]?o.push(e):t.length>0&&a(t)};return i.websocket!==!1&&a(["websocket"]),n["xhr-streaming"]&&!i.null_origin?o.push("xhr-streaming"):!n["xdr-streaming"]||i.cookie_needed||i.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),n["xhr-polling"]&&!i.null_origin?o.push("xhr-polling"):!n["xdr-polling"]||i.cookie_needed||i.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";i.createHook=function(){var t="a"+i.random_string(8);if(!(m in e)){var n={};e[m]=function(t){return t in n||(n[t]={id:t,del:function(){delete n[t]}}),n[t]}}return e[m](t)},i.attachMessage=function(t){i.attachEvent("message",t)},i.attachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.addEventListener(i,n,!1):(t.attachEvent("on"+i,n),e.attachEvent("on"+i,n))},i.detachMessage=function(t){i.detachEvent("message",t)},i.detachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.removeEventListener(i,n,!1):(t.detachEvent("on"+i,n),e.detachEvent("on"+i,n))};var _={},g=!1,v=function(){for(var t in _)_[t](),delete _[t]},b=function(){g||(g=!0,v())};i.attachEvent("unload",b),i.unload_add=function(t){var e=i.random_string(8);return _[e]=t,g&&i.delay(v),e},i.unload_del=function(t){t in _&&delete _[t]},i.createIframe=function(e,n){var o,s,r=t.createElement("iframe"),a=function(){clearTimeout(o);try{r.onload=null}catch(t){}r.onerror=null},l=function(){r&&(a(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),i.unload_del(s))},c=function(t){r&&(l(),n(t))},u=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(i){}};return r.src=e,r.style.display="none",r.style.position="absolute",r.onerror=function(){c("onerror")},r.onload=function(){clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},t.body.appendChild(r),o=setTimeout(function(){c("timeout")},15e3),s=i.unload_add(l),{post:u,cleanup:l,loaded:a}},i.createHtmlfile=function(t,n){var o,s,r,l=new ActiveXObject("htmlfile"),c=function(){clearTimeout(o)},u=function(){l&&(c(),i.unload_del(s),r.parentNode.removeChild(r),r=l=null,CollectGarbage())},h=function(t){l&&(u(),n(t))},d=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(i){}};l.open(),l.write('<html><script>document.domain="'+document.domain+'";</script></html>'),l.close(),l.parentWindow[a]=e[a];var p=l.createElement("div");return l.body.appendChild(p),r=l.createElement("iframe"),p.appendChild(r),r.src=t,o=setTimeout(function(){h("timeout")},15e3),s=i.unload_add(u),{post:d,cleanup:u,loaded:c}};var y=function(){};y.prototype=new s(["chunk","finish"]),y.prototype._start=function(t,n,o,s){var r=this;try{r.xhr=new XMLHttpRequest}catch(a){}if(!r.xhr)try{r.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(e.ActiveXObject||e.XDomainRequest)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+ +new Date),r.unload_ref=i.unload_add(function(){r._cleanup(!0)});try{r.xhr.open(t,n,!0)}catch(l){return r.emit("finish",0,""),void r._cleanup()}if(s&&s.no_credentials||(r.xhr.withCredentials="true"),s&&s.headers)for(var c in s.headers)r.xhr.setRequestHeader(c,s.headers[c]);r.xhr.onreadystatechange=function(){if(r.xhr){var t=r.xhr;switch(t.readyState){case 3:try{var e=t.status,i=t.responseText}catch(t){}1223===e&&(e=204),i&&i.length>0&&r.emit("chunk",e,i);break;case 4:var e=t.status;1223===e&&(e=204),r.emit("finish",e,t.responseText),r._cleanup(!1)}}},r.xhr.send(o)},y.prototype._cleanup=function(t){var e=this;if(e.xhr){if(i.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(n){}e.unload_ref=e.xhr=null}},y.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var w=i.XHRCorsObject=function(){var t=this,e=arguments;i.delay(function(){t._start.apply(t,e)})};w.prototype=new y;var k=i.XHRLocalObject=function(t,e,n){var o=this;i.delay(function(){o._start(t,e,n,{no_credentials:!0})})};k.prototype=new y;var E=i.XDRObject=function(t,e,n){var o=this;i.delay(function(){o._start(t,e,n)})};E.prototype=new s(["chunk","finish"]),E.prototype._start=function(t,e,n){var o=this,s=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var r=s.ontimeout=s.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};s.onprogress=function(){o.emit("chunk",200,s.responseText)},s.onload=function(){o.emit("finish",200,s.responseText),o._cleanup(!1)},o.xdr=s,o.unload_ref=i.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(t,e),o.xdr.send(n)}catch(a){r()}},E.prototype._cleanup=function(t){var e=this;if(e.xdr){if(i.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(n){}e.unload_ref=e.xdr=null}},E.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},i.isXHRCorsCapable=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:e.XDomainRequest&&t.domain?2:L.enabled()?3:4};var M=function(t,n,o){if(this===e)return new M(t,n,o);var s,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&i.objectExtend(r._options,o),r._base_url=i.amendUrl(t),r._server=r._options.server||i.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?s=r._options.protocols_whitelist:(s="string"==typeof n&&n.length>0?[n]:i.isArray(n)?n:null,s&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),r._protocols=[],r.protocol=null,r.readyState=M.CONNECTING,r._ir=U(r._base_url),r._ir.onfinish=function(t,e){r._ir=null,t?(r._options.info&&(t=i.objectExtend(t,r._options.info)),r._options.rtt&&(e=r._options.rtt),r._applyInfo(t,e,s),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};M.prototype=new n,M.version="0.3.4",M.CONNECTING=0,M.OPEN=1,M.CLOSING=2,M.CLOSED=3,M.prototype._debug=function(){this._options.debug&&i.log.apply(i,arguments)},M.prototype._dispatchOpen=function(){var t=this;t.readyState===M.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=M.OPEN,t.dispatchEvent(new o("open"))):t._didClose(1006,"Server lost session")},M.prototype._dispatchMessage=function(t){var e=this;e.readyState===M.OPEN&&e.dispatchEvent(new o("message",{data:t}))},M.prototype._dispatchHeartbeat=function(t){var e=this;e.readyState===M.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},M.prototype._didClose=function(t,e,n){var s=this;if(s.readyState!==M.CONNECTING&&s.readyState!==M.OPEN&&s.readyState!==M.CLOSING)throw new Error("INVALID_STATE_ERR");s._ir&&(s._ir.nuke(),s._ir=null),s._transport&&(s._transport.doCleanup(),s._transport=null);var r=new o("close",{code:t,reason:e,wasClean:i.userSetCode(t)});if(!i.userSetCode(t)&&s.readyState===M.CONNECTING&&!n){if(s._try_next_protocol(r))return;r=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:r})}s.readyState=M.CLOSED,i.delay(function(){s.dispatchEvent(r)})},M.prototype._didMessage=function(t){var e=this,i=t.slice(0,1);switch(i){case"o":e._dispatchOpen();break;case"a":for(var n=JSON.parse(t.slice(1)||"[]"),o=0;o<n.length;o++)e._dispatchMessage(n[o]);break;case"m":var n=JSON.parse(t.slice(1)||"null");e._dispatchMessage(n);break;case"c":var n=JSON.parse(t.slice(1)||"[]");e._didClose(n[0],n[1]);break;case"h":e._dispatchHeartbeat()}},M.prototype._try_next_protocol=function(e){var n=this;for(n.protocol&&(n._debug("Closed transport:",n.protocol,""+e),n.protocol=null),n._transport_tref&&(clearTimeout(n._transport_tref),n._transport_tref=null);;){var o=n.protocol=n._protocols.shift();if(!o)return!1;if(M[o]&&M[o].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return n._protocols.unshift(o),n.protocol="waiting-for-load",i.attachEvent("load",function(){n._try_next_protocol()}),!0;if(M[o]&&M[o].enabled(n._options)){var s=M[o].roundTrips||1,r=(n._options.rto||0)*s||5e3;n._transport_tref=i.delay(r,function(){n.readyState===M.CONNECTING&&n._didClose(2007,"Transport timeouted")});var a=i.random_string(8),l=n._base_url+"/"+n._server+"/"+a;return n._debug("Opening transport:",o," url:"+l," RTO:"+n._options.rto),n._transport=new M[o](n,l,n._base_url),!0}n._debug("Skipping transport:",o)}},M.prototype.close=function(t,e){var n=this;if(t&&!i.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return n.readyState!==M.CONNECTING&&n.readyState!==M.OPEN?!1:(n.readyState=M.CLOSING,n._didClose(t||1e3,e||"Normal closure"),!0)},M.prototype.send=function(t){var e=this;if(e.readyState===M.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===M.OPEN&&e._transport.doSend(i.quote(""+t)),!0},M.prototype._applyInfo=function(e,n,o){var s=this;s._options.info=e,s._options.rtt=n,s._options.rto=i.countRTO(n),s._options.info.null_origin=!t.domain;var r=i.probeProtocols();s._protocols=i.detectProtocols(r,o,e)};var x=M.websocket=function(t,n){var o=this,s=n+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),o.ri=t,o.url=s;var r=e.WebSocket||e.MozWebSocket;o.ws=new r(o.url),o.ws.onmessage=function(t){o.ri._didMessage(t.data)},o.unload_ref=i.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(i.closeFrame(1006,"WebSocket connection broken"))}};x.prototype.doSend=function(t){this.ws.send("["+t+"]")},x.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),i.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},x.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},x.roundTrips=2;var T=function(){};T.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},T.prototype.doSend=function(t){var e=this;e.send_buffer.push(t),e.send_stop||e.send_schedule()},T.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=i.delay(25,function(){e.send_stop=null,e.send_schedule()})},T.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,i){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+i):t.send_schedule_wait()}),t.send_buffer=[]}},T.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var S=function(e,n,o){var s=this;if(!("_send_form"in s)){var r=s._send_form=t.createElement("form"),a=s._send_area=t.createElement("textarea");a.name="d",r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",r.appendChild(a),t.body.appendChild(r)}var r=s._send_form,a=s._send_area,l="a"+i.random_string(8);r.target=l,r.action=e+"/jsonp_send?i="+l;var c;try{c=t.createElement('<iframe name="'+l+'">')}catch(u){c=t.createElement("iframe"),c.name=l}c.id=l,r.appendChild(c),c.style.display="none";try{a.value=n}catch(h){i.log("Your browser is seriously broken. Go home! "+h.message)}r.submit();var d=function(t){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,i.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",o(!0))};return c.onerror=c.onload=d,c.onreadystatechange=function(t){"complete"==c.readyState&&d()},d},C=function(t){return function(e,i,n){var o=new t("POST",e+"/xhr_send",i);return o.onfinish=function(t,e){n(200===t||204===t,"http status "+t)},function(t){n(!1,t)}}},P=function(e,n){var o,s,r=t.createElement("script"),a=function(t){s&&(s.parentNode.removeChild(s),s=null),r&&(clearTimeout(o),r.parentNode.removeChild(r),r.onreadystatechange=r.onerror=r.onload=r.onclick=null,r=null,n(t),n=null)},l=!1,c=null;if(r.id="a"+i.random_string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=function(t){c||(c=setTimeout(function(){l||a(i.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},r.onload=function(t){a(i.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(t){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){l=!0;try{r.onclick()}catch(e){}}r&&a(i.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof r.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))s=t.createElement("script"),s.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=s.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(u){}r.async=!0}"undefined"!=typeof r.async&&(r.async=!0),o=setTimeout(function(){a(i.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var h=t.getElementsByTagName("head")[0];return h.insertBefore(r,h.firstChild),s&&h.insertBefore(s,h.firstChild),a},I=M["jsonp-polling"]=function(t,e){i.polluteGlobalNamespace();var n=this;n.ri=t,n.trans_url=e,n.send_constructor(S),n._schedule_recv()};I.prototype=new T,I.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=B(t.trans_url+"/jsonp",P,e)},I.enabled=function(){return!0},I.need_body=!0,I.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var B=function(t,n,o){var s="a"+i.random_string(6),r=t+"?c="+escape(a+"."+s),l=0,c=function(t){switch(l){case 0:delete e[a][s],o(t);break;case 1:o(t),l=2;break;case 2:delete e[a][s]}},u=n(r,c);e[a][s]=u;var h=function(){e[a][s]&&(l=1,e[a][s](i.closeFrame(1e3,"JSONP user aborted read")))};return h},D=function(){};D.prototype=new T,D.prototype.run=function(t,e,i,n,o){var s=this;s.ri=t,s.trans_url=e,s.send_constructor(C(o)),s.poll=new Z(t,n,e+i,o)},D.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var O=M["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",nt,i.XHRCorsObject)};O.prototype=new D,O.enabled=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},O.roundTrips=2,O.need_body=!0;var A=M["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",nt,i.XDRObject)};A.prototype=new D,A.enabled=function(){return!!e.XDomainRequest},A.roundTrips=2;var R=M["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",nt,i.XHRCorsObject)};R.prototype=new D,R.enabled=O.enabled,R.roundTrips=2;var j=M["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",nt,i.XDRObject)};j.prototype=new D,j.enabled=A.enabled,j.roundTrips=2;var L=function(){};L.prototype.i_constructor=function(t,e,n){var o=this;o.ri=t,o.origin=i.getOrigin(n),o.base_url=n,o.trans_url=e;var s=n+"/iframe.html";o.ri._options.devel&&(s+="?t="+ +new Date),o.window_id=i.random_string(8),s+="#"+o.window_id,o.iframeObj=i.createIframe(s,function(t){o.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),o.onmessage_cb=i.bind(o.onmessage,o),i.attachMessage(o.onmessage_cb)},L.prototype.doCleanup=function(){var t=this;if(t.iframeObj){i.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},L.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var i=t.data.slice(0,8),n=t.data.slice(8,9),o=t.data.slice(9);if(i===e.window_id)switch(n){case"s":e.iframeObj.loaded(),e.postMessage("s",JSON.stringify([M.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(o)}}},L.prototype.postMessage=function(t,e){var i=this;i.iframeObj.post(i.window_id+t+(e||""),i.origin)},L.prototype.doSend=function(t){this.postMessage("m",t)},L.enabled=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var F,N=function(t,n){parent!==e?parent.postMessage(F+t+(n||""),"*"):i.log("Can't postMessage, no parent window.",t,n)},$=function(){};$.prototype._didClose=function(t,e){N("t",i.closeFrame(t,e))},$.prototype._didMessage=function(t){N("t",t)},$.prototype._doSend=function(t){this._transport.doSend(t)},$.prototype._doCleanup=function(){this._transport.doCleanup()},i.parent_origin=void 0,M.bootstrap_iframe=function(){var n;F=t.location.hash.slice(1);var o=function(t){if(t.source===parent&&("undefined"==typeof i.parent_origin&&(i.parent_origin=t.origin),t.origin===i.parent_origin)){var o=t.data.slice(0,8),s=t.data.slice(8,9),r=t.data.slice(9);if(o===F)switch(s){case"s":var a=JSON.parse(r),l=a[0],c=a[1],u=a[2],h=a[3];if(l!==M.version&&i.log('Incompatibile SockJS! Main site uses: "'+l+'", the iframe: "'+M.version+'".'),!i.flatUrl(u)||!i.flatUrl(h))return void i.log("Only basic urls are supported in SockJS");if(!i.isSameOriginUrl(u)||!i.isSameOriginUrl(h))return void i.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([e.location.href,u,h])+")");n=new $,n._transport=new $[c](n,u,h);break;case"m":n._doSend(r);break;case"c":n&&n._doCleanup(),n=null}}};i.attachMessage(o),N("s")};var z=function(t,e){var n=this;i.delay(function(){n.doXhr(t,e)})};z.prototype=new s(["finish"]),z.prototype.doXhr=function(t,e){var n=this,o=(new Date).getTime(),s=new e("GET",t+"/info"),r=i.delay(8e3,function(){s.ontimeout()});s.onfinish=function(t,e){if(clearTimeout(r),r=null,200===t){var i=(new Date).getTime()-o,s=JSON.parse(e);"object"!=typeof s&&(s={}),n.emit("finish",s,i)}else n.emit("finish")},s.ontimeout=function(){s.close(),n.emit("finish")}};var W=function(e){var n=this,o=function(){var t=new L;t.protocol="w-iframe-info-receiver";var i=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var i=JSON.parse(e.substr(1)),o=i[0],s=i[1];n.emit("finish",o,s)}else n.emit("finish");t.doCleanup(),t=null},o={_options:{},_didClose:i,_didMessage:i};t.i_constructor(o,e,e)};t.body?o():i.attachEvent("load",o)};W.prototype=new s(["finish"]);var H=function(){var t=this;i.delay(function(){t.emit("finish",{},2e3)})};H.prototype=new s(["finish"]);var U=function(t){if(i.isSameOriginUrl(t))return new z(t,i.XHRLocalObject);switch(i.isXHRCorsCapable()){case 1:return new z(t,i.XHRLocalObject);case 2:return new z(t,i.XDRObject);case 3:return new W(t);default:return new H}},q=$["w-iframe-info-receiver"]=function(t,e,n){var o=new z(n,i.XHRLocalObject);o.onfinish=function(e,i){t._didMessage("m"+JSON.stringify([e,i])),t._didClose()}};q.prototype.doCleanup=function(){};var V=M["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};V.prototype=new L,V.enabled=function(){return"EventSource"in e&&L.enabled()},V.need_body=!0,V.roundTrips=3;var K=$["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",Q,i.XHRLocalObject)};K.prototype=new D;var G=M["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};G.prototype=new L,G.enabled=function(){return e.XMLHttpRequest&&L.enabled()},G.need_body=!0,G.roundTrips=3;var Y=$["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",nt,i.XHRLocalObject)};Y.prototype=new D;var J=M["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};J.prototype=new L,J.enabled=function(){return L.enabled()},J.need_body=!0,J.roundTrips=3;var X=$["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",it,i.XHRLocalObject)};X.prototype=new D;var Z=function(t,e,i,n){var o=this;o.ri=t,o.Receiver=e,o.recv_url=i,o.AjaxObject=n,o._scheduleRecv()};Z.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),i=0;e.onmessage=function(e){i+=1,t.ri._didMessage(e.data)},e.onclose=function(i){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===i.reason?t.ri._didClose(1006,"Polling error ("+i.reason+")"):t._scheduleRecv())}},Z.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var Q=function(t){var e=this,n=new EventSource(t);n.onmessage=function(t){e.dispatchEvent(new o("message",{data:unescape(t.data)}))},e.es_close=n.onerror=function(t,s){var r=s?"user":2!==n.readyState?"network":"permanent";e.es_close=n.onmessage=n.onerror=null,n.close(),n=null,i.delay(200,function(){e.dispatchEvent(new o("close",{reason:r}))})}};Q.prototype=new n,Q.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var tt,et=function(){if(void 0===tt)if("ActiveXObject"in e)try{tt=!!new ActiveXObject("htmlfile")}catch(t){}else tt=!1;return tt},it=function(t){var n=this;i.polluteGlobalNamespace(),n.id="a"+i.random_string(6,26),t+=(-1===t.indexOf("?")?"?":"&")+"c="+escape(a+"."+n.id);var s,r=et()?i.createHtmlfile:i.createIframe;e[a][n.id]={start:function(){s.loaded()},message:function(t){n.dispatchEvent(new o("message",{data:t}))},stop:function(){n.iframe_close({},"network")}},n.iframe_close=function(t,i){s.cleanup(),n.iframe_close=s=null,delete e[a][n.id],n.dispatchEvent(new o("close",{reason:i}))},s=r(t,function(t){n.iframe_close({},"permanent")})};it.prototype=new n,it.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var nt=function(t,e){var i=this,n=0;i.xo=new e("POST",t,null),i.xo.onchunk=function(t,e){if(200===t)for(;;){var s=e.slice(n),r=s.indexOf("\n");if(-1===r)break;n+=r+1;var a=s.slice(0,r);i.dispatchEvent(new o("message",{data:a}))}},i.xo.onfinish=function(t,e){i.xo.onchunk(t,e),i.xo=null;var n=200===t?"network":"permanent";i.dispatchEvent(new o("close",{reason:n}))}};return nt.prototype=new n,nt.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new o("close",{reason:"user"})),t.xo=null)},M.getUtils=function(){return i},M.getIframeTransport=function(){return L},M}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return t}),function(){"use strict";var e,i,n,o={},s=!1,r=0,a=!1,l=!0,c=[],u=!0;BEM.decl("i-xiva",{},{listen:function(t,e,i,n){var s=!o[t],r=n&&n.force;s&&(o[t]={handlers:[]}),o[t].ignoreFilterByTime=n&&n.ignoreFilterByTime,o[t].ignoreBlurEvent=n&&n.ignoreBlurEvent,o[t].ts=e,o[t].handlers.push(i),this._init(r),s&&this._updateSubscription();
},stopListen:function(t,e){o[t]&&(o[t].handlers=o[t].handlers.filter(function(t){return t!==e}),o[t].handlers.length||(delete o[t],this._updateSubscription()))},send:function(t){var e;this._hasXivaSupport()&&t&&t.ch&&(this._connected||this._init(!0),e=JSON.stringify(t),this._sendQueue.push(e),this._sendDelayed())},_sendQueue:[],_sendDelayed:function(){var t;if(this._connected)for(;this._sendQueue.length;)t=this._sendQueue.pop(),e.send(t)},connect:function(){l=!0,this._connect()},disconnect:function(t){l=t,e&&e.close&&e.close(1e3,"unload")},_deliverReceived:function(){var t,e,i,n=!0;for(t=0,e=c.length;e>t;++t)(i=c[t].handler)(c[t].data,n);c=[]},_toggleFocus:function(t){u=t,u&&this._deliverReceived()},_initFocusEvents:function(){var t=this;$.browser&&$.browser.msie?$(document).bind("focusout",function(){t._toggleFocus(!1)}).bind("focusin",function(){t._toggleFocus(!0)}):$(window).focus(function(){t._toggleFocus(!0)}).blur(function(){document.activeElement&&"IFRAME"===document.activeElement.tagName||t._toggleFocus(!1)})},_bindOnUnload:function(){var t=this;$(window).on("beforeunload",function(){t.disconnect(!1)})},_init:function(t){s&&!t||this._connected||(s=!0,this._initFocusEvents(),this._bindOnUnload(),this._connect=this._connect.bind(this),clearTimeout(this._connectTimeout),t?this._connect():this._connectTimeout=setTimeout(function(){this._connect()}.bind(this),6e4))},_hasXivaSupport:function(){return!!window.WebSocket},_connect:function(){var i=home.getData("i-xiva.url");this._hasXivaSupport()&&i&&(e||(e=new t("//"+i+"/xiva",null,{protocols_whitelist:["websocket"]}),e.onopen=function(){this._connected=!0,this._updateSubscription(),this._checkConnection(),this._sendDelayed()}.bind(this),e.onmessage=this._onMessage.bind(this),e.onclose=function(){this._connected=!1,e=null,this._reconnect()}.bind(this)))},_reconnect:function(){this._stopConnectionTimer(),l&&(r++,5>=r?setTimeout(this._connect,3e3):15>=r?setTimeout(this._connect,1e4):setTimeout(this._connect,6e4))},_stopConnectionTimer:function(){i&&(clearTimeout(i),i=null)},_checkConnection:function(){this._stopConnectionTimer(),i=setTimeout(function(){a&&(r=0)},5e3)},_updateSubscription:function(){n&&clearTimeout(n),n=setTimeout(function(){this._subscribeSend()}.bind(this),100)},_subscribeSend:function(){var t;if(this._connected){t={subscribe:{}};for(var i in o)o.hasOwnProperty(i)&&(t.subscribe[i]=o[i].ts);e.send(JSON.stringify(t))}},_onMessage:function(t){var e,i,n,s,r=$.trim(t.data);try{if(e=JSON.parse(r),n=e.ch+"_"+e.key,e.mts&&(this._timeDelta=+new Date-e.mts),o[n]&&(i=parseInt(e.ts),o[n].ts<i||o[n].ignoreFilterByTime)){o[n].ts=i,s=o[n].handlers;for(var a=0,l=s.length;l>a;++a)u||o[n].ignoreBlurEvent?s[a](e):c.push({handler:s[a],data:e})}}catch(h){}},getTimeDelta:function(){return this._timeDelta}})}()}(),$(function(){function t(){var e=window.innerHeight,n=$(window).scrollTop();!i()&&n+e>a+.33*l&&(s.addClass("yac-promo_fade-out"),setTimeout(function(t){t.remove()}.bind(this,s),300),BEM.channel("i-scroll-event").un("scroll",t))}function e(){var t=$(".media-broadcast").offset().top,e=$(window).scrollTop(),n=window.innerHeight;return i()||t+30>e+n}function i(){return o.hasMod("collapsed","yes")}if(home.getData("yac-promo.enabled")){var n="CSS"in window&&CSS.supports&&(CSS.supports("position","sticky")||CSS.supports("position","-webkit-sticky"));if(n){var o=$(".media-grid").bem("media-grid");if(e()){var s=$(home.view("yac-promo__layout",{title:home.l10n("media.broadcast.yac2018.title")}));s.insertBefore(".rows__row_last").on("click",function(){BEM.blocks["media-broadcast"].scrollToBlock(),home.stat.logPath("click","yac.promo")}),home.stat.logPath("show","yac.promo");var r=$(".media-broadcast"),a=r.offset().top,l=r.height();BEM.channel("i-scroll-event").on("scroll",t)}}}}),$.extend({debounce:function(t,e,i,n){var o,s=function(){var s=arguments;n=n||this,i&&!o&&t.apply(n,s),clearTimeout(o),o=setTimeout(function(){i||t.apply(n,s),o=null},e)};return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),s.stop=function(){clearTimeout(o),o=null},s},throttle:function(t,e,i){var n,o,s,r=function(){o=arguments,s=!0,i=i||this,n||function(){s?(t.apply(i,o),s=!1,n=setTimeout(arguments.callee,e)):n=null}()};return r.stop=function(){clearTimeout(n),n=null},r}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var t=this._getUser();t&&t.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var t=0;return this.elem("nav").children().each(function(){t+=$(this).outerWidth(!0)}),t},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1}),BEM.DOM.decl("b-errormsg",{onSetMod:{js:{inited:function(){this.bindTo("close","pointerclick",function(){home.stat.logPath("click","errormsg.close"),this.setMod("hidden","yes")})}}}}),BEM.DOM.decl("b-time-banner",{onSetMod:{js:function(){this.now=Math.round((new Date).getTime()/1e3),this.params.type&&BEM.blocks["i-message-locker"].acquireLock("b-time-banner").then(this.show.bind(this))}},show:function(){var t=this.params,e=t.type,i=t.typeData;(new Image).src=i.show_url,this.domElem.appendTo($(".b-time-banner__place")),this.setMod("type",e),this.bindTo("close","click",this.close),this.elem("inner").html(home.view("b-time-banner__inner",{type:e,text:i.text,helpUrl:t.helpUrl,helpQuery:t.helpQuery,now:this._convertTimestampToString(1e3*t.now),timestamp:this._convertTimestampToString(home.now())})),this.elem("close").attr("data-statlog","wrong_date."+e+".close"),this.setMod("shown","yes"),this.domElem.parents(".b-stripe-wrapper").show()},close:function(){this.setMod("shown","no"),(new Image).src=this.params.typeData.close_url},getDefaultParams:function(){var t=Math.round((new Date).getTime()/1e3),e=this._params,i=e.alert||{},n=i.show&&(i.till_ts>t||i.from_ts&&i.from_ts<t)?"alert":!1;return{now:t,type:n,typeData:e[n]}},_convertTimestampToString:function(t){var e=new Date(t),i=Math.abs(this.params.now-this.params.timestamp)<15379200?home.l10n("time-alert.date_format_short"):home.l10n("time-alert.date_format_long");return i.replace("%day",e.getDate()).replace("%month",home.l10n("spok_yes.month_accus."+(e.getMonth()+1))).replace("%year",e.getFullYear())}}),BEM.DOM.decl("win10-stripe",{onSetMod:{js:function(){this.bindToWin("scroll",this.fixScroll)}},fixScroll:function(){var t;t=window.pageXOffset,this.domElem.css({marginLeft:"-"+t+"px"})}}),BEM.DOM.decl("content-tabs",{onClick:function(t,e){var i=e.closest(".content-tabs__head-item");this.hasMod(i,"active","true")||(this.switchTo(i,!0),t.preventDefault())},toggleTab:function(t,e){var i=t.data("stat"),n=t.find(".content-tabs__link");this.toggleMod(t,"active","true","false",e),n.attr("aria-selected",e?"true":"false"),n.attr("tabindex",e?"0":"-1"),this.saveTab(t),i&&e&&home.stat.logPath("click",i)},togglePanel:function(t,e){this.toggleMod(t,"active","true","false",e),t.attr("aria-hidden",e?"false":"true")},switchTo:function(t,e){var i=t.attr("id");this.toggleTab(this.elem("head-item","active","true"),!1),this.toggleTab(t,!0),this.togglePanel(this.elem("items","active","true"),!1),this.togglePanel(this.domElem.find("#"+i+"c"),!0),e&&t.find(".content-tabs__link").focus(),this.trigger("switch",i),home.stat.logDOMShow(this.domElem),BEM.blocks["tabs-stat"].sendTabStat(t)},getFrame:function(){var t=this.elem("frame");return t&&t.length||(t=$('<iframe style="display:none" class="content-tabs__frame" name="content-tabs__frame"></frame>'),this.domElem.append(t),this.dropElemCache("frame")),t},saveTab:function(t){var e=t.data("save-url");if(e){var i=this.getFrame();i.attr("src",e)}},selectRelative:function(t){var e=this.elem("head-item"),i=this.elem("head-item","active","true"),n=$.inArray(i[0],e)+t;return n>=e.length?n=0:0>n&&(n=e.length-1),this.switchTo(e.eq(n),!0),!1},selectFirstTab:function(){var t=this.elem("head-item");return this.switchTo(t.eq(0),!0),!1},selectLastTab:function(){var t=this.elem("head-item");return this.switchTo(t.eq(t.length-1),!0),!1}},{_selectedTabs:{},live:function(){$("body").on("click",".content-tabs__link",function(t){var e=$(t.target);e.closest(".content-tabs").bem("content-tabs").onClick(t,e)}),this.liveBindKey("link","left",function(){return this.selectRelative(-1)}),this.liveBindKey("link","right",function(){return this.selectRelative(1)}),this.liveBindKey("link","home",function(){return this.selectFirstTab()}),this.liveBindKey("link","end",function(){return this.selectLastTab()})}}),BEM.DOM.decl("content-tabs",{onSetMod:{js:{inited:function(){var t,e=this.params.storeClientTabs,i=this.__self._selectedTabs;e&&(e in i&&(t=$("#"+i[this.params.storeClientTabs],this.domElem),t.length&&this.switchTo(t)),this.on("switch",function(t,n){i[e]=n}))}}}}),function(){"use strict";BEM.decl("tabs-stat",{},{sendTabStat:function(t){if(!t.attr("data-tabs-stat-sent")){var e=t.attr("data-tabs-stat"),i="/portal/log/json/?type=morda-topnews",n=!1;if(e&&e.length){if("sendBeacon"in navigator&&"FormData"in window){var o=new FormData;o.append("data",e),n=navigator.sendBeacon(i,o)}n||$.ajax({url:i,type:"POST",data:{data:e}}),t.attr("data-tabs-stat-sent","1")}}}})}(),BEM.DOM.decl("datetime",{onSetMod:{js:{inited:function(){var t=this;this._initDate(),this._prevDay=null,this._settedHour="",this._settedMin="",this._serverDate&&"Invalid Date"!==this._serverDate.toString()&&!isNaN(this._serverDate)&&(this.afterCurrentEvent(this._iterate),this._interval=setInterval(function(){t._iterate(),t._blink()},1e3))}}},destruct:function(){clearInterval(this._interval),this.__base.apply(this,arguments)},_initDate:function(){this._serverDate=new Date(this.params.timestamp+" GMT+0000"),this._loadDate=new Date},_iterate:function(){var t=new Date,e=new Date(this._serverDate.getTime()+(t.getTime()-this._loadDate.getTime()));this._proceedNewDate(e,t)},_proceedNewDate:function(t){var e,i;0===t.getUTCHours()&&0===t.getUTCMinutes()&&this._proceedNextDay(t),e=this._format(t.getUTCHours()),i=this._format(t.getUTCMinutes()),e===this._settedHour&&i===this._settedMin||(this._settedHour=e,this._settedMin=i,this.elem("hour").text(e),this.elem("min").text(i))},_proceedNextDay:function(t){var e=t.getDay();this._prevDay===e||this.hasMod("time-only","yes")||(this._drawNextDay(t,e),this._prevDay=e)},_drawNextDay:function(t,e){var i=this.findElem("date"),n=home.getData("datetime.data",{}),o=this.hasMod("short","yes")?n.monthShortArr:n.monthArr;i.length&&o&&i.replaceWith(home.view("datetime__date",{day:t.getDate(),month:o[t.getMonth()],wday:n.weekArr[e]}))},_format:function(t){return t>9?""+t:"0"+t},_blink:function(){this.toggleMod("time-hidden","yes")}}),BEM.DOM.decl({block:"news",modName:"animation",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOutside("widget"),e=t&&t.getInstance(),i=!e||e.getValue("autoreload");i&&"false"!==i&&this.initAnimation()}}},destruct:function(){this.deinitAnimation()},_onTabSwitch:function(){this._stopRotation(),this._startRotation()},_onVisibilityChange:function(t,e){e.hidden?this._stopRotation():this._startRotation()},initAnimation:function(){this._timeout=setTimeout(this.changeThis(function(){this._rotate(),this._startRotation()}),this.params.firstInterval),this.findBlockInside("content-tabs").on("switch",this._onTabSwitch,this),this.channel("sys").on("visibilitychange",this._onVisibilityChange,this),this.bindTo("animation-list","pointerenter",this._stopRotation),this.bindTo("animation-list","pointerleave",this._startRotation)},deinitAnimation:function(){this.findBlockInside("content-tabs").un("switch",this._onTabSwitch,this),this.channel("sys").un("visibilitychange",this._onVisibilityChange,this),this._stopRotation(),this.__base.apply(this,arguments)},_startRotation:function(){this._interval||(this._interval=setInterval(this._rotate.bind(this),this.params.interval))},_stopRotation:function(){this._interval&&(clearInterval(this._interval),this._interval=null),this._timeout&&(clearTimeout(this._timeout),this._timeout=null)},_rotate:function(){var t=this.findElem(this.domElem.find(".content-tabs__items_active_true"),"animation-list");if(t.length){var e=t.find(".list__item"),i=e.filter(".list__item_fade_in"),n=i.next();n.length||(n=e.eq(0)),n.addClass("list__item_fade_in"),i.removeClass("list__item_fade_in").addClass("list__item_fade_out"),setTimeout(function(t){t.removeClass("list__item_fade_out")}.bind(this,i),this.__self.ANIMATION_DURATION)}}},{ANIMATION_DURATION:400}),BEM.DOM.decl("traffic",{onSetMod:{compact:function(){if(this.params.saveUrl){var t=$(".traffic__frame");t.length||(t=$('<iframe class="traffic__frame" name="traffic__frame" style="display:none"></iframe>'),$(document.body).append(t)),t.attr("src",this.params.saveUrl)}}}},{live:function(){this.liveBindTo("more","pointerclick",function(){this.delMod("compact")})}}),home.decline=function(t,e){return e&&e.length?0===t&&e[3]?e[3]:e[1]||e[2]?e[2]?(t%=100,t>=20&&(t%=10),1===t?e[0]:t>1&&5>t?e[1]:e[2]):t>=0&&1>=t?e[0]:e[1]:e[0]:""},BEM.DOM.decl("inline-stocks",{onSetMod:{js:function(){this.bindMouseEvents(),this.xivainitTimer=setTimeout(this.changeThis(this.initXiva),6e4)}},bindMouseEvents:function(){if(!window.device){var t={root:{name:"hovered",val:"yes"},item:{name:"hint",val:"visible",elem:".inline-stocks__item"}};this.bindTo("mouseenter",this.getOnmouseenter(t.root)),this.bindTo("mouseleave",this.getOnmouseleave(t.root)),this.bindTo("item","mouseenter",this.getOnmouseenter(t.item)),this.bindTo("item","mouseleave",this.getOnmouseleave(t.item))}},getOnmouseenter:function(t){return function(e){var i=this;t.countdown||(t.countdown=setTimeout(function(){if(t.countdown=null,t.elem){var n=$(e.target).closest(t.elem);i.setMod(n,t.name,t.val)}else i.setMod(t.name,t.val)},t.delay||250))}},getOnmouseleave:function(t){return function(e){var i=this;if(clearTimeout(t.countdown),t.countdown=null,t.elem){var n=$(e.target).closest(t.elem);i.delMod(n,t.name)}else i.delMod(t.name)}},initXiva:function(){var t=home.getData("inline-stocks.xivas")||[],e=this;t.forEach(function(t){BEM.blocks["i-xiva"].listen(t.ch,t.ts,function(t){e.updateFunc(t.dt)})})},updateFunc:function(t){if(t&&t.id){var e=t.id,i=this.elem("item","id",e);if(i.length){t=t.data&&t.data[0],$(".inline-stocks__value_inner",i).html(t.value);var n=this.findElem(i,"cell","type","delta"),o=this.findElem(i,"cell","type","delta-label");t.delta?(this.delMod(n,"hidden"),n.html(t.delta),o.html(t.delta.replace("−","-")),this.setMod(n,"delta",t.is_hot?"hot":"small")):(this.setMod(n,"hidden","yes"),o.html(""));var s=home.getData("inline-stocks.alts")||{};s[e]&&$(".inline-stocks__item__baloon_inner",i).html(s[e].replace("%d",t.date).replace("%t",t.time))}}}}),function(){var t=6e4;BEM.DOM.decl({block:"inline-stocks",modName:"new",modVal:"yes"},{onSetMod:{js:function(){this.__base(),this.bindTo("more","pointerclick",this.toggleMore),this.bindTo("more","keydown",this._keydown),this.getPopup()._owner=this.domElem}},_keydown:function(t){if(!(t.altKey||t.metaKey||t.ctrlKey||t.shiftKey))switch(t.which){case 32:case 13:t.preventDefault(),this.toggleMore()}},toggleMore:function(){var t=this.getPopup();t.isShown()||this.onShow(t),t.toggle(this.domElem)},getPopup:function(){return this.__self._popup||(this.__self._popup=this.createPopup())},onShow:function(e){var i=this;return!this.data||this.data&&this.datats&&Number(new Date-this.datats)>t?(i.toggleState("load"),$.ajax({url:this.params.stocksUrl,dataType:"json",success:function(t){return t&&t.Stocks?(i.needTopNewsUpdate&&(i.needTopNewsUpdate=!1,i.updateTopNews()),i.datats=Number(new Date),i.data=t,i.createTable(t,e),void i.onShow(e)):void i.toggleState("error")},error:function(){i.toggleState("error")}})):(this.toggleState("tables"),home.stat.logDOMShow(e.domElem,{visibilityCheck:!1}),this.getPopup()._unbindFocusEvents(),void this.getPopup()._bindFocusEvents())},createPopup:function(){var t=-25,e=this.domElem.offset().left,i=$(document.body).width();e>i/2&&(t=Math.floor(i/3)-e);var n=this.params.editShow,o=$(BEMHTML.apply({block:"popup",mods:{theme:"ffffff",autoclosable:"yes",animate:"yes",adaptive:"yes"},cls:"inline-stocks__popup-wrap",js:{directions:[{to:"bottom",axis:"left",offset:{left:t,top:-25}}]},content:[{block:"inline-stocks",elem:"tune",tag:"a",cls:"b-widget__control"+(n?"":" inline-stocks__tune_hidden"),content:'<i class="b-ico b-ico-widget-prefs"></i>',attrs:{href:"?edit=1#open=_stocks","data-statlog":"news_rates_manual.popup.tune"}},{elem:"close",attrs:{"data-statlog":"news_rates_manual.popup.close"}},{elem:"content",mods:{padded:"old"}}]}));return o=this.findBlockOn(o,"popup"),this.__self.popup=this.elem("popup"),o.elem("content").append(this.__self.popup),this.getInstance()&&this.bindTo(this.findElem(o.domElem,"tune"),"click",this.showForm),o.on("show hide",function(){this.isShown()?this.elem("more").attr("aria-expanded","true"):this.elem("more").attr("aria-expanded","false")}),o.on("outside-click",function(t,e){return $(e.target).closest("#widget_pref_form").length?!1:void 0}),o},templates:{val:function(t){return'<td><i class="inline-stocks__cell">'+t.value+"</i></td>"},delta:function(t,e){var i,n=home.getData("inline-stocks.alts");return e&&n&&(i=n.bigdiff.replace(/%d%(%)/,e+"$1")),t.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(t.is_hot?"hot":"small")+'"'+(i&&t.is_hot?' title="'+i+'"':"")+' aria-hidden="true">'+t.delta+'</i><span class="a11y-hidden">'+String(t.delta).replace("−","-")+"</span></td>":""},date:function(t){var e=t.datetime||t.time||t.date;return e?'<td><i class="inline-stocks__cell_datetime">'+e+"</i></td>":""}},rowsByType:{cash:function(t){return t.map(this.templates.val).join("")},currency:function(t,e){return t.map(function(t,i){return(i?this.templates.delta(t,e):"")+this.templates.val(t)},this).join("")},indexes:function(t,e){var i=t[0];return this.templates.date(i)+this.templates.delta(i,e)+this.templates.val(i)}},createTable:function(t){var e=this,i=home.view("inline-stocks__tables",t.Stocks),n=this.findElem(this.__self.popup,"tables");n.html(i),this.findElem(n,"table").each(function(){e.toggleTommorrowTitleVisibility($(this))})},toggleTommorrowTitleVisibility:function(t){var e=this.getMod(t,"type");if("indexes"!==e){var i=t.find("tr:not(.inline-stocks__head)"),n=0;i.each(function(){var t=$(this).find("td").length;t>n&&(n=t)});var o="hide";(n>3&&"currency"===e||n>2&&"cash"===e)&&(o="show"),t.find(".inline-stocks__head .inline-stocks__cell:last")[o]()}},updateFunc:function(t){this.__base(t)},replaceCaps:function(t){return t.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,i){switch(e){case"c":return'<span class="b-stocks__caps">'+i+"</span>";case"d":return'<span class="b-stocks__numbers">'+i+"</span>";default:return t}})},toggleState:function(t){this.setMod(this.__self.popup,"state",t)},getId:function(){return"_stocks-1"},getInstance:function(){return window.Widget&&Widget.Framework.get("_stocks-1")},showForm:function(t){var e=this;t.preventDefault(),this.toggleMore(),$(".b-wdgt-preferences").bem("b-wdgt-preferences").show($("#wd-wrapper-"+this.getId()).bem("widget"),function(){e.needTopNewsUpdate=!0,e.data=null,e.toggleMore()})},updateTopNews:function(){var t=$("#wd-wrapper-_topnews-1").bem("widget");t.getInstance().reload(!1,!1,!0)}})}(),function(t,e,i){function n(t,e,i){(t[e]||(t[e]=[])).unshift(i)}function o(t,e){return e.modName?function(i){(i._curBlock.mods||{})[e.modName]===e.modVal&&t(i)}:t}function s(t,i){var n,o=e.isArray(i);return e.isArray(t)?o?n=t.concat(i):(n=t).push(i):o?(n=i).unshift(t):n=[t,i],n}function r(t){return t.replace(f,function(t){return p[t]})}var a=t.INTERNAL,l=a.ELEM_DELIM,c={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},u=a.buildClass,h=a.buildClasses,d={},p={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function(t,i){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var s=d[t.block]||(d[t.block]={});i.onBlock&&n(s,"_block",o(i.onBlock,t)),i.onElem&&(e.isFunction(i.onElem)?n(s,"_elem",o(i.onElem,t)):e.each(i.onElem,function(e,i){n(s,"_elem"+("*"===e?"":l+e),o(i,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=i},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,i,n,o){var s=this,r=s._params;return"undefined"==typeof i?r[t]:(!n&&t in r?o&&(r[t]=e.extend(i,r[t])):r[t]=i,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.attrs||{})[t];var o=n._params.attrs;return o?(i||!(t in o))&&(o[t]=e):(n._params.attrs={})[t]=e,n},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.mods||{})[t];var o=n._params.mods;return o?(i||!(t in o))&&(o[t]=e):(n._params.mods={})[t]=e,n},mix:function(t,e){var i=this,n=i._params;return"undefined"==typeof t?n.mix:(!e&&"mix"in n?n.mix=n.mix.concat(t):n.mix=t,i)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,i=e._params;return t.content=i.content,i.content=t,e},beforeContent:function(t){var e=this,i=e._params;return i.content=s(t,i.content),e},afterContent:function(t){var e=this,i=e._params;return i.content=s(i.content,t),e},wrap:function(t){var e=this,i=e._params;return t.block||(t._curBlock=e._curBlock),t.content=i._wrapper?i._wrapper:i,i._wrapper=t,e},tParam:function(t,e){var i=this,n=i._tParams||(i._tParams={});if("undefined"==typeof e)return n[t];var o=i._tParamsChanges||(i._tParamsChanges={});return t in o||(o[t]=n[t]),n[t]=e,i},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,i=t._buffer,n=t._params,o=typeof n;if("string"===o||"number"===o)i.push(n);else if(e.isArray(n))for(var s,r,a=0,l=n.length;l>a;)t._params=s=n[a++],r=typeof s,"string"===r||"number"===r?i.push(s):s&&(s._pos=a,s._siblingsCount=l,t._buildByDecl());else n&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,i=this,n=i._buffer,o=i._params,s=o.tag||"div",a=o.block||o.elem,l=a&&(o.block||i._curBlock.block),d=!1;o.js&&((t={})[u(l,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),n.push("<",s),(a||o.cls)&&(n.push(' class="'),a&&(h(l,o.elem,o.mods,n),o.mix&&e.each(o.mix,function(e,i){i&&(n.push(" "),h(i.block,i.elem,i.mods,n),i.js&&((t||(t={}))[u(i.block,i.elem)]=i.js===!0?{}:i.js,d||(d=!i.elem)))})),o.cls&&n.push(a?" ":"",o.cls),d&&n.push(" i-bem"),n.push('"')),t&&n.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&n.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),c[s]?n.push("/>"):(n.push(">"),"undefined"!=typeof o.content&&(i._params=o.content,i._buildAll()),n.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,i=t._curBlock,n=t._params;if(n._curBlock&&(t._curBlock=n._curBlock),n.block&&(t._curBlock=n),!n._wrapper){if(n.block||n.elem){var o=d[t._curBlock.block];if(o){var s;if(n.elem?(s=o["_elem"+l+n.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!n._isStopped););}}if(n._wrapper)return n._curBlock=t._curBlock,t._params=n._wrapper,t._buildAll()}var c=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=i,c){var u=t._tParams;e.each(c,function(t,e){"undefined"==typeof e?delete u[t]:u[t]=e})}}})}}(BEM,jQuery),BEM.DOM.decl("widget",{onSetMod:{js:function(){this.tuned=!1,this.createControl(),this.listenToXiva(),this.bindTo("mouseenter",this.changeThis(function(){this.setMod("hovered","yes")})),this.bindTo("mouseleave",this.changeThis(function(){this.delMod("hovered")})),this.channel("widget").on("hidePreferences",this.onHidePreferences,this)},hovered:{yes:function(){},"":function(){}},drag:{on:function(){this.createDrag(),this.getInstance().stopAutoReload()},"":function(){this.getInstance().queueAutoReload()}},removed:function(t,e){var i=this.getInstance(),n="yes"===e;i&&(i.params.removed=n),this.channel("widget").trigger("commit",{type:n?"remove":"recover",id:this.getId()}),n?this.getInstance().stopAutoReload():this.getInstance().queueAutoReload()},state:{add:function(){this.getSaveButtons().appendTo(this.domElem),this.setMod("drag","on"),this.getInstance().stopAutoReload(),this.bindToWin("widgetLoaded",function(t){t.id===this.getId()&&(this.elem("buttons").height(41).height(40),this.elem("accept").focus())})},remove:function(){var t=this.__self.getRmPopup(),e=this.changeThis(function(){this.setMod("removed","yes")}),i=this.changeThis(function(){this.delMod("state")});t.show(this,e,i)},"":function(){this.elem("buttons").detach(),this.getInstance().queueAutoReload(),this.unbindFromWin("widgetLoaded")}}},destruct:function(){this.channel("widget").un("hidePreferences",this.onHidePreferences,this),this.__base.apply(this,arguments)},onHidePreferences:function(t,e){this===e.elem&&this.hasMod("state","add")&&!this.tuned&&this.abortAdd()},createControl:function(){if(!this.control){var t,e,i,n,o=this.getInstance(),s={};if(o)s=o.params,n=$(".widget[id*="+s.intclassid+"]:visible").length>1,t=!s.is_default||s.default_removable||n,e=!s.is_default&&s.isWidgetWorkNormal,i=s.havePrefsFrom&&s.isWidgetWorkNormal;else{var r=this.getId();i=-1===["_afisha","_teaser","_geo"].indexOf(r),s.prefsUrl="/?edit=1#open="+this.params.id,("_services"===r&&home.getData("widgets.disable_services_prefs")||"_weather"===r&&home.getData("widgets.disable_weather_prefs"))&&(i=null)}this.control=$(BEMHTML.apply({block:"widget",elem:"control",content:[i?{elem:"control-icon",href:s.prefsUrl,icon:"widget-prefs",cls:"widget__prefs",attrs:{title:home.l10n("widgetcontrol.setup")}}:"",e?{elem:"control-icon",icon:"widget-share",cls:"widget__share",attrs:{title:home.l10n("widgetcontrol.share")}}:"",{elem:"control-icon",icon:"widget-rm",cls:"widget__remove"+(t?"":" widget__remove-shy"),attrs:{title:home.l10n("widgetcontrol.delete")}}]})),this.domElem.append(this.control)}},createDrag:function(){return this.elem("drag").length||(this.domElem.append('<div class="widget__drag"></div>'),this.dropElemCache("drag")),this.elem("drag")},getInstance:function(){return this.instance||(this.instance=Widget.Framework.getByWrapperId(this.domElem.attr("id"))),this.instance},getId:function(){return this.params.id||this.getInstance().id},markChanged:function(t,e){var i=this.getInstance();i&&i.markChanged(t,e),e&&(this.tuned=!0,this.channel("widget").trigger("tuned",{type:"tuned",elem:this}))},remove:function(){this.hasMod("drag","on")?this.setMod("removed","yes"):this.setMod("state","remove")},share:function(){this.__self.queryShare(this)},showPrefs:function(){return this.hasMod("mode","plain")?void 0:(this.__self.queryPrefs(this),!1)},accept:function(){this.channel("widget").trigger("commit",{type:"add",id:this.getId()}),this.delMod("state")},getSaveButtons:function(){var t=this.elem("buttons");return t.length||(this.dropElemCache("buttons"),t=$(BEMHTML.apply({block:"widget",elem:"buttons",content:[{cls:"buttons-line buttons-line_borders_horizontal",content:[{block:"button",mods:{size:"m"},cls:"widget__reject",content:home.l10n("widgetbaloon.cancel")},{block:"button",mods:{theme:"action",size:"m"},cls:"widget__accept",content:home.l10n("widgetbaloon.keep")}]},this.hasMod("yandex")?"":{elem:"warn",content:home.l10n("securityMessages.noYandexWidgetAddedA")}]}))),t},abortAdd:function(){var t=this.getInstance();t&&(t.params.removed=!0),this.channel("widget").trigger("abort-add",{elem:this}),this.destruct()},listenToXiva:function(){var t=this.getInstance();this.params.xivas&&t&&t.params.rebind&&this.params.xivas.forEach(function(t){BEM.blocks["i-xiva"].listen(t.ch,t.ts,this.changeThis(function(){this.reloading||(this.reloading=!0,this.getInstance().iReload(this.changeThis(function(){this.reloading=!1})))}))},this)},reload:function(){this.getInstance().reload()}},{live:function(){return this.liveInitOnEvent("mouseover",function(){this.createControl(),this.afterCurrentEvent(function(){this.setMod("hovered","yes")})}),this.liveBindTo("force-remove","pointerclick",function(){this.setMod("removed","yes")}),this.liveBindTo("accept","pointerclick",function(){this.accept()}),this.liveBindTo("reject","pointerclick",function(){this.abortAdd()}),this.liveBindTo("remove","pointerclick",function(){this.remove()}),this.liveBindTo("share","pointerclick",function(){this.share()}),this.liveBindTo("prefs","pointerclick",function(){this.showPrefs()}),!1},queryPrefs:function(t){var e=this.getPrefsPopup();e.show(t,function(){this.reload()})},queryShare:function(t){var e=t.getInstance();e&&this.getSharePopup().show(e)},getRmPopup:function(){return this.rmPopup||(this.rmPopup=$(".b-wdgt-remove").bem("b-wdgt-remove")),this.rmPopup},getSharePopup:function(){return this.sharePopup||(this.sharePopup=$(".b-wdgt-share").bem("b-wdgt-share")),this.sharePopup},getPrefsPopup:function(){return this.prefsPopup||(this.prefsPopup=$(".b-wdgt-preferences").bem("b-wdgt-preferences")),this.prefsPopup}}),BEM.DOM.decl({name:"widget",modName:"name",modVal:"stocks"},{reload:function(){"_stocks-1"===this.params.id?this.reloadTopNews():this.__base.apply(this)},reloadTopNews:function(){var t=$("#wd-wrapper-_topnews-1").bem("widget");t.getInstance().reload(!1,!1,!0)}}),BEM.DOM.decl({block:"teaser",modName:"install",modVal:"inline"},{_install:function(){var t=this.params,e=t.counters||{};return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:t.api}},$.extend(t,{callbacks:{yes:function(){e.install&&((new Image).src=e.install)},no:function(){e.cancel&&((new Image).src=e.cancel)}}}))),this._inlineInstall.request().fail(function(){window.location=t.url}),e.click&&((new Image).src=e.click),!1}},{live:function(){return this.liveBindTo("link","pointerclick",function(){return this._install()}),!0}}),BEM.decl({block:"i-inline-install",modName:"api",modVal:"opera"},{_checkApi:function(){return!!window.opr&&window.opr.addons&&window.opr.addons.installExtension},_requestApi:function(t,e,i){window.opr.addons.installExtension(t,e,i)}}),BEM.DOM.decl({block:"teaser",modName:"install",modVal:"download"},{_install:function(){return this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),!1}},{live:function(){return this.liveBindTo("link","pointerclick",function(){return this._install()}),!0}}),BEM.decl("i-install-download",{init:function(){var t=home.view("popup",{mods:{type:"download",position:"fixed","has-close":"yes"},mix:"i-install-download__popup i-bem",attrs:{"bem-js":home.getBEMParams({popup:{}})},content:home.view("i-install-download__content",this.params)});this._popup=BEM.DOM.append(BEM.DOM.scope,t).bem("popup"),this._popup.on("show",function(){$("body").addClass("b-page_overflow_hidden");
}),this._popup.on("hide",function(){$("body").removeClass("b-page_overflow_hidden")}),this.inited=!0},download:function(){return this.inited||this.init(),this._download(),setTimeout(function(){this._popup.show({top:0})}.bind(this),500),this},_countDownload:function(){this.params.counters.click&&((new Image).src=this.params.counters.click)},_download:function(){var t=document.createElement("iframe");$(t).addClass("i-install-download__frame-hidden").attr("aria-hidden",!0).attr("name","install").attr("src",this.params.url).appendTo(BEM.DOM.scope),this._countDownload()}}),BEM.DOM.decl({block:"teaser",modName:"install",modVal:"zombie"},{_install:function(){var t=this.params,e=t.counters||{};return BEM.blocks["custom-protocol-detect"].protocolCheck(this.params.urlYabro,this._onProtocolDetectSuccess.bind(this),this._onProtocolDetectFail.bind(this)),e.click&&((new Image).src=e.click),!1},_onProtocolDetectSuccess:function(){this.trigger("request")},_onProtocolDetectFail:function(){window.location.href=this.elem("link").attr("href")}}),BEM.DOM.decl({block:"teaser",modName:"install",modVal:"stream"},{_install:function(){var t=this.params,e=t.counters||{};return BEM.blocks["stream-control"].process(t.stream),e.open&&home.stat.logPath("click",e.open),e.click&&((new Image).src=e.click),!1}}),CoversAPI.prototype._init=function(){var t=this;this.params=home.getData("coversAPI.data"),(this.params.forced||this.params.settings.autoload)&&$(function(){t.load({autostart:!0}),t.sendStats("forced.show")}),$(".covers-logo").click(function(){0===t.currentStatus?(t.load({autostart:!0}),t.sendStats("logo.show")):4===t.currentStatus&&(t.stop({fromEvent:!0}),t.sendStats("logo.hide"))});var e=this.getSearchForm(),i=!1;e.on("submit",function(){t.getSearchInput().bem("input").val()!==t.params.text||i||(i=!0,e.append('<input type="hidden" name="aoff" value="1"><input type="hidden" name="promo" value="supercover">'))})},CoversAPI.prototype.getSearchInput=function(){return $(".search2 .suggest2-form__input")},CoversAPI.prototype.getSearchForm=function(){return $(".search2")},CoversAPI.prototype._changeInputVal=function(t){this.getSearchInput().bem("input").val(t,{suggest:!1})},CoversAPI.prototype.submitForm=function(t){t||(t=this.params.text),this._changeInputVal(t),setTimeout(function(){this.getSearchForm().bem("suggest2-form").submit({prevent:!1})}.bind(this),200)},CoversAPI.prototype._setParams=function(t){this.params=t},CoversAPI.prototype._set=function(t){this.current&&this.stop(),home.covers[t.name]&&(this.current=t.name,this.currentStatus=0)},CoversAPI.prototype._getShare=function(t){var e=this;t&&!e.shareInstance&&($("body").append('<div id="covers-share"></div>'),$.getScript("//wayback.archive-it.org/all/20180620162258/https://yastatic.net/share2/share.js").done(function(){e.shareInstance=new Ya.share2("covers-share",t)}))},CoversAPI.prototype.load=function(t){if(this.current&&0===this.currentStatus){if(!this.area&&!this.close){this.area=$('<div class="covers-parent"></div>');var e=!1;this.params.settings&&"white"===this.params.settings.close&&(e=!0),this.close=$('<a title="'+this.params.closeTitle+'" class="covers-close '+(e?"covers-close_white":"")+'"></a>'),$("body").append(this.area,this.close),this.close.on("click",$.proxy(function(){this.stop(),this.sendStats("close.hide")},this))}this._getShare(this.params.shareParams),$("body").addClass("covers-fade"),this.params.parent=this.area,this.currentStatus=1;var i=this;home.covers[this.current].load(this.params,function(e){i._loadHandler(e,t)})}},CoversAPI.prototype._loadHandler=function(t,e){t.status>0?(this.currentStatus=2,e.autostart&&this.start(e)):this.currentStatus=0},CoversAPI.prototype.start=function(t){if(2===this.currentStatus){this.currentStatus=3;var e=this;this.params.settings.noHide||($(".i-ua_browser_touch").length?$(".rows").css({overflowX:"hidden"}):$("body").addClass("covers-overflow"),$("body").addClass("covers-fade-on"),$(".covers-search").addClass("covers-search_hidden_yes")),this.params.settings.noSearchPhrase||this._changeInputVal(this.params.text),home.covers[e.current].start(e.params,function(i){e._startHandler(i,t)})}},CoversAPI.prototype._startHandler=function(t){t.status>0?this.currentStatus=4:this.currentStatus=0},CoversAPI.prototype.stop=function(t){if(4===this.currentStatus){this.currentStatus=5;var e=this;home.covers[this.current].stop(this.params,function(i){e.stopHandler(i,t)})}},CoversAPI.prototype.stopHandler=function(){this.area.remove(),this.close.remove(),this.area=null,this.close=null,$(".i-ua_browser_touch").length?$(".rows").css({overflowX:"visible"}):$("body").removeClass("covers-overflow"),$(".covers-search").removeClass("covers-search_hidden_yes"),$("body").removeClass("covers-fade covers-white_close covers-fade-on"),this.currentStatus=0},CoversAPI.prototype.sendStats=function(t){this.params.stat&&home.stat.logPath("click",this.params.stat+"."+t)},home.coversAPI=new CoversAPI,home.covers={},BEM.decl("videoplayer",{init:function(){return this.scope=BEM.DOM.scope,this.win=BEM.DOM.win,this.lastProgress=null,this.isTouch=$(".i-ua_browser_touch").length,this.$html=$(BEMHTML.apply({cls:"videoplayer__wrapper",content:{tag:"iframe",cls:"videoplayer__video",attrs:$.extend({name:"videoplayer"+(Math.random()+"").substr(3,7)},this.params)}})),this},show:function(){return this.scope.append(this.$html),this.isTouch&&(this.$html.get(0).scrollIntoView?this.$html.get(0).scrollIntoView():this.win.scrollTop(0)),$("html").addClass("videoplayer_active_yes"),this.scope.on("click",".videoplayer__wrapper",function(){home.stat.logPath("click","videoplayer.paranja"),this.hide()}.bind(this)),this.win.on("keydown",this.changeThis(this._escHandler)),this._addCheckEndHandler(),home.stat.logPath("show","videoplayer.paranja"),home.stat.logPath("click","videoplayer.actions.show"),this},hide:function(){return this.$html.detach(),$("html").removeClass("videoplayer_active_yes"),this.scope.off("click",".videoplayer__wrapper"),this.win.off("keydown",this.changeThis(this._escHandler)),this.lastProgress=null,this._removeCheckEndHandler(),home.stat.logPath("click","videoplayer.actions.hide"),this},_addCheckEndHandler:function(){window.addEventListener&&window.addEventListener("message",this.changeThis(this._checkEndHandler))},_removeCheckEndHandler:function(){window.removeEventListener&&window.removeEventListener("message",this.changeThis(this._checkEndHandler))},_checkEndHandler:function(t){var e=t.data;if(e&&"status"===e.action){if(0===e.progress&&this.lastProgress>95)return home.stat.logPath("click","videoplayer.events.end"),void this.hide();this.lastProgress=e.progress}},_escHandler:function(t){var e=t.keyCode||t.which;27===e&&(home.stat.logPath("click","videoplayer.events.esc"),this.hide())}}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,i,n){if("disabled"===n)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","pointerclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),function(t,e){function i(t){return t.replace(/^(?:https?:)?\/\//,"")}var n="function"==typeof window.navigator.sendBeacon;t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,e,o){o=o||{};var s=i(o.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),r=function(t,e,i,n){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+s+"/"+i+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(n?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},a=function(){return r(t,o.useLinkHref&&Object(e).href?e.href:location.href,"jclck")},l=function(t){return navigator.sendBeacon(a()," ")},c=function(t){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",a()),e.insertBefore(i,e.firstChild)},u=function(){var t=a(),e=!1;n&&(e=l(t)),e||c(t)};if(e){var h;if(o.noRedirect===!0||e.className.indexOf("link_pseudo_yes")>-1||e.href&&0===e.href.indexOf("mailto:"))u();else if(e.href)h=e.href,e.href=r(t,h,"redir"),setTimeout(function(){e.href=h},500);else if(e.form)e.type.match(/submit|button|image/)?(h=e.form.action,e.form.action=r(t,h,"redir",!0),setTimeout(function(){e.form.action=h},500)):u();else{if(!e.action)throw"counter.js: not link and not form!";e.action=r(t,e.action,"redir",!0)}}else u()},t.cp=function(i,n,o,s,r,a){"string"==typeof s||(a=r,r=s,s=e),t.c("stred/pid="+i+"/cid="+n+(o?"/path="+o+(s?"/vars="+s:""):""),r,a)}}(window.Lego),function(t){t.cred=function(t,e,i){var n,o=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",t),e.insertBefore(i,e.firstChild)};if(e)if("A"===e.tagname&&!e.href||e.href&&e.href.match(/^mailto:/)||i&&i.noRedirect===!0)o();else if(e.href)n=e.href,e.href=t,setTimeout(function(){e.href=n},500);else if(e.form)e.type.match(/submit|button|image/)?(n=e.form.action,e.form.action=t,setTimeout(function(){e.form.action=n},500)):o();else{if(!e.action)throw"counter.js: not link and not form!";e.action=t}else o()}}(window.Lego),window.csh_ifgsid=csh_ifmsid,BEM.DOM.decl("home-tabs",{onSetMod:{js:function(){var t=this;this._searchInput=this.findBlockOutside($(".search2 .suggest2-form__input"),"input"),this._$elems=this.elem("search"),this._searchInput.on("change",$.debounce(function(){t._updateUrls(this.val())},300)),this.bindTo("more-switcher","click",this._createAndShowDropdown)}},_updateUrls:function(t){var e=this.params[t?"search":"href"],i=encodeURIComponent(t);this._$elems.each(function(t,n){$(n).attr("href",x.stringf(e[$(n).data("id")],i))})},_createAndShowDropdown:function(){if(!this._popupInited){this._popupInited=!0;var t,e=this.elem("more-switcher"),i=home.getData("home-tabs.additionalTabs");t=$(home.view("popup",{mix:home.getBEMClassname("dropdown-menu__popup",{mods:{extra:"yes"}})+" dropdown__popup",js:{disableoutside:"yes"},tail:!0,content:home.view("home-tabs__more",{top:home.view("home-tabs__more-tabs-top",i),bottom:home.view("home-tabs__more-tabs-bottom",i)}),attrs:{role:"menu"}})),e.addClass("dropdown-menu dropdown-menu__switcher"),e.append(t),t.bem("popup").onFirst("show",function(){home.stat.logDOMShow(this.domElem)}),this._$elems=this._$elems.add(this.findElem(t,"search")),this._updateUrls(this._searchInput.val())}}}),function(){"use strict";var t=function(){$("[data-statlog-autoshow]").each(function(){var t=$(this),e=t.data("statlog");t.is(":visible")&&home.stat.logPath("show",e)})},e=function(e){e.enabled&&(t(),$(window).on("resize",$.debounce(t,150)))};$(function(){var t=home.getData("statlog.config",{});e(t)});var i=home.stat._setConfig;home.stat._setConfig=function(t){i(t),e(t)}}(),BEM.DOM.decl("search2",{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside("input"),this.arrow=this.findBlockOutside("home-arrow"),this.arrow&&this.arrow.on("sample-click",function(){var e=t.domElem.find("input[name='nl']");t.params.nl&&!e.length&&$('<input type="hidden" name="nl" value="1"/>').insertAfter(t.input.domElem);var i=t.domElem.find("input[name='example_source']");t.params.serpArg&&!i.length&&$('<input type="hidden" name="example_source" value="'+t.params.serpArg+'"/>').insertAfter(t.input.domElem);var n=$("body").hasClass("edit-mode")||$("body").hasClass("b-page_skins-calatog");n||setTimeout(function(){t.domElem.submit()},500)})}}}),function(){var t=/^[a-zа-яёґєіїўәғқңөұүһҗçğşıüö]$/i,e=/^[0-9]$/,i=function(i){if(i.originalEvent&&!("altKey"in i.originalEvent))return!1;var n,o,s=i.charCode||i.keyCode||i.which||0,r=i.ctrlKey||i.altKey||i.metaKey;return i.originalEvent&&i.originalEvent.key?(o=t.test(i.originalEvent.key),n=e.test(i.originalEvent.key)):(o=[s>=65&&90>=s,s>=1025&&1071>=s,0===s,231===s,186===s,188===s,190===s,String.fromCharCode(s).toLowerCase()!==String.fromCharCode(s).toUpperCase()].some(Boolean),n=s>=48&&57>=s||s>=96&&105>=s),!r&&(n||o)};BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"capture"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}},listen:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},no:function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(t){var e;if(!$(".popup_visibility_visible").filter(":not(.b-topbar__popup, .suggest2)").length&&(e=$(".v_sform_bg"),(!e.length||"none"===e.css("display"))&&!$(".left-banner-opened").length&&!$(".stream_visibility_visible").length&&this.domElem.is(":visible"))){var n,o;try{n=document.activeElement.tagName.toLowerCase(),o=document.activeElement.getAttribute("contenteditable")}catch(s){}if(i(t)&&"input"!==n&&"textarea"!==n&&!o){var r=this.elem("control")[0],a=this.val();if(a.length>0&&" "!==a.slice(-1)&&(a+=" ",this.val(a)),r.createTextRange){var l=r.createTextRange();l.collapse(!1),l.select()}else r.selectionStart&&(r.focus(),r.setSelectionRange(a.length,a.length));this.setMod("focused","yes")}}}})}(),BEM.DOM.decl({name:"input",modName:"ahead",modVal:"yes"},{onSetMod:{js:function(){var t=$.browser&&$.browser.opera&&$.browser.version<12.1?"keypress":"keydown";this.__base(),this._leftPadding=parseInt(this.elem("input").css("border-left-width"),10),this._buildAhead(),this._intent=!1,this._preventAhead=!1,this._lastBackspace=0,this.on("change",this._onTextChange).bindTo("click",this._onClickOver).bindTo(t,this._onKeyDown)}},_onClickOver:function(t){var e=this;if(!this._preventAhead&&this.elem("input").is(t.target)){var i=t.pageX-this.domElem.offset().left-this._leftPadding,n=this.elem("ahead-filler").width(),o=this.elem("ahead-hintholder").width();i>n&&o>i&&(this.trigger("ahead-click"),setTimeout(function(){e._fill({usage:"mouse"})},0))}},_onKeyDown:function(t){switch(this.__base.apply(this,arguments),new Date-this._lastBackspace>this.params.backspaceDelay&&(this._preventAhead=!1),t.which){case 8:if(!this.params.hideOnBackspace)break;this._preventAhead=!0,this._lastBackspace=new Date,this._intent=this._clearAhead();break;case 9:this.hasMod("focused","yes")&&this._intent&&!t.ctrlKey&&!t.altKey&&(t.preventDefault(),this._fill({usage:"tab"}));break;case 39:this.val().length===this.getSelectionEnd()&&this._fill({usage:"arrow"})&&t.preventDefault()}},setAhead:function(t){var e;return this._preventAhead?!1:(e=this.val(),0!==t.indexOf(e)?this._clearAhead():void(this._intent=this._setAhead(e,t.slice(e.length))))},unsetAhead:function(){this._clearAhead(),this._intent=!1},_onTextChange:function(){var t=this.val().length;this.shiftAhead(t),this._intent&&0!==this._intent.indexOf(this.val())&&this._clearAhead()},_fill:function(t){var e=this.val(),i=$.extend(t,{chars:this._intent.length-e.length});if("string"==typeof this._intent&&i.chars>0&&0===this._intent.indexOf(e)){try{var n=document.createEvent("TextEvent");n.initTextEvent("textInput",!0,!0,null,this._intent.slice(this.val().length),9),this._input.selectionEnd=this._input.selectionStart=this._intent.length,this._input.dispatchEvent(n)}catch(o){var s=this.elem("control").get(0);if(this.val(this._intent),s.createTextRange){var r=s.createTextRange();r.moveEnd("character",this._intent.length),r.collapse(!1),r.select()}else try{s.selectionEnd=s.selectionStart=this._intent.length}catch(a){}}this.trigger("ahead-fill",i)}return i.chars>0},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},getDefaultParams:function(){return $.extend(this.__base(),{backspaceDelay:100,hideOnBackspace:!0})},_buildAhead:function(){this._ahead=$(home.view("input__ahead")),BEM.DOM.before(this.elem("control"),this._ahead)},_setAhead:function(t,e){var i=this.elem("ahead-filler");return this._preventAhead?(t="",e=""):(t=t||"",e=e||""),i.text(t),this.elem("ahead-hintholder").text(t+e),this.elem("ahead-hint").val(t+e),this.elem("ahead").css("clip","rect(auto auto auto "+(i.width()+this._leftPadding)+"px)"),t+e},_clearAhead:function(){return this._setAhead("",""),!1},shiftAhead:function(t){if(this._intent){var e=this._intent.slice(0,t),i=this._intent.slice(t);this._setAhead(e,i)}}}),BEM.DOM.decl({block:"input",modName:"keyboard",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).bind("keyboardOpened.lego",this.changeThis(function(){this.setMod("focused","yes")._focused=!0}))}},onElemSetMod:{clear:{visibility:function(t,e,i){this.__base.apply(this,arguments),this.hasMod("clear","yes")&&this.toggleMod("keyboard-visibility","hidden","visible"===i)}}}}),BEM.DOM.decl("keyboard-loader",{onSetMod:{js:function(){var t=this;Lego.block["keyboard-loader"].call(this.domElem,this.params),$(window).on("keyboardOpened.lego",function(){home.stat.logPath("click",t.params.statOpen),t.getVkbd().removeAttr("disabled")}).on("keyboardClosed.lego",function(e){"lego"===e.namespace&&home.stat.logPath("click",t.params.statClose),t.getVkbd().attr("disabled","disabled")})}},getVkbd:function(){return this._vkbd?this._vkbd:this._vkbd=$('<input type="hidden" name="vkbd" value="1"/>').appendTo(this.domElem)}}),function(t,e){e||(e=window.Lego={}),e.block||(e.block={}),e.block["keyboard-loader"]=function(i){function n(i){t("body").removeClass("b-page_keyboard");var n=i?"addClass":"toggleClass",o=a.find(".b-keyboard-popup");if(o.length){if(a.find(".b-keyboard-popup__gap")[n]("b-keyboard-popup__gap_hidden_yes"),a.find(".b-keyboard-popup")[n]("b-keyboard-popup_hidden_yes").hasClass("b-keyboard-popup_hidden_yes")){l.trigger("keyboardClosed"),t(document).trigger("popupsClose.lego");var s=e.block["b-keyboard"]._lastFocusedIn;void 0!==s&&s.focus()}else l.trigger("keyboardOpened.lego");o.data("isHidden",!1)}}function o(t){return s()[t]}function s(){var e={};return t.each(window.name.split("&"),function(){if(this.toString()){var t=this.split("=");e[t[0]]=t[1]}}),e}function r(e,i){var n=s(),o=[];n[e]=i,t.each(n,function(t,e){o.push(t+"="+e)}),window.name=o.join("&")}var a=t(document.body),l=t(window),c=this,u=t(".b-topbar__popup.popup_behavior_snap"),h=u.length?u.bem("popup"):null;c.click(function(o){o.preventDefault(),h&&h._unbindFromResize();var s=(this.className.match(/keyboard-loader_lang_(\w+)/)||["",""])[1];if(a.find(".b-keyboard")[0])n(),h&&h._bindToResize();else{var r=BEM.blocks["i-global"].param("keyboard-path"),c=[r+"b-keyboard/_keyboard.js"],u=t.browser&&t.browser.msie&&(!document.documentMode||document.documentMode<9)?".ie":"",d=[r+"b-keyboard/_keyboard"+u+".css"];t.xLazyLoader({name:"b-keyboard",js:c,css:d,success:function(){e.block["b-keyboard-popup"]({lang:s,"for":i["for"]}),a.append('<div class="b-keyboard i-bem" data-bem=\'{&quot;b-keyboard&quot;: { &quot;lang&quot;:&quot;'+s+"&quot;}}'></div>"),BEM.DOM.init(t(".b-keyboard")),l.trigger("keyboardOpened.lego",{afterLoad:!0}),t(".b-keyboard").on("click",".b-keyboard__key",function(){var e,i=t("*:focus").offset();i&&(e=i.top,t(".b-keyboard-popup").offset().top<e+30&&window.scrollTo(0,e-20))})}})}}),l.bind("keyboardOpen.lego",function(){c.click()}).bind("keyboardClose.lego",n),i["for"]&&l.bind("keyboardOpened.lego",function(e,n){!(n&&n.afterLoad&&i.autoLoad)&&t(i["for"]).focus()}),l.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(t,e){var i=c.find(".keyboard-loader__flag");i[0]&&("tt"===e&&(e="ru"),i.attr("src",i.attr("src").replace(/[a-z]+\.png$/,e+".png")))}),i.storeState=i.storeState!==!1,i.storeState&&l.bind("keyboardOpened.lego",function(){r("keyboard_state","open");var e=o("keyboard_lang");e&&t(window).trigger("keyboardSetLang.lego",e)}).bind("keyboardClosed.lego",function(){t("body").removeClass("b-page_keyboard"),r("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(t,e){r("keyboard_lang",e)});var d="#kb"===window.location.hash;(i.autoLoad||i.storeState&&"open"===o("keyboard_state")||d)&&c.click(),l.bind("keyboardOpened.lego",function(){t("input:focus").focus(),t("body").addClass("b-page_keyboard")})}}(jQuery,window.Lego),function(t){function e(){function e(t,e){u[t](e,function(t){"error"===t?d.push(e):h.push(e)&&r.each(e),o()},"lazy-loaded-"+(r.name?r.name:(new Date).getTime()))}function n(t){r.complete(t,h,d),r[t]("error"===t?d:h),clearTimeout(a),clearTimeout(l)}function o(){h.length===p.length?n("success"):h.length+d.length===p.length&&n("error")}function s(){d.push(this.src),o()}var r,a,l,c,u=this,h=[],d=[],p=[];this.init=function(i){if(i){if(r=t.extend({},t.xLazyLoader.defaults,i),c={js:r.js,css:r.css,img:r.img},t.each(c,function(t,e){"string"==typeof e&&(e=e.split(",")),p=p.concat(e)}),!p.length)return void n("error");r.timeout&&(a=setTimeout(function(){var e=h.concat(d);t.each(p,function(i,n){-1===t.inArray(n,e)&&d.push(n)}),n("error")},r.timeout)),t.each(c,function(i,n){t.isArray(n)?t.each(n,function(t,n){e(i,n)}):"string"==typeof n&&e(i,n)})}},this.js=function(e,n,o){var r=t('script[src*="'+e+'"]');if(r.length)return void(r.attr("pending")?r.bind("scriptload",n):n());var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("charset","utf-8"),a.setAttribute("src",e),a.setAttribute("pending",1),a.onerror=s,t(a).bind("scriptload",function(){t(this).removeAttr("pending"),n(),setTimeout(function(){t(a).unbind("scriptload")},10)});var l=!1;a.onload=a.onreadystatechange=function(){l||this.readyState&&!/loaded|complete/.test(this.readyState)||(l=!0,a.onload=a.onreadystatechange=null,t(a).trigger("scriptload"))},i.appendChild(a)},this.css=function(e,n,o){if(t('link[href*="'+e+'"]').length)return void n();var s=document.createElement("link");s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet"),s.setAttribute("href",e),t.browser&&t.browser.msie?s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&n()}:t.browser&&t.browser.opera?s.onload=n:!function(){s&&s.sheet?n():l=setTimeout(arguments.callee,20)}(),i.appendChild(s)},this.img=function(t,e){var i=new Image;i.onload=e,i.onerror=s,i.src=t},this.disable=function(e){t("#lazy-loaded-"+e,i).attr("disabled","disabled")},this.enable=function(e){t("#lazy-loaded-"+e,i).removeAttr("disabled")},this.destroy=function(e){t("#lazy-loaded-"+e,i).remove()}}t.xLazyLoader=function(t,i){"object"==typeof t&&(i=t,t="init"),(new e)[t](i)},t.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:2e4,success:function(){},error:function(){},complete:function(){},each:function(){}};var i=document.getElementsByTagName("head")[0]}(jQuery),BEM.DOM.decl("suggest2",{onSetMod:{js:{inited:function(){this.params.form||this.findBlockOutside("suggest2-form"),this._lastSubmitTime=0,this._lastBlurTime=0,this._clear()}}},_bodyHandler:function(t){if(!this._isDestructing){var e=$(t.target),i=this.containsDomElem(e)||this.params.form.containsDomElem(e);i||(this._freezeInputFocus=!1)}},getDefaultParams:function(){return{submitBySelect:!1,updateOnEnterByKeyboard:!0,onFocus:"request",requestOnEmptyInput:!1,abortQueries:!1,sequentialQueriesTimeout:!1}},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},init:function(){var t=this;return t.params.form.on("submit",function(e,i){t._lastSubmitTime=(new Date).getTime(),t._isActualSearchCGIParams?t._isActualSearchCGIParams=!1:"suggest2-counter"!==i.data.block&&i.data.prevent!==!1&&this.removeHiddenInputs(),t._clear(),t._popup.hide()}),t._input=t.params["suggest2-input"],t._popup=t.params["suggest2-popup"],t._inputValue=t._input.val(),t._model=t.initModel(),t._view=t.initView(),t._counter=t.initCounter(),t._model.on({response:this.setItems,reject:function(e,i){2===i.code&&(t._popup.hide(),t._clear())}},t),t.bindToDoc("click tap leftclick",t._bodyHandler),t.bindEvents(),this._input.isFocused()&&this._doRequest(),this._toggleHistory(),t},initModel:function(){return BEM.create("suggest2-model",this.params)},getModel:function(){return this._model},initView:function(t,e){var i=this.getMod("type");return t=t||{},"simple"!==i&&"all"!==i||(t.simple="yes"),"advanced"!==i&&"all"!==i||(t.advanced="yes"),BEM.create({block:"suggest2-view",mods:t||{}},e||{})},getView:function(){return this._view},initCounter:function(){return this.params.counter?this.params.counter.initValues().bindEvents():void 0},getCounter:function(){return this._counter},setDataConverter:function(t){return this.getModel().getProvider().convert=t,this},setRequestData:function(t){return this.getModel().getProvider().getRequestData=t,this},setRequestUrl:function(t){return this.getModel().getProvider().getRequestUrl=t,this},setOwner:function(t){return this._popup.owner(t),this},bindEvents:function(){var t=this;return t._input.bindEvents({change:t._onChange,focus:t._onFocus,blur:t._onBlur},t),t._popup.on({preshow:function(){t.trigger("preshow")},show:function(){t._onShow()},hide:function(e,i){t._onHide(i)}}),t.params.form&&t.params.form.on("button-press",t._onSearchButtonMousedown,t),BEM.blocks["suggest2-item"].on(t.domElem,{"link-click":function(e,i){t._counter&&"_self"===$(i.$e.target).attr("target")&&i.$e.preventDefault()}}),t},_onShow:function(){this.trigger("show")},_onHide:function(t){this.trigger("hide",t)},_onSearchButtonMousedown:function(){this._input.realVal(this._input.val()),this._popup.hide()},unbindAllEvents:function(){var t=this;return t.unbindFromDoc("click tap leftclick"),t._input.unbindAllEvents(),t.params.form.un("submit"),t._model.un("response").un("reject"),t._popup.un("preshow").un("show").un("hide"),t.params.form&&t.params.form.un("button-press",t._onSearchButtonMousedown,t),t},setItems:function(t,e){var i=this,n=e.data.items||[];return i._isFormSubmitDurinQuery()||!n.length?(i._popup.hide(),i._clear()):this.params.sequentialQueriesTimeout||i._input.val()===e.val?(i._text=e.val,i._pos=e.pos,i._meta=e.data.meta||{},i._popup.show(i._view.html(n,i._meta)).width(i.getPopupWidth()),i._items=i.findBlocksInside("suggest2-item"),i._clearItems().trigger("update",{val:i._text,pos:i._pos,items:i._items}),i):i._clear()},getItems:function(){return this._items||[]},isBlur:function(){return this._isBlur&&!this._isMouseDown},getPopupWidth:function(){},getInputWidth:function(){return 0},isNeedSubmitFormOnSelectItem:function(t){return this.params.submitBySelect&&"link"!==t.getMod("interact")},_isFormSubmitDurinQuery:function(){return this._lastSubmitTime?(this._model.filterRequestsByVal(this._input.realVal()),this._model.isTimeInRequestInterval(this._lastSubmitTime)):!1},_onChange:function(t,e){this._inputValue!==this._input.val()&&(this._inputValue=this._input.val(),this._doRequest(e))},_doRequest:function(t){var e=this.getCounter();this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition(),t,e&&e.getCurrentReqId())},_onFocus:function(){!this._popup.isShown()&&this._isBlur&&this.params.onFocus&&this._isLastBlurTimeLater(50)&&(this.getItems().length&&this._input.val()===this._text?(this._clearItems(),this._popup.show()):this._isMouseDown||"request"!==this.params.onFocus||this._doRequest())},_onBlur:function(){this._isBlur?(this._clear(),this._popup.hide()):this._freezeInputFocus?(this._clear(),this._input.focus()):this._isMouseDown&&this._input.focus(),this._lastBlurTime=(new Date).getTime(),this._isBlur=!0},_getItemIndex:function(t){return this.getItems().indexOf(t)},_clear:function(){return this._isBlur=!0,this._freezeInputFocus=!1,this._clearItems()},_clearItems:function(){return this._isMouseDown=!1,this._enterItemIndex=-1,this._unselectItems()},_isLastBlurTimeLater:function(t){return(new Date).getTime()-this._lastBlurTime>t},_unselectItems:function(t){var e=t?[].slice.call(arguments):this.getItems();return e.forEach(function(t){t.onLeave()}),this},_onSelectItem:function(t,e){var i=this,n=i._getItemIndex(t),o=t.onSelect(e),s=t.valOnSelect();return i._text=i._input.realVal(s),i._isBlur=!0,i._freezeInputFocus=!1,i._setSearchCGIParams(t),i.trigger("select",{val:i._text,pos:i._pos,item:t,meta:i._meta,itemIndex:n,byKeyboard:e,callbackOnSelect:o}),s!==!1&&(i._items=[],this.isNeedSubmitFormOnSelectItem(t)&&i.params.form.submit()),n},_isActualSearchCGIParams:!1,_setSearchCGIParams:function(t){this.params.form.removeHiddenInputs(),t.params.searchCGI&&(this._isActualSearchCGIParams=!0,this.params.form.appendHiddenInputs(t.params.searchCGI.map(function(t){return{name:t[0],value:t[1]}})))},_onDownItem:function(){this._isBlur=!1,this._isMouseDown=!0},_toggleHistory:function(){}}),BEM.DOM.decl("suggest2",{getInputLeft:function(){return 0},getInputWidth:function(){return 0},getContainerWidth:function(){return 0},getMetrics:function(){var t=this.getInputLeft(),e=this.getInputWidth(),i=this.getContainerWidth()-t;return{marginLeft:t,minWidth:e>=i?i:e,maxWidth:i}},adjustView:function(){return this.getMetrics()},_resizeHandler:function(){}}),BEM.DOM.decl("suggest2",{bindEvents:function(){var t=this;return t._input.bindEvents({keydown:t._onKeyDown,keyup:t._onKeyUp,keypress:t._onKeyPress,mousedown:function(){t._input.isFocused()&&t._onFocus()}},t),BEM.blocks["suggest2-item"].on(t.domElem,{mouseover:function(e){t._onEnterItem(e.block,!1)},mouseout:function(e,i){var n=e.block.domElem[0];n===i.relatedTarget||$.contains(n,i.relatedTarget)||t._onLeaveItem(e.block,!1)},mousedown:function(){t._onDownItem()},leftclick:function(e){t._onSelectItem(e.block,!1)}}),t.__base.apply(t,arguments)},_onKeyDown:function(t){var e=this.__self.keyboard,i=t.which;!this._popup.isShown()||i!==e.up&&i!==e.down||(t.preventDefault(),this._enterByKeyboard(i))},_onKeyUp:function(t){var e=this.__self.keyboard;if(t.which!==e.left&&t.which!==e.right||(this.trigger("change-cursor-pos"),this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition())),t.which===e.right&&~this._enterItemIndex&&this._enterItemByKeyboard){var i=this._items[this._enterItemIndex];i&&this.trigger("ahead",{item:i,val:"link"===i.getMod("interact")?i.elem("text").text():i.val()})}},_onKeyPress:function(t){if(t.which===this.__self.keyboard.enter&&~this._enterItemIndex&&this._enterItemByKeyboard){var e=this._items[this._enterItemIndex];e&&(t.preventDefault(),this._onSelectItem(e,!0))}},_enterByKeyboard:function(t){var e=t-39,i=this._items.length,n=this._enterItemIndex+e;return-1===n||n===i?(this._enterItemIndex=n,this._unselectItems(this._items[n]),this.trigger("out",{val:this._text,byKeyboard:!0})):(0>n?n=i-1:n>=i&&(n=0),void this._onEnterItem(this._items[n],!0))},_onEnterItem:function(t,e){this._enterItemIndex=this._getItemIndex(t),this._enterItemByKeyboard=e,this._unselectItems(),t.onEnter(e)},_onLeaveItem:function(t,e){this._clearItems()._unselectItems(t)}},{keyboard:{enter:13,left:37,up:38,right:39,down:40},live:function(){this.liveBindTo("mousedown",function(){this._onDownItem()})}}),BEM.DOM.decl("suggest2",{_doRequest:function(){(this._ignoredFirstRequest||"request"===this.params.onFocus||this._input.val())&&this.__base.apply(this,arguments),this._ignoredFirstRequest=!0}}),BEM.decl("suggest2",{bindEvents:function(){function t(){e._popup&&e._popup.isShown()&&e._popup.hide()}var e=this;e.__base.apply(e,arguments),e._input.bindEvents({click:function(){e._popup.isShown()||(e._tabChange=!1,e._doRequest())}}),BEM.blocks["suggest2-item"].on(e.domElem,{mousedown:function(){e.bindToDoc("mouseup.suggest2",function(){e._isBlur=!0,e._isMouseDown=!1,
e.unbindFromDoc("mouseup.suggest2")})}}),$(window).bind("keyboardOpened.lego",function(){e._popup&&e._popup.isShown()&&e._popup.get()&&e._popup.get().repaint()});var i=!0;$(window).on("focus",function(){var n;try{n=document.activeElement}catch(o){}i||(i=!0,n&&e._input.getControl()&&e._input.getControl().is(n)&&(e._tabChange=!0),t())}).on("blur",function(){i=!1,t()})},init:function(){this.__base.apply(this,arguments),BEM.channel("suggest2").trigger("init"),this.trigger("model-ready")},_onChange:function(){return this._tabChange=!1,BEM.channel("suggest2").trigger("change"),this.__base.apply(this,arguments)},_onFocus:function(){this._tabChange||(BEM.channel("suggest2").trigger("focus"),this.__base.apply(this,arguments))}}),BEM.decl("suggest2-model",{onSetMod:{js:{inited:function(){this._requests=[]}}},destruct:function(){this._provider&&this._provider.destruct(),this.__base.apply(this,arguments)},getProvider:function(){return this._provider?this._provider:(this._provider=this.setProvider(this.params),this._provider)},setProvider:function(t){return this._provider=BEM.create("suggest2-provider",t),this._provider},getCancelRequestConditions:function(){return[{block:"suggest2",show:!1},{block:"suggest2",event:"select"},{block:"suggest2-item",event:"select"},{block:"suggest2",event:"out"},{block:"suggest2-item",show:!1},{block:"suggest2-popup",event:"hide"},{suggest:!1},{source:"sample"}]},request:function(t,e,i,n){var o=this,s={val:t,caretPosition:e,reqId:n,data:i};o._requests.push(s);var r=o._isNeedRequest(t,i);return r.need?(s.requestTime=(new Date).getTime(),o.lastSendedRequest=s,o.trigger("request",{val:t,pos:e,request:s}),o.getProvider().get(t,e,n,function(t,e,i,n){s.responseTime=(new Date).getTime(),$.extend(s,{duration:s.responseTime-s.requestTime,error:i.error,fromCache:n,itemsCount:i.items?i.items.length:0}),o._onResponse(t,e,i,s);var r=o._requests[o._requests.length-1];o.params.sequentialQueriesTimeout&&r.val!==t&&o.request(r.val,r.caretPosition,r.data)}),o):o.trigger("reject",{val:t,pos:e,code:r.code,reason:r.reason||{}})},isTimeInRequestInterval:function(t){for(var e=this._requests.length-1;e>=0;e--)if(t>this._requests[e].requestTime&&t<this._requests[e].responseTime)return!0;return!1},filterRequestsByVal:function(t){this._requests=this._requests.filter(function(e){return e.val===t})},_isNeedRequest:function(t,e){if(""===t&&!this.params.requestOnEmptyInput)return{need:!1,code:2};var i;if(this.lastSendedRequest&&this.lastSendedRequest.val===t)return{need:!1,code:4};if(this.params.sequentialQueriesTimeout)for(i=this._requests.length-1;i>=0;i--){var n=this._requests[i];if(void 0===n.responseTime&&(new Date).getTime()-n.requestTime<this.params.sequentialQueriesTimeout)return{need:!1,code:3,reason:{request:n}}}if(!e)return{need:!0};var o,s=this.getCancelRequestConditions();t:for(i=0;i<s.length;i++){o=s[i];for(var r in o)if(o.hasOwnProperty(r)&&o[r]!==e[r])continue t;return{need:!1,code:1,reason:{condition:o}}}return{need:!0}},_onResponse:function(t,e,i,n){var o={val:t,pos:e,data:i||[],request:n};BEM.channel("suggest2").trigger("response",o),this.trigger("response",o)}}),BEM.DOM.decl("suggest2-detect",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){this.__self._pressedKeyCode=t.which},this).bindToDoc("keyup",function(){this.__self._pressedKeyCode=null},this),this.__self.isSupportInlineSVG()||this.setMod("inlinesvg","no")}}}},{_pressedKeyCode:null,isPressedEscape:function(){return 27===this._pressedKeyCode},_isSupportInlineSVG:null,isSupportInlineSVG:function(){if(null!==this._isSupportInlineSVG)return this._isSupportInlineSVG;var t=document.createElement("div");return t.innerHTML="<svg/>",this._isSupportInlineSVG="http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI),this._isSupportInlineSVG}}),function(){"use strict";BEM.DOM.decl("suggest2-detect",{},{isSupportInlineSVG:function(){return void 0===this._isSupportInlineSVG2&&(this._isSupportInlineSVG2=$("html").hasClass("i-ua_inlinesvg_yes")),this._isSupportInlineSVG2}})}(),function(t){if(!t.support.cors&&t.ajaxTransport&&window.XDomainRequest){var e=/^(https?:)?\/\//i,i=/^get|post$/i,n=new RegExp("^(//|"+location.protocol+")","i");t.ajaxTransport("* text html json",function(o,s,r){if(o.crossDomain&&o.async&&i.test(o.type)&&e.test(o.url)&&n.test(o.url)){var a=null;return{send:function(e,i){var n="",r=(s.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(s.timeout)&&(a.timeout=s.timeout),a.ontimeout=function(){i(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,n={code:200,message:"success"},o={text:a.responseText};try{if("html"===r||/text\/html/i.test(a.contentType))o.html=a.responseText;else if("json"===r||"text"!==r&&/\/json/i.test(a.contentType))try{o.json=t.parseJSON(a.responseText)}catch(s){n.code=500,n.message="parseerror"}}catch(l){throw l}finally{i(n.code,n.message,o,e)}},a.onprogress=function(){},a.onerror=function(){i(500,"error",{text:a.responseText})},s.data&&(n="string"===t.type(s.data)?s.data:t.param(s.data)),a.open(o.type,o.url),a.send(n)},abort:function(){a&&a.abort()}}}})}}(jQuery),function(t){if(t.support.cors||!t.ajaxTransport||!window.XDomainRequest)return t;var e=/^(https?:)?\/\//i,i=/^get|post$/i,n=new RegExp("^(//|"+location.protocol+")","i");return t.ajaxTransport("* text html json",function(o,s,r){if(o.crossDomain&&o.async&&i.test(o.type)&&e.test(o.url)&&n.test(o.url)){var a=null;return{send:function(e,i){var n="",r=(s.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(s.timeout)&&(a.timeout=s.timeout),a.ontimeout=function(){i(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,n={code:200,message:"success"},o={text:a.responseText};try{if("html"===r||/text\/html/i.test(a.contentType))o.html=a.responseText;else if("json"===r||"text"!==r&&/\/json/i.test(a.contentType))try{o.json=t.parseJSON(a.responseText)}catch(s){n.code=500,n.message="parseerror"}}catch(l){throw l}finally{i(n.code,n.message,o,e)}},a.onprogress=function(){},a.onerror=function(){i(500,"error",{text:a.responseText})},s.data&&(n="string"===t.type(s.data)?s.data:t.param(s.data)),a.open(o.type,o.url),a.send(n)},abort:function(){a&&a.abort()}}}}),t}(jQuery),BEM.decl("suggest2-provider",{getDefaultParams:function(){return{cache:!1,type:"GET",dataType:"jsonp",timeout:2e3}},_cachedResponses:Object.create?Object.create(null):{},_cachingTime:6e4,_lastQuery:null,get:function(t,e,i,n){"function"==typeof i&&(n=i,i=void 0);var o=this,s=this.params.abortQueries,r=this._extendParamsData(this.getRequestData(t,e,i));n=n.bind(this,t,e),s&&null!==this._lastQuery&&this._lastQuery.abort(),this._lastQuery=$.ajax(r).done(function(t){n(o.convert(t),o._validateCache(this.url))}).fail(function(t,e){!s&&n({error:e||"error"})})},convert:function(t){return{orig:t[0],items:t[1],meta:t[2]}},getRequestData:function(t,e,i){return $.extend({part:t,pos:e},i&&{suggest_reqid:i},BEM.blocks["suggest2-detect"].isSupportInlineSVG()&&{svg:1})},getRequestUrl:function(){return this.params.url},_extendParamsData:function(t){return this.params.url=this.getRequestUrl(),this.params.data=$.extend(this.params.data||{},t),this.params},_validateCache:function(t){var e=Boolean(this._cachedResponses[t])&&this._cachedResponses[t]>Date.now();return!e&&this._addToCache(t),e},_addToCache:function(t){this._cachedResponses[t]=Date.now()+this._cachingTime,setTimeout(function(){delete this._cachedResponses[t]}.bind(this),this._cachingTime)}}),BEM.decl("suggest2-provider",{get:function(t,e,i,n){if(!this.params.email)return this.__base.apply(this,arguments);var o=this,s=this.params&&this.params.paramName||"part",r={pos:e};r[s]=t;var a=this._extendParamsData(r);a.dataType="json",a.xhrFields={withCredentials:!0},n=n.bind(this,t,e),$.ajax(a).done(function(e){n({orig:t,items:o._processEmailst(e),meta:{}},!1)}).error(function(){n({error:status||"error"})})},_processEmailst:function(t){var e=[];return t.filter(function(t){return t.uid===this.params.uid&&t.contacts&&t.contacts.length},this).forEach(function(t){e=e.concat(t.contacts.map(function(t){return["email",t]}))}),e}}),BEM.decl("suggest2-view",{html:function(t,e){return BEMHTML.apply(this.build(t,e))},build:function(t,e){return{block:"suggest2",elem:"content",elemMods:{theme:"normal"},content:this.buildItems(t,e)}},buildItems:function(t,e){return t.reduce(function(t,e){return t.push(this.buildItem(e)),t}.bind(this),[])},buildItem:function(t){var e=this.__self._getPrefs(t),i=this.__self._getType(t,e),n="html"===i||"bemjson"===i?{}:{type:i};return this._getItemByType(t,e,i,{text:{elem:"text",content:this.__self._highlight(this.__self._getText(t,e),e)},mods:n,js:e.js||{},props:{},content:[]})},_getItemByType:function(t,e,i,n){var o=n.text,s=n.mods,r=n.js,a=n.props,l=n.content;return e.pers&&(s.personal="yes"),e.url&&(s.interact="link",a.url=this.__self._resolveUrl(e.url),e.target&&(a.target=e.target)),e.search_cgi&&(r.searchCGI=e.search_cgi),0===l.length&&l.push(o),e.attrs&&(a.attrs=e.attrs),$.extend({block:"suggest2-item",mods:s,js:r,content:l},a)}},{_getPrefs:function(t){if(!Array.isArray(t))return{};var e=t[t.length-1];return $.isPlainObject(e)?e:{}},_getType:function(t,e){var i=Array.isArray(t)?t[0]||"text":"text";return"icon"!==i||e.icon?i:"text"},_getText:function(t){return Array.isArray(t)?t[1]:t},_highlight:function(t,e){if(!e.hl)return t;var i,n=e.hl.sort(function(t,e){return t[0]-e[0]}).filter(function(t){return t[0]>=0}),o=[],s=0;return n.length?(n.forEach(function(e){i=s>e[0]?s:e[0],o.push(t.slice(s,i)),o.push({elem:"highlight",content:t.slice(i,s=e[1])})},this),o.push(t.slice(s)),o.filter(function(t){return!!t})):t},_resolveUrl:function(t){return(/[\/]{2}/.test(t)?"":"http://")+t}}),BEM.decl("suggest2-view",{},{_getGroupType:function(t,e){return t.pers?"nah":~["nav"].indexOf(e)?e:"text"},_getTextLabel:function(t){return BEM.I18N("suggest2",t)}}),BEM.decl({block:"suggest2-view"},{_getItemByType:function(t,e,i,n){return"history"!==i?this.__base.apply(this,arguments):(n.mods.personal="yes",$.extend({block:"suggest2-item",mods:n.mods,js:n.js,content:[{elem:"text",content:t[1]},{elem:"delete",content:BEM.I18N("suggest2-view","delete")}]},n.props))}}),BEM.decl("suggest2-view",{_getItemByType:function(t,e,i,n){var o,s;return"email"===i?(o=[],s=n.js,s.email=t[1],o.push({elem:"email",content:BEM.blocks["i-common__string"].escapeHTML(t[1])}),$.extend({block:"suggest2-item",mods:n.mods,js:s,content:o},n.props)):this.__base.apply(this,arguments)}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this._popup=this.params.popup,this._popupContent=this.params.popupContentElem&&this._popup.findElem(this.params.popupContentElem),this.bindSuggestEvents()}}},show:function(t){return this._popup.domElem?(t&&this.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._setPosition(),this.trigger("show"),this)):this},_setPosition:function(){throw new Error("Этот метод должен быть переопределен в модификаторе _for")},hide:function(t){throw new Error("Этот метод должен быть переопределен в модификаторе _for")},setContent:function(t){return this._popupContent?BEM.DOM.update(this._popupContent,t):this._popup.setContent(t),this},isShown:function(){throw new Error("Этот метод должен быть переопределен в модификаторе _for")},owner:function(t){return t?(this.params.owner=t,this):this.params.owner},get:function(){return this._popup},width:function(t){return void 0===t?this._popup.domElem.outerWidth():(this._popup.domElem.outerWidth(t),this)},destruct:function(){this._popup&&(this.unbindAllEvents(),this.__base.apply(this,arguments))},bindSuggestEvents:function(){return this.params.suggest.on({select:this._onSuggestSelect,update:this._onSuggestUpdate},this),this},_onSuggestSelect:function(t,e){this.hide(e)},_onSuggestUpdate:function(t,e){e.items.length||this.hide({response:"empty"})},unbindAllEvents:function(){return this.params.suggest.un("select").un("update"),this}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on({show:function(){this.channel("suggest2").trigger("show")},hide:function(){this.channel("suggest2").trigger("hide")}})}}},pos:function(){return this.isShown()&&this._popup.repaint(),this}}),BEM.decl({block:"suggest2-popup",modName:"for",modVal:"popup"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup.on("hide",function(){BEM.blocks["suggest2-detect"].isPressedEscape()&&this.trigger("hide",{})},this)}}},_setPosition:function(){this._popup.show(this.params.owner)},hide:function(t){return this.isShown()&&(this._popup.hide(),this.trigger("hide",t||{})),this},isShown:function(){return this._popup?this._popup.isShown():!1}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t._input=t.params.input,t.disableBrowserAutocomplete(),t.realVal(t.val()),t.bindEvents({change:function(e,i){t._onChange(e,i)},clear:$.throttle(function(e,i){t._onClear(e,i)},300)}),t.bindSuggestEvents()}}},_onChange:function(t,e){this.trigger("change",e)},_onClear:function(t,e){this.trigger("clear",e)},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},get:function(){return this._input},isFocused:function(){return this._input.hasMod("focused")},focus:function(){return this._input.setMod("focused","yes"),this},blur:function(){return this._input.delMod("focused"),this},getControl:function(){return this._input.elem("control")},val:function(t,e){return this._input.val.apply(this._input,arguments)},valWithoutSuggest:function(t,e){return this._input.val.call(this._input,t,$.extend(e,{suggest:!1}))},realVal:function(t){return void 0===t?this._realVal:("string"==typeof t&&(this._realVal=t),this._realVal)},width:function(){return this._input.domElem.width()},getCaretPosition:function(){var t,e=this.getControl()[0],i=this.val().length;return document.selection?(t=document.selection.createRange(),t.moveStart("character",-i),t.text.length):"number"==typeof e.selectionStart?e.selectionStart:i},moveCaretToEnd:function(){var t=this.getControl()[0],e=t.value.length;if("undefined"!=typeof t.createTextRange){var i=t.createTextRange();i.collapse(!1),i.select()}else"number"==typeof t.selectionStart&&(t.scrollLeft=999999,t.setSelectionRange(e,e));return this},disableBrowserAutocomplete:function(){this.getControl().attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-autocomplete":"list"})},_bindedEventsNames:[],bindEvents:function(t,e){return Object.keys(t).forEach(function(i){-1===this._bindedEventsNames.indexOf(i)&&this._bindedEventsNames.push(i),this._eventsFilter(i).on(i,t[i].bind(e||this))},this),this},bindSuggestEvents:function(){var t=this.params.suggest;return t.on({out:function(t,e){this.a11yDeactive(),this._changeValueByEvent(t,e)}},this),BEM.blocks["suggest2-item"].on(t.domElem,{tpah:this._onSuggestItemTpah,select:this._onSuggestItemSelect,enter:this._onSuggestItemEnter},this),this},_onSuggestItemTpah:function(t,e){this._changeValueByEvent(t,e),this.moveCaretToEnd()},_onSuggestItemSelect:function(t,e){"link"!==t.block.getMod("interact")&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},_onSuggestItemEnter:function(t,e){this.a11yActive(e.id),e.byKeyboard&&this.params.updateOnEnterByKeyboard&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},unbindAllEvents:function(){return this._input.domElem&&this._bindedEventsNames.forEach(function(t){var e=this._eventsFilter(t);e[e instanceof BEM.DOM?"un":"off"](t)},this),this._bindedEventsNames=[],this.params.suggest.un("out"),this},a11yActive:function(t){this.getControl().attr("aria-activedescendant",t)},a11yDeactive:function(){this.getControl().removeAttr("aria-activedescendant")},_eventsFilter:function(t){return~["blur","focus","change","clear"].indexOf(t)?this._input:this.getControl()},_changeValueByEvent:function(t,e){var i=e&&void 0!==e.val?e.val:this.realVal();this.val(i,$.extend({block:t.block.__self.getName(),event:t.type},e))}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t.__base.apply(this,arguments),t.bindEvents({keydown:function(e){t._onKeyDown(e)}},t)}}},_onKeyDown:function(t){t.which===this.params.suggest.__self.keyboard.enter&&this.trigger("enter")}}),BEM.decl("suggest2-input",{disableBrowserAutocomplete:function(){}}),BEM.DOM.decl("suggest2-item",{val:function(){if(void 0!==this.params.val)return this.params.val;var t=this.elem("text");return(t.length?t:this.domElem).text()},valOnSelect:function(){return this.val()},valOnEnter:function(){return this.val()},valOnLeave:function(){return this.val()},onEnter:function(t){return this.setMod("selected","yes").triggerEvent("enter",{val:this.valOnEnter(),byKeyboard:t})},onLeave:function(t){return this.domElem?this.delMod("selected").triggerEvent("leave",{val:this.valOnLeave(),byKeyboard:t}):this},onSelect:function(t){this.triggerEvent("select",{val:this.valOnSelect(),byKeyboard:t})},triggerEvent:function(t,e){return this.trigger(t,{val:e.val,id:this.domElem.attr("id"),show:!1,byKeyboard:e.byKeyboard})}}),BEM.DOM.decl("suggest2-item",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("mouseover mouseout mousedown leftclick",function(t){this.trigger(t.type,t)}).liveBindTo("link","leftclick",function(t){this.trigger("link-click",{$e:t})})}}),BEM.DOM.decl("suggest2-item",{onLeave:function(){return this.domElem?this.__base.apply(this,arguments):void 0}}),Date.now||(Date.now=function(){return(new Date).getTime()}),BEM.DOM.decl("suggest2-counter",{pointerStartEvent:"mousedown",onSetMod:{js:{inited:function(){this.clear()}}},destruct:function(){this.unbindAllEvents()},getDefaultParams:function(){return{submitBySelect:!1,suggestReqID:!1,preventSubmit:!0,host:"//wayback.archive-it.org/all/20180620162258/https://yandex.ru",path:"clck/jclck",dataUrl:"https://wayback.archive-it.org/all/20180620162258/http://ya.ru",params:{},timeout:300}},metaProps:{exprt:"exprt",r:"region",log:"log"},clear:function(){return this._params={user_input:"",text:""},this._renderTimes=[],this._renderTime=0,this._path={service:this.params.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:""},this._ratio={len:0,queryLen:0,actionsCount:0},this._firstChange=0,this._lastChange=0,this._sinceChange={first:0,last:0},this._selectedText="",this._session=0,this._reqID=this.__self._generateReqID(),this._meta={},this._afterSendAjaxCallback,this._startClickTime=null,this._startInputTime=null,this._requests=[],this._clicksCount=0,this},submit:function(t){var e=this,i=e.params.suggest.params["suggest2-input"],n=i.val();e._params.text=n,e._params.pos=i.getCaretPosition(),e._params.times=this._requests.map(function(t){return!t.error&&t.duration?t.duration:0}).join("."),e.params.suggestReqID&&e.attachReqID(),e.sendAjax(e.getUrl(),$.extend({submitForm:!0,afterSendAjaxCallback:function(){}},t)),e.trigger("submit",e._getSubmitEventData()).clear(),e._params.prev_query=n},_getSubmitEventData:function(){var t=this;return{path:t._path,times:t._params.times,render_times:t._renderTimes,prev_query:t._params.prev_query,user_input:t._params.user_input,text:t._params.text,pos:t._params.pos,ratio:t._ratio,since_first_change:t._sinceChange.first,since_last_change:t._sinceChange.last,session:t._session,suggest_reqid:t._reqID,meta:t._meta,url:t.getUrl()}},sendAjax:function(t,e){return $.ajax({type:"GET",url:t,dataType:"script",timeout:this._getAjaxTimeout()}).always(this._sendAjaxAlways.bind(this,e)),this},_getAjaxTimeout:function(){return this.params.timeout},afterSendAjax:function(t){return this._afterSendAjaxCallback=t,this},getUrl:function(){return this.params.host+["/",this.params.path].concat(this._getUrlParams()).join("/").replace(/(\/+)/g,"/")},_sendAjaxAlways:function(t){t||(t={}),this.params.preventSubmit&&t.submitForm&&this.params.form.submit({block:this.__self.getName(),prevent:!1}),t.afterSendAjaxCallback&&t.afterSendAjaxCallback(),this._afterSendAjaxCallback&&this._afterSendAjaxCallback()},_getUrlParams:function(){var t=this;return this._getParamsList().concat(t._getData()).reduce(function(e,i){return e.concat(t._getParams(i))},[]).concat(["/"])},_getParamsList:function(){var t=this;return[t.params.params,t._getPath(),t._params,t._getRatio(),t._getSinceChange(),t._getSession(),t._getResponsesShows(),{suggest_reqid:t._reqID}]},initValues:function(){return this._params.prev_query=this.params.suggest.params["suggest2-input"].val(),this},attachReqID:function(){this.params.form.appendHiddenInputs([{name:"suggest_reqid",value:this._reqID}])},getCurrentReqId:function(){return this._reqID},bindEvents:function(){var t=this,e=t.params,i=e.suggest,n=e.form,o=i.getModel(),s=i.params["suggest2-input"],r=i.params["suggest2-popup"];return n.on({"button-click":t._onFormButtonClick,submit:t._onFormSubmit},t),o.on({request:t._onModelRequest,response:t._onModelResponse},t),s.on({change:t._onInputChange,enter:t._onInputEnter},t),r.on({show:t._onPopupShow},t),BEM.blocks["suggest2-item"].on(i.domElem,"enter",t._onSuggestItemEnter,t),i.on({update:t._onSuggestUpdate,select:t._onSuggestSelect},t),this._input=s._input,this._input.bindTo(this.pointerStartEvent,this._onInputClick.bind(this)).on("focus",this._onInputFocus,this),this._input.findElem("control").on("blur",this._onInputBlur.bind(this)),t},_onInputClick:function(){this._startInputTime||(this._startClickTime=Date.now())},_onClickPopup:function(){this._clicksCount++},_onInputFocus:function(){this._timeoutInputTime&&clearTimeout(this._timeoutInputTime),this._startInputTime=this._startClickTime},_onInputBlur:function(t){this._timeoutInputTime=setTimeout(function(){this._startClickTime=null,this._startInputTime=null}.bind(this),300)},_onFormButtonClick:function(){"keyboard"!==this._path.submit&&(this._path.submit="button_by_mouse")},_onFormSubmit:function(t,e){e.data.block!==this.__self.getName()&&e.data.prevent!==!1&&(this.params.preventSubmit&&(e.stopImmediatePropagation(),e.preventDefault()),this._doSubmit())},_doSubmit:function(){this.submit()},_onModelRequest:function(t,e){this._requests.push(e.request)},_onModelResponse:function(t,e){if(e.data&&e.data.items){var i=e.data.items;this._path.personal=this._hasPersonal(i)?"nah_not_used":"nah_not_shown",this._meta=e.data.meta||{},this._renderTime=new Date,this._setMetaProps(e),delete this._requests[e.val.toLowerCase()]}},_onInputChange:function(t,e){e&&"clear"!==e.source||(this._params.user_input=t.block.val(),this[this._firstChange?"_lastChange":"_firstChange"]=new Date,this._startInputTime||(this._startInputTime=this._firstChange.getTime())),this._selectedText&&(this._path.state="edit"),this._ratio.actionsCount++},_onInputEnter:function(){this._path.submit="keyboard"},_onPopupShow:function(){"not_shown"===this._path.state&&(this._path.state="not_used")},_onSuggestItemEnter:function(t,e){e.byKeyboard&&this.params.suggest.params.updateOnEnterByKeyboard&&(this._selectedText=e.val,this._path.state="suggest")},_onSuggestUpdate:function(){this._addRenderTime(new Date-this._renderTime)},_onSuggestSelect:function(t,e){var i=this;i._path.state=e.byKeyboard?"keyboard":"mouse",i._path.index=e.itemIndex+1,i._selectedText=e.val,e.item.hasMod("personal")&&(i._path.personal="nah_used"),i.params.submitBySelect&&(i._path.submit=e.byKeyboard?"keyboard":"click_by_mouse",i._params.pos=e.pos,i._params.text=this._selectedText),i.params.suggest.isNeedSubmitFormOnSelectItem(e.item)||i.submit({submitForm:!1,afterSendAjaxCallback:e.callbackOnSelect})},unbindAllEvents:function(){var t=this.params,e=t.suggest,i=t.form,n=e.params["suggest2-popup"];return i.un("button-click").un("submit"),e.getModel().un("request").un("response"),e.params["suggest2-input"].un("change").un("enter"),n.un("show").un("hide"),e.un("select"),this},_hasPersonal:function(t){return t.some(function(t){return 1===BEM.blocks["suggest2-view"]._getPrefs(t).pers})},_setMetaProps:function(t){t.data.meta&&Object.keys(this.metaProps).forEach(function(e){this._params[this.metaProps[e]]=t.data.meta[e]||""},this)},_getParams:function(t){return Object.keys(t).reduce(function(e,i){return""===t[i]?e:(e.push(i+"="+encodeURIComponent(t[i]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getSession:function(){return this._session=(new Date).getTime()+Math.round(1e4*Math.random()),{session:this._session}},_getSinceChange:function(){var t=this._getSinceTime("first"),e=this._startInputTime&&Date.now()-this._startInputTime||0;return{since_first_change:t,since_last_change:this._getSinceTime("last"),total_input_time:e}},_getSinceTime:function(t){var e="_"+t+"Change";return this._sinceChange[t]=this[e]?(new Date).getTime()-this[e]:0,this._sinceChange[t]},_getResponsesShows:function(){return this._requests.reduce(function(t,e){return t.rqs++,e.error||(e.responseTime&&t.rsp++,0===e.itemsCount&&t.ersp++,e.fromCache&&t.cchd++),t},{rqs:0,rsp:0,rndr:this._renderTimes.length,ersp:0,clks:this._clicksCount,cchd:0})},_getRatio:function(){return this._ratio.len=this._params.user_input.length,this._ratio.queryLen=this._params.text.length,{ratio:[this._ratio.len,this._ratio.queryLen,this._ratio.actionsCount].join(".")}},_addRenderTime:function(t){return this._renderTimes.push(t),this._params.render_times=this._renderTimes.join("."),this},_getData:function(){return{"*data":"url="+this.params.dataUrl}}},{_generateReqID:function(){var t=BEM.blocks["i-global"]&&BEM.blocks["i-global"].param("yandexuid")?BEM.blocks["i-global"].param("yandexuid"):this._random(9)+this._random(9);return t+(+new Date).toString().slice(-7)+this._random(7)},_random:function(t){return Math.random().toString().slice(2,Math.min(t,10)+2)}}),BEM.DOM.decl("suggest2-counter",{bindEvents:function(){this.__base.apply(this,arguments);var t=this.params.suggest;BEM.blocks["suggest2-item"].on(t.domElem,"leftclick",this._onClickPopup.bind(this))}}),BEM.DOM.decl("suggest2-counter",{clear:function(){return this.__base.apply(this,arguments),this._path.submit="button_by_mouse",this}}),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.dispatch.apply(this,arguments),e.type="click")}}}(jQuery),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"flat"},{getPopupWidth:function(){var t=this._input.width();return this._input.get().hasMod("theme","normal")?t-2:t}}),BEM.decl({block:"suggest2-view",modName:"advanced",modVal:"yes"},{_getItemByType:function(t,e,i,n){var o=n.js,s=n.content;switch(i){case"html":o.val=t[1],s.push(e.body);break;case"bemjson":o.val=t[1],s.push.apply(s,Array.isArray(e.bemjson)?e.bemjson:[e.bemjson])}return this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"suggest2-item",modName:"interact",modVal:"link"},{onSelect:function(t){var e=this;e.__base.apply(e,arguments);var i=e.elem("link");return t||"_self"===i.attr("target")?function(){e._locationChange(i.attr("href"))}:void 0},_locationChange:function(t){window.location=t},valOnSelect:function(){return!1}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{init:function(){this.__base.apply(this,arguments),this._boundResizeHandler=this._resizeHandler.bind(this),this.__self._bindToWinResize(this._boundResizeHandler)},_resizeHandler:function(){this._popup.width(this.getPopupWidth())},destruct:function(){this.__self._unbindFromWinResize(this._boundResizeHandler),this._boundResizeHandler=null,this.__base.apply(this,arguments)}},{_resizeCallbacks:[],_bindToWinResize:function(t){return this._resizeCallbacks.push(t),this},_unbindFromWinResize:function(t){for(var e=0;e<this._resizeCallbacks.length;e++)if(this._resizeCallbacks[e]===t)return this._resizeCallbacks.splice(e,1),this;return this},_getResizeCallback:function(){return $.throttle(function(){var t=arguments;this._resizeCallbacks.forEach(function(e){e.apply(this,t)},this)},300,this)},live:function(){this.__base.apply(this,arguments),this._resizeCallback=this._getResizeCallback(),BEM.DOM.win.on("resize",this._resizeCallback)}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{_minWidth:0,_maxWidth:0,_resizeHandler:function(){this.__base.apply(this),this.afterCurrentEvent(function(){this.adjustView()})},_onShow:function(){this.__base.apply(this),this.hasMod("theme","large")&&this._applyMetricsToContent()},adjustView:function(){var t=this.__base.apply(this,arguments),e=t.minWidth,i=t.maxWidth,n=!1;return e!==this._minWidth&&(this._minWidth=e,n=!0),i!==this._maxWidth&&(this._maxWidth=i,n=!0),n&&this._popup.isShown()&&this._applyMetricsToContent(),t},_applyMetricsToContent:function(){this.__base.apply(this,arguments);var t=this.findElem("content");this._minWidth&&t.css("min-width",this._minWidth),this._maxWidth&&t.css("max-width",this._maxWidth)}}),BEM.DOM.decl({block:"suggest2",modName:"ahead",modVal:"yes"},{init:function(){var t=this.__base.apply(this,arguments),e=this;return e._model.on("response",function(t,i){var n=i.data,o=n.items&&n.items[0],s=e._input.val(),r="object"==typeof o?o[1]:o,a="string"==typeof r&&0===r.indexOf(s.toLowerCase())&&r.slice(i.val.length);n.val=i.val,e.params.aheadFromServer?e._input.get().setAhead(i.val+(n.meta&&n.meta["continue"]||"")):a&&s.length>=e.params.showOverChars?e._input.get().setAhead(i.val+(e.params.showFullPhrase?a[1]:a[1].split(" ")[0])):e._input.get().unsetAhead()}),t},getDefaultParams:function(){return $.extend(this.__base(),{aheadFromServer:!1,showOverChars:3,showFullPhrase:!1})}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:{inited:function(){this._isReady=!1,this._nodes=this.initNodes()}}},getDefaultParams:function(){return{inputName:"input",buttonName:"button",popupName:"popup"}},destruct:function(){this._nodes.forEach(function(t){t.suggest.domElem&&BEM.DOM.destruct(t.suggest.domElem),this.unbindFormEvents(t),t.counter&&t.counter.destruct(),t.proxies.input.destruct(),t.proxies.popup.destruct()},this),this.__base.apply(this,arguments)},getOwner:function(t){},isReady:function(){return this._isReady},initNodes:function(){var t=this.getNodes();return t.forEach(function(t){t.suggest.init()}),this._isReady=!0,this.trigger("ready",{nodes:t}),t},getNodes:function(){return this.getNodeList().map(function(t){var e=t.suggest,i=e.params;return i.form=this,i.input=t.input,i.popup=t.popup,i.button=t.button,t.proxies={},t.proxies.popup=i["suggest2-popup"]=BEM.create({block:"suggest2-popup",mods:$.extend({"for":this.params.popupName},this.params.popupMods)},this._getNodePopupParams(e,i)),t.proxies.input=i["suggest2-input"]=BEM.create({block:"suggest2-input",mods:this.params.inputMods},this._getNodeInputParams(e,i)),t.counter&&(t.counter.params.form=this,t.counter.params.suggest=e,i.counter=t.counter),this.bindFormEvents(t),t},this)},_getNodeInputParams:function(t,e){return{suggest:t,input:e.input,updateOnEnterByKeyboard:e.updateOnEnterByKeyboard}},_getNodePopupParams:function(t,e,i){return{suggest:t,popup:e.popup,popupContentElem:this.params.popupContentElem,owner:this.getOwner(i)||e.input}},bindFormEvents:function(t){var e=this;return t.button&&t.button.bindTo("click press",function(t){e._onButtonClick(t)}),e.bindTo("submit",function(t,i){e.onSubmit(t,i)}),e},_onButtonClick:function(t){this.trigger("button-click",t)},unbindFormEvents:function(t){var e=this;return t.button&&t.button.un("click press"),e.unbindFrom("submit"),e},submit:function(t){return this.domElem.trigger("submit",t||{}),this},onSubmit:function(t,e){t.data=e||{},this.trigger("submit",t)},getNodeList:function(){var t=this,e=[];return t.elem("node").each(function(i,n){var o=$(n),s=t._getFormNodeElems(o);e.push(t._getFormNodeBlocks(s,o))}),e},_getFormNodeElems:function(t){return{input:this.findElem(t,"input"),button:this.findElem(t,"button")}},_getSuggestForNode:function(t){return this.findBlockInside(t,"suggest2")},_getFormNodeBlocks:function(t,e){var i=this._getSuggestForNode(e);return{node:e,suggest:i,counter:this.findBlockOn("suggest2-counter"),
input:this.findBlockOn(t.input,"input"),button:this.findBlockOn(t.button,this.params.buttonName),popup:i.findBlockOn(this.params.popupName)}},appendHiddenInputs:function(t){return BEM.DOM.append(this.domElem,BEMHTML.apply(t.map(function(t){return{block:this.__self.getName(),elem:"hidden-input",tag:"input",attrs:{type:"hidden",name:t.name,value:t.value}}},this))),this},removeHiddenInputs:function(){return BEM.DOM.destruct(this.findElem(this.domElem,"hidden-input")),this}},{live:function(){this.liveInitOnBlockInsideEvent("click tap change focus","input")}}),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"stats",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._bindCounters()}}},_prepareCounterStats:function(t){var e=[];try{e.push(t.since_last_change),e.push(t.since_first_change),e.push(t.user_input.length),e.push(t.ratio.actionsCount),e.push(t.path.index),e.push("button_by_mouse"===t.path.submit?"1":"0"),e.push("edit"===t.path.state?"1":"0")}catch(i){return""}return e.join(",")},_bindCounters:function(){var t,e=this,i=e.findBlockInside("suggest2"),n=i.getCounter();n&&n.on("submit",function(i,n){var o;t&&t.remove(),o=e._prepareCounterStats(n),o&&(t=$("<input>",{type:"hidden",name:"csg",value:o}),e.domElem.append(t))})}})}(),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"prefetch",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.domElem.append('<input type="hidden" name="suggest_reqid" value="'+BEM.blocks["suggest2-counter"]._generateReqID()+'">'),this._bindPrefetch()}}},_prefetchQuery:function(t){var e=this._getParams(t),i=this;i._prefetchStarted[t]||(i._prefetchStarted[t]=!0,$.ajax({url:i.domElem.attr("action")+i._serializeFormParams(e),success:function(){i._prefetchLoaded[t]=!0},cache:!0}))},_bindPrefetch:function(){var t=this,e=!1;t._input=t.findBlockInside("input"),t._prefetchStarted={},t._prefetchLoaded={};try{if(window.sessionStorage.setItem("test","1"),"1"!==window.sessionStorage.getItem("test"))return;window.sessionStorage.removeItem("test")}catch(i){return}t.domElem.on("submit",function(){var i=t._input.val();t._prefetchStarted[i]&&(e||(e=!0,t.domElem.append('<input type="hidden" name="prefetch" value="1">'),t._prefetchLoaded[i]||t.domElem.append('<input type="hidden" name="unfinished" value="1">')));try{window.sessionStorage.setItem("x",(new Date).getTime())}catch(n){}}),t.findBlockInside("suggest2").getModel().on("response",function(e,i){var n=i&&i.data,o=n&&n.meta&&"yes"===n.meta.instant;if(o&&n.meta.prefetch)for(var s=0,r=n.meta.prefetch.length;r>s;++s)t._prefetchQuery(n.meta.prefetch[s])})},_getParams:function(t){var e=this.domElem.find("input"),i=[];return e.each(function(){var e=$(this),n=e.prop("name");n&&i.push({name:e.prop("name"),value:"text"===n?t:e.val()})}),i.push({name:"prefetch",value:1}),i},_serializeFormParams:function(t){for(var e=[],i=0;i<t.length;++i)e.push(encodeURIComponent(t[i].name)+"="+encodeURIComponent(t[i].value));return"?"+e.join("&")}})}(),BEM.decl("i-voice",{},{hasMicSupport:function(t){if("Promise"in window&&(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)){var e;if(navigator.enumerateDevices?e=navigator.enumerateDevices.bind(navigator):(window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(e=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(e=function(t){navigator.mediaDevices.enumerateDevices().then(t)})),!e)return void t({message:"API is Not supported"});e(function(e){var i=e.some(function(t){return"audio"===t.kind||"audioinput"===t.kind});t(!i&&{message:"Mic is not available"})})}else t({message:"API is Not supported"})}}),function(){var t,e,i,n,o={},s=500,r=1,a=5e3,l=0;BEM.decl("i-voice",{},{events:{ERROR:"error",BEFORE_START_RECOGNIZE:"before-start-recognize",START_RECOGNIZE:"start-recognize",SPEECH_KIT_INIT:"speech-kit-init",SPEECH_KIT_ACCESS_GRANTED:"speech-kit-access-granted",RECOGNIZE_TEXT:"recognize-text",STOP_RECOGNIZE:"stop-recognize",PERMISSION_REQUEST:"permission-request"},eventsType:{ERROR_INIT:"error-init",ERROR_SPEECH_KIT:"error-speech-kit",SUCCESS_RECOGNIZE:"success-recognize",TIMEOUT_SUCCESS:"timeout-success",TIMEOUT_EMPTY:"timeout-empty"},TIMEOUT_RECOGNIZE:1e4,startRecognize:function(t){if(!this._isOnline())return void this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_INIT,message:"offline"});n=t,o={recognizedText:"",_startedRecognize:!0,maxTime:t.maxTime||0===t.maxTime?t.maxTime:this.TIMEOUT_RECOGNIZE};var r=window.AudioContext||window.webkitAudioContext;this._freeAudioContext();try{i=i||new r,i.createScriptProcessor(256,1,1).disconnect()}catch(a){return void this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_INIT,message:"AudioContext is not available"})}this.trigger(this.events.BEFORE_START_RECOGNIZE,{session:o}),this._getStreamer(t,function(n){return n.err||!n.streamer?(this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_INIT,message:n.err}),void this._freeAudioContext()):(window.ya.speechkit.audiocontext=i,o.streamer=n.streamer,this._speechKitStart(o,t),this.trigger(this.events.START_RECOGNIZE,{session:o}),void(e=setTimeout(function(){this.isStartedRecognize()&&!this.isPermissionProvided()&&this.trigger(this.events.PERMISSION_REQUEST,{session:o})}.bind(this),s)))}.bind(this))},_speechKitStart:function(t,e){var i=e.codec||window.ya.speechkit.FORMAT.OPUS||window.ya.speechkit.FORMAT.PCM16;t.streamer.start({lang:e.lang,model:e.recognitionModel,apikey:e.apikey,initCallback:this._speechKitInitHandler.bind(this),accessGrantedCallback:this._speechKitAccessGrantedHandler.bind(this),dataCallback:this._speechKitDataHandler.bind(this),errorCallback:this._speechKitErrorHandler.bind(this),format:i,particialResults:!0,utteranceSilence:Math.max(e.utteranceSilence||0,60),use_snr:Boolean(e.use_snr),yandexuid:e.yandexuid,applicationName:e.applicationName})},_isOnline:function(){return"undefined"==typeof navigator.onLine||navigator.onLine},isStartedRecognize:function(){return o._startedRecognize},stopRecognize:function(t,i){this.isStartedRecognize()&&(clearTimeout(e),this._resetTimeout(),o._startedRecognize=!1,o.streamer&&o.streamer.abort(),clearTimeout(this._initFailedTimeout),this.trigger(this.events.STOP_RECOGNIZE,{type:t,session:o,data:i}))},isSpeechkitLoaded:function(){return window.ya&&window.ya.speechkit&&window.ya.speechkit.SpeechRecognition},isPermissionProvided:function(){return window.ya.speechkit.isPermissionProvided()},_freeAudioContext:function(){i&&i.close&&i.state&&("closed"!==i.state&&i.close(),i=null)},_speechKitDataHandler:function(t,e){l=0,this.afterCurrentEvent(function(){t&&(o.recognizedText=t,this.trigger(this.events.RECOGNIZE_TEXT,{session:o,isDone:e})),e&&this.stopRecognize(this.eventsType.SUCCESS_RECOGNIZE)}.bind(this))},_speechKitInitHandler:function(t){o.id=t,this._resetTimeout(),this._startTimeout(),clearTimeout(this._initFailedTimeout),this.trigger(this.events.SPEECH_KIT_INIT,{session:o})},_speechKitAccessGrantedHandler:function(){this._initFailedTimeout=setTimeout(function(){this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_SPEECH_KIT,session:o,message:"offline"})}.bind(this),a),this.trigger(this.events.SPEECH_KIT_ACCESS_GRANTED,{session:o})},_speechKitErrorHandler:function(t){return"MediaDeviceFailedDueToShutdown"===t&&r>l?(this._speechKitStart(o,n),void l++):(o._startedRecognize=!1,clearTimeout(e),this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_SPEECH_KIT,session:o,message:t}),void this._freeAudioContext())},_startTimeout:function(){o.maxTime&&(o._timerRecognize=setTimeout(this._timeoutHandler.bind(this),o.maxTime))},_resetTimeout:function(){o._timerRecognize&&(clearTimeout(o._timerRecognize),o._timerRecognize=null)},_timeoutHandler:function(){o._timerRecognize=null;var t=Boolean(o.recognizedText);this.stopRecognize(this.eventsType[t?"TIMEOUT_SUCCESS":"TIMEOUT_EMPTY"])},loadSpeechkit:function(t,e){this._loadCallbacks=this._loadCallbacks||[],this._loadCallbacks.push(e),1===this._loadCallbacks.length&&this._loadSpeechkit(t,function(t){this._loadCallbacks.forEach(function(e){e&&e(t)}),this._loadCallbacks=[]}.bind(this))},_loadSpeechkit:function(t,e){var i=document.createElement("script");i.src=t+"/webspeechkit/v-1.0.5/webspeechkit-recognition.min.js",i.async=!0,i.crossOrigin="",i.onload=function(){e(!0)},i.onerror=function(){e(!1)},document.body.appendChild(i)},_initStreamer:function(e){try{t=new window.ya.speechkit.SpeechRecognition,e({streamer:t})}catch(i){e({err:"Error at SpeechStreamer create"})}},_getStreamer:function(e,i){var n=this;return t?void i({streamer:t}):this.isSpeechkitLoaded()?void this._initStreamer(i):void this.loadSpeechkit(e.origin,function(t){t?n.afterCurrentEvent(function(){n._initStreamer(i)}):i({err:"Error when loading webspeechkit"})})}}),"undefined"==typeof window.ya&&(window.ya={}),"undefined"==typeof window.ya.speechkit&&(window.ya.speechkit={});var c={websocketProtocol:"wss://",asrUrl:"webasr.yandex.net/asrsocket.ws",ttsUrl:"https://wayback.archive-it.org/all/20180620162258/https://tts.voicetech.yandex.net",ttsStreamUrl:"webasr.yandex.net/ttssocket.ws",lang:"ru-RU",langWhitelist:["ru-RU","tr-TR","en-US","en-GB","uk-UA","ru","tr","en","uk","en-EN"],model:"notes",applicationName:"jsapi",apikey:"",uuid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})};"undefined"==typeof window.ya.speechkit._extend?window.ya.speechkit.settings=c:window.ya.speechkit.settings=window.ya.speechkit._extend(c,window.ya.speechkit.settings)}(),home.l10n=function(t){for(var e=t.split("."),i=home.lang,n=0;n<e.length;++n){if(!i||!i[e[n]])return"";i=i[e[n]]}return i},BEM.DOM.decl("voice-search-popup",{onSetMod:{js:{inited:function(){this._setupProperties()}}},state:{name:"state",opened:"opened",closed:"closed"},speechKitState:{name:"speechkit-state",init:"init",start:"start",recognized:"recognized",finish:"finish",error:"error",access:"access"},_indicatorHeightMultiplier:.8,SMOOTH_CONSTANT:.8,loadSpeechkit:function(t){BEM.blocks["i-voice"].loadSpeechkit(t)},startRecognition:function(t){this._voiceRecognition.startRecognize(t)},_setupProperties:function(){if(this._voiceRecognition=BEM.blocks["i-voice"],this._errorDescription={PermissionDenied:{title:home.l10n("voice-search.popup.noaccess.title"),subtitle:home.l10n("voice-search.popup.noaccess.subtitle")},ConnectionProblem:{title:home.l10n("voice-search.popup.connectionproblem.subtitle"),subtitle:home.l10n("voice-search.popup.connectionproblem.title")},other:{title:home.l10n("voice-search.popup.unknownerror.title")}},this._content=this.elem("content"),this._textElem=this.elem("text"),this._indicator=this.elem("indicator"),this._boundSetupIndicator=this._setupIndicator.bind(this),this._paranja=$(".voice-search-popup__paranja"),this._lastAmplitute=0,this._voiceRecognition){var t=this._voiceRecognition,e=t.events;this._voiceEventsType=t.eventsType,t.on(e.BEFORE_START_RECOGNIZE,this._onPreInit,this),t.on(e.SPEECH_KIT_INIT,this._onInit,this),t.on(e.SPEECH_KIT_ACCESS_GRANTED,this._onAccessGranted,this),t.on(e.ERROR,this._voiceOnError,this),t.on(e.RECOGNIZE_TEXT,this._voiceRecognizeText,this),t.on(e.STOP_RECOGNIZE,this._voiceStopRecognize,this),t.on(e.PERMISSION_REQUEST,this._voicePermissionRequest,this),this._calcSoundAmplitudePerFrameBinded=this._calcSoundAmplitudePerFrame.bind(this),this.bindTo("continue-button","click",this._onErrorContinueButtonPressed,this),this.bindTo("help-button","click",this._onErrorHelpButtonPressed,this)}},_calcSoundAmplitudePerFrame:function(){if(this._nodeAnalyzer){var t=new Uint8Array(this._nodeAnalyzer.frequencyBinCount);this._nodeAnalyzer.getByteFrequencyData(t);var e=Array.prototype.slice.call(t,0,4),i=e.reduce(function(t,e){return t+e},0)/e.length,n=i/255;this._onAudioChangeAmplitude(n),this._animationFrameId=window.requestAnimationFrame(this._calcSoundAmplitudePerFrameBinded)}},_onPreInit:function(){this._showLayout(),this.trigger("start")},_onAccessGranted:function(){this._attachCloseEvents(),this._setupIndicator(),this._showInitState()},_onInit:function(t,e){e.session&&e.session.streamer&&e.session.streamer.recorder&&(this._nodeAnalyzer=e.session.streamer.recorder.getAnalyserNode(),this._nodeAnalyzer.fftSize=32,this._nodeAnalyzer.smoothingTimeConstant=.95,this._calcSoundAmplitudePerFrameBinded()),this._showStartState()},_voiceRecognizeText:function(t,e){var i=e.session.recognizedText;i&&(this._startedRecognize=!0,this._setRecognizedText(i),this._showRecognizedState(),this.trigger("text",e))},_voiceStopRecognize:function(t,e){return e.type===this._voiceEventsType.SUCCESS_RECOGNIZE||e.type===this._voiceEventsType.TIMEOUT_SUCCESS?(this.trigger("success",e),void setTimeout(function(){this.trigger("after-success",e),this._hideLayout()}.bind(this),this.__self.TIMEOUT_SUCCESS_RECOGNITION)):void this._hideLayout()},_voiceOnError:function(t,e){this._attachCloseEvents();var i=this._parseError(e.message);this._showErrorState(i)},_parseError:function(t){return t=String(t),-1!==t.indexOf("Socket error:")||"offline"===t?"ConnectionProblem":-1!==t.indexOf("not allowed")||"MediaDeviceFailedDueToShutdown"===t||"PermissionDismissedError"===t||"PermissionDeniedError"===t||"Permission denied"===t||"Permission dismissed"===t?"PermissionDenied":"other"},_attachCloseEvents:function(){var t=this._hideLayout.bind(this),e=new Date;this._paranja.on("click",function(){return new Date-e>500?void t():!1}),this.bindTo("close","click",t),this.bindToDoc("keydown",function(e){e.originalEvent&&"altKey"in e.originalEvent&&(home.stat.logPath("click","voice.popup.exit-key"),t())})},_showLayout:function(){this.afterCurrentEvent(function(){this.setMod(this._paranja,"state","open")}),home.stat.logDOMShow(this.domElem),home.stat.logDOMShow(this._paranja),this.trigger("show")},_hideLayout:function(){this._voiceRecognition.stopRecognize(),this.unbindFromDoc("keydown"),this._paranja.unbind("click"),this.unbindFrom("close","click"),window.cancelAnimationFrame(this._animationFrameId),this.delMod(this._paranja,"state"),this._hidePopup(),this.trigger("hide")},_onErrorContinueButtonPressed:function(){this._hideLayout()},_onErrorHelpButtonPressed:function(){this._hideLayout()},_bindEvents:function(){$(window).on("resize.voice-search-popup",this._boundSetupIndicator),$(window).on("popstate.voice-search-popup",this._hideLayout.bind(this)),$(window).on("scroll.voice-search-popup",this._hideLayout.bind(this)),this.__self._visibilityEventName&&$(document).one(this.__self._visibilityEventName+".voice-search-popup",function(){this.afterCurrentEvent(function(){this._hideLayout()})}.bind(this))},_unbindEvents:function(){$(window).off(".voice-search-popup"),this.__self._visibilityEventName&&$(document).off(this.__self._visibilityEventName+".voice-search-popup")},_setupIndicator:function(){var t=this.elem("content").height()*this._indicatorHeightMultiplier;t=Math.floor(t),this._indicator.width(t),this._indicator.height(t)},_getProcessedAmplitude:function(t,e){return this.SMOOTH_CONSTANT*t+(1-this.SMOOTH_CONSTANT)*e},_updateIndicatorWithAmplitude:function(t){var e=t<=this._lastAmplitute;if(t=this._getProcessedAmplitude(t,this._lastAmplitute),this._lastAmplitute=t,.4>=t||e)return this._indicator.css("transform",""),this._indicator.css("transition",""),void this._indicator.css("opacity","");var i=1.2,n=Math.min(t*i,1);this._indicator.css("transition","opacity .1s linear, transform 0s linear"),this._indicator.css("transform","translate(-50%, -50%) scale("+n+")"),this._indicator.css("opacity","1")},_showPopup:function(){this._bindEvents(),this._showLayout(),this.setMod(this.state.name,this.state.opened),history.pushState&&history.pushState(null,document.title,location.href)},_hidePopup:function(){this.getMod(this.state.name)===this.state.opened&&(this._unbindEvents(),this.setMod(this.state.name,this.state.closed))},_setRecognizedText:function(t){this._textElem.text(t)},_showInitState:function(){this.setMod(this.speechKitState.name,this.speechKitState.init),this._showPopup()},_showStartState:function(){this._setRecognizedText(""),this.setMod(this.speechKitState.name,this.speechKitState.start)},_showRecognizedState:function(){this.setMod(this.speechKitState.name,this.speechKitState.recognized)},_showErrorState:function(t){var e;this._errorDescription[t]&&(e=this._errorDescription[t].subtitle||"",this.setMod(this.speechKitState.name,this.speechKitState.error),this.elem("error-title").text(this._errorDescription[t].title),this.elem("error-subtitle").html(e),this._showPopup(),home.stat.logPath("show","voice.popup.error."+t))},_onAudioChangeAmplitude:function(t){this.getMod(this.speechKitState.name)!==this.speechKitState.finish&&this._updateIndicatorWithAmplitude(t)},_voicePermissionRequest:function(){this.setMod(this.speechKitState.name,this.speechKitState.access)}},{TIMEOUT_SUCCESS_RECOGNITION:700,live:!0,_visibilityEventName:function(){var t;return["hidden","mozHidden","webkitHidden","msHidden"].forEach(function(e){!t&&e in document&&(t=e)}),t&&t.replace(/hidden/i,"visibilitychange")}()}),BEM.DOM.decl("voice-search-popup",{_showErrorState:function(t){this.__base.apply(this,arguments);var e=!(!this.params.showMicHelper||"PermissionDenied"!==t);if(e){var i=home.l10n("voice-search.popup.chrome-permission.subtitle").replace("%icon%",'<div class="voice-search-popup__error-access-icon"></div>');this.elem("error-subtitle").html(i)}this.toggleMod("mic-helper","yes",e);var n="PermissionDenied"===t;this.toggleMod("show-help","yes",n)}}),function(){"use strict";var t=$.Deferred();$(function(){t.resolve()}),BEM.decl("i-message-locker",{},{blockOrder:[],acquireLock:function(t,e){var i,n=$.Deferred(),o=this;return this._initOrder(),t in this._blockOrderMap&&!this._locked?(i=this._blockOrderMap[t],!this._showPretender||this._showPretender.index>i?(this._showPretender?this._showPretender.deferreds.forEach(function(t){t.reject()}):this._initDelay.done(function(){setTimeout(function(){var t=o._showPretender.deferreds;o._locked=o._showPretender.name,o._closeFunc=e,o._showPretender=null,t.forEach(function(t){t.resolve()}),BEM.channel("i-message-locker").trigger("lock",o._locked)},0)}),this._showPretender={name:t,deferreds:[n],index:i}):this._showPretender&&this._showPretender.name===t?this._showPretender.deferreds.push(n):n.reject(),n):n.reject()},releaseLock:function(t){this._locked&&this._locked===t&&(this._locked="",this._closeFunc=null,BEM.channel("i-message-locker").trigger("unlock",t))},forceClose:function(){this._closeFunc&&this._closeFunc()},_blockOrderMap:void 0,_showPretender:void 0,_locked:"",_initDelay:t,_initOrder:function(){if(!this._blockOrderMap){this._blockOrderMap={};for(var t=0;t<this.blockOrder.length;++t)this._blockOrderMap[this.blockOrder[t]]=t}}})}(),BEM.decl("i-message-locker",{},{blockOrder:["b-time-banner","b-hs-balloon","dist-popup","themes-touch-promo","stream-promo-popup","media-football-promo","themes-promo","media-zen-promo"]}),BEM.DOM.decl({name:"input",modName:"voice-search",modVal:"yes"},{onSetMod:{js:function(){var t=this;this.__base.apply(this,arguments),this._hasRecognized=!1,BEM.blocks["i-voice"].hasMicSupport(function(e){e?t.delMod("voice-search"):(t.hasMod(t.elem("clear"),"visibility","visible")||t.delMod(t.elem("voice-search"),"visibility"),home.stat.logPath("show","voice"))})}},onElemSetMod:{clear:{visibility:function(t,e,i){this.__base.apply(this,arguments),this.toggleMod(this.elem("voice-search"),"visibility","hidden","","visible"===i)}}},_initVoicePopup:function(){if(!this._popupInited){this._popupInited=!0;var t=$(home.view("voice-search-popup",{showMicHelper:this.params.showMicHelper})).appendTo("body").filter(".voice-search-popup"),e=this;this._voicePopup=t.bem("voice-search-popup",{showMicHelper:this.params.showMicHelper}),this._voicePopup.on({start:function(){e._setVoiceSearchState(!0)},hide:function(){e._setVoiceSearchState(!1)},text:function(t,i){BEM.channel("voice-search").trigger("change"),i.session.recognizedText&&(e._hasRecognized||(e._hasRecognized=!0,home.stat.logPath("click","voice.data")))},success:function(t,i){e.val(i.session.recognizedText,{suggest:!1})},"after-success":function(){e._setVoiceSearchState(!1),e._submitForm()}})}},_setVoiceSearchState:function(t){this.toggleMod(this.elem("voice-search"),"active","yes",t)},_submitForm:function(){var t=this.findBlockOutside("suggest2-form");t.domElem.append($("<input>",{type:"hidden",name:"query_source",value:"voice"})),t.submit()},startRecognize:function(){this.setMod("focused",""),this._initVoicePopup(),BEM.blocks["i-message-locker"].forceClose(),BEM.channel("voice-search").trigger("init"),this._voicePopup.startRecognition({origin:this.params.webspeechkitStaticOrigin,lang:this.params.recognitionLocale,apikey:"5e7c4b34-f4ff-49c1-a683-44439c124cc8",recognitionModel:"general",utteranceSilence:this.params.recognitionUtteranceSilence||100,applicationName:this.params.webspeechkitApplication})},_loadLib:function(){this._initVoicePopup(),this._voicePopup.loadSpeechkit(this.params.webspeechkitStaticOrigin)},_updateClear:function(){this._startedRecognize||this.__base.apply(this,arguments)}},{live:function(){var t=this.__base.apply(this,arguments);return this.liveBindTo("voice-search","mouseover",function(){this._loadLib()}),this.liveBindTo("voice-search","pointerclick",function(){home.stat.logPath("click","voice.on"),this.startRecognize()}),t}}),BEM.DOM.decl("suggest2-counter",{sendAjax:function(t,e){return e&&e.submitForm&&"sendBeacon"in navigator&&navigator.sendBeacon(t," ")?(this._sendAjaxAlways(e),this):this.__base.apply(this,arguments)}}),BEM.DOM.decl("suggest2-counter",{bindEvents:function(){this.__base.apply(this,arguments),this._input.domElem.one("click",function(){Ya.Rum.sendTimeMark("153.882")})},_getParams:function(t){return Object.keys(t).reduce(function(e,i){return""===t[i]?e:(e.push(i+"="+("vars"===i?t[i]:encodeURIComponent(t[i])).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getParamsList:function(){var t,e,i=this.__base.apply(this,arguments),n=home.stat.getCustomPageParams(),o={};if(Ya.Rum.sendTimeMark("153.1896"),n){n=n.replace(/^\//,"").split("/");for(var s=0,r=n.length;r>s;s++)e=n[s],t=e.indexOf("="),o[e.substr(0,t)]=e.substr(t+1,e.length);var a=home.stat.getRoot(),l=home.getData?home.getData("timing.reqid"):"";return a&&(o.lid=a+".searchgo"),l&&(o.sid=l),i.concat(o)}return i}}),BEM.DOM.decl("home-arrow",{_onSampleClick:function(t){function e(){i.elem("control").attr("readonly",!1),i.un("clear",e)}var i=this.findBlockInside("input");i&&(i.elem("control").attr("readonly",!0),i.onFirst("clear",e),i.val(t.text(),{source:"sample"}),this.trigger("sample-click"))}},{live:function(){var t=function(t){this._onSampleClick(t.data.domElem),t.preventDefault()};this.liveBindTo("sample-link","pointerclick",t),this.liveBindKey("sample-link","space enter",t)}}),BEM.DOM.decl("yabrowser-promo",{_install:function(){}},{live:function(){this.liveBindTo("icon-link text-link","pointerclick",function(){return this._install()})}}),BEM.DOM.decl({block:"yabrowser-promo",modName:"install",modVal:"inline"},{_install:function(){var t=this.params,e=t.counters;return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:t.api}},$.extend(t,{callbacks:{yes:function(){e.install&&((new Image).src=e.install)},no:function(){e.cancel&&((new Image).src=e.cancel)}}}))),this._inlineInstall.request().fail(function(){window.location=t.url}),e.click&&((new Image).src=e.click),home.stat.logPath("click","dist.searchlink.browser.link"),!1}}),BEM.DOM.decl({block:"yabrowser-promo",modName:"install",modVal:"download"},{_install:function(){return this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),home.stat.logPath("click","dist.searchlink.browser.link"),!1}}),function(t){function e(t){var e=[];return t.replace(/(\d+)|\.|[^.\d]+/g,function(t,i){i?e.push(Number(i)):e.push(t)}),e}t.compareVersions=function(t,i){if(t===i)return 0;if(void 0===t||void 0===i||null===t||null===i)return NaN;for(var n=e(String(t)),o=e(String(i)),s=Math.max(n.length,o.length),r=0;s>r;++r){var a=n[r],l=o[r];if(void 0===a)return-1;if(void 0===l)return 1;if("."===a&&"."!==l)return-1;if("."===l&&"."!==a)return 1;if(typeof a!=typeof l&&(a=String(a),l=String(l)),a!==l)return a>l?1:-1}return 0}}(home),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),function(){"use strict";BEM.DOM.decl({name:"popup",modName:"focus",modVal:"capture"},{_onShown:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex","0").focus()},_onHidden:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("tabindex")}})}(),BEM.DOM.decl({block:"popup",modName:"expand",modVal:"simple"},{afterShow:function(){var t=this.domElem,e=this;this._addBg(),t.stop(!0).css(this._getTransitionParams()),setTimeout(function(){t.addClass("popup_expand_transition-on").css(e._getClearParams()),setTimeout(function(){e._addContent()},e.params.duration)},0),(new Image).src=this.params.banner.showStat,this._addResizeEvent()},beforeHide:function(t){var e=this.domElem,i=this;e.stop(!0,!0).css(this._getTransitionParams()),setTimeout(function(){e.css(i._getClearParams()).removeClass("popup_expand_transition-on"),i._removeContent(),t()},this.params.duration),(new Image).src=this.params.banner.closeStat},_moveToContainer:function(){this._inContainer=!0},_getBannerCoords:function(){return $(".banner-iframe")[0].getBoundingClientRect()},_getPopupCoords:function(){return this.domElem[0].getBoundingClientRect()},_addBg:function(){$(".banner__expand_popup-inner",this.domElem).css({"background-color":this.params.banner.bg})},_addResizeEvent:function(){var t=this,e=function(){t.hide(),$(window).unbind("resize orientationchange",e)};$(window).bind("resize orientationchange",e)},_addContent:function(){var t=$(".banner__expand_popup-inner",this.domElem),e=location.protocol||"http:",i="100%",n="100%",o=this.params.banner.src,s=this.params.banner.vars,r="";r=this.params.banner.html5?'<iframe class="banner-iframe" name="bannerhtml5" src="'+o+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="100%" height="100%"></iframe>':"<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+e+"//wayback.archive-it.org/all/20180620162258/https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+i+" height="+n+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+o+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+s+'" ><EMBED src="'+o+'"  flashvars="'+s+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+i+" HEIGHT="+n+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+e+'//wayback.archive-it.org/all/20180620162258/https://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>',t.children().length||t.append(r)},_removeContent:function(){this.params.banner.eraseContent&&$(".banner__expand_popup-inner",this.domElem).html("")},_getTransitionParams:function(){var t=this._getBannerCoords(),e=this._getPopupCoords(),i=t.height/e.height,n=t.left+t.width/2-(e.left+e.width/2),o=t.top+t.height/2-(e.top+e.height/2);return{transform:"translate3d("+n+"px, "+o+"px, 0) scale("+i+","+i+")",opacity:0}},_getClearParams:function(){return{transform:"translate3d(0, 0, 0) scale(1, 1)",opacity:1}}}),home.cls={full:function(t){return t},part:function(t){return t}},BEM.DOM.decl(home.cls.full("direct-close-block"),{onSetMod:{js:{inited:function(){var t=0===this.elem(home.cls.part("close-block")).length;this.bindTo(home.cls.part("close-button"),"click",function(){t?(this.renderCloseBlock(),t=!1,this.afterCurrentEvent(function(){this.toggleMod(home.cls.part("state"),home.cls.part("closing"),home.cls.part("idle"))})):this.toggleMod(home.cls.part("state"),home.cls.part("closing"),home.cls.part("idle"))})}}},renderCloseBlock:function(){var t=this.hasMod(home.cls.part("dark"))?{violet:"yes"}:{blue:"yes"},e=home.getData("direct.data."+this.params.id),i=[{options:"3-2",text:home.l10n("direct.not_interest")},{options:"14-2",text:home.l10n("direct.bought_already")},{options:"5-3",text:home.l10n("direct.spam")}].map(function(e){return home.view("home-link",{content:e.text,mods:t,mix:"direct-close-block__close-reason "+home.cls.full("direct-close-block")+"__close-reason",attrs:{"data-id":e.options},stat:""})}).join("");this.domElem.prepend(home.view("direct-close-block__close-block",{buttons:i}),home.view("direct-close-block__confirm-block",{})),e.sendStat&&home.stat.logPath("click",e.statName+".close")},_onReasonClick:function(t){var e=t.data.domElem.data("id").split("-"),i=home.getData("direct.data."+this.params.id+".abuseUrl");e.length>0&&((new Image).src=i+"?reason="+e[0]+"&action-id="+e[1],this.setMod(home.cls.part("state"),home.cls.part("confirmed")))}},{live:function(){return this.liveBindTo("close-reason","click",function(t){return this._onReasonClick(t)}),!1}}),function(){function t(e,i,n){e.toggleClass(i),setTimeout(function(){e.toggleClass(i),setTimeout(function(){t(e,i,n)},o+n)},n)}var e=20,i=7,n=4,o=6e4,s=88,r=!0;BEM.DOM.decl(home.cls.full("direct-desktop"),{onSetMod:{js:{inited:function(){this._checkHeight(),this._directWarningAnimation(),this._directImageAnimation(),this._checkCounter()}}},_checkCounter:function(){var t=home.getData("direct.counter");t&&BEM.blocks["i-visibilitychange"].waitForVisible(function(){(new Image).src=t})},_checkHeight:function(){var t=this.elem(home.cls.part("header")),e=this.elem(home.cls.part("text")),i=t.outerHeight(r)+e.outerHeight(r);i>s&&home.stat.logPath("text_overflow","direct.card")},_directWarningAnimation:function(){function t(){o.addClass(home.cls.full("direct-desktop__caption-message_animated"))}function i(){o.removeClass(home.cls.full("direct-desktop__caption-message_animated"))}if(!this.getMod("warning-med")){var n=this.elem(home.cls.part("caption")),o=this.elem(home.cls.part("caption-message")),s=n.width(),r=o.outerWidth(),a=r-s,l=a/e,c=1e3,u="."+home.cls.full("direct-desktop__caption-message")+"{-webkit-transition: -webkit-transform 0s linear;transition: transform 0s linear;transform: translate(0);}."+home.cls.full("direct-desktop__caption-message_animated")+"{-webkit-transition: -webkit-transform "+l+"s linear;transition: transform "+l+"s linear;-webkit-transform: translate("+-a+"px);transform: translate("+-a+"px);}";if(!(s>r)){var h=document.createElement("style");if(h.innerText=u,document.head.appendChild(h),$(".i-ua_browser_touch").length){var d=!1;n.parent("."+home.cls.full("direct-desktop__link")).on("click",function(e){e.preventDefault(),d||(d=!0,t(),setTimeout(function(){i(),d=!1},1e3*l+c))})}else n.on("mouseover",t),n.on("mouseout",i)}}},_directImageAnimation:function(){var o=this.elem(home.cls.part("image-wrapper")),s=this.elem(home.cls.part("image")),r=Math.min((parseInt(s.height(),10)-parseInt(o.height(),10))/e,i),a=1e3*(r+n);0===s.length||0>=r||t(s,home.cls.full("direct-desktop__image_animated"),a)}})}();var AwapsJsonAPI={Json:{}};AwapsJsonAPI.Json=function(t,e,i,n,o,s,r,a){"undefined"==typeof a&&(a=""),a&&a.length>2&&a.indexOf(":")<0&&(a+=":"),this.w=e,this.h=i;for(var l=String(i);l.length<4;)l="0"+l;for(l=e+l;l.length<8;)l="0"+l;o||(o="awaps.yandex.ru"),n=n?"&charset="+n:"",s=s?"&subsection="+s:"",this.object_name=r?r:"aw_json";
var c=Math.round(65535*Math.random());this.json_awaps_url=a+"//"+o+"/10/"+t+"/"+l+".?charset="+n+"&callback="+this.object_name+".awaps_callback&rnd="+c+n+s,this.gif_code='<a href="'+a+"//"+o+"/1/"+t+"/"+l+'.gif" target="_blank"  ><img src="'+a+"//"+o+"/0/"+t+"/"+l+".gif?rnd="+c+'" width="'+e+'" height="'+i+'" border="0" ></A>',this.awaps_div_code='<div id="awaps_ad_div" width="'+e+'" height="'+i+'"></div>'},AwapsJsonAPI.Json.prototype.setID=function(t){t&&(this.html_cont_id=document.getElementById(t))},AwapsJsonAPI.Json.prototype.refreshAd=function(){this.callJson(this.json_awaps_url)},AwapsJsonAPI.Json.prototype.callJson=function(t){if(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=t,e.appendChild(i)}},AwapsJsonAPI.Json.prototype.showAwapsJson=function(t){var e=t.media[0],i=this.getHTML(e);this.html_cont_id&&(this.html_cont_id.innerHTML=i)},AwapsJsonAPI.Json.prototype.awaps_callback=function(t){var e=t.media,i=e&&e[0]&&(e[0].bnImg||e[0].bnHtm);i&&this.showAwapsJson(t)},AwapsJsonAPI.Json.prototype.sendCounts=function(t){home.getData("common.reportVisibilityCheck")?BEM.blocks["i-visibilitychange"].waitForVisible(function(){this.sendCountsChecked(t)}.bind(this)):this.sendCountsChecked(t)},AwapsJsonAPI.Json.prototype.sendCountsChecked=function(t){window.home=window.home||{},window.home.bnCounts||(window.home.bnCounts=[]);var e=this;t.win_notice&&t.win_notice.length&&t.win_notice.forEach(function(t){e.sendCount(t,0)}),t.bnCounts&&t.bnCounts.length?t.bnCounts.forEach(function(i){e.sendCount(i,1e3*t.stat_delay_sec)}):t.bnCount&&this.sendCount(t.bnCount,1e3*t.stat_delay_sec),t._moatUrl&&this.sendMoatCount(t._moatUrl)},AwapsJsonAPI.Json.prototype.sendCount=function(t,e){var i=Math.round(65535*Math.random()),n=String(t).replace("%aw_random%",i),o=this;if(n){if(0===n.indexOf("https://wayback.archive-it.org/all/20180620162258/https://awaps.yandex.net")){var s=home.parseUrl(n);s.query.pageview_id=home.getData("statlog.config.showId"),n=home.makeUrl(s)}setTimeout(function(){o.checkBannerVisibility()||((new Image).src=n)},e),home.bnCounts.push(n)}},AwapsJsonAPI.Json.prototype.sendMoatCount=function(t){var e=document.createElement("iframe");e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),e.style.display="none",e.onload=function(){var i=e.contentWindow.document,n=i.createElement("script");n.async=!0,n.src=t,i.getElementsByTagName("head")[0].appendChild(n)};var i=$("#banner");if(i.length&&i.children().length){var n=i.children()[0];$(n).before(e)}else $("body").append(e)},AwapsJsonAPI.Json.prototype.checkUrlLoaded=function(t){var e=!0,i=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("resource");return i&&i.length&&(e=!1,i.forEach(function(i){i.name===t&&(e=!0)})),e},AwapsJsonAPI.Json.prototype.getHTML=function(t,e){e||(this.sendCounts(t),this.autorefresh(t,$("#banner")));var i=t.html5_iframe_src||t.small_swiffy_iframe_src||t.bnHtm||t.small_iframe_src,n=this;if(i){var o=$(home.view("b-banner__iframe",{src:i,name:"b"+(Math.random()+"").substr(3,7)}));return o[0].onload=function(){var t=n.checkUrlLoaded(i);t||$("#banner.b-banner__content").hide()},o}var s="";if(t.image)s=home.view("b-banner__img",{attrs:{src:window.detector.isRetina()&&t.hidpi_image?t.hidpi_image:t.image,width:t.width,height:t.height,border:0,alt:t.image_alt}}),t.click_url&&(s=home.view("b-banner__link",{url:t.click_url,content:s}));else if(this.checkFlash(t)){var r=location.protocol||"http:";0===r.toLowerCase().indexOf("https")&&(t.bnFlash+="&cache=1"),s="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+r+"//wayback.archive-it.org/all/20180620162258/https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+t.bnW+" height="+t.bnH+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+t.bnFlash+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+t.flashvars+'" ><EMBED src="'+t.bnFlash+'"  flashvars="'+t.flashvars+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+t.bnW+" HEIGHT="+t.bnH+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+r+'//wayback.archive-it.org/all/20180620162258/https://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>'}else{if(!(t.bnImg&&t.bnW&&t.bnH))return"";s=home.view("b-banner__img",{attrs:{src:t.bnImg,width:t.bnW,height:t.bnH,border:0,alt:t.bnAlt}}),t.gif_tizer||(s=home.view("b-banner__link",{url:t.bnHref,content:s}))}return s},AwapsJsonAPI.Json.prototype.autorefresh=function(t,e){if(t._refresh&&!this.checkBannerVisibility()&&!(this.isBannerExpandable(t)||t._refresh.limit<=0)){var i=this;setTimeout(function(){i.autorefreshCheck(function(){i.getRefreshData(e,t._refresh)})},1e3*t._refresh.timeout)}},AwapsJsonAPI.Json.prototype.readyForAutorefresh=function(){return!document.hidden},AwapsJsonAPI.Json.prototype.isAutorefreshInsertAllowed=function(t){return!this.isBannerExpandable(t)},AwapsJsonAPI.Json.prototype.autorefreshCheck=function(t){if(this.readyForAutorefresh())t();else{var e=this,i=function(n,o){o.hidden||(e.autorefreshCheck(t),BEM.channel("sys").un("visibilitychange",i))};BEM.channel("sys").on("visibilitychange",i)}},AwapsJsonAPI.Json.prototype.getRefreshData=function(t,e){var i=this,n=function(){setTimeout(function(){i.getRefreshData(t,e)},1e4)};$.ajax({url:"/instant/block/banner_awaps",data:{refresh_timeout:e.timeout,pageview_id:home.getData("statlog.config.showId"),slots:home.getData("timing.exp")||""},xhrFields:{withCredentials:!0},dataType:"json"}).then(function(o){var s=o.banner_awaps.banners.media;s&&i.isAutorefreshInsertAllowed(s)?i.autorefreshCheck(function(){var o=i.getHTML(s,!0);o?(t.html(""),t.append(o),i.sendCounts(s),i.refreshCounter||(i.refreshCounter=0),home.stat.logPath("show","banner_type.awaps_client.banner."+i.refreshCounter),i.refreshCounter+=1,home.rtstats.sendOld("28.15.1599.786",{1036:1,1037:s.banner_id}),s._refresh=e,s._refresh.limit-=1,i.autorefresh(s,t)):(i.sendCounts(s),n())}):n()}).fail(function(){n()})},AwapsJsonAPI.Json.prototype.isBannerExpandable=function(t){return t.swf_big_show_url||t.big_iframe_src},AwapsJsonAPI.Json.prototype.addImageContent=function(){var t=home.getData("banner.image");t&&(this.sendCounts(t.data),$("."+t.contentCls).click(function(){window.open(t.data.href,"_blank")}))},$(function(){AwapsJsonAPI.Json.prototype.addImageContent()}),AwapsJsonAPI.Json.prototype.addIframeContent=function(t,e,i){this.sendCounts(i);var n=document.createElement("iframe");if(n.className=home.getData("banner.cls.banner__size"),n.setAttribute("style",""),n.setAttribute("allowtransparency","true"),n.setAttribute("frameborder","0"),n.setAttribute("id",""),n.setAttribute("name",""),i.write||(n.src="data:text/html;charset=utf-8,"+encodeURIComponent(t)),this.addContent(e,n,i),i.write){var o=n.contentWindow.document;o.open(),o.write(t),o.close()}},AwapsJsonAPI.Json.prototype.addContent=function(t,e,i){i.noshcb&&this.removeShadowBlockers();var n=home.getData("banner.cls.banner__parent"),o=home.getData("banner.cls.banner__content"),s=home["_banner"+n];s?$("."+o,s).append(e):t.append(e)},AwapsJsonAPI.Json.prototype.checkBannerVisibility=function(){var t=home&&home.getData&&home.getData("banner.vis"),e=!0;if(1===t)e=$(".b-banner__content").is(":visible");else if(2===t){var i=home.getData("banner.cls.banner__parent"),n=home.getData("banner.cls.banner__content"),o=home["_banner"+i];o?(e=$("."+n,o).is(":visible"),t=3):e=$("."+n).is(":visible")}return t&&!e?t:0},AwapsJsonAPI.Json.prototype.restoreShadow=function(){var t,e=document.createElement("iframe");e.sandbox="allow-same-origin allow-scripts";try{document.body.appendChild(e),t=Object.getOwnPropertyDescriptor(e.contentWindow.Element.prototype,"createShadowRoot"),Object.defineProperty(Element.prototype,"createShadowRoot",t),Object.defineProperty(HTMLElement.prototype,"createShadowRoot",t)}catch(i){}try{document.body.removeChild(e)}catch(i){}},AwapsJsonAPI.Json.prototype.removeShadowBlockers=function(){this.restoreShadow(),home._cbCheck&&home._cbCheck();var t,e=document.documentElement;e.createShadowRoot&&(t=document.createElement("content"),t.innerHTML="",e.createShadowRoot().appendChild(t))},AwapsJsonAPI.Json.prototype.checkFlash=function(t){var e=new CAWBrowser,i=e.flash>=t.flashV&&(t.bnFlash||t.swf_big_show_url);return t.minFlashVersion&&e.full_version&&home.compareVersions(e.full_version,t.minFlashVersion)<0&&(i=!1),i},AwapsJsonAPI.Json.prototype.expand=function(t){if(this.isBannerExpandable(t)&&($("#banner").append('<div class="banner__expand_innerclick"></div>'),$(".banner__expand_innerclick").click(function(){window.open(t.click_url,"_blank")}),!(t.swf_big_show_url&&!this.checkFlash(t)||t.big_iframe_src&&!t.show_big))){$("#banner").addClass("banner__expand").append('<div class="banner__expand_inner"></div>');var e=$(".banner__expand_popup"),i=e?e.bem("popup"):null;if(home.expandableBannerAPI={close:function(){i&&i.hide()}},i){var n;i.on({show:function(){n=Date.now()},hide:function(){n&&(t.show_big_seconds_stat_url&&((new Image).src=t.show_big_seconds_stat_url+Math.round((Date.now()-n)/1e3)),n=null)}}),$(window).on("message",function(t){t=t.originalEvent;var n=$(".banner-iframe",e)[0];if(n&&t.source===n.contentWindow){var o;try{o=JSON.parse(t.data)}catch(s){return}o&&o.command&&"close"===o.command&&setTimeout(function(){i.hide()},500)}})}$(".banner__expand_inner").click(function(){if(i){var n=$(window).height(),o=$(window).width(),s=Math.min(1200,Math.floor(o-t._gapW)),r=Math.floor(9*s/16);return r>n-t._gapH&&(s=s*(n-t._gapH)/r,r=n-t._gapH),640>s||360>r?void window.open(t.click_url,"_blank"):($(".banner__expand_popup-inner",e).css({width:s,height:r}),i.show(),!1)}$(window).trigger("bannerpopup.show")})}},AwapsJsonAPI.Json.prototype.checkTime=function(t){function e(){var e={};e[t.name]={},e[t.name][t.nameStart]=1,window.defaultMetrikaCounter.params(e),setTimeout(i,t.timeout)}function i(){var e={};e[t.name]={},e[t.name][t.nameEnd]=1,window.defaultMetrikaCounter.params(e)}function n(){window.defaultMetrikaCounter?e():setTimeout(n,100)}t&&n()},BEM.decl("i-visibilitychange",{},{waitForVisible:function(t){document.hidden?BEM.channel("sys").onFirst("visible",t):t()}});var rootDomain=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{window.top||(document.domain=rootDomain)}catch(e){}BEM.DOM.decl("widgets",{onSetMod:{js:function(){window.Widget&&($(".i-ua_browser_msie8").length&&(this.oldIe=!0),this._hiddenWidgets={},this.history=[],this.historyAcceptedPosition=0,this.personalSettings=this.params.settings,this.initWapi(),this.channel("widget").on("abort-add",this.changeThis(function(t,e){this.onAbortAdd(e)})),this.channel("widget").on("commit",this.changeThis(function(t,e){this.commit(e),this._onUpdateWidgetList()})),this.channel("widget").on("tuned",this.changeThis(function(t,e){this.enableActionButton(),this.history.push(e)})),this.bindToWin("beforeunload",function(){return this.history.length!==this.historyAcceptedPosition&&this.hasMod("drag")?"\n"+home.l10n("informationsMessages.settingsNotSaved")+"\n":void 0}),this.params.editMode&&(this.collectWidgetsOnPage(),this.setMod("drag","on")),this.params.add&&this.isNewPattern()&&(this.collectWidgetsOnPage(),this.hasMod("drag")||this.setMod("drag","add"),this.addWidget(this.params.add)),this.getWidgets().forEach(function(t){"hidden"===t.getMod("mode")&&(this._hiddenWidgets[t.getId()]=1)}.bind(this)))},drag:function(t,e,i){e?i||(Widget.Framework.setEdit(!0),this.recalculateWidgetCoords(),this.getParanja().appendTo(this.domElem[0]),this.oldIe||this.bindDrag(),this.processHistoryState()):(Widget.Framework.setEdit(!1),this.getParanja().detach(),this.unbindDrag())}},_afterSetMod:function(){this.__base.apply(this,arguments),this.domElem.removeClass("i-bem widgets_js_inited")},_onUpdateWidgetList:function(){var t,e,i=this.findBlockOutside("b-page"),n=i.getMod("desk-notif"),o=Widget.Framework.all(),s={};o.forEach(function(t){var e;t.params.removed||this._hiddenWidgets[t.id]||(e="Column"+t.params.position.split(":")[0],s[e]=1)},this),t=home.view("media-grid__hide-media-footer-mode",{notEmptyColumns:s}),t?i.setMod("hide-media-footer",t):i.delMod("hide-media-footer"),e=home.view("widgets__check-arrow-middle",{Widgets:{NotEmptyColumns:s},Skin:this.params.skin}),"shifted"===n&&e?i.setMod("arrow-middle","yes"):i.delMod("arrow-middle")},canAddWidget:function(t){return this.domElem.find(".widget:not(.widget_removed_yes)").length<50-(t||0)},initWapi:function(){var t=this.params,e=t.prototype,i={wauth:t.auth,layoutFixed:!t.editMode,addUrl:"/adddata/",formUrl:"/form.html?json=1",patternId:t.patternid,yu:t.yu,domain:t.domain,locale:t.locale,prototype:e,widgetStyle:t.widgetStyle,showPreferencesHandler:this.changeThis(this.showPrefs),gsid:this.params.gsid};e&&(i[e+"_prototype"]=e),t.geoid&&(i.geoid=Number(t.geoid)),Widget.Init(i)},showPrefs:function(t){this.findBlockOutside(t.$(),"widget").showPrefs()},showError:function(t){this.channel("catalog").trigger("error",t)},hideError:function(){this.channel("catalog").trigger("error")},collectWidgetsOnPage:function(){var t=Widget.Framework.all(),e={};t.forEach(function(t){t.params.is_default&&(e[t.classId]=!0)},this),this.widgetsOnPage=e},getMoved:function(){var t={};return this.history.forEach(function(e){if("drag"===e.type&&e.from!==e.to){var i=e.id;t[i]?t[i].from===e.to?t[i]=null:t[i].to=e.to:t[i]={from:e.from,to:e.to}}},this),t},collectData:function(){var t=Widget.Framework.all(),e=this.getMoved(),i=t.map(function(t){if(t.params.removed)return{id:t.id,removed:!0};t.markChanged(t.id in e);var i="";return t.params.saveWithPrefs&&(i=t.params.prefs.map(function(t){return encodeURIComponent(t[0])+"="+encodeURIComponent(t[1])}).join("&")),{id:t.id,coord:t.params.position,usrCh:t.params.usrCh,settings:i}},this);return this.personalSettings=$.extend(!0,{},this.personalSettings),delete this.personalSettings.newpattern,{save:JSON.stringify({psettings:this.personalSettings,widgets:i})}},save:function(){var t=this.collectData();this.wsave(t,!0)},revert:function(){try{this.historyAcceptedPosition=this.history.length,window.location.href="/?ncrnd="+Math.random()}catch(t){}},reset:function(){window.confirm(home.l10n("informationsMessages.beforeReset"))&&this.wsave({"delete":1})},wsave:function(t,e,i){$.ajax({url:"/wsave",data:$.extend(t,{wauth:this.params.auth||this.params.wpAuth,yu:this.params.yu,prototype:this.params.prototype}),traditional:!0,type:"post",dataType:"json",success:this.changeThis(function(t){if(i||(this.historyAcceptedPosition=this.history.length),"ok"===t.result){if(!e){var n=window.location;setTimeout(function(){window.location="//"+n.host},500)}}else this.showError(home.l10n("informationsMessages.cannotSaveSettings"))})})},updatePersonalSettings:function(t,e){null===e?delete this.personalSettings[t]:this.personalSettings[t]=e,this.wsave({save:JSON.stringify({psettings:this.personalSettings})},!0,!0)},addWidget:function(t){var e=$("<div></div>").appendTo(this.domElem),i=home.parseUrl(location.href);return this.canAddWidget()?(this.widgets=null,void Widget.Framework.add(t,e,{success:this.changeThis(function(t){var n;n=t.params.smart&&t.params.defplace&&t.params.defplace.match(/\d:\d/)&&this.checkInsertPosition(t.params.defplace)?t.params.defplace:this.getInsertPosition(),this.insertAt(n,e),t.params.saveWithPrefs=!(!i.query.settings||!t.params.prefs),t.params.position=n,t.markChanged(!t.params.defplace||t.params.defplace!==n||t.classId in this.widgetsOnPage,t.params.saveWithPrefs),t.init(),this.recalculateWidgetCoords();var o=this.findBlockInside(e,"widget");this.findBlocksInside({block:"widget",modName:"state",modVal:"add"}).forEach(function(t){t.accept()});var s=o.domElem.offset();window.scrollTo(0,s.top),o.setMod("state","add"),this.history.push({type:"beforeAdd",elem:o}),t.params.open_settings_on_add&&1===t.params.havePrefsFrom&&this.showPrefs(t)}),error:this.changeThis(function(){this.hasMod("drag","add")?this.delMod("drag"):this.showError(home.l10n("informationsMessages.cannotSaveSettings"))})},{sign:i.query.sign,settings:i.query.settings,showanyway:i.query.showanyway?1:!1})):!1},onAbortAdd:function(){},commit:function(){this.save()},processHistoryState:function(){var t=window.location.hash,e=t.match(/^#open=(.+)/);if(window.history&&history.replaceState){var i=home.parseUrl(location.toString());["add","sign","settings","from"].forEach(function(t){delete i.query[t]}),i.search="";var n=function(){history.replaceState(null,null,home.makeUrl(i))};$(window).one("load",n)}else window.location.hash="m"+this.params.patternid;if(e&&e[1])for(var o=this.findBlocksInside("widget"),s=0;s<o.length;s++)if(0===o[s].getId().indexOf(e[1]))return void o[s].showPrefs()},isNewPattern:function(){var t=window.location.hash;return t!=="#m"+this.params.patternid},bindDrag:function(){var t,e,i;window.PointerEvent?(t="pointerdown mousedown",e="pointermove mousemove",i="pointerup pointercancel mouseup"):window.navigator.msPointerEnabled?(t="MSPointerDown mousedown",e="MSPointerMove mousemove",i="MSPointerUp MSPointerCancel mouseup"):void 0!==window.ontouchstart?(t="touchstart mousedown",e="touchmove mousemove",i="touchend touchcancel mouseup"):(t="mousedown",e="mousemove",i="mouseup"),this.bindToDoc(t,function(t){var e=$(t.target).closest(".widget");if(e.length&&$(t.target).closest(".widget__drag").length&&!this.dragItem&&("mousedown"!==t.type||1===t.which)){var i=e.width(),n=e.height(),o=e.offset(),s=this.getDragPlace().show(),r=home.getTouchEvent(t);return s.css({height:e.outerHeight()+parseInt(e.css("marginBottom"),10)}),e.before(s).css({position:"absolute",left:o.left,top:o.top,width:i,height:n,"z-index":10,"margin-top":0,"box-shadow":"0 0 10px #aaa"}),this.dragWidth=e.outerWidth(),this.dragItem=e.appendTo("body"),this.dragPos={x:o.left-r.x,y:o.top-r.y},this.mouseY=r.y,this.widgetHeightHalf=n/2,this.recalculateParams(),this.placeRowIndex=s.index(),this.placeColumnIndex=this.getColumnFromChild(s).index,this.scrollAnimation=this.changeThis(function(){this.scroll(),this.scrollAnimation&&window.requestAnimationFrame(this.scrollAnimation)}),this.scrollAnimation(),!1}}),this.bindToDoc(e,function(t){if(this.dragItem){if("mousemove"===t.type&&1!==t.which)return this.onMouseUp();var e=home.getTouchEvent(t),i=$(".rows"),n=i.width(),o=i.height();this.dragPos.x+e.x+this.dragWidth>n&&(e.x=n-this.dragWidth-this.dragPos.x),this.dragPos.x+e.x<0&&(e.x=-this.dragPos.x),this.dragPos.y+e.y>o&&(e.y=o-this.dragPos.y),this.mouseY=e.y,this.dragItem.css({left:this.dragPos.x+e.x,top:this.dragPos.y+e.y});var s=this.getColumn(e.x,e.y);if(s){var r=s.widgets,a=this.getDragPlace();if(r.length){if(s.index<3&&r[0].elem[0]!==this.dragItem[0])return;for(var l,c=0,u=r.length,h=this.dragPos.y+e.y+this.widgetHeightHalf;u>c&&h>r[c].center;)c++;l=r[0].elem.index()+c,l===this.placeRowIndex&&s.index===this.placeColumnIndex||(this.placeRowIndex=l,this.placeColumnIndex=s.index,0===c?a.insertBefore(r[0].elem):a.insertAfter(r[c-1].elem))}else a.appendTo(s.elems);return!1}}}),this.bindToDoc(i,this.onMouseUp),this.dragEvents=t+" "+e+" "+i},unbindDrag:function(){this.unbindFromDoc(this.dragEvents)},scroll:function(){var t,e=$(window),i=e.height(),n=e.scrollTop(),o=.2*i,s=20,r=0;this.mouseY&&(t=this.mouseY-n,o>t?r+=t-o:t>i-o&&(r+=o-i+t),n+=r*s/o,r&&n>0&&n+i<$(document).height()&&e.scrollTop(n))},onMouseUp:function(){if(this.dragItem){var t=this.elem("drag-place"),e=this.dragItem;t.before(this.dragItem).hide(),this.dragItem.attr("style",""),this.dragItem=this.dragPos=null;var i=this.findBlockOn(e,"widget"),n=i.getInstance(),o=n.params.position;return this.recalculateWidgetCoords(),n.params.position!==o&&this.commit({type:"drag",id:i.getId(),from:o,to:n.params.position}),this.mouseY=0,this.scrollAnimation=null,$(window).trigger("DragEnd"),this._onUpdateWidgetList(),!1}},checkInsertPosition:function(t){t=t.split(":");var e=Number(t[0]),i=this.elem("col","td",e).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray(),n=i.length;return 3>e?!n:!0},getColumn:function(t,e){for(var i,n=-1,o=0;o<this.colParams.length;o++){var s=this.colParams[o],r=t<s.left?s.left-t:t>s.right?t-s.right:0,a=e<s.top?s.top-e:e>s.bottom?e-s.bottom:0,l=Math.max(r,a);(n>l||-1===n)&&(n=l,i=s)}return i},getColumnFromChild:function(t){for(var e=t.closest(".widgets__col"),i=0;i<this.colParams.length;i++){var n=this.colParams[i];if(n.elems.is(e))return n}},getColumnWidgets:function(t){return t.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").map(function(){var t=$(this),e=t.offset();return{elem:t,center:e.top+t.height()/2}}).toArray()},getAllColumnWidgets:function(t){return t.find(".widget:not(.widget_removed_yes)").map(function(){return{elem:$(this)}}).toArray()},getDragPlace:function(){return this.dragPlace||($(this.domElem[0]).append('<div class="widgets__drag-place"></div>'),this.dropElemCache("drag-place"),this.dragPlace=this.elem("drag-place")),this.dragPlace},getInsertPosition:function(){var t,e,i=-1;return[3,4,5].forEach(function(n){var o,s=this.elem("col","td",n).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray(),r=s.length;o=s.reduce(function(t,e){return t+$(e).height()},0),(-1===i||i>o)&&(i=o,t=n,e=r+1)},this),t+":"+e},getParanja:function(){return this.paranja||(this.paranja=$('<div class="widgets__paranja"></div>')),this.paranja},getWidgetById:function(t){return this.findBlockOn($("#wd-wrapper-"+t),"widget")},getWidgets:function(){if(!this.widgets){var t=this.elem("col");this.widgets=this.findBlocksInside(t,"widget")}return this.widgets},recalculateParams:function(t){return this.colParams=[1,2,3,4,5].map(function(e){var i=this.elem("col","td",e),n=i.offset();return n.index=e,n.elems=i,n.height=i.height(),n.bottom=n.top+n.height,n.width=i.width(),n.right=n.left+n.width,n.widgets=t?this.getAllColumnWidgets(i):this.getColumnWidgets(i),n},this),this},recalculateWidgetCoords:function(){this.recalculateParams(!0),this.colParams.forEach(function(t,e){t.widgets.forEach(function(t,i){var n=this.findBlockOn(t.elem,"widget").getInstance();n.params.position=e+1+":"+(i+1)},this)},this)},insertAt:function(t,e){t=t.split(":");var i=this.elem("col","td",t[0]),n=i.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)"),o=n.length,s=Number(t[1])-1;o?0===s?$(n[0]).before(e):(s>o&&(s=o),$(n[s-1]).after(e)):i.append(e)},enableActionButton:function(){this.channel("catalog").trigger("enableAction")}}),BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"on"},{_afterSetMod:function(t,e){this.__base.apply(this,arguments),"drag"===t&&"on"===e&&(this.getWidgets().forEach(function(t){t.setMod("drag","on")}),this.bindToEvents(),this.eventsToUndo=this.history.filter(function(t){return"remove"===t.type}).length),this.channel("catalog").on("inited",function(){this.canAddWidget(0)},this)},onSetMod:{drag:{"":function(){this.__base.apply(this,arguments),this.getWidgets().forEach(function(t){t.delMod("drag")}),this.channel("catalog").trigger("hide"),this.unbindFromEvents()}}},commit:function(t){"recover"!==t.type&&this.history.push(t),"remove"===t.type&&++this.eventsToUndo,this.canAddWidget("remove"===t.type?-1:0),this.enableActionButton()},undo:function(){for(var t;this.history.length&&(!t||"remove"!==t.type);)t=this.history.pop();this.toggleUndoButton(--this.eventsToUndo);var e=this.getWidgetById(t.id),i=e.getInstance().params;this.checkInsertPosition(i.position)?e.delMod("removed"):(e.markChanged(!0),this.insertAt(this.getInsertPosition(),e.domElem),e.delMod("removed"),this.recalculateWidgetCoords()),this.canAddWidget()},save:function(){if(this.history.length){var t=this.collectData();this.wsave(t)}else{var e=window.location;window.location="//"+e.host}},revert:function(){this.__base.apply(this,arguments),this.delMod("drag")},canAddWidget:function(t){var e=this.__base(t);return e?(this.hideError(),this.channel("catalog").trigger("unlockAdd"),this.toggleUndoButton(this.eventsToUndo)):(this.showError(home.l10n("informationsMessages.maxCount")),this.channel("catalog").trigger("lockAdd"),this.toggleUndoButton(!1)),e},toggleUndoButton:function(t){this.channel("catalog").trigger("toggleUndo",t)},bindToEvents:function(){this.channel("catalog").on("save",this.save,this).on("revert",this.revert,this).on("reset",this.reset,this).on("undo",this.undo,this).on("add",function(t,e){this.addWidget(e)},this)},insertAt:function(){this.__base.apply(this,arguments),this.canAddWidget()},onAbortAdd:function(){this.canAddWidget(-1)},unbindFromEvents:function(){this.channel("catalog").un("save revert reset undo add")}}),BEM.DOM.decl("catalog",{onSetMod:{js:function(){this.channel("catalog").on("hide",this.hide,this),this.channel("catalog").on("show",this.show,this),this.channel("catalog").on("toggleUndo",this.toggleUndo,this),this.channel("catalog").on("error",this.error,this),this.channel("catalog").on("enableAction",this.enableAction,this),this.channel("catalog").on("lockAdd",this.lockAdd,this),this.channel("catalog").on("unlockAdd",this.unlockAdd,this),window.addEventListener("message",this.changeThis(function(t){this.hasMod("state")&&t.data&&t.data.add&&this.onWidgetSelected(t.data.add)}),!1),this.hasMod("hidden")||this.show(),this.channel("catalog").trigger("inited"),this._addButton=this.findBlockOn("add","button")},state:function(t,e){$("body").css({overflow:e?"hidden":"auto"})}},onWidgetSelected:function(t){return this.delMod("state"),this.channel("catalog").trigger("add",t),this._addButton&&this._addButton.delMod("checked"),!1},hide:function(){this.setMod("hidden","yes")},show:function(){this.delMod("hidden")},lockAdd:function(){this._addButton&&this._addButton.setMod("disabled","yes")},unlockAdd:function(){this._addButton&&this._addButton.delMod("disabled")},toggleUndo:function(t,e){this.findBlockOn("undo","button").setMod("visible",e?"":"no")},enableAction:function(){this.findBlockOn("save","button").setMod("disabled","")},error:function(t,e){e?this.elem("error").html(e).show():this.elem("error").hide()},_createCatalog:function(){var t=this.elem("panel");return t.length||(this.dropElemCache("panel"),t=$(BEMHTML.apply({block:"catalog",elem:"panel",content:[{block:"spin2",mods:{progress:"yes"}},{elem:"wrapper",content:{tag:"iframe",elem:"frame",attrs:{name:"catalog__frame",src:this.params.url,frameborder:0}}},{elem:"close",cls:"b-ico-widget-rm"}]})),t.appendTo(this.domElem)),t}},{live:function(){return this.liveBindTo("add","pointerclick",function(){this._createCatalog(),this.afterCurrentEvent(function(){this.toggleMod("state","opened")})}),this.liveBindTo("undo","pointerclick",this._getEmitFunction("undo")),this.liveBindTo("revert","pointerclick",this._getEmitFunction("revert")),this.liveBindTo("reset","pointerclick",this._getEmitFunction("reset")),this.liveBindTo("save","pointerclick",this._getEmitFunction("save")),this.liveBindTo("close","pointerclick",function(){this.delMod("state")}),!1},_getEmitFunction:function(t){return function(){this.channel("catalog").trigger(t)}}}),BEM.DOM.decl({block:"button",modName:"type",modVal:"check"},{onSetMod:{checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}}},_onClick:function(){this.__base.apply(this,arguments),this.toggleMod("checked","yes")}}),BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"add"},{onAbortAdd:function(t){this.showReturnButton(t.elem.domElem),this.delMod("drag")},commit:function(t){if("drag"!==t.type)if("add"===t.type){var e=this.getWidgetById(t.id);this.save(),this.showReturnButton(e.domElem),this.delMod("drag"),e.delMod("drag")}else this.__base(t)},showReturnButton:function(t){if(this.params.retpath){var e=this.elem("button");e.length||(this.dropElemCache("button"),e=$(BEMHTML.apply({block:"button",mods:{theme:"normal",size:"m"},cls:"widgets__return",url:this.params.retpath,content:home.l10n("catalog.returnToCatalog")}))),e.insertAfter(t).show()}},canAddWidget:function(){var t=this.__base.apply(this,arguments);return t||this.delMod("drag"),t}}),BEM.DOM.decl("w-rss",{onSetMod:{js:function(){var t=this,e=this.domElem,i=this.params.feedUrl,n=this.params.newsTimestamp,o=t.elem("list"),s=e.parent().parent().find("h2.b-widget__title,.widget__title"),r=t.elem("gradient"),a=t.elem("gradient-up"),l=t.elem("informer"),c=e.parent().find(".w-rss__arrow_type_up"),u=e.parent().find(".w-rss__arrow_type_down"),h=0===$(".i-ua_browser_touch").length,d=0,p=0,f=(new Date).getTime(),m=(new Date).getTime(),_=3e4,g=3e4,v=250,b=!1,y=!0,w=function(t,e){var i="up"===t?c:u,n="w-rss__arrow_hovered-"+("up"===t?"up":"down")+"_yes";e&&!i.get(0).clickable?(i.get(0).clickable=!0,i.css({cursor:"pointer"}),i.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup").bind("click",function(){$.browser&&$.browser.safari&&window.getSelection&&window.getSelection().empty();try{Lego.c("stred/pid=132/cid=71588/path="+C.widget.id+"."+t)}catch(e){}O.scroll(t)}),h&&i.bind("mouseenter",function(){i.addClass(n)}).bind("mouseleave",function(){clearTimeout(p),clearInterval(d),i.removeClass(n)}).bind("mousedown",function(){return p=setTimeout(function(){clearInterval(d),d=setInterval(function(){O.scroll(t)},250)},400),$.browser&&$.browser.opera?!1:void 0}).bind("mouseup",function(){clearTimeout(p),clearInterval(d)})):!e&&i.get(0).clickable&&(i.get(0).clickable=!1,i.removeClass(n),i.css({cursor:"default"}),clearTimeout(p),clearInterval(d),i.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup"))},k=100,E=!1,M=[],x=[],T=function(t){return window.wg&&wg.isColumnWide?!!wg.isColumnWide(t):1==t},S=function(t){return window.wg&&wg.isColumnNarrow?wg.isColumnNarrow(t):2==t},C=function(){var t,i=(e.closest(".b-widget-data").attr("id")+"").substr(3),n=Widget.Framework.get(i),o=n.params.position.split(":")[0];return t=e.hasClass("w-rss_type_text-img")?"text-img":e.hasClass("w-rss_type_magazine")?"magazine":"text",{widget:n,col:o,layout:T(o)?"horiz":"vert",mode:{compact:2==n._prefs.wht,large:3==n._prefs.wht},isHeightAuto:!n._prefs.wht,type:t}}(),P=C.widget.news.length,I=function(){if("vert"===C.layout&&t.hasMod("layout","horiz")?t.setMod("layout","vert"):"horiz"===C.layout&&t.hasMod("layout","vert")&&t.setMod("layout","horiz"),C.isHeightAuto&&(parseInt(C.widget._prefs.n,10)>8?(e.find(".w-rss__body").addClass("w-rss__body_height_large"),C.mode.large=!0):"horiz"===C.layout||S(C.col)||parseInt(C.widget._prefs.n,10)<=5||5>=P?(e.find(".w-rss__body").addClass("w-rss__body_height_compact"),C.mode.compact=!0):"vert"!==C.layout||S(C.col)||(e.find(".w-rss__body").removeClass("w-rss__body_height_compact"),C.mode.compact=!1)),"text-img"!==C.type||S(C.col))return o;var i=e.parent().find(".l-rss_type_"+C.layout).clone();return i.appendTo(o),i.find("tbody").html("")},B=I(),D=function(){return"text-img"!==C.type||S(C.col)?B.find("div.w-rss__item"):B.find("tr")},O=function(){return{getCurrent:function(t,e){for(var i,n=0,o=2;n<t.length&&(i=$(t[n]).position().top)<e-o;)n++;return Math.abs(i-e)<o?{top:i,i:n,inside:!1}:{top:$(t[n-1]).position().top,i:n-1,inside:!0}},scroll:function(e){K();var i=D().toArray(),n=i.length-1,o=$(i[n]),s="up"===e?-1:1,r=t.elem("body").scrollTop(),l=t.elem("body").height(),c=o.position().top+o.height()-l,u=this.getCurrent(i,r),h=u.top,d=u.i,p=0>s&&r>h?d:d+s,f=!1;p=Math.max(0,Math.min(n,p));var m=$(i[p]).position().top;f=s*(m-r)>l-22,d===n&&s>0&&(f=!0),f?(r+=s*(l-44),d=Math.min(d,p)):(r=m,d=p),r=Math.max(0,Math.min(c,r)),f?a.removeClass("i-hidden"):a.addClass("i-hidden"),t.elem("body").animate({scrollTop:r},k)},updateControls:function(){var e=D().toArray(),i=t.elem("body").scrollTop(),n=e.length-1,o=$(e[n]),s=t.elem("body").height(),r=o.position().top+o.height()-s,l=this.getCurrent(e,i);l.inside?a.removeClass("i-hidden"):a.addClass("i-hidden"),w("up",i>0),w("down",r>i),s>r-i&&!E&&z()},reset:function(){t.elem("body").animate({scrollTop:0},k)}}}(),A=function(){var t=e.parent().find(".w-rss__item").clone().remove();return function(e){
var i=t.clone(),n=e.url;n=n.replace(/^https?:/,""),i.find(".w-rss__title").attr("href",n).html(e.title).addClass(home.getData("b-rss.linkTheme","")),i.find(".w-rss__date").addClass("text_gray_yes").html(e.date),e.descr?i.find(".w-rss__description").html(e.descr):i.find(".w-rss__description").remove();var o=i.find(".w-rss__preview");if(e.img){var s="magazine"===C.type&&C.mode.compact&&e.imgCompact||e.img;s=s.replace(/^https?:/,""),o.attr("href",n),o.css({"background-image":"url("+s+")"})}else i.addClass("w-rss__item_previewable_no"),o.remove();return i.show(),i}}(),R=e.parent().find(".l-rss_type_vert").find("tr:first").clone().remove(),j=e.parent().find(".l-rss_type_horiz").find("tr:first").clone().remove(),L=function(t){var e=[];if("text-img"!==C.type||S(C.col))for(var i=0,n=t.length;n>i;i++)t[i]&&(M.push(t[i]),$.merge(e,A(t[i])));else{var o,s=function(e,i){if(""===$(i).html()){var n=t.shift();n&&($(i).html('<div class="w-rss__item">'+A(n).html()+"</div>"),M.push(n))}},r=B.find("tr:last").eq(0);for(1===r.length&&r.find("td:not(.l-rss__gap)").each(s);t.length>0;)o="vert"===C.layout?R.clone():j.clone(),o.find("td:not(.l-rss__gap)").each(s),$.merge(e,o)}B.append(e)},F=function(t,e){E=!0;var o={url:i,num:12,start:M.length+1,type:C.widget._prefs.type,"no-text":C.widget._prefs["no-text"]};"object"==typeof t&&$.extend(o,t),$.ajax({url:C.widget.params.src,dataType:"json",data:o,success:function(t){t&&t.news&&t.news.length>0&&(t.tstamp&&(n=t.tstamp),e(t))},complete:function(){E=!1,G()}})},N=function(t){return t.length>M.length||t[0].title!==M[0].title||t[0].date!==M[0].date},z=function(){F({tstamp:n},function(t){L(t.news),w("down",!0)})},W=function(t){t=t||M,O.reset(),o.html(""),B=I(),M=[],L(t),w("down",!0),q()},H=function(t){for(var i,n=D(),o=parseInt(n.eq(0).css("paddingBottom"),10),s=0,a=0;t>s&&100>a;){if(i=$(n[a]).height(),s+i+o>t){t-s>i/2&&(s+=i);break}s+=i+o,a++}100>a&&a>0&&($(".w-rss__body",e).height(s),r.addClass("i-hidden"))},U=function(){if(!e.get(0).isInited){e.get(0).isInited=!0;var i=e.height();if(o.height()>i){"magazine"===!C.type&&H(i);var n=!0;e.closest(".b-widget-fixed").mouseenter(function(){u.removeClass("w-rss__arrow_visibility_hidden"),c.removeClass("w-rss__arrow_visibility_hidden")}).mouseleave(function(){u.addClass("w-rss__arrow_visibility_hidden"),c.addClass("w-rss__arrow_visibility_hidden")}).mousemove(function(){n&&(n=!1,K(),setTimeout(function(){n=!0},250))}),t.elem("body").bind("scroll",$.debounce(O.updateControls,k,O)),w("down",!0),w("up",!0),w("up",!1)}else C.isHeightAuto&&(e.find(".w-rss__body").removeClass("w-rss__body_height_large"),e.find(".w-rss__body").addClass("w-rss__body_height_compact"),C.mode.compact=!0,C.mode.large=!1,C.isHeightAuto=!1,W(),e.get(0).isInited=!1,U())}},q=function(){if("magazine"===C.type){var t=B.find("div.w-rss__item").eq(0);t.hasClass("w-rss__item_previewable_no")||t.addClass("w-rss__item_position_first")}U()},V=function(){return Math.round(2e3*Math.random()+3e3)},K=function(){m=(new Date).getTime()},G=function(){f=(new Date).getTime()};C.widget._onDropcallback=function(t){var e=t.split(":")[0];e!=C.col&&(T(e)!==C.layout==="horiz"||"text-img"===C.type&&(S(e)||S(C.col)))&&(C.col=e,C.layout=T(e)?"horiz":"vert",W()),C.col=e},$(document).bind("mousemove keydown",function(){y&&!b&&(y=!1,setTimeout(function(){y=!0},v),(new Date).getTime()-f>_&&(l.hasClass("w-rss__informer_visibility_hidden")?(b=!0,setTimeout(function(){F({start:0},function(t){b=!1,t.news.length>0&&N(t.news)&&((new Date).getTime()-m>g?W(t.news):(l.removeClass("w-rss__informer_visibility_hidden"),x=t.news))})},V())):(new Date).getTime()-m>g&&x.length>0&&(G(),W(x),x=[],l.addClass("w-rss__informer_visibility_hidden"))))}),s.append(l),s.addClass("b-widget__title_type_rss"),L(C.widget.news),q(),$.browser&&$.browser.msie&&"text-img"===C.type&&setTimeout(function(){var t=e.find(".w-rss__preview"),i=e.find("table td").eq(0).width();t.each(function(t,e){var n=$(e);n.hide(),n.css({width:i+"px"}),n.css({heigth:"70px"}),n.show()}),e.hide(),e.css({zoom:1}),e.show()},600),setTimeout(function(){0===e.height()&&(e.parent().hide(),setTimeout(function(){e.parent().show()},200))},2e3),l.click(function(){x.length>0&&(W(x),x=[]),K(),l.addClass("w-rss__informer_visibility_hidden")})}}});var WTimer=function(t,e,i){function n(t){return i?s=setTimeout(r,t):(s=setInterval(r,t),c=!0),s}function o(){c&&(l?clearTimeout(s):clearInterval(s),c=!1)}var s,r=t,a=e,l=i||!1,c=!1;return{start:function(){return n(a)},restart:function(t){return o(),n(t)},stop:function(){o()}}},WTimersHandler=function(){function t(t,i){return t in e&&i in e[t]}var e={};return{add:function(i,n,o){"undefined"!==e[i]&&"object"==typeof e[i]||(e[i]={});var o=o||{},s=new WTimer(n.fn,864e5,n.runOnce),r=s.start();if(e[i][r]=s,"startTimerOn"in o){var a=function(){var o=i,s=r,a=n.delay;return function(){t(o,s)&&e[o][s].restart(a)}}(),l=o.startTimerOn;setTimeout(a,l)}else e[i][r].restart(n.delay);if("stopTimerOn"in o){var c=function(){var n=i,o=r;return function(){t(n,o)&&(e[n][o].stop(),delete e[n][o])}}(),u=o.stopTimerOn;setTimeout(c,u)}return r},remove:function(i,n){return t(i,n)?(e[i][n].stop(),delete e[i][n],!0):!1}}};if("undefined"==typeof Widget&&(this.Widget=function(t,e){this._(t,e)},document.Widget=Widget,function($){var wTimersHandler=new WTimersHandler;Widget.prototype={undef:function(t){return t},_:function(t,e){this._prefs={};var i=e.src?e.src:!1,n=e.wauth?e.wauth:!1,o=e.type?e.type:"raw";this.params=e,this.type=o,this.id=t,this.classId=t.replace(/-[0-9]+$/i,""),this.intClassId=e.intclassid,this.instanceId=t.replace(/^(.*)-([0-9]+)$/i,"$2"),this.htmlId=t,this.src=i,this.onLoad=this.onload=!1,this.bound=!1,""!==n&&this.setValue("wauth",n),this.savedUsrCh=this.params.usrCh},init:function(){var t=this;if(!this.bound){this.bound=!0;var e=function(){t.loadFromSrc({isBinding:!0})};if(Widget.Framework.register(this),"iframe-inside"!==this.type&&new Widget.Wrapper(this),this.params.prefs)for(var i=0;i<this.params.prefs.length;i++)this.params.prefs[i]!==!1&&this.setValue(this.params.prefs[i][0],this.params.prefs[i][1]);var n=Widget.Framework.widgetPrefs[this.id];if(n){for(var o in this._prefs)n[o]||(n[o]=this._prefs[o]);this._prefs=n}"iframe"===this.type&&(this._stylescallback=function(){t.loadFromSrc({isBinding:!0})}),this.params.css&&"iframe"!==this.type&&this.css(this.params.css),this.params.js&&"iframe"!==this.type?this.library(this.params.js,e):e()}},showPreloader:function(t){function e(){i.$().html(Widget.Framework.params.preloader)}var i=this;t?e():window.setTimeout(function(){(i._inlineLoading||i._inlinePending)&&e()},100)},loadFromSrc:function(t){if(t||(t={noPreloader:!1,isBinding:!1}),!("inline"===this.type&&this.src===!1&&t.isBinding||("inline"!==this.type&&"iframe"!==this.type&&"json"!==this.type||(!t.noPreloader&&Widget.Framework._domloaded&&this.showPreloader("now"),this[this.type+"From"](this.src)),t.isBinding))){var e=Widget.Framework.params.rawBodyUrl+this.getWidgetId()+"?ncrnd="+Math.random()+"&prototype="+Widget.Framework.params.prototype;"raw"===this.type&&this.rawFrom(e+"&wauth="+this.getAuth()),"inline"===this.type&&this.src===!1&&this.inlineFrom(e)}},_autoValue:function(t,e){return parseInt(t,10)>0?parseInt(t,10)+"px":e},iframeElement:function(t,e,i){var n,o,s;t=this._createLoadUrl.apply(this,arguments),i?(n=this._autoValue(this.params.prefs_width,Widget.Framework.params.iframeWidth),o=this._autoValue(this.params.prefs_height,Widget.Framework.params.iframeHeight),s=this.wrapper.$$("prefs")):(n="100%",o=this._autoValue(this.params.height,Widget.Framework.params.iframeHeight),s=this.wrapper.$$("iframe"));var r=$.browser&&$.browser.msie&&"9.0"===$.browser.version,a=$('<iframe style="border:none" allowTransparency="true" frameborder="0"></iframe>').attr({id:s,src:r?"":t,name:s}).css({width:0,"min-width":n,height:o,margin:0,padding:0});$(document.documentElement).hasClass("m-sandbox")&&a.attr("sandbox","allow-scripts allow-popups allow-forms allow-same-origin");var l=home.getData("banner.cls.banner__dummy");if(l&&a.addClass(l),$.browser&&$.browser.msie){var c=function(){a.unbind("load",c).css({position:"",visibility:""})};a.css({position:"absolute",visibility:"hidden"}).bind("load",c)}return r&&setTimeout(function(){a.attr("src",t)},50),a},iframeFrom:function(t){var e=this;$(document).ready(function(){var i=function(){e.$().html("");try{var i=e.iframeElement(t,[]),n=i[0].src.split("#secure:");$.browser&&($.browser.mozilla||$.browser.safari)?i.attr({src:n[0]+"&rnd="+Math.random()+(n.length>1?"#secure:"+n[1]:"")}).appendTo(e.$()):i.appendTo(e.$()),i.one("load",e.adjustFontSize.bind(e))}catch(o){window.console&&console.error(o)}},n=function(){e.$().length?i():setTimeout(function(){n()},100)};n()})},jsonFrom:function(){var t=this._createLoadUrl.apply(this,arguments);$.getScript(t+"&ncrnd="+Math.random())},inlineFrom:function(){var t=this._createLoadUrl.apply(this,arguments),e=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,$.get(t,function(t){e.wrapper.$().css("height",""),e._inlineFromHtml(t)})},rawFrom:function(t){var e=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,$.get(t,function(t){e._inlineFromHtml(t)})},_inlineFromJson:function(t){return Widget.Framework.inlineLoading(1),this._inlineFromHtml(t)},_inlineLoading:!1,_inlinePending:"",_inlineFromHtml:function(html){if(!Widget.Framework._domloaded)return this._inlineLoading=!1,void(this._inlinePending=html);Widget.Framework.inlineLoading(-1);var styleRe=/(<style[^>]*>((?:\s|\S)*?)<\/style>)/gim,scriptRe=/<script[^>]*>(?!<\/script>)((?:\s|\S)*?)<\/script>/gim,match;this.wrapper.$().hasClass("b-widget-fixed")&&this.wrapper.$().addClass("b-widget-fixed"),0===this.$().length&&$("<div />").attr({id:this.$$(),"class":"b-widget-data"}).appendTo(this.wrapper.$());var ctx=this.$();BEM.DOM.destruct(ctx,!0),ctx.html(html.replace(scriptRe,"").replace(Widget.Framework.params.idTemplate,this.id));for(var root=document.getElementsByTagName("head")[0]||document.documentElement;null!==(match=styleRe.exec(html));){var newSS=document.createElement("link");newSS.rel="stylesheet",newSS.href="data:text/css,"+escape(match[2]),root.appendChild(newSS)}scriptRe.lastIndex=0;for(var widget=this;null!==(match=scriptRe.exec(html));)try{eval(match[1])}catch(e){}this._inlineLoading=!1,this._inlinePending=!1,Widget.Framework._domloaded&&this.finalize()},_createLoadUrl:function(t,e,i){var n=[{locale:this.getLocale()}];if(n.concat(e),window.toCat&&window.toReg||n.push({frommorda:1}),t=this._addParams(t,n,i||"iframe"===this.type,i),this.params.prefs_secure){for(var o=[],s=0;s<this.params.prefs_secure.length;s++)this.params.prefs_secure[s][1]&&o.push(this.params.prefs_secure[s][0]+"="+this.params.prefs_secure[s][1]);o.length&&(t+="#secure:"+o.join(","))}return t},_addParams:function(t,e,i,n){if(i&&(Widget.Framework.params.fullproxyDomain?this._prefs["."]=Widget.Framework.params.fullproxyDomain+"|"+Widget.Framework.params.proxyDomain:this._prefs["."]=location.protocol+"//"+location.host+"|"+document.domain,!n)){var o=this.getWidgetStyle()||{};o.bg&&(this._prefs.widgetBg=o.bg),o.text&&(this._prefs.widgetText=o.text),o.link&&(this._prefs.widgetLink=o.link),o.hover&&(this._prefs.widgetHover=o.hover),o.decor&&(this._prefs.widgetDecor=o.decor),this._moving&&(this._prefs.widgetMoving=1)}for(var s=[e,[this._prefs]],r=y5Url(location.href),a={},l=0;l<s.length;l++)for(var c=0;c<s[l].length;c++){var u;if(s[l][c]instanceof Array)for(u=0;u<s[l][c].length;u++)null!==r.getParam(s[l][c][u])&&(a[s[l][c][u]]=r.getParam(s[l][c][u]));else for(u in s[l][c])"function"!=typeof s[l][c][u]&&"object"!=typeof s[l][c][u]&&(a[u]=s[l][c][u])}return y5Url(t).addParams(a).toString()},_disableAutoStats:!1,hookStats:function(){return Widget.Framework.hookStats(this)},disableAutoStats:function(){this._disableAutoStats=!0},onload:function(){},resetAuth:function(){this._splitterAuth=!1},getAuth:function(){return this.getValue("wauth")},_splittedAuth:!1,splitAuth:function(){return this._splittedAuth||(this._splittedAuth=Widget.Framework.splitAuth(this.getAuth())),this._splittedAuth},getWidgetId:function(){return this.splitAuth().id},getOwner:function(){return this.splitAuth().owner},getViewer:function(){return this.splitAuth().viewer},setValue:function(t,e){this._prefs[t]=e,"wauth"===t&&Widget.Framework.registerWauth(this)},getValue:function(t){return this._prefs[t]?this._prefs[t]:this.undef()},getBoolean:function(t){var e=this.getValue(t);return e===!0||"true"===e},_encodeValues:function(t){t===this.undef()&&(t=this._prefs);var e=y5Url("");return e.query(t),e.query()},setValues:function(t){for(var e in t)"function"!=typeof t[e]&&"object"!=typeof t[e]&&this.setValue(e,t[e])},saveValues:function(t,e){t===this.undef()&&(t=this._prefs),this.markChanged(!1,!0),this.setValues(t),$.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),usrCh:this.params.usrCh,s:this._encodeValues(t)},dataType:"json",success:e})},dropValues:function(t){var e=this;$.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),s:"DROP"},dataType:"json",success:function(i){Widget.Framework.widgetPrefs[e.id]=!1,t&&t(i)}})},reload:function(t,e,i){if(!this.pauseReload){$(".b-wdgt-control").appendTo("body");var n=this,o=function(){t&&t(),n.onload&&n.onload(),n.queueAutoReload()};if(this.wrapper){if("undefined"!=typeof e&&(this._prefs.showAnyway=e),"raw"===this.type)return Widget.Framework.reload(this,o,e,i);this.loadFromSrc({noPreloader:!0})}else{var s=location.host;s.indexOf("/")===s.length-1&&(s=s.substr(0,s.length-1));var r=location.pathname;0===r.indexOf("/")&&(r=r.substr(1)),location.href=this._addParams("//"+s+"/"+r,[],"isIframe")}}},setTitle:function(t){this.wrapper?this.wrapper.setTitle(t):Widget.Framework.xframe(this,"Widget::setTitle",t)},savePreferences:function(t){this.saveValues(t),this._updateOnHide=!0},dropPreferences:function(t){var e=this.getAuth();this._prefs={},this.setValue("wauth",e),this.wrapper?(this.dropValues(t),$(window).trigger({type:"widgetSettingsClosed",id:this.id})):Widget.Framework.xframe(this,"Widget::dropPreferences","",t)},showPreferences:function(){this.wrapper?this.wrapper.showPreferences():Widget.Framework.xframe(this,"Widget::showPreferences")},hidePreferences:function(){this.wrapper?(this._updateOnHide&&(this.loadFromSrc(),Widget.Framework.params.notifyChangesHandler(this)),this.wrapper.hidePreferences()):Widget.Framework.xframe(this,"Widget::hidePreferences",this._updateOnHide?"<>"+this._encodeValues():""),this._updateOnHide=!1},setIFrameHeight:function(t){this.wrapper?this.wrapper.setIFrameHeight(t):Widget.Framework.xframe(this,"Widget::setIFrameHeight",t)},setIFrameWidth:function(t){this.wrapper?this.wrapper.setIFrameWidth(t):Widget.Framework.xframe(this,"Widget::setIFrameWidth",t)},setIFrameSize:function(t,e){this.wrapper?this.wrapper.setIFrameSize(t,e):Widget.Framework.xframe(this,"Widget::setIFrameSize",t+","+e)},setPreferencesFormWidth:function(t){this.wrapper?this.wrapper.setPreferencesFormWidth(t):Widget.Framework.xframe(this,"Widget::setPreferencesFormWidth",t)},setPreferencesFormHeight:function(t){this.wrapper?this.wrapper.setPreferencesFormHeight(t):Widget.Framework.xframe(this,"Widget::setPreferencesFormHeight",t)},setPreferencesFormSize:function(t,e){this.wrapper?this.wrapper.setPreferencesFormSize(t,e):Widget.Framework.xframe(this,"Widget::setPreferencesFormSize",t+","+e)},_calculateCss:function(t,e){var i=t.css(e),n=i.replace(/(\.[0-9]+)?px$/,"");return"height"!==e||"auto"!==i&&0!==parseInt(i,10)?i!==n?parseInt(i,10):0:document.body.scrollHeight},_sumCss:function(t,e){for(var i=0,n=0;n<e.length;n++)i+=this._calculateCss(t,e[n]);return i},adjustIFrameHeight:function(){var t=this;window.clearTimeout(this._adjustIFrameHeightTimeout),this._adjustIFrameHeightTimeout=window.setTimeout(function(){t._adjustIFrameHeight()},100)},_adjustIFrameHeightPrevious:-1,_adjustIFrameHeightTimeout:!1,_adjustIFrameHeight:function(){var t;t="iframe-inside"===this.type?$("body"):this.$(),t.css("overflow","hidden");var e=!1;t.css("margin-left")===t.css("margin-right")&&t.css("margin-right")===t.css("margin-top")&&t.css("margin-top")===t.css("margin-bottom")&&"0px"===t.css("margin-bottom")&&t.css("padding-left")===t.css("padding-right")&&t.css("padding-right")===t.css("padding-top")&&t.css("padding-top")===t.css("padding-bottom")&&"0px"===t.css("padding-bottom")&&(e=!0);var i=this._sumCss(t,["marginTop","marginBottom","height"]);e&&t.css("padding","1px");var n=this._sumCss(t,["marginTop","marginBottom","height"]);return n>i&&(i=n),i!==this._adjustIFrameHeightPrevious?($.browser&&$.browser.opera&&(i+=20),this._adjustIFrameHeightPrevious=i,this.setIFrameHeight(i)):void 0},library:function(t,e){var i=this;this._libraryLoading=!0,Widget.Framework.library(t,function(){i._libraryLoading=!1,e?e():i.finalize()})},css:function(t){return Widget.Framework.css(t)},iReload:function(t){var e=this;if(this.stopAutoReload(),Widget.Framework.focused)Widget.Framework.addToReloadQueue(e,t),Widget.Framework.reloadQueueTimer&&clearTimeout(Widget.Framework.reloadQueueTimer),Widget.Framework.reloadQueueTimer=setTimeout(function(){Widget.Framework.processReloadQueue()},Widget.Framework.reloadQueueTimeout);else{var i=function(){$.browser&&$.browser.msie?$(document).unbind("focusin",i):$(window).unbind("focus",i),Widget.Framework.processReloadQueue()};Widget.Framework.addToReloadQueue(e,t),$.browser&&$.browser.msie?$(document).bind("focusin",i):$(window).bind("focus",i)}},stopAutoReload:function(){Widget.Framework.unsetAutoreload(this)},queueAutoReload:function(){Widget.Framework.setAutoreload(this)},finalize:function(){this.queueAutoReload(),this.onload&&this.onload(),this.onLoad&&this.onLoad(),this._disableAutoStats||this.hookStats(),$(window).trigger({type:"widgetLoaded",id:this.id})},countShow:function(t,e){csh_ifgsid&&!this._isNotReloaded&&csh_ifgsid(t,e)},addTimer:function(t,e){return wTimersHandler.add(this.id,t,e)},removeTimer:function(t){wTimersHandler.remove(this.id,t)},getWidgetStyle:function(){var t=this.params.position,e=Widget.Framework.params.widgetStyle;if(t||(t=window.wg&&wg._addedWidgetPosition),e&&t){var i=parseInt(t.split(":")[0],10),n={};e[t]?n=e[t]:e.top&&2>=i?n=e.top:e.bottom&&i>2?n=e.bottom:e.all&&(n=e.all);for(var o in e.def)e.def.hasOwnProperty(o)&&(n[o]||(n[o]=e.def[o]));return n}return""},appendStyle:function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),document.getElementsByTagName("head").item(0).appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))},adjustFontSize:function(){if("iframe"===this.type){var t=this.$().find("iframe")[0];t.contentWindow.postMessage(JSON.stringify({type:"message",message:{name:"font-size",value:Widget.Framework.getFontSize()}}),"*")}},addWidgetStyles:function(){try{var t=$("script[nowidgetstyles='true']").length;if(t)return;"iframe-inside"===this.type&&this._prefs&&(this._prefs.widgetLink&&this.appendStyle(":link {color:#"+this._prefs.widgetLink+" !important;}"),this._prefs.widgetHover&&this.appendStyle(":link:hover {color:#"+this._prefs.widgetHover+" !important;}"),this._prefs.widgetText&&this.appendStyle("body {color:#"+this._prefs.widgetText+" !important;}"),this._prefs.widgetDecor&&this.appendStyle(":link {text-decoration: none! important;}"))}catch(e){window.console&&window.console.log&&console.log("unable to append widget styles",this._prefs.widgetBg,this._prefs.widgetText,this._prefs.widgetLink,this._prefs.widgetHover,this._prefs.widgetDecor)}},markChanged:function(t,e){this.params.usrCh|=(t?1:0)+(e?2:0)},$:function(t){return $("#"+this.$$(t))},$$:function(t){return Widget.Framework.params.idPrefix+this.id+(t===this.undef()?"":t)},getLocale:function(){return Widget.Framework.getLocale()},end:!0}}(jQuery)),y5Url=function(){function t(t,e){return f[e]||t}function e(e){return e.replace(/%([A-Fa-f0-9]{2})/g,t)}function i(t){var i=t.replace(/\+/g,"%20");try{var n=decodeURIComponent(i);if(void 0==n)throw"malformed URI sequence";return n}catch(o){try{return decodeURIComponent(e(i))}catch(o){return unescape(i)}}}function n(t){try{var i=decodeURI(t);if(void 0==i)throw"malformed URI sequence";return i}catch(n){try{return decodeURI(e(t))}catch(n){return unescape(t)}}}function o(t,e,i){c.undef(t[e])&&(t[e]=[]),c.array(i)?t[e]=t[e].concat(i):t[e].push(i)}function s(t,e){for(var i=t[e],n=i.length,o=new Array(n),s=m(e),r=0;n>r;r++)o[r]=s+"="+m(i[r]);return o}function r(t){for(var e,n,s,r={},a=t.replace(/\+/g,"%20").split("&"),l=0,c=a.length;c>l;l++)e=a[l].split("="),n=e.shift(),n&&(s=e.length>1?e.join("="):e[0]||"",o(r,i(n),i(s)));return r}var a={UNDEF:"undefined"};a.Types={UNDEF:1,UNDEFINED:1,OBJECT:2,FUNCTION:4,NUMBER:8,STRING:16,BOOLEAN:32,DATE:1024,REGEXP:2048,ARRAY:4096,NULL:8192,EVENT:16384,NODE:32768,TYPES:{undefined:1,object:2,"function":4,number:8,string:16,"boolean":32},type:function(t){var e=this.TYPES[typeof t];if(null===t)return this.NULL;if(e==this.OBJECT&&(t.nodeName||this.document(t)))return this.NODE;if(e==this.OBJECT||e==this.FUNCTION)switch(t.constructor){case Array:return this.ARRAY;case RegExp:return this.REGEXP;case Date:return this.DATE}return this.event(t)?this.EVENT:e},test:function(t,e){return!!(this.type(t)&e)},def:function(t){return typeof t!=l},undef:function(t){return typeof t==l},object:function(t){return"object"==typeof t},func:function(t){return"function"==typeof t},nativeFunc:function(t){return this.func(t)&&isNativeFunc.test(t.toString())},number:function(t){return"number"==typeof t},string:function(t){return"string"==typeof t},bool:function(t){return"boolean"==typeof t},nul:function(t){return null===t},array:function(t){return t instanceof Array},regexp:function(t){return t instanceof RegExp},date:function(t){return t instanceof Date},event:function(t){return t&&typeof t.type!=l&&typeof(t.stopPropagation||t.cancelBubble)!=l},element:function(t){return checkDomNode(t,Node.ELEMENT_NODE)},attribute:function(t){return checkDomNode(t,Node.ATTRIBUTE_NODE)},text:function(t){return checkDomNode(t,Node.TEXT_NODE)},document:function(t){return t&&typeof t.documentElement!=l||!1},comment:function(t){return checkDomNode(t,Node.COMMENT_NODE)},node:function(t){return t&&typeof t.nodeType!=l}};for(var l=a.UNDEF,c=a.Types,u=/^((((\w+):)\/\/)?(([\w\-\.]+\.\w+|localhost)(\:(\d+))?))?(\/?[^\?#]*)?(\?([^#]*))?(#(.*))?$/,h=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,d="E9F6F3EAE5EDE3F8F9E7F5FAF4FBE2E0EFF0EEEBE4E6FDFFF7F1ECE8F2FCE1FEB8C9D6D3CAC5CDC3D8D9C7D5DAD4DBC2C0CFD0CECBC4C6DDDFD7D1CCC8D2DCC1DEA8".match(/../g),p="%D0%B9%D1%86%D1%83%D0%BA%D0%B5%D0%BD%D0%B3%D1%88%D1%89%D0%B7%D1%85%D1%8A%D1%84%D1%8B%D0%B2%D0%B0%D0%BF%D1%80%D0%BE%D0%BB%D0%B4%D0%B6%D1%8D%D1%8F%D1%87%D1%81%D0%BC%D0%B8%D1%82%D1%8C%D0%B1%D1%8E%D1%91%D0%99%D0%A6%D0%A3%D0%9A%D0%95%D0%9D%D0%93%D0%A8%D0%A9%D0%97%D0%A5%D0%AA%D0%A4%D0%AB%D0%92%D0%90%D0%9F%D0%A0%D0%9E%D0%9B%D0%94%D0%96%D0%AD%D0%AF%D0%A7%D0%A1%D0%9C%D0%98%D0%A2%D0%AC%D0%91%D0%AE%D0%81".match(/.{6}/g),f={},m=encodeURIComponent,_=[".xml",".html",".xhtml",".jpg",".gif",".png",".css",".js",".xsl",".php",".py",".pl"],g=0,v=d.length,b=/%3B|%2C|%2F|%3F|%3A|%40|%26|%3D|%2B|%24/gi;v>g;g++)f[d[g]]=p[g];a.URL=function(t){t=c.def(t)?t.toString():window.location.href;var e=t.match(u);if(e){if(this.Host=e[6]||"",this.Path=e[9]||"",e[6]){var o=e[6].substring(e[6].lastIndexOf(".")),s=$.inArray(o,_);-1!=s&&(this.Path=e[6],this.Host="")}this.Href=e[0],this.Proto=e[4]||"",this.Port=e[8]||0,this.Path=n(this.Path),this.Query=r(e[11]||""),this.Hash=i(e[13]||"")}},a.URL.prototype={go:function(){window.location.href=this.toString()},toString:function(){var t="";if((this.Proto||this.Host)&&this.Host&&(t+=(this.Proto||"http")+"://"+this.Host,this.Port&&(t+=":"+this.Port)),this.Path){this.Host&&0!=this.Path.indexOf("/")&&(t+="/"),b.lastIndex=0;for(var e,i=0,n=[];e=b.exec(this.Path);)b.lastIndex>i&&e[0]&&(n.push(this.Path.slice(i,e.index)),n.push(e[0]),i=e.index+e[0].length);i!==this.Path.length&&n.push(this.Path.slice(i)),n[0]=encodeURI(n[0]);for(var o=[],s=0;s<n.length;s++)o[s]=s%2?n[s]:encodeURI(n[s]);t+=o.join("")}for(var r="абвгдеёжзийклмнопрстуфхцчшщъыьэюя",s=0;s<r.length;s++){var a=r.charAt(s),l=encodeURIComponent(encodeURIComponent(a)),c=encodeURIComponent(encodeURIComponent(a.toUpperCase()));t.indexOf(l)>-1&&(t=t.replace(new RegExp(l,"g"),a)),t.indexOf(c)>-1&&(t=t.replace(new RegExp(c,"g"),a))}var u=this.query();return u&&(t+="?"+u),this.Hash&&(t+="#"+m(this.Hash)),t},clone:function(){return new a.URL(this.toString())},proto:function(){},host:function(){},port:function(){},path:function(){},hash:function(){},query:function(t){if(c.def(t))return this.clearQuery(),c.string(t)?this.Query=r(t):this.replaceParams(t),this;var e=[];for(var i in this.Query)e=e.concat(s(this.Query,i));return e.join("&")},queryKeys:function(){var t=[];for(var e in this.Query)t.push(e);return t.sort()},addParam:function(t,e){return o(this.Query,t,e),this},addParams:function(t){for(var e in t)o(this.Query,e,t[e]);return this},removeParams:function(t){for(var e=0,i=t.length;i>e;e++)delete this.Query[t[e]];return this},replaceParams:function(t){var e=[];for(var i in t)e.push(i);return this.removeParams(e),this.addParams(t),this},clearQuery:function(){return this.Query={},this},getParam:function(t){var e=this.Query[t];return e?e[0]:null},getParams:function(t){return this.Query[t]||[]}};var y=a.URL,w=y.prototype,k={proto:"Proto",host:"Host",port:"Port",path:"Path",hash:"Hash"};for(g in k)w[g]=function(t){return function(e){return c.def(e)?(this[t]=e,this):this[t]}}(k[g]);return w.get=w.toString,a.Url=function(t){return new y(t)},y.isValid=function(t){return h.test(t)},a.Url}(),"undefined"!=typeof Widget&&"undefined"==typeof Widget.Wrapper&&!function(t){Widget.Wrapper=function(t){this._(t)},Widget.Wrapper.prototype={undef:function(t){return t},_:function(t){this.widget=t,this.widget.wrapper=this,Widget.Framework._wrappers[this.$$()]=t},$:function(e){return t("#"+this.$$(e))},$$:function(t){return Widget.Framework.params.wrapperPrefix+(t==this.undef()?"wrapper":t)+Widget.Framework.params.wrapperPostfix+this.widget.id},setTitle:function(t){this.$("title").html((""+t).replace(/</g,"&lt;"))},getWindowSize:function(){var e=function(){return document[t.support.boxModel?"documentElement":"body"]},i=window;if("undefined"!=typeof i.innerWidth)return{width:i.innerWidth,height:i.innerHeight};var n=e();return{width:n.clientWidth,height:n.clientHeight}},_px:function(t){return(""+t).match("^[0-9]+$")&&(t+="px"),t},setIFrameHeight:function(t){this.$().css("height",""),this.$("iframe").css("height",this._px(t))},setIFrameWidth:function(t){this.$("iframe").css("width",this._px(t))},setIFrameSize:function(t,e){this.$("iframe").css("height",this._px(e)).css("width",this._px(t))},setPreferencesFormWidth:function(t){var e=this.getWindowSize().width,t=2>e/t?e/2:t;this.$("prefs").css("width",this._px(t))},setPreferencesFormHeight:function(t){var e=this.getWindowSize().height,t=2>e/t?e/2:t;this.$("prefs").css("height",this._px(t))},setPreferencesFormSize:function(t,e){this.setPreferencesFormWidth(t),this.setPreferencesFormHeight(e)},showPreferences:function(){Widget.Framework.params.showPreferencesHandler(this.widget)},hidePreferences:function(){Widget.Framework.params.hidePreferencesHandler(this.widget)},showEditForm:function(t){return Widget.Framework.showEditForm(this.widget.id,t)}}}(jQuery),"undefined"!=typeof Widget&&"undefined"==typeof Widget.Framework){var widgetTiming=1e3;!function(t){Widget.Framework={undef:function(t){return t},params:!1,_id:{},_prebindId:{},_wauth:{},_no:{},_widgets:[],_wrappers:{},_callbacks:{},_callbackId:1,widgetAutoReloadTimers:{},widgetReloadQueue:{},reloadQueueTimeout:5e3,reloadQueueTimer:null,widgetPrefs:{},getLocale:function(){return this.params.locale},getDomain:function(){return this.params.domain},get:function(t){return Widget.Framework._id[t]},getPrebind:function(t){return Widget.Framework._prebindId[t]},getByWauth:function(t){return Widget.Framework._wauth[t]},getByWrapperId:function(t){return Widget.Framework._wrappers[t]},getByClass:function(t){if(this._no[t]===this.undef())return[];for(var e=[],i=0;i<this._widgets.length;i++)this._widgets[i].classId===t&&(e[e.length]=this._widgets[i]);return e},updateNo:function(t,e){var i=parseInt((""+e).replace(/^[^-]+-/,""),10);return this._no[t]===this.undef()&&(this._no[t]=0),this._no[t]<=i&&(this._no[t]=i+1),this._no[t]},register:function(t){this.registerWauth(t),this._id[t.id]=t,this.updateNo(t.classId,t.instanceId),t.intClassId&&this.updateNo(t.intClassId,t.instanceId),this._widgets=[];for(var e in this._id)this._id.hasOwnProperty(e)&&(this._widgets[this._widgets.length]=this._id[e])},registerWauth:function(t){var e=t.getValue("wauth");""!==e&&(this._wauth[e]=t),t.resetAuth()},all:function(){return this._widgets},bindIframe:function(){var t=y5Url(location.href).getParam("wauth");if(t){this.inIframe=!0;var e=this.splitAuth(t),i=this.bind(e.id,{type:"iframe-inside",wauth:t});return this.setValuesFromUrl(i),i.addWidgetStyles(),document.documentElement.id=this.params.idPrefix+i.id,i}return this.inIframe=!1,!1},setEdit:function(t){return arguments.length?(t=!!t,void(this.params.edit!==t&&(t?this.unsetAutoreload():this.setAutoreload(),this.params.edit=t))):this.params.edit},getValuesFromUrl:function(t){var e=[];try{var i,n,o=y5Url(location.href);t!==this.undef()&&o.query(t);var s=o.queryKeys();for(i=0;i<s.length;i++)o.getParam(s[i])===this.undef()?e[e.length]=[s[i],""]:e[e.length]=[s[i],o.getParam(s[i])];if(o.Hash){var r,a=o.Hash.replace("secure:","").split(",");for(i=0,n=a.length;n>i;i++)r=a[i].split("="),e[e.length]=r}}catch(l){}return e},setValuesFromUrl:function(t){var e,i=this.getValuesFromUrl();try{e=location.protocol}catch(n){e="http:"}for(var o=0;o<i.length;o++)if("."===i[o][0]){var s=i[o][1].split("|");this.params.saveDomain=s[0].replace(/(http:|https:)/,e),this.params.fullproxyDomain=s[0],this.params.fullproxyUrl=this.params.saveDomain+this.params.proxyUrl,this.params.proxyDomain=s[1]}else if("locale"===i[o][0])this.params.locale=i[o][1];else{var r=i[o][1],a=i[o][0];"prefs_get"===a&&(r=JSON.parse(r)),t.setValue(a,r)}},_inlineLoadingCount:0,inlineLoading:function(t){this._inlineLoadingCount+=t,this.onInlineLoadingChange(this._inlineLoadingCount,t)},onInlineLoadingChange:function(){},bind:function(t,e){var i=this.prebind(t,e);return i.init(),i},prebind:function(t,e){var i=new Widget(t,e);return Widget.Framework._prebindId[t]=i,i},init:function(t){if(this.params===!1)this.params=t;else for(var e in t)t.hasOwnProperty(e)&&t[e]!==this.undef()&&(this.params[e]=t[e]);this.params.preloader=this.params.preloader.replace("#dataLoading#",this.params.dataLoadingText)},insert:function(t,e,i,n){e.append(i),function o(){var e=Widget.Framework.getPrebind(t);e?(e.bound&&("raw"===e.type||"inline"===e.type&&e.src===!1)&&e.finalize(),n&&n(e,e.$().parent())):setTimeout(o,100)}()},replace:function(t,e,i){var n=t.$(),o=t.id,s=null;BEM.DOM.destruct(n,!0),n.html(e),BEM.DOM.init(n);var r=Widget.Framework.get(o);return s=r.wrapper.$(),i&&i(r,s),r},reload:function(e,i,n,o){n&&(e._prefs.showAnyway=n);var s={wauth:e.getAuth(),wid:e.id,usrCh:e.params.usrCh,fixed:this.params.layoutFixed?"1":"",showanyway:e._prefs.showAnyway?1:0,prefs_get:e.params.prefs_get?JSON.stringify(e.params.prefs_get):"",locale:this.getLocale(),prototype:Widget.Framework.params.prototype,bg:e.getWidgetStyle().bg};o&&(s.istuning=1),this.params.gsid&&(s.g_sid=this.params.gsid),"undefined"!=typeof e.params.is_default&&(s.is_default=e.params.is_default===!0?1:0),Widget.Framework.widgetPrefs[e.id]!==!1?Widget.Framework.widgetPrefs[e.id]=e._prefs:Widget.Framework.widgetPrefs[e.id]=null,"iframe"===e.type&&(s["."]=this.params.fullproxyDomain+"|"+this.params.proxyDomain),
t.get(this.params.addUrl,s,function(t){Widget.Framework.replace(e,t,i)})},add:function(e,i,n,o){var s=this.updateNo(e,"_topnews"===e?0:1);this.updateNo(e,s);var r,a;"function"==typeof n?r=n:(r=n.success,a=n.error),o=o?o:{fixed:!1};var l=e+"-"+s,c={wauth:this.params.wauth,wid:l,smart:o.smart?"1":"",fixed:o.fixed?"1":"",locale:this.getLocale(),isAddition:1,prototype:this.params.prototype};this.params.gsid&&(c.g_sid=this.params.gsid),o.settings&&(c.settings=o.settings),o.sign&&(c.sign=o.sign),o.showanyway&&(c.showanyway=o.showanyway),t.ajax({url:this.params.addUrl,data:c,success:function(t){Widget.Framework.insert(l,i,t,r)},error:a})},fromJson:function(t,e){var i=this.getByWauth(t);i&&i._inlineFromJson(e)},splitAuth:function(t){var e=t.split(".");return e.length>4?{id:e[3],owner:e[6],viewer:e[5]}:{id:e[0],owner:e[1],viewer:e[2]}},scripts:{},library:function(e,i){var n=this.prepareLibrary(e),o=0,s=this,r=function(e){if(e!==s.undef()&&"loaded"!==s.scripts[e]){for(var a=0;a<s.scripts[e].length;a++)s.scripts[e][a]();s.scripts[e]="loaded"}if(o>=n.length)return void(i!==s.undef()&&i());var l=n[o];o++,s.scripts[l]===s.undef()&&l!==!1?(s.scripts[l]=[],t.getScript(l,function(t){return function(){r(t)}}(l))):"loaded"===s.scripts[l]?r():s.scripts[l].push(r)};r()},prepareLibrary:function(t){var e=[];if(t instanceof Array)for(var i=0;i<t.length;i++)e=t[i]instanceof Array?e.concat(this.prepareLibrary(t[i][0],t[i][1])):e.concat(this.prepareLibrary(t[i]));return t!==!1&&(e=t),e},_css:{},css:function(e){e instanceof Array?this.loadCss(e):(e.any instanceof Array&&this.loadCss(e.any),t.browser&&t.browser.msie&&e.msie instanceof Array&&this.loadCss(e.msie),t.browser&&t.browser.msie||!(e.non_msie instanceof Array)||this.loadCss(e.non_msie))},loadCss:function(t){for(var e=0;e<t.length;e++)if(!this._css[t[e]]){this._css[t[e]]=!0;var i=document.createElement("link");i.rel="stylesheet",i.href=t[e];var n=document.getElementsByTagName("head")[0]||document.documentElement;n.appendChild(i)}},_click:function(e){var i="//wayback.archive-it.org/all/20180620162258/https://yandex.ru/clck/jclck/dtype=stred/pid="+this.params.statParams.pid+"/cid="+this.params.statParams.cid+"/path="+e+"/rnd="+Math.random()+"/*"+location.href.replace(/^[^\/]+\/+/,"");try{t.getScript(i)}catch(n){}},_counter:function(){var e=t(this),i=(e.closest(".widget").attr("id")||"").replace(/^wd-wrapper-/,""),n=Widget.Framework.get(i),o=n.classId+".anchors";if(n){if(e.attr("rev")){var s=e.attr("rev");if("none"===s)return;o=o+"."+s}Widget.Framework._click(o)}},hookStats:function(e){var i=this;if("iframe-inside"===e.type)t("a, input[type=button], input[type=submit], button").on("mousedown.widgetstat",function(){i._click(e.classId+".anchors")});else if(e.wrapper.$("title").not(".yandex-hook-stat").mousedown(function(){i._click(e.classId+".title")}).addClass("yandex-hook-stat"),e.wrapper.$().length>0&&"raw"!==e.type){var n="#"+e.wrapper.$().attr("id")+" a:not(.yandex-hook-stat),";n+="#"+e.wrapper.$().attr("id")+" input[type=button],",n+="#"+e.wrapper.$().attr("id")+" input[type=submit],",n+="#"+e.wrapper.$().attr("id")+" button";try{t(n).off("mousedown.widgetstat").on("mousedown.widgetstat",function(){var n=t(this),o=e.classId+".anchors";if(n.attr("rev")){var s=n.attr("rev");if("none"===s)return;o=o+"."+s}i._click(o)})}catch(o){}}},_domloaded:!1,domLoaded:function(){if(this._domloaded)return!1;this._domloaded=!0;for(var t=0;t<this._widgets.length;t++)this._widgets[t]._inlineLoading?this._widgets[t].showPreloader():this._widgets[t]._inlinePending?this._widgets[t]._inlineFromHtml(this._widgets[t]._inlinePending):this._widgets[t].finalize()},setAutoreload:function(t){if(this.params.edit!==!0)if(t){var e=this.widgetAutoReloadTimers;if(t.params.rebind&&!e[t.id]){var i=t.params.rebind*widgetTiming,n=function(){e[t.id]=null,t.iReload()};e[t.id]=setTimeout(n,i)}}else for(var o=0;o<this._widgets.length;o++)this.setAutoreload(this._widgets[o])},unsetAutoreload:function(t){if(t){var e=this.widgetAutoReloadTimers,i=e[t.id];i&&(clearTimeout(i),e[t]=null)}else for(var n=0;n<this._widgets.length;n++)this.unsetAutoreload(this._widgets[n])},_storeCallback:function(t){return this._callbacks[this._callbackId]=t,this._callbackId++},_freeCallback:function(t){var e=this._callbacks[t];return delete this._callbacks[t],e},_postMessageTransport:function(t,e,i){var n={action:"message",wauth:t.getValue("wauth"),params:{message:e}},o=this.params.fullproxyDomain;i&&(n.params.callbackId=this._storeCallback(i)),window.parent.postMessage(JSON.stringify(n),o)},_iframeTransport:function(t,e,i){var n=this.params.fullproxyUrl;if(0===n.indexOf("http:")||0===n.indexOf("https:")||"/"===n.charAt(0)){this._xframe&&document.body.removeChild(this._xframe);var o=document.createElement("iframe");o.style.visibility="hidden",o.style.position="absolute",o.name="widget"+(Math.random()+"").substr(3,7),o.style.top=o.style.left=o.style.width=o.style.height=0,this._xframe=document.body.insertBefore(o,document.body.firstChild),this.xframeSrc(this._xframe,n+"#"+e,i)}},xframe:function(t,e,i,n){try{var o,s=y5Url();s.clearQuery(),s.addParams({wauth:t.getAuth(),name:e,value:i}),s.hash(encodeURIComponent(s.query())),s.clearQuery(),o=this.params.proxyDomain+"&"+s.hash(),"postMessage"in window?this._postMessageTransport(t,o,n):this._iframeTransport(t,o,n)}catch(r){}},_isCorrectWauth:function(t){var e=this.splitAuth(t),i=this.get(e.id);return i?i.getValue("wauth")===t:!1},onWindowMessage:function(t){var e,i;try{e=JSON.parse(t.data)}catch(n){return}e&&("callback"===e.action?e.params&&e.params.callbackId&&(i=this._freeCallback(e.params.callbackId),i&&i()):e.wauth&&this._isCorrectWauth(e.wauth)&&e.params&&e.params.message&&(this.xframeGet(e.params.message),e.params.callbackId&&t.source.postMessage(JSON.stringify({action:"callback",params:{callbackId:e.params.callbackId}}),t.origin)))},xframeGet:function(e){if(!this.inIframe){e.indexOf("wauth%3D")>0&&(e=decodeURIComponent(e));var i=new y5Url;i.query(e.replace(/^#/,""));var n=this.splitAuth(i.getParam("wauth")),o=this.get(n.id),s=i.getParam("value");if(o)switch(i.getParam("name")){case"Widget::setTitle":o.setTitle(s);break;case"Widget::setIFrameHeight":o.setIFrameHeight(s);break;case"Widget::setPreferencesFormWidth":o.setPreferencesFormWidth(s);break;case"Widget::setPreferencesFormHeight":o.setPreferencesFormHeight(s);break;case"Widget::setPreferencesFormSize":var r=s.split(",");o.setPreferencesFormSize(r[0],r[1]);break;case"Widget::showPreferences":o.showPreferences();break;case"Widget::hidePreferences":var a,l="<>",c=decodeURIComponent(e).split(l);for(s=[],a=1;a<c.length;a++)s[s.length]=c[a];s=s.join(l);var u={},h=this.getValuesFromUrl(s);for(a=0;a<h.length;a++)u[h[a][0]]=h[a][1];(i.Query.wauth||[])[0]===o.getAuth()&&(""!==i.getParam("value")&&o.setValues(u),setTimeout(function(){o.loadFromSrc()},200),this.params.notifyChangesHandler(o)),t(window).trigger({type:"widgetSettingsTuned",id:o.id}),o.hidePreferences();break;case"Widget::dropPreferences":o.dropPreferences()}}},xframeSrc:function(e,i,n){var o;if(t.browser&&t.browser.msie){o=e.cloneNode(!0),o.style.position="absolute",o.style.visibility="hidden",o.id="";var s=function(){t(o).unbind("load",s),o.style.position="",o.style.visibility="",n&&n()};t(o).bind("load",s),o.src=i+"&rnd="+Math.random();try{document.body.appendChild(o)}catch(r){}}else t(e).one("load",function(){n&&n()}),e.src=i+"&rnd="+Math.random()},addToReloadQueue:function(t,e){t.id&&(this.widgetReloadQueue[t.id]={flag:!0,widget:t,callback:e})},processReloadQueue:function(){var t,e=function(t,e){var i=Math.round(30*Math.random()*1e3);setTimeout(function(){t.reload(e),t._isNotReloaded=!0},i)};for(var i in this.widgetReloadQueue)this.widgetReloadQueue.hasOwnProperty(i)&&(t=this.widgetReloadQueue[i],t.flag&&(e(t.widget,t.callback),t.flag=!1))},showEditForm:function(e,i,n){var o=this.get(e);if(o.params.prefs_src!==this.undef()&&""!==o.params.prefs_src){var s=o.iframeElement(o.params.prefs_src,[],!0),r=s.attr("src");t(i).empty().append(s),s.attr("src",r+"&rnd="+Math.random()),s.bind("load",n)}else t.get(this.params.formUrl,{widget:o.getWidgetId(),wauth:o.getAuth(),dataType:"json",prefs_get:o.params.prefs_get?JSON.stringify(o.params.prefs_get):""},n)},getFontSize:function(){return this._fontSize||(this._fontSize=t(".widget").css("font-size")),this._fontSize},end:!0},Widget.Framework.init({jsonUrl:"",addUrl:"/adddata/",rawBodyUrl:"/inline/",formUrl:"/form.html",proxyUrl:"/xframeproxy.html",wauth:!1,idTemplate:/WIDGETID/g,idPrefix:"wd-",wrapperPrefix:"wd-",wrapperPostfix:"-",iframeHeight:"auto",iframeWidth:400,layoutFixed:!1,statParams:{pid:132,cid:2947},patternId:!1,yu:!1,is_default:!1,geoid:!1,region:!1,havePrefsFrom:!1,isWidgetNormal:!1,open_settings_on_add:!1,title:"",prefs_get:!1,locale:"ru",domain:"ru",dataLoadingText:"Данные загружаются",showPreferencesHandler:function(){},hidePreferencesHandler:function(){},notifyChangesHandler:function(){},preloader:"<div>#dataLoading#</div>"})}(jQuery),Widget.GetInstance=function(t){return Widget.Framework.get(t)},Widget.GetInstanceByWauth=function(t){return Widget.Framework.getByWauth(t)},Widget.Init=function(t){return Widget.Framework.init(t)},Widget.Bind=function(t,e){return Widget.Framework.bind(t,e)},Widget.BindOnAdd=function(t,e){return Widget.Framework.prebind(t,e)},$(document).ready(function(){Widget.Framework.domLoaded()}),Widget.Framework.focused=!0,$.browser&&$.browser.msie?($(document).bind("focusout",function(){Widget.Framework.focused=!1}),$(document).bind("focusin",function(){Widget.Framework.focused=!0})):($(window).focus(function(){Widget.Framework.focused=!0}),$(window).blur(function(){Widget.Framework.focused=!1}));var iframeWidget=Widget.Framework.bindIframe();iframeWidget?window.widget=iframeWidget:(window.WidgetMessaging=function(t){Widget.Framework.xframeGet(t)},$(window).on("resize",$.debounce(function(){var t=$(".widget").css("font-size");t!==Widget.Framework._fontSize&&(Widget.Framework._fontSize=t,Widget.Framework.all().forEach(function(t){t.adjustFontSize()}))},200))),"postMessage"in window&&$(window).bind("message",function(t){Widget.Framework.onWindowMessage(t.originalEvent)})}BEM.DOM.decl("player-control",{_onClick:function(t){var e=t.data.domElem,i=e.data();this.__self.process(i)}},{process:function(t){return this.testOptions(t)?this._open?Promise.resolve():(this._open=!0,this.beforePlay(t).then(this.play.bind(this)).then(this.onPlaySuccess.bind(this))["catch"](this.onPlayFail.bind(this))):(home.error.logError({block:this.getName(),message:"testOptions failed",meta:t,sourceType:"logic"}),Promise.reject())},testOptions:function(t){return!!t.fromBlock},beforePlay:function(t){return this._initTiming(),this._lockAutoReload(),Promise.all([this._showLoader(t),this._awaitData()]).then(function(){return t})},play:function(t){return Promise.resolve(t)},onPlaySuccess:function(){return this._firstPaintTiming(),$(":focus").blur(),this._hideLoader()},onPlayFail:function(t){this.hide(),this._rejectTiming(),t&&home.error.logError({block:this.getName(),message:"unexpected error",sourceType:t.timeout?"timeout":"logic"},t)},getContainer:function(){return $("body")},_initTiming:function(){this.TIMINGSUFFIX&&!this._timing&&(this._timing=Ya.Rum.makeSubPage("28.15.1242."+this.TIMINGSUFFIX),Ya.Rum.sendTTI(!1,Ya.Rum.getTime(),this._timing))},_rejectTiming:function(){this._timing&&this._timing.cancel()},_firstPaintTiming:function(){this._timing&&!this._timingSent&&(Ya.Rum.sendTimeMark("2793",Ya.Rum.getTime(),!1,this._timing),this._timingSent=!0)},_lockAutoReload:function(){BEM.channel("reload").trigger("lock",{block:this.getName()})},_releaseAutoReload:function(){BEM.channel("reload").trigger("release",{block:this.getName()})},_awaitData:function(){return this._awaitDataPromise||(this._awaitDataPromise=new Promise(function(t){home.subscribeData(t)})),this._awaitDataPromise},_showLoader:function(){if(this._loader)return Promise.resolve();var t=$(home.view("player-control__loader",{}));return t.appendTo(this.getContainer()),t.one("click",".player-control__close",function(){return this.hide(),!1}.bind(this)),this._loader=t,this._loader.show(),Promise.resolve()},_hideLoader:function(){this._loader&&(this._loader.off("click"),this._loader.remove(),this._loader=null)},hide:function(){this._hideLoader(),this._releaseAutoReload(),this._open=!1},live:function(){this.liveBindTo("link","pointerclick",function(t){return this._onClick(t),!1})}}),BEM.DOM.decl("player-control",{},{onPlaySuccess:function(){var t=$(".loadtest-stream");return t.length&&t.remove(),this.__base()},live:function(){return this.liveBindKey("link","enter space",function(t){this._onClick(t),t.preventDefault()}),this.__base()}}),BEM.DOM.decl({block:"stream-control",baseBlock:"player-control"},{},{TIMINGSUFFIX:"273",getContainer:function(){return $("body")},downloadResources:function(){return home.bundles.load("stream")},beforePlay:function(t){var e=this._currentEvent={},i={active:t.streamActive,programParams:{from_block:t.fromBlock},container:this.getContainer()},n={};return t.streamDefault&&(t.streamChannel="default"),t.streamId||t.streamChannel?(n.id=t.streamId,n.type=t.type,n.channel_id=t.streamChannel,this._initTiming(),this._lockAutoReload(),Promise.all([this._showLoader({scroll:t.scroll?n:null}),this._awaitData().then(this.downloadResources.bind(this))]).then(function(){return this._loader&&this._currentEvent===e?Promise.resolve({stream:n,startParams:i}):Promise.reject()}.bind(this))):(home.error.logError({block:this.getName(),message:"Nothing to play",sourceType:"logic"}),Promise.reject())},play:function(t){var e=t.stream,i=t.startParams;return BEM.DOM.blocks.stream.play(e,i)["catch"](function(t){throw t.message="play->"+t.message,t})},onPlaySuccess:function(){return BEM.DOM.blocks.stream.get().then(function(t){t.on("hide",function(){this.hide()}.bind(this))}.bind(this))["catch"](function(t){home.error.logError({block:this.getName(),message:"onPlaySuccess, failed to bind to hide event"},t)}.bind(this)),this.__base()},startPlayerFromQuery:function(){this._awaitData().then(function(){if(!home.getData("stream.stream"))return Promise.reject();var t,e,i=home.getData("stream.stream").clientData;if(i&&(this._history.on("closed",this.onHistoryChange.bind(this)),i.queryChannel||i.queryId)){var n=i.queryId,o=i.queryChannel;return e={id:n,channel_id:o},t={active:i.queryActive,programParams:{from_block:i.queryFrom},container:this.getContainer()},this._initTiming(),this._lockAutoReload(),Promise.all([this._showLoader({scroll:i.queryDisableScroll?"":e}),this._awaitBlock()]).then(function(){return this.play({stream:e,startParams:t})}.bind(this)).then(this.onPlaySuccess.bind(this))["catch"](function(t){if(this.hide(),this._rejectTiming(),t)throw t}.bind(this))}}.bind(this))["catch"](function(t){t&&home.error.logError({block:this.getName(),message:"failed to start stream by query",sourceType:t.timeout?"network":"logic"},t)}.bind(this))},_awaitBlock:function(){return this._getBlockPromise||(this._getBlockPromise=new Promise(function(t,e){var i=+new Date;!function n(){if(BEM.DOM.blocks.stream)t();else if(+new Date-i>5e3){var o=Error("_awaitBlock, no block after 5s");o.timeout=1,e(o)}else setTimeout(n,100)}()})),this._getBlockPromise},_awaitOrDownload:function(){return this._awaitData().then(function(){if(!home.getData("stream.stream"))return Promise.reject();var t=home.getData("stream.stream").clientData;if(t)return this._showLoader(),t.queryChannel||t.queryId?this._awaitBlock():this.downloadResources()}.bind(this))},onHistoryChange:function(t,e){e&&this._awaitOrDownload().then(function(){var t=e.params,i={active:e.active,container:this.getContainer(),program_params:{from_block:"history"}};return this._history.lock(),this._lockAutoReload(),BEM.DOM.blocks.stream.play(t,i)}.bind(this)).then(function(){this._history.release(),this.onPlaySuccess()}.bind(this),function(t){home.error.logError({block:"stream-control",message:"history play, playerStartFail",sourceType:"logic"},t),this._history.release(),this.hide()}.bind(this))},live:function(){return this._history=BEM.blocks["stream-history"].get(),this.startPlayerFromQuery(),this.__base()}}),BEM.DOM.decl("stream-control",{},{_showLoader:function(t){var e=t&&t.scroll,i=this.__base.bind(this);return e?this._animateOpen(e).then(function(){return i(t)}):i(t)},_animateOpen:function(t){return new Promise(function(e){var i,n;if(!this._mediaGrid){if(i=$(".media-grid"),n=$(".media-stream"),!i.length||!n.length)return void e();this._mediaGrid=i.bem("media-grid"),this._mediaStreamTop=n.offset().top-10}this._mediaGrid.hasMod("collapsed")&&this._mediaGrid.toggleCollapsed(),this._findMediaEntry(t),this.afterCurrentEvent(function(){this._animatingEntry=null,this._insertFade(),$("html,body").stop().animate({scrollTop:this._mediaStreamTop},400,function(){setTimeout(function(){this._$fade.show(),this._animateMediaEntry().then(e,e)}.bind(this),250)}.bind(this))},this)}.bind(this))},_findMediaEntry:function(t){var e,i=this._mediaGrid.domElem.find(".media-play__container");this._$mediaEntry=null,t.id&&(e=i.filter("[data-stream-id="+t.id+"]")),t.channel_id&&!e&&(e=i.filter("[data-stream-channel="+t.channel_id+"]")),e&&(e=e.find(".media-service__bg"),e.length&&(this._$mediaEntry=$(e[0])))},_insertFade:function(){this._$fade||(this._$fade=$('<div class="stream-control__fade"></div>'),this._$fade.appendTo(this.getContainer()))},_animateMediaEntry:function(){return this._animatingEntry||(this._animatingEntry=new Promise(function(t){var e;this._$fade.addClass("stream-control__fade_animating"),this._$mediaEntry&&(e=this._getEntryTranslate(),this._$mediaEntry.css("transform","translate3d("+e.x+"px,"+e.y+"px,0) scale(4)"),this._$mediaEntry.addClass("media-service__bg_animating")),setTimeout(function(){this._$mediaEntry&&(this._$mediaEntry.css({transform:"","transition-duration":"0s"}),this._$mediaEntry.removeClass("media-service__bg_animating")),this._$fade.removeClass("stream-control__fade_animating"),t()}.bind(this),250)}.bind(this)).then(function(){this._$fade.hide(),this._$mediaEntry&&this._$mediaEntry.css({"transition-duration":""})}.bind(this))["catch"](function(t){this._$fade.remove(),this._$fade=null,home.error.logError({block:"stream-control",message:"error"},t)}.bind(this))),this._animatingEntry},_getEntryTranslate:function(){var t=$("body"),e=this._$mediaEntry.offset(),i={x:e.left+this._$mediaEntry.outerWidth()/2,y:e.top+this._$mediaEntry.outerHeight()/2},n={x:t.scrollLeft()+window.innerWidth/2,y:this._mediaStreamTop+window.innerHeight/2};return{x:Math.ceil(n.x-i.x),y:Math.ceil(n.y-i.y)}},live:function(){return this.__base()}}),BEM.decl("stream-history",{onSetMod:{js:function(){this._w=this.params.window,this._h=this._w.history;var t=this;this._listener||$(this._w).on("popstate",function(){setTimeout(function(){t._getPopStateId()!==t._lastPopState&&t._onPopState()},10)}),this._list=[],this._lastPopState=t._getPopStateId(),(this.params.flat||this.params.fallback)&&(this._interval=setInterval(function(){t._getPopStateId()!==t._lastPopState&&t._onPopState()},50))},player:{"":function(){var t=this._getDepth();t&&!this.params.flat?this._h.go(-t):this.clean()}}},_getPopStateId:function(){var t=this._w.location.href+"|";return t+=this.params.flat?this._list.length:this._getDepth()},destroy:function(){$(this._w).off("popstate",this._listener)},lock:function(){this._nohistory=!0},release:function(){this._nohistory=!1},update:function(t,e){if(!this._nohistory&&"continue"!==e.auto){var i={},n=this._getCleanUrl(),o="";e.channel_id&&(o=this._getAliasByChannel(e.channel_id),o||(i.stream_channel=e.channel_id)),"watching"!==t&&(i.stream_active=t),e.id&&(i.stream_id=e.id);var s=home.makeUrl({path:this._setAlias(n.path,o),hash:n.hash,query:$.extend({},n.query,i)}),r=this._getDepth(),a=e.replace,l=this._extractOtherParams(e);!this.hasMod("player","opened")&&r&&(a=!0),this.params.flat&&(this._list.push({url:this._w.location.href,other:l}),a=!0),a||r++;var c={streamDepth:r,other:l},u=a?"replaceState":"pushState";this._h[u](c,this._w.document.title,s),this._lastPopState=this._getPopStateId()}},back:function(t){var e=this._getDepth();if(t&&2>e){var i=this._getState(),n=$.extend({replace:!0},i.params,t.params);return this.update(t.active||i.active,n),void this._onPopState()}if(this.params.flat){var o=this._list.pop(),s=o&&o.url;s||(s=this._getCleanUrl()),this._otherParams=o.other,this._h.replaceState(null,this._w.document.title,s),this._onPopState()}else this._h.back()},_getCleanUrl:function(){var t=home.parseUrl(this._w.location.href),e=t.query;return delete e.stream_channel,delete e.stream_id,delete e.stream_active,{path:this._clearAlias(t.path),query:e,hash:t.hash}},clean:function(){var t=this._getCleanUrl(),e=home.makeUrl({path:t.path,hash:t.hash,query:t.query});this._h.replaceState(this._h.state,this._w.document.title,e),this._lastPopState=this._getPopStateId(),this.trigger("x-closed")},_getState:function(){var t=home.parseUrl(this._w.location.href),e=t.query,i=this._getChannelByPath(t.path)||e.stream_channel,n=e.stream_active||"watching",o={},s=this._getOtherParams();if(e.stream_id||i||e.stream_active){e.stream_id?o.id=e.stream_id:i&&(o.channel_id=i,o.live=!0);for(var r in s)s.hasOwnProperty(r)&&(o[r]=s[r]);return{active:n,params:o}}},_getDepth:function(){if(this.params.flat)return this._list.length;try{return this._h.state&&this._h.state.streamDepth||0}catch(t){return 1}},_getOtherParams:function(){return this.params.flat?this._otherParams||{}:this._h.state&&this._h.state.other||{}},_extractOtherParams:function(t){var e={auto:1,replace:1,id:1,channel:1,channel_id:1,program:1,current:1,live:1},i={};for(var n in t)t.hasOwnProperty(n)&&!e[n]&&(i[n]=t[n]);return i},_getEventName:function(){return this.getMod("player")||"closed"},_onPopState:function(){this._lastPopState=this._getPopStateId();var t=this._getEventName(),e=this._getState();if("closed"===t&&!e)return void this.trigger("x-closed");var i=this._getDepth();return!e||this.params.flat||i?void this.trigger(t,e):void("closed"===t?this.clean():this.trigger(t))},_getAliasByChannel:function(t){var e=BEM.blocks.stream&&BEM.blocks.stream.instance;if(!e)return"";var i=e.getChannelById(t);return i&&i.alias||""},_getChannelByPath:function(t){var e=BEM.blocks.stream&&BEM.blocks.stream.instance;if(!e)return t;var i=t.match(/^\/([\w.]+)\/?$/),n=i&&e.getChannelByAlias(i[1]);return n&&n.channel_id},_clearAlias:function(t){return t.replace(/^(\/)([\w.]+)(\/?)$/,"/")},_setAlias:function(t,e){return e?"/"+e:t}},{get:function(t){return this._instance||(this._instance=new BEM.blocks["stream-history"]({},{window:t||window,flat:"WindowsPhone"===home.getData("i-ua2.data.os")||$(".i-ua_browser_msie,.i-ua_browser_edge").length})),this._instance}}),BEM.DOM.decl("stream-trackings",{},{_getUrlBase:function(){var t,e;return this._urlBase||(t=home.getData("stream.trackings"),e=home.getData("stream.reqparams.from"),this._urlBase=t.redirHost+this._concatParams({reqid:t.requestId,yandexuid:t.yandexuid,select_event:"click",cid:73037,pid:197,dtype:"stred",source:e})),this._urlBase},_getDefaultMacrosParams:function(t){return t?this._concatParams({rnd:Math.floor(Math.random()*Math.pow(10,16)),timestamp:+new Date,user_ts:Math.floor(new Date/1e3)}):this._concatParams({rnd:"{{random}}",fullscreen:"{{fullscreen}}",duration:"{{duration}}",timestamp:"{{timestamp}}",user_ts:"{{vts}}",watchedTime:"{{fts}}"})},_concatParams:function(t){return Object.keys(t).map(function(e){return t[e]?[e,t[e]].join("="):void 0}).filter(Boolean).join("/")+"/"},_getProgramUrl:function(t){return this._concatParams(t)},getTrackingUrl:function(t,e,i){var n={path:"player-events."+t};return"error"===t&&(n.error_code="{{error-code}}"),"seek"===t&&(n.position_from="{{old-position}}"),e.watchedTime&&!i&&delete e.watchedTime,this._getUrlBase()+this._getDefaultMacrosParams(i)+this._getProgramUrl(e)+this._concatParams(n)+"*"},getTrackings:function(t){var e={};return["init","start","play","pause","end","error","adStart","adEnd","seek"].forEach(function(i){e[i]=[this.getTrackingUrl(i,t)]},this),e.heartbeat=[[this.getTrackingUrl("heartbeat",t),{delay:3e4}]],e}}),BEM.DOM.decl("stream-quality",{onSetMod:{js:function(){this._yes=this.findBlockOn("yes","button"),this._no=this.findBlockOn("no","button"),this.bindTo("yes","click",this._onYes,this),this.bindTo("no","click",this._onNo,this),this._waitforStream()},disabled:function(t,e){this._yes.toggleMod("disabled","yes","",e),this._no.toggleMod("disabled","yes","",e),this.delMod("status")}},_onYes:function(){this._log("yes")},_onNo:function(){this._log("no")},_log:function(t){this.setMod("disabled","yes"),this.setMod("status",t);var e=this,i=e._stream.getMod("channel")+"."+t,n=document.createElement("img");n.onload=n.onerror=function(){e.delMod("disabled")},n.src="https://wayback.archive-it.org/all/20180620162258/https://yandex.ru/clck/counter/dtype=stred/pid=132/cid=73131/path="+i+"/*"},_waitforStream:function(){var t=this,e=function(){return BEM.DOM.blocks.stream?void BEM.DOM.blocks.stream.get($("body")).then(function(e){t._stream=e,t.setMod("ready","yes")}):void setTimeout(e,1e3)};e()}}),BEM.DOM.decl("etrains",{onSetMod:{direction:function(t,e){var i=this.params.urls&&this.params.urls[e||"fwd"];i&&this.elem("title-link").attr("href",i)}},toggle:function(){var t=this;this.toggleMod("direction","rev"),home.stat.logPath("click","rasp."+t.params.counterType+".changeway")}},{live:function(){this.liveBindTo("direction","pointerclick",function(){this.toggle()})}}),BEM.DOM.decl({block:"etrains",modName:"client",modVal:"yes"},{init:function(){var t=this.domElem.data("widget"),e=this.params;if(t&&e.host){var i=e.host+"widgets/suburban/next_trains",n={locale:BEM.blocks["i-global"].param("locale")};["rasp_to","rasp_direction","rasp_from","minutes_forward","minutes_backward","n"].forEach(function(e){var i=t.getValue(e);i&&(n[e]=i)}),$.ajax({url:i,data:n,dataType:"jsonp",success:this.changeThis(function(e){this.draw(e),$(window).trigger({type:"widgetLoaded",id:t.id})}),error:this.changeThis(function(){this.clear(),$(window).trigger({type:"widgetLoaded",id:t.id})})})}},draw:function(t){var e,i;if(t){var n=!0,o=this.params.counterType;t.routes_forward.length||(n=!1),e=home.view("etrains__draw",{from:t.from.name,to:t.to.name,today:t.routes_forward,host:this.params.host,direction:n,counterType:o}),i=home.view("etrains__draw",{from:t.to.name,to:t.from.name,today:t.routes_backward,host:this.params.host,direction:!n,counterType:o}),e||i||(e=i="")}else e=i="";this.elem("tracks").append(e,i),home.stat.logDOMShow(this.domElem)},clear:function(){this.elem("tracks").empty()}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnEvent("init",function(t,e){this.init(e)})}}),BEM.DOM.decl("themes-promo",{onSetMod:{js:function(){var t=this.params,e=t.promos;this.LS_KEY="home:themes-promo-"+t.type,this.LS_KEY_THEME_PREFIX="home:themes-promo-ban-",this.now=new Date,this.expiresType=(new Date).setMonth(this.now.getMonth()+1),this.expiresSkin=(new Date).setMonth(this.now.getMonth()+2),this.now=this.now.getTime();for(var i=0,n=e.length;n>i;i+=1)if(this._canShow(e[i])){this.promo=e[i];break}this.promo&&(this.promo.dark&&this.setMod("dark","yes"),this.promo.closeCounter=this._getStatPath(this.promo.counter+".close"))},state:{shown:function(){home.subscribeData(home.stat.logDOMShow.bind(this,this.domElem)),this._hasStorage()&&this.bindTo("link","click",this._setPromo),this.bindTo("close close-icon","click",this._closePromo)}}},_canShow:function(t){return this._checkBlock(this.LS_KEY)&&this._checkBlock(this.LS_KEY_THEME_PREFIX+t.themes)},_checkBlock:function(t){if(!this._hasStorage())return!0;var e=this._getUnlockDate(t);return e?e-this.now<=0:!0},_closePromo:function(t){t.preventDefault(),home.localStorage.setItem(this.LS_KEY,this.expiresType),home.localStorage.setItem(this.LS_KEY_THEME_PREFIX+this.promo.themes,this.expiresSkin),this.promo.closeUrl&&((new Image).src=this.promo.closeUrl),this._hide()},_hide:function(){this.setMod("state","hidden"),this.domElem.parent().addClass("themes-promo__gone")},_setPromo:function(t){t.preventDefault();var e=this.elem("link").attr("href"),i=this.params.curTheme,n=this.promo["default"];home.localStorage.setItem(this.LS_KEY_THEME_PREFIX+this.promo.themes,this.expiresSkin),$.ajax(this.promo.setThemeUrl).done(function(){var t=500;setTimeout(function(){window.location.href="/?prevTheme="+encodeURIComponent(i)+"&newTheme="+encodeURIComponent(n)},t)}).fail(function(){window.location.href=e})},_getUnlockDate:function(t){return Number(home.localStorage.getItem(t))},_getStatPath:function(t){return"head.skinpromo."+t},_hasStorage:function(){return!home.disabledLS}}),BEM.DOM.decl({block:"themes-promo",modName:"type",modVal:"header"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.promo;t&&t.href&&t.text&&(this.domElem.append(home.view("themes-promo__inner-header",{attrs:{href:t.href,"data-statlog":this._getStatPath(t.counter+".preview"),"data-statlog-redir":"0"},textMix:"default"!==this.params.curTheme?" link_black_yes":"",closeAttrs:home.getAttributes({"data-statlog":this._getStatPath(t.counter+".close"),"data-statlog-redir":"0","aria-label":home.l10n("promo.themes-promo__close"),tabindex:"0",role:"button"}),text:(t.title?t.title+" ":"")+t.text})),t.showUrl&&((new Image).src=t.showUrl),this.setMod("state","shown"))}},_canShow:function(t){return this.__base.apply(this,arguments)&&this._checkNotEqualCurrentTheme(t)},_checkNotEqualCurrentTheme:function(t){return t.themes!==this.params.curTheme}}),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),i=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",i?"&yu="+i:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=window.devicePixelRatio,this._isRetina>1&&this.updateIcon()}}},_getIconPath:function(){var t=this.params.avatarHost,e=this.params.uid||BEM.blocks["i-global"].param("uid"),i=this._getIconSize(),n=(this._isRetina?"/islands-retina-":"/islands-")+i,o=[t,"/get-yapic/",e,n,"?rnd=",+new Date].join("");return o},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){var t=this._getIconPath();this._setIconBackground(t)},getDefaultParams:function(){return{avatarHost:"//wayback.archive-it.org/all/20180620162258/https://avatars.yandex.net"}},_getIconSize:function(){return"middle"},redraw:function(){return this}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("pointerclick",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=60;this._dropdown=this.findBlockOutside("dropdown-menu"),this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,t,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem("icon").length?this.elem("icon"):this.elem("name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();
return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){if(!this._menu){this._menu=!0;var t=BEM.blocks.keycodes.SPACE,e=function(t){return t.shiftKey||t.ctrlKey||t.altKey||t.metaKey};this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("keydown",function(i){e(i)||i.which===t&&this._dropdown&&i.preventDefault()}).liveBindTo("keyup",function(i){e(i)||i.which===t&&this.domElem.click()})}return this.__base(),!1}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._dropdown&&this._dropdown.on("show",function(){this.unbindFromWin("scroll")}.bind(this))}}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n)),this},_get:function(e,i,n,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){i.call(this.params.callbackCtx,r.data[s])},this):this._do(e,i,n,o)},_do:function(t,e,i,n){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,i,n){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(i,e);return o.data[s]=n,o.keys.push(s),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,t):t},a=o._wrapCallback(function(i,s,r){o._onSuccess(o._buildCacheKey(t,n),t,i[0],n),o._allowCallback(s,r)&&e.apply(n.callbackCtx,i)}),l=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,s)},n.retryInterval):i&&i.apply(n.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(n.paramsToSettings||[]),function(t,e){r[e]=n[e]}),$.ajax(r).done(a).fail(l)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){this.updateInformer(this.onUpdateSuccess,this.onUpdateError)}}},updateInformer:function(t,e){this._getExporter().get({},function(i){i&&i.counters&&void 0!==i.counters.unread?t.call(this,i.counters):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=t.unread,i=this.params.unreadMax;e&&i&&e>i&&(e=i+"+");var n=e?e+" ":"";BEM.DOM.update(this.domElem,n+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(this.params.caller),cache:!1,xhrFields:{withCredentials:!0},dataType:"json",callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(t){return"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/"+(t?t+"/":"")+"counters?silent"}}),BEM.DOM.decl({block:"user",modName:"login",modVal:"known"},{onSetMod:{js:function(){this.channel("auth").on("notme",function(){this.delMod("login")},this)}}}),function(){var t,e={};BEM.DOM.decl("notice",{onSetMod:{js:function(){var e=home.getData("notice.enabled");if(e){var i=this.getUid();i&&(this.updateByInit(),t||(t=!0,this.channel("mail").on("fresh",this.changeThis(this.updateByXiva))),this.valueFromCache(),this.channel("notice").on("up",this.changeThis(this.valueFromCache)))}}},getUid:function(){if(!this.uid){var t=this.findBlockOutside("user");this.uid=String(t.domElem.data("uid")||t.params.uid||"")}return this.uid},updateByInit:function(){var t=this.getUid();e[t]=this.params.count||0,this.channel("notice").trigger("up")},updateByXiva:function(t,i){if(i){var n=i.uid;n in e&&(e[n]=i.value,this.channel("notice").trigger("up"))}},needShowDot:function(){for(var t in e)if(e.hasOwnProperty(t)&&e[t]>0)return!0;return!1},valueFromCache:function(){var t=this.getUid();this.value(e[t])},value:function(t){t?this.delMod("state"):this.hasMod("mode","all")&&this.needShowDot()?this.setMod("state","dot"):this.setMod("state","off"),this.domElem.html(t||"")}})}(),$(function(){function t(t){var e;n=!0,e=t.bem("popup"),e.show(i)}function e(e,o){var s=$(".geosuggest"),r=$(o),a=$(e),l=s.find(".geosuggest__header")[0],c=l?l.onclick():{};s.length>0&&setTimeout(function(){var e;if("1"===c.ispopup){if(i=a,0===i.length)return!1;t(s)}else if(i=r,0===i.length)return!1;e=function(){t(s)},i.click(e),$(document).keydown(function(t){"27"===t.keyCode&&s.bem("popup").hide()}),s.bem("popup").on("hide",function(){n=!1}),"1"===c.ispopup&&s.bem("popup").on("hide",function(){i.unbind("click",e)}),$(window).resize(function(){setTimeout(function(){if(n){s.bem("popup")._isShowed=!1,s.bem("popup").show(i),n=!0;try{document.body.focus()}catch(t){}}},142)}),$(".b-region__ajax-action").click(function(){return $(document.body).append('<iframe style="display:none" src="'+this.href+'"></iframe>'),s.bem("popup").hide(),!1})},1e3)}var i,n=!1;e(".link_geosuggest_yes",".link_geosuggest_yes")}),BEM.DOM.decl({block:"themes-promo",modName:"type",modVal:"popup"},{onSetMod:{js:function(){var t=$(window);t.width()<951||t.height()<400||$("body").hasClass("b-page_win10-stripe")&&t.width()<1400||(this.__base.apply(this,arguments),BEM.blocks["i-message-locker"].acquireLock("themes-promo",this._hide.bind(this)).then(function(){var t=this.promo,e=this.params;if(this.promo.from_atom){var i=$("html").hasClass("i-ua_inlinesvg_yes");i&&this.promo.icon_svg?this.promo.imgSrc=this.promo.icon_svg:e.icon&&(this.promo.imgSrc=t.icon)}else this.promo.imgSrc=e.imgRoot+this.promo.counter+".jpg";this.elem("link").attr({href:t.href,title:t.text,"data-statlog":this._getStatPath(t.counter+".preview"),"data-statlog-redir":"0"}),this.elem("title").html(t.title),this.elem("text").html(t.text),this.elem("close-icon").attr({"data-statlog":t.closeCounter,"data-statlog-redir":"0"});var n=$('<img class="themes-promo__img"/>');n.one("error",function(){$(this).hide()}),n.one("load",this.changeThis(function(){this.elem("image").append(n),t.showUrl&&((new Image).src=t.showUrl),this.setMod("state","shown")})),n.attr("src",t.imgSrc)}.bind(this)))},state:{shown:function(){this.__base.apply(this,arguments),$(".media-grid").length||this.findBlockOutside("footer").setMod("themes","promo")}}},_getStatPath:function(t){return"skinpromo."+t}}),BEM.DOM.decl({block:"themes-promo",modName:"type",modVal:"revert"},{onSetMod:{js:function(){this.elem("close-icon").attr({"data-statlog":"head.skinpromo.revert.close","data-statlog-redir":"0"}),this.bindTo("close-icon","click",this.setMod.bind(this,this.domElem,"state","nothing")),this.delMod("state"),home.subscribeData(home.stat.logDOMShow.bind(this,this.domElem))}}}),BEM.DOM.decl("themes-touch-promo",{onSetMod:{js:function(){var t=this.__self.LS_KEY,e=$(window),i=this,n=this.hasMod("type","sms")?3e4:15e3;!home.localStorage||home.disabledLS||home.localStorage.getItem(t)||e.width()<951||e.height()<520||$("body").hasClass("b-page_win10-stripe")&&e.width()<1400||setTimeout(function(){BEM.blocks["i-message-locker"].acquireLock("themes-touch-promo",i._close.bind(i)).then(function(){home.localStorage.setItem(t,"1"),i.setMod("visible","yes"),i.bindTo("button reload","click",function(){i._submit()}),i.bindTo("close","click",function(){i._close(),home.stat.logPath("click",i.params.counters.close)}),setTimeout(i.changeThis(i._close),n),home.stat.logPath("show",i.params.counters.show),i.hasMod("type","sms")&&home.stat.logPath("show","skintouchpromo.sms.button")})},1e3)}},_submit:function(){var t=this;return this.params.sk&&(this._sk=this.params.sk,this.setMod("progress","yes"),this.setMod("submitted","yes"),$.ajax({url:"/portal/proxy/sms/submit",type:"POST",xhrFields:{withCredentials:!0},data:{sk:this._sk},success:function(e){t._processSendResult(e)},error:function(){t._processSendResult({ok:0})},dataType:"json"})),!1},_processSendResult:function(t){1===t.ok&&t.track_id?this._sendTrackId(t.track_id):this._processError("submit"),this.delMod("progress")},_sendTrackId:function(t){var e=this,i={track_id:t,sk:this._sk};return $.ajax({url:"/portal/proxy/sms/commit",type:"POST",xhrFields:{withCredentials:!0},data:i,success:function(t){e._processSendSmsResult(t)},error:function(){e._processSendSmsResult({ok:0})},dataType:"json"}),!1},_processError:function(t){this.setMod("error","yes"),home.stat.logPath("show","skintouchpromo.sms.error."+t),home.stat.logPath("show","skintouchpromo.sms.reload")},_processSuccess:function(){this.delMod("error"),this.setMod("done","yes"),home.stat.logPath("show","skintouchpromo.sms.success")},_processSendSmsResult:function(t){this.delMod("progress"),1===t.ok?this._processSuccess():this._processError("commit")},_close:function(){BEM.blocks["i-message-locker"].releaseLock("themes-touch-promo"),this.delMod("visible")}},{LS_KEY:"themesTouchPromoShown"}),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){return this.hasMod("disabled")?!1:void this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}},progress:{yes:function(){this.setMod("disabled","yes")},"":function(){this.delMod("disabled")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){this._preventClick||this.trigger("click",this._buildClickEventData(t)),this._preventClick=!1},_processClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),i.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.prvntKeys)&&t.preventDefault(),i.is(e,this.params.pressKeys)&&(this.delMod("pressed"),i.is(e,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_onClick:function(){this.__base.apply(this,arguments),this._isDestructing||this.setMod("focused","yes")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",function(t){this.hasMod("disabled")||this._onClick(t)}),this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("mousedown",function(t){t.preventDefault()}),this.__base()}}),BEM.DOM.decl("mts-stripe",{_closeStripe:function(){this.domElem.hide()}},{live:function(){return this.liveBindTo("close","click",function(){this._closeStripe()}),this.liveBindKey("close","space enter",function(){this._closeStripe()}),!1}}),BEM.DOM.decl("b-mobile-balloon",{onSetMod:{js:{inited:function(){this.bindTo("yes","pointerclick",function(){document.location.href=this.params.url}),this.bindTo("no","pointerclick",function(){var t=this.params.statNo;(new Image).src=this.params.closeurl,t&&home.stat.logPath("click",t),this.domElem.hide()})}}}}),function(){function t(t){return home&&home.getData&&home.getData(t)}function e(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return e.join(",")}function i(){return s||BEM.blocks["i-global"].param("click-href")+"click"}function n(n,o,s){var r=t("timing.vars");if(r){var a,l=n.startTime,c="/dtype=stred/pid=1/cid=72202";c+="/reqid="+home.getData("timing.reqid"),c+="/path=690.2044";var u={1040.318:Math.round(n.responseEnd-l)};n.domainLookupStart&&(u[1036]=Math.round(n.domainLookupStart-l),u[1037]=Math.round(n.domainLookupEnd-n.domainLookupStart),u[1038]=Math.round(n.connectEnd-n.connectStart),u[1039]=Math.round(n.responseStart-n.requestStart),u[1040]=Math.round(n.responseEnd-n.responseStart)),n.secureConnectionStart>0&&(u[1676]=n.secureConnectionStart-n.connectStart);for(a in r)r.hasOwnProperty(a)&&(u[a]=r[a]);for(a in s)s.hasOwnProperty(a)&&(u[a]=s[a]);for(a in u)u[a]<0&&delete u[a];u[1042]=encodeURIComponent(navigator.userAgent),c+="/vars="+e(u),o&&(c+="/cdn="+o),c+="/slots="+(t("timing.exp")||"")+"/*",(new Image).src=i()+c}}function o(t,e){return window[t]?void e():void setTimeout(function(){o(t,e)},r)}if(!window.performance||!window.performance.getEntries)return void(home.resourcesTiming={setClckHost:function(){},wait:function(){},send:function(){}});var s="",r=1e3;home.resourcesTiming={setClckHost:function(t){s=t},send:function(t,e,i){try{var o=window.performance.getEntries("resources");if(o&&o.length)for(var s=0,r=o.length;r>s;s++)if(o[s].name.indexOf(t)>-1)return void n(o[s],e,i)}catch(a){return}},wait:function(t,e){o(t,e)}}}(),$(document).ready(function(){var t=home&&home.getData&&home.getData("nearestjs.data");t&&setTimeout(function(){var e="//wayback.archive-it.org/all/20180620162258/https://yastatic.net/"+t.file;$.getScript(e),home.resourcesTiming.wait("YaStaticRegion",function(){home.resourcesTiming.send(e,window.YaStaticRegion,{143:t.name})})},t.timeout)}),BEM.DOM.decl("media-service",{onSetMod:{js:function(){home.subscribeData(this._onData.bind(this)),this._initialLoadImages()}},_onData:function(){this._calcOverflow(this.domElem)},_calcOverflow:function(t){BEM.blocks["i-multiline-overflow"].calcOverflow(t,2,this.__self.getName())},_initialLoadImages:function(){this._loadImages()},_loadImages:function(t){(t||this.domElem).filter(":not(.media-service__image-processed)").each(function(e,i){var n=$(i);t&&n.addClass("media-service__image-processed");var o=n.find(".media-service__image[data-image]"),s=0,r=this;o.each(function(){var t=new Image,e=$(this),i=e.data("image");i=r._selectImageUrl(e,i),t.onload=function(){e.css("background-image",'url("'+i+'")'),e.addClass("media-service__image_loaded_yes"),++s===o.length&&r.setMod("images-loaded","yes")},t.src=i})}.bind(this))},_selectImageUrl:function(t,e){return e}},{live:!0}),function(){"use strict";var t="…",e=/(…|\.\.\.)$/;BEM.decl("i-multiline-overflow",{},{calcOverflow:function(t,e,i){if(!home.getData("i-multiline-overflow.nativeSupport")&&t.prop("offsetWidth")){var n=this;t.find(".i-multiline-overflow").add(t.filter(".i-multiline-overflow")).each(function(){var t=$(this),o=i&&n._cache[i];o||(o=n._calcProps(t),i&&(n._cache[i]=o)),t.text(n._insertEllipsis(t.text(),e,o))})}},_cache:{},_$measureElem:void 0,_appliedProps:{},_calcProps:function(t){var e=t.css("line-height"),i=t.css("font-size");return e="normal"===e?1.2*parseFloat(t.css("font-size")):parseFloat(e),{width:t.width(),lineHeight:e,fontFamily:t.css("font-family"),fontWeight:t.css("font-weight"),fontSize:i,wordWrap:t.css("word-wrap"),whiteSpace:t.css("white-space")}},_applyProps:function(t){this._$measureElem||(this._$measureElem=$('<div class="i-multiline-overflow__measure" aria-hidden="true"></div>').appendTo("body")),this._appliedProps.width===t.width&&this._appliedProps.fontSize===t.fontSize&&this._appliedProps.fontFamily===t.fontFamily&&this._appliedProps.lineHeight===t.lineHeight&&this._appliedProps.fontWeight===t.fontWeight&&this._appliedProps.wordWrap===t.wordWrap&&this._appliedProps.whiteSpace===t.whiteSpace||(this._appliedProps=t,this._$measureElem.css({width:t.width,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,lineHeight:t.lineHeight+"px",wordWrap:t.wordWrap,whiteSpace:t.whiteSpace}))},_calcLines:function(t,e){return this._$measureElem.text(t),this._$measureElem.height()/e.lineHeight},_insertEllipsis:function(i,n,o){var s,r,a=0,l=i.length;if(this._applyProps(o),this._calcLines(i,o)<=n+.5)return i;for(i=i.replace(e,"");l>a;)s=Math.ceil((a+l)/2),r=this._calcLines(i.substr(0,s)+t,o),r>n+.5?l=s-1:a=s;return this._trim(i.substr(0,a))+t},_trim:function(t){return t.replace(/[-–:;,.\s]+$/,"")}})}(),BEM.decl("i-multiline-overflow",{},{calcAutoOverflow:function(t){if(!home.getData("i-multiline-overflow.nativeSupport")){var e=this;t.find('[class *= "i-multiline-overflow_lines_"]:not(.i-multiline-overflow_overflowed_yes)').each(function(){var t=$(this),i=e._calcProps(t),n=t.attr("class"),o=n.match("i-multiline-overflow_lines_(\\d+)"),s=o&&o[1];s&&t.addClass("i-multiline-overflow_overflowed_yes").text(e._insertEllipsis(t.text(),Number(s),i))})}}}),$.extend($.easing,{easeOutQuint:function(t,e,i,n,o){return n*((e=e/o-1)*e*e*e*e+1)+i}}),BEM.DOM.decl("carousel",{getDefaultParams:function(){return{animationTime:900,offset:null}},onSetMod:{js:function(){this.setScrollMod(),this.bindEvents(),this._mediaGrid=this.findBlockOutside("media-grid"),this._mediaGrid&&this._mediaGrid.on("expanded",this.setScrollMod,this)},scroll:{left:function(){var t=this.elem("control","side","right");this.hasMod(t,"hovered","yes")&&this.setMod(t,"disable","yes")},right:function(){var t=this.elem("control","side","left");this.hasMod(t,"hovered","yes")&&this.setMod(t,"disable","yes")},both:function(){this.trigger("scrollModChange",{type:"both"})}}},onElemSetMod:{control:{hovered:{"":function(){this.delMod(this.elem("control"),"disable")}}}},bindEvents:function(){return this.bindTo("control","pointerclick",this._onControlClick).bindTo("control","dblclick",function(t){t.preventDefault()}).bindTo("wrap","scroll",home.throttle(this._onScroll.bind(this),50)),$(".i-ua_browser_touch").length||this.bindTo("control","mousemove",this._onMouseMove).bindTo("control","mouseleave",this._onMouseLeave),this.bindToWin("resize",home.throttle(this._onResize.bind(this),300)),this},destruct:function(){this.unbindFromWin("resize"),this._mediaGrid&&(this._mediaGrid.un("expanded",this.setScrollMod,this),this._mediaGrid=null),this.__base.apply(this,arguments)},_onResize:function(){this.setScrollMod()},_onMouseMove:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onMouseLeave:function(){this.delMod(this.elem("control"),"hovered")},_onControlClick:function(t){if(this.hasMod(this.elem("control"),"disable","yes"))return!1;var e=this.getMod(t.data.domElem,"side");this.canScrollTo(e)&&this.move(e)},_onScroll:function(){this.setScrollMod().checkEndOfList()},setScrollMod:function(){var t,e=this.elem("wrap").scrollLeft(),i=this.elem("wrap")[0].scrollWidth,n=this.elem("wrap").outerWidth();return t=0>=i-n?"":0>=e?"right":i>e+n?"both":"left",this.params.counter&&!this._scrollCounted&&e&&(home.stat.logPath("scroll",this.params.counter+".scroll"),this._scrollCounted=!0),this.setMod("scroll",t)},checkEndOfList:function(){if(!this.params.offset)return this;var t=this.elem("wrap"),e=t.scrollLeft(),i=t[0].scrollWidth,n=t.width();return e<=this.params.offset&&this.trigger("listOut","left"),e+n>i-this.params.offset&&this.trigger("listOut","right"),this},canScrollTo:function(t){var e=this.getMod("scroll");return"both"===e||e===t},move:function(t){var e=this.elem("wrap").scrollLeft(),i=e+this.getOffset(t);this.params.counter&&home.stat.logPath("scroll",this.params.counter+".swipe."+t),this.elem("wrap").stop().animate({scrollLeft:i},this.params.animationTime,"easeOutQuint",this.setScrollMod.bind(this))},getOffset:function(t){return("left"===t?-1:1)*this.params.step},scrollToStart:function(){this.elem("wrap").scrollLeft(0)},setItemsInList:function(t){this.getList().html(t)},appendItemsInList:function(t){this.getList().append(t)},prependItemsInList:function(t){this.getList().prepend(t)},getList:function(){return this.list||(this.list=this.elem("list"))},getContentWidth:function(){return this.getList().width()},getControlWidth:function(t){return this.elem("control","side",t).width()},getWrapperWidth:function(){return this.elem("wrap").width()},scrollLeft:function(t){return void 0!==t?this.elem("wrap").scrollLeft(t):this.elem("wrap").scrollLeft()}}),home.throttle=function(t,e,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:(new Date).getTime(),r=null,s=t.apply(n,o),r||(n=o=null)};return function(){var c=(new Date).getTime();a||i.leading!==!1||(a=c);var u=e-(c-a);return n=this,o=arguments,0>=u||u>e?(r&&(clearTimeout(r),r=null),a=c,s=t.apply(n,o),r||(n=o=null)):r||i.trailing===!1||(r=setTimeout(l,u)),s}},BEM.DOM.decl({name:"zen",baseBlock:"media-service"},{onSetMod:{js:function(){this._carousel=this.findBlockInside("list-wrapper","carousel"),this._lsKeys={ttl:this.__self._lsTTLPrefix+this.params.login,data:this.__self._lsDataPrefix+this.params.login},this._statRoot=null,this._sessionsCards=[],this._countOfLoads=0,this._packCounters={ice:0,personal:0},this._isCardsListVisible=!1,this._cachedData=null,this._storeTimer=null,this._processVisibleCardsThrottled=home.throttle(this._processVisibleCards.bind(this),this.__self._updateThrottle),this._logZenShowsDebounced=$.debounce(this._logZenShows,this.__self._zenShowDebounce,this),this._onScrollDebounced=$.debounce(this._onScroll,this.__self._zenShowDebounce,this),this._dataReady=$.Deferred(),this._mediaGrid=this.findBlockOutside("media-grid"),this.bindTo(this._carousel.elem("wrap"),"scroll",this._processVisibleCardsThrottled),this.channel("i-reposition-event").on("reposition",this._onScrollDebounced,this),this.bindToWin("resize",this._processVisibleCardsThrottled),this.bindTo("retry-button","click",this._onRetryClick),this.channel("sys").on("visibilitychange",this._onVisibilityChange,this),this._loadCards(),this._onScrollDebounced(null,0),this._mediaGrid.hasMod("collapsed","yes")&&this._mediaGrid.onFirst("expanded",function(){this._sessionsCards.length&&this.afterCurrentEvent(function(){this._showCards(),this._processVisibleCards()})},this)},visible:{yes:function(){home.stat.logDOMShow(this.domElem)}},recommend:function(t,e){this.elem("desc").html("ice"===e?home.l10n("media.zen.desc_ice"):home.l10n("media.zen.desc"))}},getPromoItems:function(){return this._dataReady},scrollTo:function(t){var e=this.elem("item").filter("[data-id="+t+"]"),i=e.prop("offsetLeft"),n=this.elem("list").width(),o=e.width();this.elem("wrap").stop().animate({scrollLeft:i-(n-o)/2},"slow")},_onScroll:function(t,e){var i=this.__self._cardFullHeight,n=this.__self._cardHeightForShow,o=e,s=this.elem("list").offset().top,r=s+i,a=o+window.innerHeight;this._isCardsListVisible=s>=o&&a>=r||o>=s&&a>=r&&(r-o)%i>n||s>=o&&r>=a&&(a-s)%i>n,this._logZenShows(this._getVisibleCards(this._getIndexesOfVisibleCards()))},_processVisibleCards:function(){if(!this._mediaGrid.hasMod("collapsed","yes")){var t=this._getIndexesOfVisibleCards();this._loadImagesForVisibleCards(t),this._logZenShowsDebounced(this._getVisibleCards(t))}},_getIndexesOfVisibleCards:function(){var t=this._carousel.scrollLeft(),e=this._carousel.getContentWidth(),i=this.__self._cardFullWidth,n=t+e,o=i-t%i>this.__self._cardWidthForShow+20,s=n%i>this.__self._cardWidthForShow,r=t/i,a=n/i,l=o?Math.floor(r):Math.ceil(r),c=s?Math.ceil(a):Math.floor(a);return[l,c]},_getVisibleCards:function(t){return this._sessionsCards.slice(t[0],t[1])},_loadImagesForVisibleCards:function(t){this._loadImages(this.findElem("item").slice(t[0],t[1]+1))},_listenListOutOn:function(){this._countOfLoads<this.__self._maxCountOfLoads&&this._carousel.on("listOut",this._onListOut,this)},_listenListOutOff:function(){this._carousel.un("listOut",this._onListOut,this)},_onListOut:function(t,e){"right"===e&&(this._listenListOutOff(),this._loadCardsByAjax())},_loadCards:function(){var t=this._loadCardsFromLS();t?(this._onSuccess(t.data),t.forceAjax?this._loadCardsByAjax():this.hasMod("recommend","ice")?this._dataReady.reject():this._dataReady.resolve(this._sessionsCards)):this._loadCardsByAjax()},_loadCardsByAjax:function(){var t=this;return this._countOfLoads||this.setMod(this.elem("loader"),"state","loading"),$.ajax({url:this.params.zenUrl+(this._countOfLoads?"":"&cache=1"),xhrFields:{withCredentials:!0},context:this,success:this._onSuccess,error:this._onError,timeout:this.__self._timeoutZen}).then(function(){this.hasMod("recommend","ice")?t._dataReady.reject():t._dataReady.resolve(t._sessionsCards)}.bind(this))},_loadCardsFromLS:function(){var t,e,i=home.localStorage.getItem(this._lsKeys.ttl),n=(new Date).getTime();try{if(t=JSON.parse(home.localStorage.getItem(this._lsKeys.data)),!t.storeTs||t.storeTs<n)return void this._cleanLS();if(t&&t.items&&t.items.length)return e={data:t},(t.items.length<=this.__self._minCountOfCards||n>i)&&(e.forceAjax=!0),e}catch(o){}this._cleanLS()},_cleanLS:function(){[this._lsKeys.ttl,this._lsKeys.data].forEach(home.localStorage.removeItem)},_onSuccess:function(t){return this._checkData(t)?(this.setMod("recommend",t.context.ice_start?"ice":"personal"),this._countOfLoads+=1,this._prepareData(t),this._recommendType=t.context.ice_start?"ice":"personal",this._statRoot="mediafooter.zen."+this._recommendType+".pack",this._packCounters[this._recommendType]+=1,t.items=this._moveDirectCards(t.items),this._appendCards(t.items),this._cachedData=t,this._setStoreTimeout(this._getStoreTTL()),this._sessionsCards=this._sessionsCards.concat(t.items),this._processVisibleCards(),this._listenListOutOn(),void this._createCache(t.ttlTs,t)):void this._onError()},_onError:function(t,e){e&&this._logEvent("Request failed: "+e+(this._countOfLoads?"":" - empty feed")),this._countOfLoads?this.delMod(this.elem("loader"),"state"):(this.setMod(this.elem("loader"),"state","retry"),home.stat.logDOMShow(this.domElem)),this._dataReady.reject()},_onRetryClick:function(){this._loadCardsByAjax()},_prepareData:function(t){if(!t.prepared){var e=t.stats.bulk,i=1e3*(t.ttl||this.__self._defaultZenTTL),n=1e3*(t.store_ttl||this.__self._defaultZenStoreTTL);t.ttlTs=(new Date).getTime()+i,t.storeTs=(new Date).getTime()+n,t.items.forEach(function(t){return t.id=Number(Math.random().toString().substr(2,8)),t.bulk_url=e,t},this),t.prepared=1}},_createCache:function(t,e){e.ls||(e.ls=1,home.localStorage.setItem(this._lsKeys.ttl,t),home.localStorage.setItem(this._lsKeys.data,JSON.stringify(e)))},_updateCache:function(t){home.localStorage.setItem(this._lsKeys.data,JSON.stringify(t))},_cleanCards:function(){this._countOfLoads=0,this.elem("list").html(""),this._carousel.setScrollMod(),this._cachedData=null,this._sessionsCards=[],this._packCounters={ice:0,personal:0},clearTimeout(this._storeTimer),this._storeTimer=null,this._cleanLS()},_getStoreTTL:function(){return this._cachedData?this._cachedData.storeTs-(new Date).getTime():0},_setStoreTimeout:function(t){t>0&&(clearTimeout(this._storeTimer),this._storeTimer=setTimeout(this._handleStoredCards.bind(this),t))},_handleStoredCards:function(){if(!this._cachedData)return void this._loadCardsByAjax();var t=this._getStoreTTL();t>0?this._setStoreTimeout(t):(this._cleanCards(),this._loadCardsByAjax())},_onVisibilityChange:function(t,e){e.hidden?(clearTimeout(this._storeTimer),this._storeTimer=null):this._handleStoredCards()},_onClick:function(t){var e=t.data.domElem.parent(".zen__item"),i=e.data("id"),n=this._selectCardById(this._sessionsCards,i);n&&"ad"===n.data.type?this._logZenEvent(n.data.bulk_url,{event:n.data.items[0].stat_events.click,data:n.data.items[0].bulk_params}):n&&this._logZenEvent(n.data.bulk_url,{event:n.data.stat_events.click,data:n.data.bulk_params})},_onLikeClick:function(t){var e=t.data.domElem,i=e.parent(".zen__item"),n=i.data("id"),o=this._selectCardById(this._sessionsCards,n),s=Boolean(o.data.liked);o&&(o.data.liked=!s,this._logZenEvent(o.data.bulk_url,{event:o.data.stat_events[o.data.liked?"feedback:more":"feedback:cancel_more"],data:o.data.bulk_params})),this.toggleMod(e,"liked","yes"),this.setMod(e,"scaled","yes"),setTimeout(function(){this.delMod(e,"scaled")}.bind(this),this.__self._scaleDuration)},_onDislikeClick:function(t){var e,i=t.data.domElem.parent(".zen__item"),n=i.data("id"),o=this._selectCardById(this._sessionsCards,n);o&&(this._sessionsCards.splice(o.index,1),e=[{event:o.data.stat_events["feedback:less"],data:o.data.bulk_params}],o.data.liked&&e.push({event:o.data.stat_events["feedback:cancel_more"],data:o.data.bulk_params}),this._logZenEvent(o.data.bulk_url,e),this._sessionsCards.length<=this.__self._minCountOfCards&&this._loadCardsByAjax()),this.setMod(i,"disliked","yes"),this._removeDislikedCards()},_selectCardById:function(t,e){for(var i=0;i<t.length;i+=1)if(t[i].id===e)return{data:t[i],index:i}},_removeDislikedCards:function(){clearTimeout(this._timerGC),this._timerGC=setTimeout(function(){this.findElem("item","disliked","yes").remove(),this._processVisibleCards()}.bind(this),this.__self._timeoutDislikeGC)},_moveDirectCards:function(t){var e,i,n,o=[],s=4,r=0,a=[];for(e=0,i=t.length;i>e;e++)"ad"===t[e].type&&o.push(e);if(!o.length||o[0]>=s)return t;for(n=s-o[0],e=0,i=t.length;i>e;e++)"ad"!==t[e].type&&a.push(t[e]),r<o.length&&e===o[r]+n&&(a.push(t[o[r]]),r++);return a},_renderCard:function(t){if("ad"===t.type){var e=t.items[0];return e.id=t.id,e&&"direct"===e.provider?this._renderCardDirect(e):""}var i,n,o="#FFFFFF"===t.text_color?"black":"white",s=t.background_color,r=this.__self._getTransparentPairColor(s),a=t.logo&&("black"===o?t.logo.w:t.logo.b),l={type:t.type,theme:o},c={title:home.ltgtFilter(t.title),mods:{}},u={mods:{}},h={},d={},p=this._packCounters[this._recommendType],f=this._getLongestWordLength(c.title);return a?(d.style="background-image: url("+a+")",u.mods.logo="yes"):u.title=t.domain_title,c.title.length<43&&13>f?(c.mix="i-multiline-overflow_lines_4",c.mods.size="l"):c.title.length<76&&17>f?(c.mix="i-multiline-overflow_lines_5",c.mods.size="m"):(c.mix="i-multiline-overflow_lines_6",c.mods.size="s"),t.image&&(h["data-image"]=t.image[this.__self._isRetina?"2x":"1x"]),t.stat_events["feedback:more"]&&(i=home.view("zen__item-control",{mix:"zen__item-like",attrs:{"data-statlog":this._statRoot+".like."+p,title:home.l10n("media.zen.like")}})),t.stat_events["feedback:less"]&&(n=home.view("zen__item-control",{mix:"zen__item-dislike",attrs:{"data-statlog":this._statRoot+".dislike."+p,title:home.l10n("media.zen.dislike")
}})),(i||n)&&(u.mods.fadeout="yes"),home.view("zen__item",{id:t.id,title:c,text:"text"===t.type?home.ltgtFilter(t.text):"",mods:l,mix:"media-service__item media-service__shadow",attrs:{rel:t.feed_link?"":"noreferrer",href:t.feed_link||t.link,target:"_blank","data-statlog":this._statRoot+".card."+p,style:["color:"+t.text_color,"background-color:"+s].join(";")},from_color:r,to_color:s,imageAttrs:h,domain:u,domainAttrs:d,like:i,dislike:n})},_renderCardDirect:function(t){var e=this._packCounters[this._recommendType],i={type:"small",footer:"none"},n={},o={},s={mix:"i-multiline-overflow_lines_5",title:home.ltgtFilter(t.content.title),mods:{size:"m"}};return t.content.big_image?(i.type="big",n["data-image"]=t.content.big_image[0]):t.content.small_image&&(i.type="small",o["data-image"]=t.content.small_image[0],o.style=["width:"+t.content.small_image[1]+"px","height:"+t.content.small_image[2]+"px"].join(";")),t.content.warning&&t.content.age?i.footer="both":t.content.warning?i.footer="warning":t.content.age&&(i.footer="age"),home.view("zen__direct",{id:t.id,label:{text:home.l10n("media.direct.title"),href:this.params.directUrl},title:s,domain:t.content.domain,text:home.ltgtFilter(t.content.body),mods:i,attrs:{href:t.content.url,rel:"noopener",target:"_blank","data-statlog-redir":0,"data-statlog":this._statRoot+".direct."+e},from_color:"rgba(255,255,255, 0)",to_color:"rgba(255,255,255, 1)",bigImageAttrs:n,smallImage:o["data-image"]?home.view("zen__direct-type_small-img",{smallImageAttrs:o}):"",warning:t.content.warning,age:t.content.age})},_getLongestWordLength:function(t){return Math.max.apply(null,t.split(" ").map(function(t){return t.length}))},_appendCards:function(t){var e=t.map(this._renderCard,this).join("");this.elem("list").append(e),home.subscribeData(this._showCards.bind(this))},_calcOverflow:function(){var t=this.__self._textContentHeight,e=this.__self._textLineHeight;this.findElem("item","type","text").each(function(){var i=$(this),n=i.find(".zen__item-title").height(),o=Math.floor((t-n)/e);i.find(".zen__item-text").addClass("i-multiline-overflow_lines_"+o)}),BEM.blocks["i-multiline-overflow"].calcAutoOverflow(this.elem("list"))},_showCards:function(){this._mediaGrid.hasMod("collapsed","yes")||(this._calcOverflow(),this.delMod(this.elem("loader"),"state"),this.setMod(this.elem("list"),"visibility","visible"),this._carousel.setScrollMod(),this.hasMod("visible","yes")&&home.stat.logDOMShow(this.domElem))},_checkData:function(t){var e;return t&&t.items&&t.items.length&&t.stats&&t.stats.bulk||(t?t.items?t.items.length?t.stats&&t.stats.bulk||(e="emptystats"):e="emptyitems":e="noitems":e="nodata",!e)?!0:(this._cleanLS(),this._logEvent("Data error: "+e+(this._countOfLoads?"":" - empty feed")),!1)},_filterShowedCards:function(t){return t.filter(function(t){return"ad"===t.type&&t.items[0]?t.items[0].stat_events.show:t.stat_events.show})},_logEvent:function(t){this.params.logDisabled||home.error.logError({block:"zen",message:t})},_logZenEvent:function(t,e){$.ajax({method:"POST",url:t,timeout:this.__self._timeoutZen,xhrFields:{withCredentials:!0},data:JSON.stringify({stats:Array.isArray(e)?e:[e]})})},_logZenShows:function(t){if(this._isCardsListVisible){var e=!1,i=t.reduce(function(t,e){if(t[e.bulk_url]||(t[e.bulk_url]=[]),"ad"===e.type){var i=e.items?e.items[0]:null;i&&i.stat_events&&i.stat_events.show&&(t[e.bulk_url].push({event:i.stat_events.show,data:i.bulk_params}),delete i.stat_events.show,(new Image).src=i.content.linkHead+i.content.linkTail)}else e.stat_events&&e.stat_events.show&&(t[e.bulk_url].push({event:e.stat_events.show,data:e.bulk_params}),delete e.stat_events.show);return t},{});Object.keys(i).forEach(function(t){i[t].length&&(e=!0,this._logZenEvent(t,i[t]))},this),e&&(this._cachedData.items=this._filterShowedCards(this._cachedData.items),this._updateCache(this._cachedData))}}},{live:function(){return this.__base.apply(this,arguments),this.liveBindKey("item-link","space enter",function(t){this._onClick(t)}),this.liveBindTo("item-link","click",function(t){this._onClick(t)}),this.liveBindKey("item-like","space enter",function(t){this._onLikeClick(t)}),this.liveBindTo("item-like","click",function(t){this._onLikeClick(t)}),this.liveBindKey("item-dislike","space enter",function(t){this._onDislikeClick(t)}),this.liveBindTo("item-dislike","click",function(t){this._onDislikeClick(t)}),!0},_getTransparentPairColor:function(t){var e=[t.slice(1,3),t.slice(3,5),t.slice(5,7)].map(function(t){return parseInt(t,16)}).join(",");return"rgba("+e+", 0)"},_clearLS:function(){[this._lsTTLPrefix,this._lsDataPrefix].forEach(home.localStorage.removeItem)},_isRetina:"undefined"!=typeof detector&&detector.isRetina(),_minCountOfCards:6,_maxCountOfLoads:3,_cardFullHeight:280,_cardInnerWidth:204,_cardFullWidth:224,_cardWidthForShow:204*.8,_cardHeightForShow:224,_textLineHeight:17,_textContentHeight:195,_updateThrottle:200,_timeoutDislikeGC:300,_scaleDuration:260,_lsTTLPrefix:"home:zen-desktop-ttl-",_lsDataPrefix:"home:zen-desktop-data-",_zenShowDebounce:600,_defaultZenTTL:3600,_defaultZenStoreTTL:432e3,_timeoutZen:3e4}),function(){var t=BEM.channel("i-reposition-event");BEM.channel("i-scroll-event").on("scroll",function(e,i){t.trigger("reposition",i)}),BEM.decl("i-reposition-event",{},{trigger:function(){t.trigger("reposition",$(window).scrollTop())}})}(),function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(i){}BEM.DOM.decl("i-ua",{},{passiveEvents:t})}(),function(){"use strict";function t(){var t=$(window).scrollTop();i.trigger("scroll",t)}var e=100,i=BEM.channel("i-scroll-event"),n=home.throttle(t,e),o=BEM.blocks["i-ua"].passiveEvents?{passive:!0}:!1,s=function(t){"addEventListener"in window?window.addEventListener(t,n,o):window.attachEvent("on"+t,n)};s("scroll"),s("resize"),s("orientationchange")}(),BEM.DOM.declMix("mix-tabber",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._keys=this._getKeys(),this._data=this._getInitData(),this._selectedKey=this._defaultKey=this._getDefaultKey(),this._panels={},this.elem("panel").toArray().forEach(function(t){var e=$(t),i=e.data("key");this._panels[i]=e},this),this._$panel=this._panels[this._defaultKey]}}},_getKeys:function(){return this.params.keys},_getDefaultKey:function(){return this.params.selectedKey},_getInitData:function(){return this.params.data||{}},_selectTab:function(t){this._selectedKey!==t&&this._changeTab.apply(this,arguments)},_changeTab:function(t){var e=!this._panels[t],i=this._panels[t]||(this._panels[t]=this._createPanel(t));this._togglePanel(this._selectedKey,this._$panel,!1),this._togglePanel(t,i,!0),this._$panel=i,this._selectedKey=t,this._afterPanelChange(t,i,!e)},_mapKeyToIndex:function(t){return this._keys.indexOf(t)},_createPanel:function(t){var e=$(home.view("mix-tabber__panel",{block:this.__self.getName(),id:this._uniqId,key:t,attrs:this._getPanelAttrs(t)}));return this._renderPanelInner(t,e,this._data[t]),e},_getPanelAttrs:function(){return{}},_renderPanelInner:function(t,e,i){e.append(this._getPanelHTML(t,i))},_afterPanelChange:function(t,e,i){i||this._onPanelDraw(t,e),this._onPanelChange(t,e)},_onPanelDraw:function(t,e){BEM.DOM.init(e),home.stat.logDOMShow(e)},_onPanelChange:function(){},_getPanelHTML:function(){return""},_togglePanel:function(t,e,i){e.attr("aria-hidden",i?"false":"true"),this._toggleMountPanel(t,e,i)},_toggleMountPanel:function(t,e,i){i?e.parent().length?e.css("display",""):this.elem("panels").append(e):e.css("display","none")}}),BEM.DOM.decl("arrowed-list",{onSetMod:{js:{inited:function(){this._prevLeft=0,this._moveTo=-1;var t=home.throttle(this.onScroll.bind(this),100);this.bindTo("content","scroll",t),this.bindToWin("resize.arrowedlist",t),this.bindToWin("orientationchange.arrowedlist",t)},"":function(){this.unbindFrom("content","scroll"),this.unbindFromWin("resize.arrowedlist"),this.unbindFromWin("orientationchange.arrowedlist")}}},move:function(t,e){var i=this.elem("content");this.stopAnimation(),this._moveTo=t,e?(i.scrollLeft(t),this._afterMove()):(this.animate(t,{duration:this.params.duration||400,complete:this._afterMove.bind(this)}),this._moving=!0)},stopAnimation:function(){this.elem("content").stop()},animate:function(t,e){var i=this.elem("content");i.animate({scrollLeft:t},e)},update:function(){var t=this.elem("content");this._contentWidth=t.width(),this._containerWidth=t[0].offsetWidth;var e=this._containerWidth-this._contentWidth;this._scrollWidth=t[0].scrollWidth+e,this._scroll=t.scrollLeft();var i=this.elem("content").children().toArray(),n=0,o=i.map(function(t,e){return 0===e&&(n=t.offsetLeft),t.offsetLeft-n});this._stops=this._filterStops(o)},_filterStops:function(t){var e=this._scrollWidth-this._containerWidth;return t=t.filter(function(t){return t>=0&&e>t},this),t.push(e),t},moveLeft:function(){this.update();for(var t=-1!==this._moveTo?this._moveTo:this._scroll,e=this.params.moveRatio*this._containerWidth,i=this._stops.length-1;i>=0&&this._stops[i]>=t-e-5;)i--;0>i&&t>this._stops[0]+5&&(i=0),i>=0&&this.move(this._stops[i])},moveRight:function(){this.update();for(var t=-1!==this._moveTo?this._moveTo:this._scroll,e=this.params.moveRatio*this._containerWidth,i=this._stops.length,n=0;i>n&&this._stops[n]<=t+e+5;)n++;n===i&&t<this._stops[i-1]-5&&n--,i>n&&this.move(this._stops[n])},seek:function(t,e){var i=t.closest(".arrowed-list__content > *"),n=this.elem("content").children().toArray();i[0]&&this.move(i[0].offsetLeft-n[0].offsetLeft,e)},getVisibleItems:function(t){var e=this.elem("content").children().toArray();return void 0===t&&(t=this._scroll),e.filter(function(e){var i=e.offsetLeft,n=$(e).width();return i<t+.8*this._containerWidth&&i+n>t+.2*this._containerWidth},this)},onScroll:function(){var t;this._moving||(this.toggleArrows(),t=this.elem("content").scrollLeft(),Math.abs(this._prevLeft-t)>=(this.params.valuableScroll||0)&&(this.channel("arrow-list").trigger("scroll"+(this.params.blockid?"."+this.params.blockid:"")),this._prevLeft=t))},toggleArrows:function(){this.update(),this.toggleMod(this.elem("left"),"hidden","yes",this._scroll<=4);for(var t=this.elem("content").children().toArray(),e=0,i=t.length;i>e&&t[e].offsetLeft+$(t[e]).width()<=this._scroll+this._containerWidth+5;)e++;this.toggleMod(this.elem("right"),"hidden","yes",!t[e])},_afterMove:function(){this._prevLeft=this.elem("content").scrollLeft(),this.channel("arrow-list").trigger("move"+(this.params.blockid?"."+this.params.blockid:"")),this._moving=!1,this._moveTo=-1,this.toggleArrows();var t=this.getVisibleItems();t.length&&this.trigger("visibleItems",t)},getDefaultParams:function(){return{moveRatio:.33}}},{live:function(){this.liveBindTo("left","click",function(){this.moveLeft()}),this.liveBindTo("right","click",function(){this.moveRight()}),this.liveBindKey("left","space enter",function(t){this.moveLeft(),t.preventDefault()}),this.liveBindKey("right","space enter",function(t){this.moveRight(),t.preventDefault()})}}),BEM.DOM.decl({block:"arrowed-list",modName:"aligned",modVal:"yes"},{onSetMod:{js:{inited:function(){return this.params.nativeSnap&&"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("-webkit-scroll-snap-type","mandatory")||CSS.supports("scroll-snap-type","mandatory"))?(this.delMod("aligned"),void this.__base.apply(this,arguments)):(this.bindTo("content","touchstart",this._onTouchstart,this),this.bindTo("content","touchend",this._onTouchEnd,this),this._isScrolling=!1,void this.__base.apply(this,arguments))}}},_onTouchstart:function(){this._touchscroll=!0,clearTimeout(this._alignTimeout),this.stopAnimation()},_onTouchEnd:function(){this._touchscroll=!1,clearTimeout(this._alignTimeout),this._doAlign()},align:function(){this.update(),this._doAlign()||this._afterMove()},_doAlign:function(){clearTimeout(this._alignTimeout),this._isScrolling=!1;var t,e=-1;return(this._stops||[]).some(function(i){var n=Math.abs(i-this._scroll);if(-1===e||e>n)e=n,t=i;else if(n>e)return!0},this),Math.abs(t-this._scroll)>1?(this.move(t),!0):void 0},stopAnimation:function(){this._animationId=-1},animate:function(t,e){function i(){if(h===n._animationId){if(Math.abs(o.scrollLeft()-r)>1)return void l();var e=(new Date-u)/a;if(e>=1)o.scrollLeft(t),l();else{var d=3*e*e-2*e*e*e;r=parseInt(s+c*d,10),o.scrollLeft(r),requestAnimationFrame(i)}}}var n=this,o=n.elem("content"),s=o.scrollLeft(),r=s,a=e.duration,l=e.complete,c=t-s,u=+new Date,h=n._animationId=Math.random();i()},move:function(){clearTimeout(this._alignTimeout),this.__base.apply(this,arguments)},onScroll:function(){this._isScrolling=!0,clearTimeout(this._alignTimeout),this._moving||this._touchscroll||(this._alignTimeout=setTimeout(this._doAlign.bind(this),200)),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"arrowed-list",modName:"theme",modVal:"football"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["i-multiline-overflow"].calcOverflow(this.domElem,2,"football-vod"),this._itemsContainer=this.elem("content"),this._items=this._itemsContainer.children(),this._itemWidth=this._items.length?this._items.eq(0).outerWidth(!0):0,this._visibleItems=0,this._items.length>0&&this._items[0].querySelector("[data-image]")&&(this._grid=$(".media-grid").bem("media-grid"),this._grid.hasMod("collapsed","yes")||this._onGridExpand(),this._grid.on("collapsed",this._onGridCollapse,this),this._grid.on("expanded",this._onGridExpand,this),this._imageScrollThrottle=home.throttle(function(){this._loadVisibleImages()}.bind(this),this.__self._scrollLoadImageThrottle),this._itemsContainer.on("scroll",this._imageScrollThrottle))}}},_onScroll:function(t,e){var i=window.innerHeight+e,n=this._itemsContainer.offset().top;i>n&&(this._loadVisibleImages(),this.channel("i-reposition-event").un("reposition",this._onScroll,this))},_loadVisibleImages:function(){var t=this._itemsContainer.width()+this._itemsContainer.scrollLeft(),e=Math.round(t/this._itemWidth);this._loadImages(this._items.slice(this._visibleVodsCount,e)),this._visibleVodsCount=e,this._visibleVodsCount===this._items.length&&this._itemsContainer.off("scroll",this._imageScrollThrottle)},_loadImages:function(t){t.map(function(){Array.prototype.forEach.call(this.querySelectorAll("[data-image]"),function(t){t.style.backgroundImage='url("'+t.getAttribute("data-image")+'")'})})},_onGridCollapse:function(){this.channel("i-reposition-event").un("reposition",this._onScroll,this)},_onGridExpand:function(){this.channel("i-reposition-event").on("reposition",this._onScroll,this),this._onScroll(null,BEM.DOM.win.scrollTop())}},{_scrollLoadImageThrottle:200}),BEM.DOM.declMix("mix-tabber-labels",{_getKeys:function(){return this.elem("tab").toArray().map(function(t){return $(t).data("key")})},_getDefaultKey:function(){return this.elem("tab","selected","yes").data("key")},_changeTab:function(t,e){this.__base.apply(this,arguments);var i=this.elem("tab","selected","yes"),n=this.elem("tab").filter('[data-key="'+t+'"]');this._toggleLabelSelection(i,!1),this._toggleLabelSelection(n,!0),e&&n.focus()},_toggleLabelSelection:function(t,e){t.attr({tabindex:e?0:-1,"aria-selected":e?"true":"false","aria-controls":e?this._uniqId+"_panel_"+this._selectedKey:null}),this.toggleMod(t,"selected","yes","no",e),t.toggleClass("mix-tabber__tab_selected_yes mix-tabber__tab_selected_no")},_getPanelAttrs:function(t){return{"aria-labelledby":this._uniqId+"_tab_"+t}}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("tab","pointerclick",function(t){return this._selectTab(t.data.domElem.data("key")),!1})}}),BEM.DOM.declMix("mix-tabber-labels-keyboard",{_selectTabByKeyboard:function(t,e){var i,n=this.elem("tab"),o=this._mapKeyToIndex(this._selectedKey);"relative"===t?o+=e:"absolute"===t&&(o=e),0>o?o=n.length-1:o>=n.length&&(o=0),i=n.eq(o),this._selectTab(i.data("key"),!0),home.stat.logPath("click",i.attr(home.stat.attr))}},{live:function(){this.__base.apply(this,arguments),this.liveBindKey("tab","left right",function(t){return this._selectTabByKeyboard("relative",t.which===BEM.KEYS.LEFT?-1:1),!1}),this.liveBindKey("tab","home end",function(t){return this._selectTabByKeyboard("absolute",t.which===BEM.KEYS.HOME?0:-1),!1})}}),BEM.DOM.declMix("mix-tabber-loader",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._dataPromises={}}}},_renderPanelInner:function(t,e,i){i?this.__base.apply(this,arguments):(e.append(this._renderLoader()).css("min-height",this._$panel.height()),this._loadAndDrawData(t,e))},_renderLoader:function(){return'<div class="'+this.__self.getName()+'__loader loader"></div>'},_afterPanelChange:function(t,e,i){this._data[t]&&this.__base(t,e,i)},_loadAndDrawData:function(t,e){var i=function(i){if(t===this._selectedKey){var n;try{i&&(n=this._getPanelHTML(t,this._data[t]))}catch(o){home.error.logError({block:this.__self.getName(),message:o,meta:{key:t},sourceType:"render"})}n||(n=this._getPanelRetry(t)),e.html(n),this._onPanelReplace(t,e),i?(this._onPanelDraw(t,e),this._onPanelChange(t,e)):home.stat.logDOMShow(e)}};return this._loadDataWrapped(t).then(i.bind(this,!0),i.bind(this,!1))},_onPanelReplace:function(t,e){e.css("min-height","")},_loadDataWrapped:function(t,e){return e=e||{},this._dataPromises[t]||this._data[t]&&!e.forceReload?this._dataPromises[t]||Promise.resolve(this._data[t]):(this._dataPromises[t]=this._loadData(t).then(function(e){this._data[t]=e}.bind(this),function(e){throw this._dataPromises[t]=null,home.error.logError({block:this.__self.getName(),message:e,meta:{key:t},sourceType:"network"}),e}.bind(this)),this._dataPromises[t])},_loadData:function(){return Promise.reject("Not implemented")},_getPanelRetry:function(t){return home.view("mix-tabber-loader__retry",{theme:this.params.retryButtonTheme,key:t,block:this.__self.getName()})},_onRetryClick:function(t){var e=this._panels[t];e&&(e.html(this._renderLoader()),this._loadAndDrawData(t,e))}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("retry-button","pointerclick",function(t){return this._onRetryClick(t.data.domElem.data("key")),!1})}}),BEM.DOM.declMix("mix-tabber-loader-keyboard",{},{live:function(){this.__base.apply(this,arguments),this.liveBindKey("retry-button","space enter",function(){this._onRetryClick()})}}),BEM.DOM.declMix("mix-tabber-labels-preloader",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("tab","mouseover mouseout",function(t){var e=t.data.domElem.data("key");String(e)!==String(this._selectedKey)&&(clearTimeout(this._tabPreloadTimer),"mouseover"!==t.type||this._panels[e]||(this._tabPreloadTimer=setTimeout(function(){this._loadDataWrapped(e)["catch"](function(){})}.bind(this),200)))})}}),BEM.DOM.declMix("mix-tabber-slide",{_changeTab:function(){var t,e=this._$panel.outerHeight();this.__base.apply(this,arguments),t=this._$panel.outerHeight(),this._animateHeight(e,t)},_onPanelReplace:function(){var t,e=this._$panel.outerHeight();this.__base.apply(this,arguments),t=this._$panel.outerHeight(),this._animateHeight(e,t)},_animateHeight:function(t,e){var i=this.elem("panels");i.addClass("mix-tabber-slide__panels").height(t),setTimeout(function(){i.height(e).onceAnimationEnd("animation",350,function(){i.height(""),BEM.blocks["i-reposition-event"].trigger()})},50)}}),$.fn.onceAnimationEnd=function(t,e,i){function n(){clearTimeout(o),i=null,r.off(s)}var o,s="animation"===t?"webkitAnimationEnd animationend":"webkitTransitionEnd transitionend",r=this;this.on(s,function(t){r.is(t.target)&&i&&(i(r),n())}),o=setTimeout(function(){i&&(i(r),n())},e+50)},$(function(){home.getData("football.hover_disable")||$(".i-ua_browser_desktop").length&&"undefined"!=typeof CSS&&CSS.supports&&CSS.supports("background","radial-gradient(circle,#fff,#000)")&&CSS.supports("pointer-events","none")&&$("body").on("mouseenter.football-hover",".football-hover",function(){var t=$('<div class="football-hover__bg"></div>'),e=$(this),i=e.hasClass("football-hover_complex-pos"),n=this;i&&(n=this.offsetParent,t.css({left:this.offsetLeft,top:this.offsetTop,width:this.offsetWidth,height:this.offsetHeight}));var o=e.offset();t.appendTo(n),e.on("mousemove.football-hover",function(e){t.css({background:"radial-gradient(circle at "+(e.pageX-o.left)+"px "+(e.pageY-o.top)+"px, rgba(255,255,255, 0.15), transparent)",opacity:"1"})})}).on("mouseleave.football-hover",".football-hover",function(){var t=$(".football-hover__bg");$(this).off("mousemove.football-hover"),t.css("opacity","").onceAnimationEnd("transition",150,function(){t.remove()})})}),BEM.DOM.decl("sup-button",{onSetMod:{js:{inited:function(){this._updateSubscribed().then(this._initializeButton.bind(this),this._initializeButton.bind(this)),this._manager().on("updateTags",this._onUpdateTags,this)}}},destruct:function(){this._manager().un("updateTags",this._onUpdateTags,this),this.__base.apply(this,arguments)},_manager:function(){return BEM.blocks["sup-manager"].getInstance()},_onUpdateTags:function(t,e){for(var i=0;i<e.length;++i)for(var n=0;n<this.params.tags.length;++n){var o=e[i],s=this.params.tags[n];if(o.name===s.name&&o.value===s.value){this._updateSubscribed();break}}},_updateSubscribed:function(){return this._manager().getTags(this.params.tags).then(function(t){var e=t.every(function(t){return t});this.setMod("subscribed",e?"yes":"no")}.bind(this))},_initializeButton:function(){this._isDestructing||this.bindTo("pointerclick",this._onButtonClick)},_onButtonClick:function(){return"denied"===this._manager().getPermission()?(home.stat.logPath("click","sup.button.denied"),this._showError()):this._changeSubscriptionStatus(),!1},_finish:function(){this.delMod("progress")},_changeSubscriptionStatus:function(){return"yes"===this.getMod("subscribed")?(this.setMod("progress","yes"),this._manager().unsubscribe(this.params.tags).then(this._finish.bind(this),this._finish.bind(this))):(this.setMod("progress","hover"),this._showNotice().then(function(t){return t?(this.setMod("progress","yes"),this._manager().subscribe(this.params.tags)):void 0}.bind(this))["catch"](function(t){throw this._showError(),home.error.logError({block:"sup-button"},t),t}.bind(this)).then(this._finish.bind(this),this._finish.bind(this)))},_showNotice:function(){return new Promise(function(t,e){var i,n=this._manager().getPermission();if("granted"===n){if(this.__self._shown())return t(!0);i=this._notice("popup")}else{if("default"!==n)return e(new Error("Unknown permission: "+n));i=this._notice("default")}var o=function(e,i){var n=this._manager().getPermission();i?(this.__self._shown(i),t("granted"===n?!0:this._requestPermission())):t()}.bind(this);i.onFirst("close",o).open("prompt")}.bind(this))},_requestPermission:function(){var t=this._notice("default").open("wait");return this._manager().requestPermission().then(function(e){return t.close(),"granted"===e.permission?!0:void(e.delay<300&&this._showError())}.bind(this))["catch"](function(e){throw t.close(),e})},_notice:function(t){return BEM.DOM.blocks["sup-notice"].getInstance(t)},_showError:function(){this._notice("default").open("error")}},{STORAGE_NAME:"notifications",_shownVal:null,_shown:function(t){return void 0!==t?(t&&this._setSessionParameter(this.STORAGE_NAME,""),this._shownVal=t,t):null!==this._shownVal?this._shownVal:(this._shownVal=this._hasSessionParameter(this.STORAGE_NAME),this._shownVal)},_setSessionParameter:function(t,e){try{window.sessionStorage.setItem(t,e)}catch(i){}},_hasSessionParameter:function(t){try{return window.sessionStorage.hasOwnProperty(t)}catch(e){return!1}}}),BEM.DOM.decl("sup-button",{_notice:function(t){var e=this.__base.apply(this,arguments);return"popup"===t&&e.setOwner(this.domElem),e}}),BEM.DOM.decl("sup-notice",{onSetMod:{js:{inited:function(){var t=this.close.bind(this,!1),e=this.close.bind(this,!0);this.findBlockOn("cancel","button2").on("click",function(){home.stat.logPath("click","sup.notice_"+this.getMod("type")+"."+(this.getMod("mode")||"default")+".cancel"),this.afterCurrentEvent(t)},this),this.findBlockOn("ok","button2").on("click",function(){home.stat.logPath("click","sup.notice_"+this.getMod("type")+"."+(this.getMod("mode")||"default")+".ok"),this.afterCurrentEvent(e)},this)}}},open:function(){return this.delMod("hidden"),home.stat.logPath("show","sup.notice_"+this.getMod("type")+"."+(this.getMod("mode")||"default")),this},close:function(t){return this.hasMod("hidden","yes")||(this.setMod("hidden","yes"),this.trigger("close",t)),this},_setTitle:function(t){return this.elem("title").html(t),this},_setText:function(t){return this.elem("text").html(t),this},_setButtonText:function(t,e){return this.findBlockOn(t,"button2").setText(e),this}},{_instances:{},getInstance:function(t){if(!this._instances[t]){var e=BEM.DOM.append(BEM.DOM.scope,home.view("sup-notice_type_"+t));this._instances[t]=e.bem(this.getName())}return this._instances[t]}}),BEM.DOM.decl("sup-notice",{onSetMod:{hidden:{yes:function(){this._destroyKey("ENTER")._destroyKey("ESC"),this.__base.apply(this,arguments)}}},_handlersKeys:{},_initializeKey:function(t,e){return this._handlersKeys[t]||(this._handlersKeys[t]=function(i){BEM.blocks.keycodes.is(i.keyCode,t)&&this.close(e)},this.bindToDoc("keydown",this._handlersKeys[t])),this},_destroyKey:function(t){return this._handlersKeys[t]&&(this.unbindFromDoc("keydown",this._handlersKeys[t]),delete this._handlersKeys[t]),this}}),BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"default"},{onSetMod:{mode:{wait:function(){this._setTitle(home.l10n("pushes.notice.wait.title"))},error:function(){this._setTitle(home.l10n("pushes.notice.error.title"))._setText(home.l10n("pushes.notice.error.text"))._setButtonText("cancel",home.l10n("pushes.notice.error.cancel"))},prompt:function(){this._setTitle(home.l10n("pushes.notice.prompt.title"))._setText(home.l10n("pushes.notice.prompt.text"))._setButtonText("cancel",home.l10n("pushes.notice.prompt.cancel"))}}},open:function(t){return this.setMod("mode",t),this.__base.apply(this,arguments),this}}),BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"default"},{onSetMod:{mode:{"*":function(t,e){this._prepareKeys(e)}},hidden:{"":function(){this._prepareKeys(this.getMod("mode"))}}},_prepareKeys:function(t){"prompt"===t?this._initializeKey("ENTER",!0)._initializeKey("ESC"):"error"===t?this._destroyKey("ENTER")._initializeKey("ESC"):this._destroyKey("ENTER")._destroyKey("ESC")}}),BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"popup"},{onSetMod:{hidden:{"":function(){this.bindToDoc("pointerdown focusin",this._onOuterAction)},yes:function(){this.unbindFromDoc("pointerdown focusin",this._onOuterAction)}}},_onOuterAction:function(t){0===$(t.target).closest(this.domElem).length&&this.close()}}),BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"popup"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._updatePositionThrottled=home.throttle(this._updatePosition.bind(this),200)}},hidden:{"":function(){this._initializeKey("ENTER",!0)._initializeKey("ESC"),this._updatePosition(),this.bindToWin("resize",this._updatePositionThrottled),this.__base.apply(this,arguments)},yes:function(){this.unbindFromWin("resize",this._updatePositionThrottled),this.__base.apply(this,arguments)}}},setOwner:function(t){this._$owner=t,this._updatePosition()},_updatePosition:function(){if(this._$owner&&0!==this._$owner.closest("html").length){var t=this._$owner.offset(),e=Math.round(t.left+this._$owner.outerWidth()/2),i=Math.round(t.top+this._$owner.outerHeight()),n=BEM.DOM.win.scrollTop(),o=BEM.DOM.win.height(),s=e>260,r=i+150>n+o;this.setMod("arrow-position",s?"right":"left"),this.setMod("arrow-hidden",r?"yes":""),this.domElem.css({left:e-(s?260:70),top:r?i-170:i+15})}}}),BEM.DOM.decl({baseBlock:"sup-button",block:"promo-sup-button"},{onSetMod:{subscribed:function(t,e){this.domElem.attr("title","yes"===e?home.l10n("pushes.sup_button.unsubscribe"):home.l10n("pushes.sup_button.subscribe")),this.trigger("toggle","yes"===e)}},_onButtonClick:function(){var t=this.__base.apply(this,arguments);return home.stat.logPath("click",this.params.counter+"."+(this.hasMod("subscribed","yes")?"unsubscribe":"subscribe")),t},_initializeButton:function(){this.__base.apply(this,arguments),this._isDestructing||home.stat.logPath("show",this.params.counter+"."+(this.hasMod("subscribed","yes")?"unsubscribe":"subscribe"))}}),BEM.DOM.decl("football-match2",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.matchId&&(this._onMatchUpdate=this._onMatchUpdate.bind(this),setTimeout(function(){BEM.blocks["football-updater"].getInstance().listen(this.params.matchId,!0,this._onMatchUpdate)}.bind(this),0))}}},_onMatchUpdate:function(t){var e;e=this.hasMod("mini")?"football-match2_mini_yes":this.hasMod("transparent")?"football-match2_transparent_yes":"football-match2";var i=$(home.view(e,$.extend(t,{id:this.params.matchId,size:this.getMod("size")},this.params.drawParams||{}),{pushSupported:home.getData("football.pushSupported")})),n={action:1,result:1,push:1,dot:1,online:1,"custom-bg":1,status:1},o=i.prop("className").split(" ").filter(Boolean);o.forEach(function(t){if(/^football-match2_/.test(t)){var e=t.split("_"),i=e[1],o=e[2];i in n&&this.setMod(i,o)}},this),BEM.DOM.update(this.domElem,""),BEM.DOM.append(this.domElem,i.children())},destruct:function(){BEM.blocks["football-updater"].getInstance().stopListen(this.params.matchId,!0,this._onMatchUpdate),this.__base.apply(this,arguments)}},{live:function(){var t=this.__base.apply(this,arguments);return t===!1?!1:!home.getData("football-updater.config")}}),BEM.decl("football-updater",{init:function(){this._config=home.getData("football-updater.config"),this._config&&(this._firstTimeout=!1,this._blockVisible=!1,this._matchesShort={},this._matches={},this._storedDataShort={},this._storedData={},this._listening=[],this._updateChannelsDebounced=$.debounce(function(){this._channelsSetted&&this._updateChannels()}.bind(this),100),this._dirtyListeners={},this._fireListenersDebounced=$.debounce(this._fireListeners.bind(this),100),this._listenHandler=this._listenHandler.bind(this),setTimeout(this._onFirstTimeout.bind(this),1e3*this._config.firstUpdateDelay))},onVisible:function(){this._blockVisible||(this._blockVisible=!0,this._firstTimeout&&this._updateChannels())},listen:function(t,e,i){if(this._config){var n=e?this._matchesShort:this._matches,o=e?this._storedDataShort:this._storedData;n[t]||(n[t]=[]),n[t].push(i),this._updateChannelsDebounced(),o[t]&&Date.now()-o[t].ts<this.__self.STORE_FOLLOW_TIMEOUT&&setTimeout(function(){i(o[t].match)},0)}},stopListen:function(t,e,i){if(this._config){var n=e?this._matchesShort:this._matches;n[t]&&(n[t]=n[t].filter(function(t){return t!==i}),this._updateChannelsDebounced())}},_onFirstTimeout:function(){this._firstTimeout=!0,this._blockVisible&&this._updateChannels()},_listenHandler:function(t){var e=t.key.split("_")[0],i=$.extend(!0,{},home.getData("football.upd_"+e,{}),t.data),n=t.key.indexOf("short")>-1,o=n?this._matchesShort:this._matches,s=n?this._storedDataShort:this._storedData;s[e]={ts:Date.now(),match:i},o[e]&&(this._dirtyListeners[t.key]=!0,this._fireListenersDebounced())},_fireListeners:function(){for(var t in this._dirtyListeners)if(this._dirtyListeners.hasOwnProperty(t)){var e=t.split("_")[0],i=t.indexOf("short")>-1,n=i?this._matchesShort:this._matches,o=i?this._storedDataShort:this._storedData;if(!n[e])continue;n[e].forEach(function(t){t(o[e].match)})}this._dirtyListeners={}},_updateChannels:function(){function t(t){var e=i["upd_"+t];return e?e.timestamp-s.updateBeforeMatch<=o&&e.timestamp+s.updateAfterMatch>o:!1}this._channelsSetted=!0;var e,i=home.getData("football",{}),n=[],o=Math.floor(home.now().getTime()/1e3),s=this._config;for(e in this._matches)this._matches.hasOwnProperty(e)&&this._matches[e].length&&t(e)&&n.push(e);for(e in this._matchesShort)this._matchesShort.hasOwnProperty(e)&&this._matchesShort[e].length&&t(e)&&n.push(e+"_short");this._listening.forEach(function(t){-1===n.indexOf(t)&&BEM.blocks["i-xiva"].stopListen("football_"+t,this._listenHandler)},this),n.forEach(function(t){-1===this._listening.indexOf(t)&&BEM.blocks["i-xiva"].listen("football_"+t,0,this._listenHandler,{
force:!0})},this),this._listening=n}},{STORE_FOLLOW_TIMEOUT:6e4,getInstance:function(){return this._instance||(this._instance=BEM.create({block:this.getName()})),this._instance}}),BEM.blocks["football-updater"].getInstance().init(),BEM.DOM.decl({block:"promo-sup-button",modName:"outdated",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("title")}},subscribed:function(t,e){this.__base.apply(this,arguments),this.domElem.removeAttr("title"),this.elem("text").text("yes"===e?home.l10n("pushes.sup_button.remove"):home.l10n("pushes.sup_button.restore"))}},_changeSubscriptionStatus:function(){return"yes"!==this.getMod("subscribed")?(this.setMod("progress","yes"),this._manager().subscribe(this.params.tags).then(this._finish.bind(this),this._finish.bind(this))):void this.__base.apply(this,arguments)}}),BEM.DOM.decl("football-fav-button",{onSetMod:{js:{inited:function(){var t=BEM.blocks["football-fav-manager"].getInstance();t.getMatches().indexOf(this.params.matchId)>-1&&this.setMod("subscribed","yes")}},subscribed:function(t,e){this.domElem.attr("title","yes"===e?home.l10n("football.fav_remove_match"):home.l10n("football.fav_add_match")),this.trigger("toggle","yes"===e)}}},{live:function(){return this.liveBindTo("pointerclick",function(){this.toggleMod("subscribed","yes");var t=this.hasMod("subscribed","yes");home.stat.logPath("click",this.params.counter+"."+(t?"fav-add":"fav-remove"));var e=BEM.blocks["football-fav-manager"].getInstance();e[t?"addMatch":"removeMatch"](this.params.matchId)}),!1}}),BEM.decl("football-fav-manager",{getMatches:function(){var t=home.localStorage.getItem(this.__self.LS_KEY);try{var e=JSON.parse(t);if(Array.isArray(e))return e}catch(i){}return[]},setMatches:function(t){home.localStorage.setItem(this.__self.LS_KEY,JSON.stringify(t))},addMatch:function(t){var e=this.getMatches();-1===e.indexOf(t)&&(e.push(t),this.setMatches(e),this.trigger("updateMatches",{op:"add",matchId:t}))},removeMatch:function(t){var e=this.getMatches(),i=e.indexOf(t);i>-1&&(e.splice(i,1),this.setMatches(e),this.trigger("updateMatches",{op:"remove",matchId:t}))}},{LS_KEY:"home:football-fav-matches",getInstance:function(){return this._instance||(this._instance=BEM.create({block:this.getName()})),this._instance}}),function(t){var e,i;try{e=t.localStorage,i="ya_ls_test",e.setItem(i,"1"),"1"!==e.getItem(i)?e=null:e.removeItem(i)}catch(n){e=null}var o=t.home||(t.home={}),s=t.console&&function(t){console.log(t)}||function(){},r=function(t){var e="localStorage is disabled. "+(t?t:"");s(e)},a=function(t){try{return t()}catch(e){r(e)}};e?o.localStorage={setItem:function(t,i){return a(function(){return e.setItem(t,i)})},getItem:function(t){return a(function(){return e.getItem(t)})},removeItem:function(t){return a(function(){return e.removeItem(t)})},clear:function(){return a(function(){return e.clear()})},key:function(t){return a(function(){return e.key(t)})}}:(o.localStorage={removeItem:r,setItem:r,getItem:r,clear:r},o.disabledLS=!0)}(window),BEM.DOM.decl({block:"football-fav-button",modName:"outdated",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("title")}},subscribed:function(t,e){this.__base.apply(this,arguments),this.domElem.removeAttr("title"),this.elem("text").text("yes"===e?home.l10n("pushes.sup_button.remove"):home.l10n("pushes.sup_button.restore"))}}}),BEM.DOM.decl({block:"football-match2",modName:"push",modVal:"outdated"},{},{live:function(){var t=function(t,e){this.hasMod("push","outdated")&&this.toggleMod("push-removed","yes",!e)};return this.liveInitOnBlockInsideEvent("toggle","promo-sup-button",t),this.liveInitOnBlockInsideEvent("toggle","football-fav-button",t),this.__base.apply(this,arguments)}}),BEM.DOM.decl("football-stats",{onSetMod:{js:{inited:function(){this._updateHandler=this._updateHandler.bind(this),BEM.blocks["football-updater"].getInstance().listen(this.params.matchId,!1,this._updateHandler)}}},_updateHandler:function(t){var e=["ball_posession","shots_wide","shots_on_goal","corners","yellow_cards","red_cards"],i=0;e.forEach(function(e){var n=home.view("football-stats__stat",{teams:t.teams,stat:e}),o=this.elem("row").filter('[data-key="'+e+'"]'),s=o.find(".football-stats__val"),r=o.find(".football-stats__bar-inner");this.toggleMod(o,"hidden","yes",n.hidden),s.eq(0).text(n.leftStr),s.eq(1).text(n.rightStr),r.eq(0).css("width",n.leftPercent),r.eq(1).css("width",n.rightPercent),n.hidden||++i},this),this.toggleMod("hidden","yes",2>i),this.hasMod("theme","match")&&this.domElem.toggleClass("football__match-block_hidden_yes",2>i)},destruct:function(){BEM.blocks["football-updater"].getInstance().stopListen(this.params.matchId,!1,this._updateHandler),this.__base.apply(this,arguments)}}),BEM.DOM.decl("football",{},{highlight:function(){var t,e,i=$(".football");i.length&&(t=$(".media-grid_collapsed_yes"),t.length&&t.bem("media-grid").delMod("collapsed"),e=i.offset().top,$("html,body").animate({scrollTop:e},400))}}),BEM.DOM.decl("football-match2",{},{live:function(){return this.liveBindTo("reveal","pointerclick",function(){return this.setMod("spoilers","on"),!1}),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"football-group-tabs",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-slide"]},{_getKeys:function(){return home.getData("football-group-tabs.keys")},_getInitData:function(){return home.getData("football-group-tabs.data",{})},_toggleLabelSelection:function(t,e){t.attr({tabindex:e?0:-1,"aria-selected":e?"true":"false","aria-controls":e?this._uniqId+"_panel_"+this._selectedKey:null}),this.toggleMod(t,"selected","yes","no",e)},_getPanelHTML:function(t,e){return home.view("football__group",e,this.params.req)},_changeTab:function(t){this._showSide=this._selectedKey<t?"right":"left",this._hideSide=this._selectedKey<t?"left":"right",this.__base.apply(this,arguments)},_toggleMountPanel:function(t,e,i){this._panelMap=this._panelMap||{},this._panelMap[t]=i,i?(e.parent().length||this.elem("panels").append(e),this.setMod(e,"hide-side",this._showSide).setMod(e,"hidden","yes").delMod(e,"no-place"),setTimeout(function(){this._panelMap[t]===i&&this.delMod(e,"hide-side").delMod(e,"hidden")}.bind(this),200)):this.setMod(e,"hide-side",this._hideSide).setMod(e,"hidden","yes").setMod(e,"no-place","yes")}}),BEM.DOM.decl("football-checkbox",{checked:function(t){return void 0===t?!!this.elem("control").prop("checked"):(this.elem("control").prop("checked",t),this)}},{live:function(){this.liveBindTo("control","change",function(){this.trigger("change",this.checked())})}}),BEM.DOM.decl("football-fav",{onSetMod:{js:{inited:function(){var t=$(".i-ua_browser_desktop").length;if(this._focused=!1,this._val="",this._items=this.elem("item").toArray().map(function(t,e){var i=$(t);return{index:e,$elem:i,key:i.data("key"),text:i.text(),currentHtml:i.text(),id:i.attr("id")}}),this._selected=this._items[0],this._currentItems=this._items.slice(),this._hoverEnabled=t,this._data=home.getData("football-fav.initial",{}),this._favMatches=this._data.fav.events.map(function(t){return t.id}),this._dataPromises={},this._showedKey="fav",this._matchArrowedList=this.findBlockInside("right-list","arrowed-list"),this._$rightPanels=this._matchArrowedList.elem("content"),this._isVisible=!0,this._football=this.findBlockOutside("football"),this._football.on("changeTab",function(t,e){this._isVisible="fav"===e,this._isVisible&&"fav"===this._showedKey&&!this._data.fav&&this._loadAndDrawData("fav")},this),this.params.req.pushSupported){var e=BEM.blocks["sup-manager"].getInstance();e.supported()&&e.on("updateTags",this._onUpdateTags,this)}else{var i=BEM.blocks["football-fav-manager"].getInstance();i.on("updateMatches",this._onUpdateMatches,this)}this._input=this.findBlockInside("input"),this._$inputControl=this._input.elem("control");var n=this.elem("left");this.bindKeyTo(n,"up down",this._moveSelectionByKey),this.bindKeyTo(n,"esc",function(){this._input.val("").delMod("focused")}),this.bindTo("item","focus",function(t){var e=this._getItemIndex(t.data.domElem.data("key"));e>-1&&this._moveSelectionToIndex(e)}),this.bindTo("item","pointerclick",function(t){this.setMod(t.data.domElem,"selected","yes")}),this._input.on("blur",this._dropSelection,this),this._input.on("change",this._onInputChange,this),this.bindTo("search-list","keydown",function(t){(t.originalEvent.key&&1===t.originalEvent.key.length||"Backspace"===t.originalEvent.key)&&this._input.setMod("focused","yes")}),this._hoverEnabled&&(this.bindTo("item","mousemove",function(t){var e=this._getItemIndex(t.data.domElem.data("key"));e>-1&&this._moveSelectionToIndex(e)}),this.bindTo("search-list","mouseleave",function(){this._dropSelection()})),t&&(this._scrollHeight=this.elem("search-list").prop("scrollHeight"),this._scrollToggle=!1,this._updateScroll(),this.bindTo("scroll-wrapper","scroll",function(){this.elem("scroll-wrapper").scrollLeft(0)}),this.bindTo("search-list","scroll",this._updateScroll),this.bindTo("scroll-bar","mousedown",this._onScrollBarDown))}}},onElemSetMod:{item:{selected:{yes:function(t){var e=this.elem("item","selected","yes");this.delMod(e,"selected"),e.addClass("football-hover"),e.attr("aria-selected","false"),t.removeClass("football-hover"),t.find(".football-hover__bg").remove(),t.attr("aria-selected","true"),this._onSelectKey(t.data("key"))}}}},_getItemIndex:function(t){if(void 0===t){if(!this._selected)return-1;t=this._selected.key}for(var e=0;e<this._currentItems.length;++e)if(this._currentItems[e].key===t)return e;return-1},_scrollToItem:function(t){var e=t.index*(this.__self.ITEM_HEIGHT+this.__self.ITEM_BORDER),i=this.elem("search-list"),n=i.scrollTop(),o=i.height();i.stop(),n>e?i.animate({scrollTop:e},"fast"):e+this.__self.ITEM_HEIGHT>n+o&&i.animate({scrollTop:e+this.__self.ITEM_HEIGHT-o},"fast")},_moveSelectionToIndex:function(t){var e=this._currentItems[t];this._selected&&e.key===this._selected.key||(this._dropSelection(),this._selected=e,this.setMod(this._selected.$elem,"hovered","yes"),this._$inputControl.attr("aria-activedescendant",e.id))},_moveSelectionByKey:function(t){var e=t.which===BEM.KEYS.UP?-1:1,i=this._selected?this._selected.index:-1;if(this._currentItems.length)return-1===i?i=e>0?0:this._currentItems.length-1:i+=e,i>=this._currentItems.length?i=0:0>i&&(i=this._currentItems.length-1),this._moveSelectionToIndex(i),this._scrollToItem(this._selected),this._selected&&this.setMod(this._selected.$elem,"selected","yes"),!1},_dropSelection:function(){this._selected&&(this._selected.$elem.find(".football-hover__bg").remove(),this.delMod(this._selected.$elem,"hovered"),this._$inputControl.removeAttr("aria-activedescendant"))},_onInputChange:function(){var t=this._input.val();if(t!==this._val){if(this._val=t,this._inputLogged||(this._inputLogged=!0,home.stat.logPath("click","football.fav.search")),t){var e=this._searchItems(t);this._currentItems=e.map(function(t,e){return t.item.$elem.find(".football-fav__item-text").html(t.html),t.item.currentHtml=t.html,t.item.index=e,t.item}),this._updateItemPositions()}else this._restoreItems();this._scrollHeight=Math.max(this.__self.LIST_HEIGHT,this._currentItems.length*(this.__self.ITEM_HEIGHT+this.__self.ITEM_BORDER)),this._updateScroll()}},_restoreItems:function(){this._currentItems=this._items.slice(),this._currentItems.forEach(function(t,e){t.index=e,t.currentHtml!==t.text&&(t.currentHtml=t.text,t.$elem.find(".football-fav__item-text").text(t.text))},this),this._updateItemPositions()},_updateItemPositions:function(){var t={};this._currentItems.forEach(function(e,i){t[e.key]=!0,this.delMod(e.$elem,"visible","no").setMod(e.$elem,"moved","yes"),e.$elem.css("transform","translateY("+i*(this.__self.ITEM_HEIGHT+this.__self.ITEM_BORDER)+"px)")},this),this._items.forEach(function(e){t[e.key]||(this.setMod(e.$elem,"visible","no").setMod(e.$elem,"moved","yes").delMod(e.$elem,"hovered"),e.$elem.css("transform",""))},this)},_searchItems:function(t){function e(t){return t.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")}var i=new RegExp(e(t.replace(/[a-z[\];',.]/gi,function(t){return this.__self.CHAR_MAP[t]?this.__self.CHAR_MAP[t]:t}.bind(this))),"i");return this._items.map(function(e){if("fav"===e.key)return{item:e,html:e.text,rel:1e3};var n,o,s,r="",a=0;return i.lastIndex=0,n=i.exec(e.text),o=n&&n.index,null!==o&&(s=e.text.lastIndexOf(" ",o),a=-1===s?100-o:100-(o-s-1),r=e.text.substr(0,o)+'<span class="football-fav__highlight">'+e.text.substr(o,t.length)+"</span>"+e.text.substr(o+t.length)),{item:e,html:r,rel:a}}).filter(function(t){return t.rel>0}).sort(function(t,e){return e.rel-t.rel})},_onSelectKey:function(t){if(t!==this._showedKey){this._showedKey=t;var e=this._data[t];e&&Date.now()-e.ts>this.__self.CACHE_TIME&&(e=null,this._dataPromises[t]=null,this._data[t]=null),e?this._drawData(t):this._loadAndDrawData(t),home.stat.logPath("click","football.fav.item."+t)}},_renderLoader:function(){BEM.DOM.update(this._$rightPanels,home.view("football-fav__loader")),this._matchArrowedList.toggleArrows()},_loadAndDrawData:function(t){var e=this._drawData.bind(this,t);this._renderLoader(),this._loadData(t).then(e,e)},_drawData:function(t){if(t===this._showedKey){var e,i=this._data[t];e="fav"===t?i.events.length?home.l10n("football.top_fav_vods"):home.l10n("football.top_vods"):home.l10n("football.top_country_vods").replace("%country",home.getData("football-fav.countries."+t+".name_genitive"));var n,o="";if(i)try{n=home.view("football-fav__right-panels",{events:i.events,fav:"fav"===t},this.params.req),o=i.vods&&i.vods.length?home.view("football__vods",{title:e,vods:i.vods,mix:"football-fav__vods-list",counter:"fav"}):""}catch(s){home.error.logError({block:"football-fav",message:s,meta:{key:t},sourceType:"render"})}n?BEM.DOM.update(this._$rightPanels,n):BEM.DOM.update(this._$rightPanels,home.view("football-fav__retry",{key:t})),this._matchArrowedList.toggleArrows();var r=this.elem("vods"),a=r.height();BEM.DOM.update(r,o);var l=r.height();r.height(a),this.afterCurrentEvent(function(){r.height(l).onceAnimationEnd("transition",300,function(){r.height("")})}),home.stat.logDOMShow(this._$rightPanels),home.stat.logDOMShow(r)}},_loadData:function(t){if(this._dataPromises[t])return this._dataPromises[t];var e=this;return this._dataPromises[t]=new Promise(function(i,n){$.ajax({url:"/portal/sport/starred?sport=FB",xhrFields:{withCredentials:!0},data:{events:"fav"===t&&e._favMatches.length?e._favMatches.join(","):void 0,team:"fav"!==t?t:void 0},dataType:"json",timeout:e.__self.AJAX_DATA_TIMEOUT}).then(i,function(i){e._dataPromises[t]=null,n("Network error: "+this.url+", status: "+i.status)})}).then(function(i){i.events&&i.events.length&&(i.events=i.events.filter(function(t){return t&&t.teams&&2===t.teams.length&&t.teams[0].country_iso&&t.teams[1].country_iso}),home.view("football__store-matches-data",i.events)),e._data[t]={ts:Date.now(),events:i.events||[],vods:i.vods||[]}}),this._dataPromises[t]},_onToggleMatch:function(t,e){e?-1===this._favMatches.indexOf(t)&&this._favMatches.push(t):this._favMatches=this._favMatches.filter(function(e){return e!==t}),this._data.fav=null,this._dataPromises.fav=null},_onUpdateTags:function(t,e){e.forEach(function(t){"sportEvent2"===t.name&&this._onToggleMatch(t.value,"add"===t.op)},this)},_onUpdateMatches:function(t,e){this._onToggleMatch(e.matchId,"add"===e.op)},_updateScroll:function(){var t,e,i=this.elem("search-list"),n=i.scrollTop(),o=this._scrollHeight>this.__self.LIST_HEIGHT,s=this.__self.LIST_HEIGHT-2*this.__self.SCROLL_BAR_MARGIN,r=this.elem("scroll-bar");this._scrollToggle!==o&&(this._scrollToggle=o,r.css("visibility",o?"visible":"hidden")),o&&(t=s/this._scrollHeight,e=t*s,r.css({transform:"translateY("+n/this._scrollHeight*s+"px)",height:e}))},_onScrollBarDown:function(t){var e=this.elem("search-list"),i=t.pageY,n=e.scrollTop(),o=this.__self.LIST_HEIGHT-2*this.__self.SCROLL_BAR_MARGIN;return this.bindToWin("mousemove",function(t){e.scrollTop(n+(t.pageY-i)/o*this._scrollHeight)}),this.bindToWin("mouseup",function(){this.unbindFromWin("mousemove mouseup")}),!1}},{ITEM_HEIGHT:40,ITEM_BORDER:1,CACHE_TIME:3e5,AJAX_DATA_TIMEOUT:42e4,LIST_HEIGHT:247,SCROLL_BAR_MARGIN:8,CHAR_MAP:{q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю"},live:function(){return this.liveBindTo("retry-button","pointerclick",function(){this._loadAndDrawData(this._showedKey)}),!1}}),BEM.DOM.decl("media-broadcast",{onSetMod:{js:function(){this._initThumbnail(),this.__self.instance=this,this._downloadPromise={},this._mediaGrid=this.findBlockOutside("media-grid"),this.hasAutoplay()&&this.getPlayer(),this.initXiva(),this._initShareBlock(),this.__self.hasAutoScroll()&&this.scrollToBlock(),this._initTimer()},player:function(){this._creatingPlayer=null,this.afterCurrentEvent(function(){this.getPlayer().then(function(){this._playing&&this.startPlaying()}.bind(this))})}},downloadApi:function(t){return this._downloadPromise[t]||(this._downloadPromise[t]=new Promise(function(e,i){var n=document.createElement("script");n.onload=e,n.onerror=i,n.src=t,document.head.appendChild(n)})),this._downloadPromise[t]},initXiva:function(){var t,e=this.params.xiva,i={force:!0};e&&(t=[e.ch,e.key].join("_"),BEM.blocks["i-xiva"].listen(t,e.ts,this.onXivaMessage.bind(this),i))},onXivaMessage:function(t){var e,i,n=t&&t.data;n&&(this._updateData(n),e=parseInt(n.youtube_enabled,10),i=parseInt(n.forced_switch,10),i&&!this.hasMod("bad-ua")&&this.setMod("player",e?"youtube":""))},_initTimer:function(){if("yes"!==this.getMod("can-play")){var t=this;setTimeout(function(){t.setMod("can-play","yes")},1e3*this.params.startTime-Date.now())}},_initThumbnail:function(){var t=this.findElem("thumbnail"),e=t.data("img");e&&(t[0].style="background-image: url("+e+")")},_updateData:function(t){var e,i;e=this._convertTime(t.start_time),i=this._convertTime(t.end_time),this.params.streamUrl=t.stream_url,e&&(this.params.startTime=e),i&&(this.params.endTime=i),this.params.youtubeVideoId=t.youtube_video_id},_convertTime:function(t){var e,i,n=/(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2})/;if(t&&(i=t.match(n)))return e=new Date(i[1],i[2]-1,i[3],i[4],i[5]),e=Math.floor(e/1e3),isNaN(e)?void 0:e},_initShareBlock:function(){var t="//wayback.archive-it.org/all/20180620162258/https://yastatic.net/share2/share.js";$.ajax({url:t,dataType:"script",context:this}).then(this._onShareLoad,function(t,e,i){home.error.logAjaxError({block:"media-broadcast",message:"_initshareBlock: ajax",source:"share2"},t,e,i)})},_onShareLoad:function(){var t="https://wayback.archive-it.org/all/20180620162258/http://yandex."+this.params.share.zone+"/?yac2018=1",e={theme:{services:"vkontakte,facebook,odnoklassniki,twitter",lang:this.params.share.locale},content:{url:t,title:home.l10n("media.broadcast.yac2018.title"),description:home.l10n("media.broadcast.yac2018.desc"),image:this.params.share.image},contentByService:{vkontakte:{url:t,title:home.l10n("media.broadcast.yac2018.title")+". "+home.l10n("media.broadcast.yac2018.desc"),image:this.params.share.image}}};try{this._shareInstance=new Ya.share2(this.elem("share-buttons")[0],e)}catch(i){}},scrollToBlock:function(t){this.disableAutoplay(),home.stat.logPath("click",this.params.counters&&this.params.counters.scrollToBlock),this._mediaGrid.hasMod("collapsed")&&this._mediaGrid.toggleCollapsed(),this.afterCurrentEvent(function(){var e=this._mediaGrid.domElem.offset().top;$("html,body").stop().animate({scrollTop:e},t||400)})},play:function(t){this.disableAutoplay(),this.getPlayer().then(function(){this.setMod(this.elem("thumbnail"),"hidden","yes"),this.startPlaying(t),this._playing=!0}.bind(this))},startPlaying:function(t){this.player&&(t&&this.player.setVolume(0),this.player.play&&this.player.play())},getPlayer:function(){return this.downloadApi(this.getApiUrl()).then(function(){return this._creatingPlayer?this._creatingPlayer:this.createPlayer()}.bind(this))},hasAutoplay:function(){return this.params.autoplay&&!this._mediaGrid.hasMod("collapsed")},disableAutoplay:function(){this.delMod("autoplay")},getApiUrl:function(){return"https://yastatic.net/yandex-video-player-iframe-api-bundles/1.0-279/js/stream_player.min.js"},getStreamUrl:function(){var t=home.parseUrl(this.params.streamUrl);return t.query.start=this.params.startTime,t.query.end=this.params.endTime,t.query.from="morda",t.query.from_block="media-broadcast",home.makeUrl(t)},createPlayerInstance:function(){var t=this.getStreamUrl();return new Promise(function(e,i){var n;n=Ya.streamPlayer.create({element:"media-broadcast__player-container",autoplay:!0,preload:!1,version:"1.0-279",stream:t,handlers:{onError:function(t){t.isFatal&&(2e3===t.code||415!==t.code&&112!==t.code&&self._retry-- >=0||(i(),this._creatingPlayer=null))}.bind(this),onReady:function(){e(n)},onStateChange:function(t){1===t||3===t||5===t?this._playing=!0:this._playing=!1}.bind(this)}})}.bind(this))},createPlayer:function(){return this.player&&this.player.destroy(),this.elem("player-container").html(""),this._creatingPlayer=this.createPlayerInstance().then(function(t){this.player=t}.bind(this)),this._creatingPlayer}},{live:function(){return this.liveBindTo("thumbnail","click",function(){"yes"===this.getMod("can-play")&&this.play()}),!this.hasAutoScroll()},hasAutoScroll:function(){return Boolean(home.getData("media-broadcast").yac2018.autoScroll)},disableAutoplay:function(){this.instance.disableAutoplay()},scrollToBlock:function(t){this.instance||$("."+this.getName()).bem(this.getName()),this.instance.scrollToBlock(t)},play:function(){this.instance.play()}}),BEM.DOM.decl({block:"media-broadcast",modName:"autoplay",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.hasAutoplay()&&this._initAutoplay()}},_initAutoplay:function(){this._updateVideoBottom(),this._checkAutoplay(),this._updateVideoBottom=$.throttle(this._updateVideoBottom,100),this._checkAutoplay=$.throttle(this._checkAutoplay,100),this.bindToWin("resize",this._updateVideoBottom),this.bindToWin("scroll",this._checkAutoplay)},disableAutoplay:function(){this.unbindFromWin("resize",this._updateVideoBottom),this.unbindFromWin("scroll",this._checkAutoplay),this.__base.apply(this,arguments)},_updateVideoBottom:function(){var t=this.elem("player-container");this._videoBottom=t.offset().top+t.height()},_checkAutoplay:function(){var t=$(window).scrollTop()+$(window).height();this._videoBottom<=t&&(home.stat.logPath("click",this.params.counters&&this.params.counters.autoplay),this.play(!0))}}),BEM.DOM.decl({block:"media-broadcast",modName:"player",modVal:"youtube"},{getApiUrl:function(){return"https://www.youtube.com/iframe_api"},startPlaying:function(t){this.player&&(t&&this.player.setVolume(0),this.player.playVideo&&this.player.playVideo())},downloadApi:function(){var t=this.__base.apply(this,arguments);return this._initingYoutubeApi||(this._initingYoutubeApi=new Promise(function(t){window.onYouTubeIframeAPIReady=t})),Promise.all([t,this._initingYoutubeApi])},createPlayerInstance:function(){var t=this.params.youtubeVideoId;return new Promise(function(e){var i;this.elem("player-container").html('<div id="media-broadcast__player-container_youtube"></div>'),i=new YT.Player("media-broadcast__player-container_youtube",{videoId:t,events:{onReady:function(){e(i)},onStateChange:function(t){t.data===YT.PlayerState.PLAYING?this._playing=!0:t.data!==YT.PlayerState.PAUSED&&t.data!==YT.PlayerState.ENDED||(this._playing=!1)}.bind(this)}})}.bind(this))}}),BEM.DOM.decl({name:"media-video",baseBlock:"media-service"},{}),BEM.DOM.decl({name:"media-stream",baseBlock:"media-service"},{}),BEM.DOM.decl({name:"media-vod",baseBlock:"media-service"},{}),BEM.DOM.decl("media-footer",{onSetMod:{js:function(){home.stat.logDOMShow(this.domElem)}}},{live:function(){var t=function(t){t.preventDefault(),this.findBlockOutside("media-grid").toggleCollapsed();var e=t.data.domElem.attr("data-scroll-to"),i=$("."+e).offset().top;$("html,body").stop().animate({scrollTop:i-10},400)};return this.liveBindTo("smart-link","click",t),this.liveBindKey("smart-link","enter space",t),!0}}),BEM.DOM.decl({name:"media-event",baseBlock:"media-service"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.scrollTo&&this._scrollToTop()}},_scrollToTop:function(){var t=$(".media-grid").bem("media-grid");t.hasMod("collapsed","yes")&&t.delMod("collapsed"),this.afterCurrentEvent(function(){var t=this.domElem.offset().top;$("html,body").stop().animate({scrollTop:t},200)})}},{live:function(){return home.getData("media-event.scroll")?!1:this.__base.apply(this,arguments)}}),BEM.DOM.decl("zen-lib",{onSetMod:{js:function(){this._timing=Ya.Rum.makeSubPage(this.params.pageId),this.params.libParams.staticHost&&this.params.libParams.staticHost.indexOf("/static-lib/s3/zen-lib/")>-1&&!$.cookie("bltsr")&&(delete this.params.libParams.staticHost,delete this.params.libParams.isAdblock),this.bindTo("retry-button","click",this._onRetryClick)},state:function(t,e){home.stat.logPath("show",this.params.statRoot+"."+e),this._timing&&"retry"===e&&this._timing.cancel()}},_triggerFirstPaint:function(t){this._timing&&Ya.Rum.sendTimeMark("2793",t,!1,this._timing)},_waitIdleSearchMoment:function(t,e){function i(){o.forEach(function(t){BEM.channel(t.channel).un(t.event,n)})}var n,o=[{event:"init",channel:"suggest2"},{event:"focus",channel:"suggest2"},{event:"change",channel:"suggest2"},{event:"init",channel:"voice-search"},{event:"change",channel:"voice-search"}];return this._isForceLoad?e&&!this._hasEventsAfterResolve?(i(),Promise.resolve()):new Promise(function(e){n=$.debounce(function(){i(),e(),this._hasEventsAfterResolve=!1},t,!1,this),o.forEach(function(t){BEM.channel(t.channel).on(t.event,n),this._hasEventsAfterResolve=!0},this),n()}):Promise.resolve()},loadAndRender:function(t){return this._isForceLoad=t&&t.isForceLoad,this._bundleRequested?void 0:(this._bundleRequested=!0,home.stat.logPath("show",this.params.statRoot+".init"),this._timing&&Ya.Rum.sendTTI(!1,Ya.Rum.getTime(),this._timing),this.params.zenHost?this._loadDevLibParams(this.params.zenHost).then(this._injectZen.bind(this)).then(this._createZen.bind(this)):(this._runIncludedLoader(),this._createZen(this.params.libParams)))},_onRetryClick:function(){this.setMod("state","loading"),this._bundleRequested=!1,this.loadAndRender()},_runIncludedLoader:function(){},_loadDevLibParams:function(t){var e=this.params.libParams,i=["host","isDev","pathToLoader","staticHost","version"];return new Promise(function(n){$.ajax({url:"//"+t+"/lib-config"}).then(function(o){var s=i.reduce(function(t,e){return t[e]=o[e],t},{});e.isAdblock&&s.staticHost&&(s.staticHost="https://"+t+"/static-lib/s3/zen-lib/");var r=$.extend({},e,s);console.log("Current zen lib params:",r),n(r)})})},_initialForcedDelay:function(t){return this._isForceLoad?new Promise(function(e){setTimeout(e,t)}):Promise.resolve()},_promoCards:[],PROMO_CARD_DELAY_COLLECT:50,_debouncedTriggerPromoCards:$.debounce(function(){this.trigger("promoCards",this._promoCards)},this.PROMO_CARD_DELAY_COLLECT),_collectPromoCards:function(t){this._promoCards[t.index]=t,this._debouncedTriggerPromoCards()},_writeCacheTtlToCookie:function(t){var e="cach",i="zen",n=Number(t&&t.ttl),o=Number(this.params.timestamp);if(n&&o){var s={};s[e]=o+n,window.Ya&&window.Ya.ycCookie&&window.Ya.ycCookie.set(i,s)}},_rows:[],_createZen:function(t){var e=500,i=1e3,n=1e3,o=!0,s={api:"1096",js:"628",css:"2447"},r=1e4,a=window.YandexZen.loader;return a.on("timings",function(t){if(this._timing){var e=this._timing;Object.keys(s).forEach(function(i){var n=t[i];n>-1&&Ya.Rum.sendDelta(s[i],n,e)})}},this),a.on("cachePut",this._writeCacheTtlToCookie,this),a.on("precacheMiss",function(){this._logError({name:"MordaZenLibError",message:"Precache missed",owner:"backend",sourceType:"logic"})},this),this._initialForcedDelay(e).then(this._waitIdleSearchMoment.bind(this,i)).then(function(){var e=a.create(t);return this._lateRenderingRace({loader:e,lagTime:r}),e}.bind(this)).then(function(t){return this._waitIdleSearchMoment(n,o).then(function(){return t})}.bind(this)).then(function(t){t.on("firstPaint",this._triggerFirstPaint,this),t.on("promoCard",this._collectPromoCards,this),t.on("stat",this._onZenStatData,this),t.on("placeholder",function(t){this.trigger("placeholder",t)},this),t.on("placeholderShow",function(t){this.trigger("placeholderShow",t)},this),t.on("rowsChanged",function(t){this._rows=t,this.trigger("rowsChanged",t)},this),t.on("cachePut",this._writeCacheTtlToCookie,this),t.render(this.elem("container")[0]),this.setMod("state","loaded")}.bind(this))["catch"](function(t){this.trigger("error"),this.setMod("state","retry"),this._logError(t)}.bind(this))},_lateRenderingRace:function(t){t=t||{};var e=t.loader,i=t.lagTime,n=new Promise(function(t){setTimeout(t,i,i)});return Promise.race([e,n]).then(function(t){t===i&&this.trigger("lateRendering")}.bind(this))},_onZenStatData:function(t){var e={show:"show",click:"click"},i=50,n="Placeholder",o=t&&t.statMeta&&t.statMeta.rowIndex;if(!this._rows||!this._rows.length||this._rows[o]!==n){var s=t.eventName.split("#")[0],r=s.split(":"),a=r[0],l=r[1];"click"===a&&this.trigger("click");var c="number"==typeof o&&i>o?this.params.statRoot+".row"+o:this.params.statRoot;e[a]?home.stat.logPath(e[a],c+".card"):l&&e[l]?home.stat.logPath(e[l],c+"."+a):home.stat.logPath("click",c+"."+s.replace(":","_"))}},_injectZen:function(t){return new Promise(function(e,i){var n=t.pathToLoader,o=document.createElement("script");o.src=n,o.onload=function(){e(t)},document.body.appendChild(o),setTimeout(function(){i(new Error("_injectZen: Unreachable Zen loader"))},5e3)})},_logError:function(t){var e="UNKNOWN_ERROR",i=t.name,n=t.message;home.error.logError({block:"zen_lib",message:i||n?i+" "+n:e+JSON.stringify(t),sourceType:t.sourceType,source:t.owner})}}),BEM.DOM.decl("zen-lib",{_runIncludedLoader:function(){!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=67)}([function(t,e,i){var n=i(39)("wks"),o=i(14),s=i(2).Symbol,r="function"==typeof s,a=t.exports=function(t){return n[t]||(n[t]=r&&s[t]||(r?s:o)("Symbol."+t))};a.store=n},function(t,e,i){var n=i(2),o=i(3),s=i(7),r=i(10),a=i(12),l="prototype",c=function(t,e,i){var u,h,d,p,f=t&c.F,m=t&c.G,_=t&c.S,g=t&c.P,v=t&c.B,b=m?n:_?n[e]||(n[e]={}):(n[e]||{})[l],y=m?o:o[e]||(o[e]={}),w=y[l]||(y[l]={});m&&(i=e);for(u in i)h=!f&&b&&void 0!==b[u],d=(h?b:i)[u],p=v&&h?a(d,n):g&&"function"==typeof d?a(Function.call,d):d,b&&r(b,u,d,t&c.U),y[u]!=d&&s(y,u,p),g&&w[u]!=d&&(w[u]=d)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(8),o=i(20);t.exports=i(5)?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(9),o=i(32),s=i(34),r=Object.defineProperty;e.f=i(5)?Object.defineProperty:function(t,e,i){if(n(t),e=s(e,!0),n(i),o)try{return r(t,e,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(4);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");
return t}},function(t,e,i){var n=i(2),o=i(7),s=i(6),r=i(14)("src"),a="toString",l=Function[a],c=(""+l).split(a);i(3).inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,i,a){var l="function"==typeof i;l&&(s(i,"name")||o(i,"name",e)),t[e]!==i&&(l&&(s(i,r)||o(i,r,t[e]?""+t[e]:c.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:o(t,e,i):(delete t[e],o(t,e,i)))})(Function.prototype,a,function(){return"function"==typeof this&&this[r]||l.call(this)})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,i){var n=i(35);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(36),o=i(16);t.exports=function(t){return n(o(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(12),o=i(97),s=i(98),r=i(9),a=i(38),l=i(99),c={},u={},e=t.exports=function(t,e,i,h,d){var p,f,m,_,g=d?function(){return t}:l(t),v=n(i,h,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(s(g)){for(p=a(t.length);p>b;b++)if(_=e?v(r(f=t[b])[0],f[1]):v(t[b]),_===c||_===u)return _}else for(m=g.call(t);!(f=m.next()).done;)if(_=o(m,v,f.value,e),_===c||_===u)return _};e.BREAK=c,e.RETURN=u},function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s}),i.d(e,"d",function(){return r});var n={PACK_SHOWN:"packShown",BULK_EVENT_LOGGED:"bulkEventLogger",API_RESPONSE_TTL_EXPIRED:"apiResponseTtlExpired",API_RESPONSE_ERROR_TTL_EXPIRED:"apiResponseErrorTtlExpired"},o={ONBOARDING:"onboarding",EXPORT:"export",MORE:"more",BULK:"bulk",SUBS:"subs",PROFILE:"profile",BLOCKED:"blocked",CATEGORIES:"categories",SUGGEST:"suggest"},s={SESSION_CACHE:"cacheStorage",MULTI_SESSION_CACHE:"multiCacheStorage"},r={NETWORK:"network",CACHE_BEFORE_NETWORK:"cache-before-network",CACHE_AFTER_NETWORK:"cache-after-network"}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.d(e,"e",function(){return a}),i.d(e,"c",function(){return l}),i.d(e,"b",function(){return c}),i.d(e,"a",function(){return u}),i.d(e,"f",function(){return m}),i.d(e,"d",function(){return _});var r="ZenLibLoaderError",a="network",l="logic",c="frontend",u="backend",h="Unknown error. Ahtung! Attention!",d="unknown",p="somebody",f=function(t){return t.message&&t.sourceType&&t.owner},m=function(t){var e=t instanceof Error;if(e&&f(t))return t;var i="";return e?i=t.toString():"string"==typeof t?i=t:t&&(i=(t.name||"")+(t.message||"")),new _({message:h+" "+i+". JS error: "+e,sourceType:d,owner:p})},_=function(t){function e(t){var i=t.message,s=t.owner,a=t.sourceType;n(this,e);var l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return l.owner=s,l.sourceType=a,l.name=r,l}return s(e,t),e}(Error)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(76),o=i(40);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(39)("keys"),o=i(14);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e,i){var n=i(22),o=i(0)("toStringTag"),s="Arguments"==n(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(i){}};t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=r(e=Object(t),o))?i:s?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){"use strict";var n=i(90),o=i(1),s=i(10),r=i(7),a=i(6),l=i(13),c=i(91),u=i(27),h=i(94),d=i(0)("iterator"),p=!([].keys&&"next"in[].keys()),f="@@iterator",m="keys",_="values",g=function(){return this};t.exports=function(t,e,i,v,b,y,w){c(i,e,v);var k,E,M,x=function(t){if(!p&&t in P)return P[t];switch(t){case m:return function(){return new i(this,t)};case _:return function(){return new i(this,t)}}return function(){return new i(this,t)}},T=e+" Iterator",S=b==_,C=!1,P=t.prototype,I=P[d]||P[f]||b&&P[b],B=I||x(b),D=b?S?x("entries"):B:void 0,O="Array"==e?P.entries||I:I;if(O&&(M=h(O.call(new t)),M!==Object.prototype&&M.next&&(u(M,T,!0),n||a(M,d)||r(M,d,g))),S&&I&&I.name!==_&&(C=!0,B=function(){return I.call(this)}),n&&!w||!p&&!C&&P[d]||r(P,d,B),l[e]=B,l[T]=g,b)if(k={values:S?B:x(_),keys:y?B:x(m),entries:D},w)for(E in k)E in P||s(P,E,k[E]);else o(o.P+o.F*(p||C),e,k);return k}},function(t,e,i){var n=i(8).f,o=i(6),s=i(0)("toStringTag");t.exports=function(t,e,i){t&&!o(t=i?t:t.prototype,s)&&n(t,s,{configurable:!0,value:e})}},function(t,e,i){var n=i(4);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",function(){return s}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return h}),i.d(e,"d",function(){return d});var o,s={version:"2.5.308",host:"https://wayback.archive-it.org/all/20180620162258/https://zen.yandex.ru/",staticHost:"https://wayback.archive-it.org/all/20180620162258/https://yastatic.net/s3/zen-lib/",initialDisplayedRowsNumber:6,exps:[],isDev:!1,isVideoDisabled:!1},r={defaultDesktop:"defaultDesktop",defaultMobile:"defaultMobile",defaultTablet:"defaultTablet",mordaDesktop:"mordaDesktop",mordaMobile:"mordaMobile",mordaTablet:"mordaTablet",yabro:"yabro",vb:"vb"},a={bundleName:"lib",uatraitsType:"desktop",columnCount:3},l={bundleName:"lib-mobile",uatraitsType:"mobile",columnCount:1,isMobile:!0},c={bundleName:"lib",uatraitsType:"tablet",columnCount:3},u={bundleName:"lib",uatraitsType:"tablet",columnCount:2},h=(o={},n(o,r.yabro,{bundleName:"yabro",uatraitsType:"desktop",columnCount:3}),n(o,r.mordaDesktop,a),n(o,r.mordaMobile,l),n(o,r.mordaTablet,c),n(o,r.defaultDesktop,a),n(o,r.defaultMobile,l),n(o,r.defaultTablet,u),n(o,r.vb,{bundleName:"vb-lib",uatraitsType:"desktop",columnCount:3}),o),d=function(t){return t.isTablet?r.defaultTablet:t.isMobile?r.defaultMobile:r.defaultDesktop}},function(t,e,i){"use strict";var n=i(61);e.a=new n.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof fetch?fetch.bind():function(t,e){return e=e||{},new Promise(function(i,n){function o(){var t,e=[],i=[],n={};return s.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(o,s,r){e.push(s=s.toLowerCase()),i.push([s,r]),t=n[s],n[s]=t?t+","+r:r}),{ok:1==(s.status/200|0),status:s.status,statusText:s.statusText,url:s.responseURL,clone:o,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},headers:{keys:function(){return e},entries:function(){return i},get:function(t){return n[t.toLowerCase()]},has:function(t){return t.toLowerCase()in n}}}}var s=new XMLHttpRequest;s.open(e.method||"get",t);for(var r in e.headers)s.setRequestHeader(r,e.headers[r]);s.withCredentials="include"==e.credentials,s.onload=function(){i(o())},s.onerror=n,s.send(e.body)})};e["default"]=n},function(t,e,i){t.exports=!i(5)&&!i(11)(function(){return 7!=Object.defineProperty(i(33)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(4),o=i(2).document,s=n(o)&&n(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,i){var n=i(4);t.exports=function(t,e){if(!n(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!n(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(22);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(15),o=i(38),s=i(77);t.exports=function(t){return function(e,i,r){var a,l=n(e),c=o(l.length),u=s(r,c);if(t&&i!=i){for(;c>u;)if(a=l[u++],a!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){var n=i(23),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,i){var n=i(2),o="__core-js_shared__",s=n[o]||(n[o]={});t.exports=function(t){return s[t]||(s[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(16);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(0)("unscopables"),o=Array.prototype;void 0==o[n]&&i(7)(o,n,{}),t.exports=function(t){o[n][t]=!0}},function(t,e,i){"use strict";var n=i(1),o=i(82),s="includes";n(n.P+n.F*i(84)(s),"String",{includes:function(t){return!!~o(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var n=i(25),o={};o[i(0)("toStringTag")]="z",o+""!="[object z]"&&i(10)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,i){"use strict";var n=i(89)(!0);i(26)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){var n=i(9),o=i(92),s=i(40),r=i(24)("IE_PROTO"),a=function(){},l="prototype",c=function(){var t,e=i(33)("iframe"),n=s.length,o="<",r=">";for(e.style.display="none",i(93).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+r+"document.F=Object"+o+"/script"+r),t.close(),c=t.F;n--;)delete c[l][s[n]];return c()};t.exports=Object.create||function(t,e){var i;return null!==t?(a[l]=n(t),i=new a,a[l]=null,i[r]=t):i=c(),void 0===e?i:o(i,e)}},function(t,e,i){for(var n=i(95),o=i(21),s=i(10),r=i(2),a=i(7),l=i(13),c=i(0),u=c("iterator"),h=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(p),m=0;m<f.length;m++){var _,g=f[m],v=p[g],b=r[g],y=b&&b.prototype;if(y&&(y[u]||a(y,u,d),y[h]||a(y,h,g),l[g]=d,v))for(_ in n)y[_]||s(y,_,n[_],!0)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(8).f,o=i(47),s=i(51),r=i(12),a=i(52),l=i(17),c=i(26),u=i(49),h=i(100),d=i(5),p=i(53).fastKey,f=i(28),m=d?"_s":"size",_=function(t,e){var i,n=p(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var u=t(function(t,n){a(t,u,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&l(n,i,t[c],t)});return s(u.prototype,{clear:function(){for(var t=f(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[m]=0},"delete":function(t){var i=f(this,e),n=_(i,t);if(n){var o=n.n,s=n.p;delete i._i[n.i],n.r=!0,s&&(s.n=o),o&&(o.p=s),i._f==n&&(i._f=o),i._l==n&&(i._l=s),i[m]--}return!!n},forEach:function(t){f(this,e);for(var i,n=r(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!_(f(this,e),t)}}),d&&n(u.prototype,"size",{get:function(){return f(this,e)[m]}}),u},def:function(t,e,i){var n,o,s=_(t,e);return s?s.v=i:(t._l=s={i:o=p(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=s),n&&(n.n=s),t[m]++,"F"!==o&&(t._i[o]=s)),t},getEntry:_,setStrong:function(t,e,i){c(t,e,function(t,i){this._t=f(t,e),this._k=i,this._l=void 0},function(){for(var t=this,e=t._k,i=t._l;i&&i.r;)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?"keys"==e?u(0,i.k):"values"==e?u(0,i.v):u(0,[i.k,i.v]):(t._t=void 0,u(1))},i?"entries":"values",!i,!0),h(e)}}},function(t,e,i){var n=i(10);t.exports=function(t,e,i){for(var o in e)n(t,o,e[o],i);return t}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(14)("meta"),o=i(4),s=i(6),r=i(8).f,a=0,l=Object.isExtensible||function(){return!0},c=!i(11)(function(){return l(Object.preventExtensions({}))}),u=function(t){r(t,n,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,n)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[n].i},d=function(t,e){if(!s(t,n)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[n].w},p=function(t){return c&&f.NEED&&l(t)&&!s(t,n)&&u(t),t},f=t.exports={KEY:n,NEED:!1,fastKey:h,getWeak:d,onFreeze:p}},function(t,e,i){"use strict";var n=i(2),o=i(1),s=i(10),r=i(51),a=i(53),l=i(17),c=i(52),u=i(4),h=i(11),d=i(101),p=i(27),f=i(102);t.exports=function(t,e,i,m,_,g){var v=n[t],b=v,y=_?"set":"add",w=b&&b.prototype,k={},E=function(t){var e=w[t];s(w,t,"delete"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof b&&(g||w.forEach&&!h(function(){(new b).entries().next()}))){var M=new b,x=M[y](g?{}:-0,1)!=M,T=h(function(){M.has(1)}),S=d(function(t){new b(t)}),C=!g&&h(function(){for(var t=new b,e=5;e--;)t[y](e,e);return!t.has(-0)});S||(b=e(function(e,i){c(e,b,t);var n=f(new v,e,b);return void 0!=i&&l(i,_,n[y],n),n}),b.prototype=w,w.constructor=b),(T||C)&&(E("delete"),E("has"),_&&E("get")),(C||x)&&E(y),g&&w.clear&&delete w.clear}else b=m.getConstructor(e,t,_,y),r(b.prototype,i),a.NEED=!0;return p(b,t),k[t]=b,o(o.G+o.W+o.F*(b!=v),k),g||m.setStrong(b,t,_),b}},function(t,e,i){var n=i(25),o=i(106);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,i){"use strict";var n=i(1);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";var n=i(1),o=i(35),s=i(12),r=i(17);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,a,l=arguments[1];return o(this),e=void 0!==l,e&&o(l),void 0==t?new this:(i=[],e?(n=0,a=s(l,arguments[2],2),r(t,!1,function(t){i.push(a(t,n++))})):r(t,!1,i.push,i),new this(i))}})}},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return t.isRobot||!t.isBrowser&&!t.isMobile?new f(!0,{build_name:"legacy",browser_name:"bot",browser_base:"bot"}):new f(!1)}function o(t,e){for(var i=t.BrowserName,n=t.BrowserBase,o=String(t.BrowserVersion),s=String(t.BrowserBaseVersion),r=0;r<e.length;r++){var a=e[r],l=a.build_name,c=a.min_browser_base_version,h=a.min_browser_version;if(n&&s&&n===a.browser_base&&u(s,c)>=0)return new f(!0,{browser_name:i,browser_base:n,build_name:l,browser_version:o});if(i===a.browser_name&&u(o,h)>=0)return new f(!0,{browser_name:i,build_name:l,browser_version:o})}return new f(!1)}function s(t){return t.isTablet||t.isMobile?new f(!1):o(t,h)}function r(t){if(t.isTablet){for(var e=0;e<p.length;e++){var i=p[e],n=i.os_name,o=i.os_min_version,s=i.build_name;if(n===t.OSFamily&&parseFloat(t.OSVersion)>=parseFloat(o))return new f(!0,{build_name:s,browser_base:t.BrowserBase,browser_name:t.BrowserName,browser_version:t.BrowserVersion})}return new f(!1)}return new f(!1)}function a(t){if(t.isTouch&&!t.isTablet)for(var e=0;e<d.length;e++){var i=d[e],n=i.os_name,o=i.os_min_version,s=i.build_name;if(n===t.OSFamily&&parseFloat(t.OSVersion)>=parseFloat(o))return new f(!0,{is_mobile:!0,build_name:s,browser_base:t.BrowserBase,browser_name:t.BrowserName,browser_version:t.BrowserVersion})}return new f(!1)}function l(t){var e=t.isMobile,i=t.isTablet,n=t.BrowserName,s=t.BrowserBase,r=String(t.BrowserVersion);return e||i?["Chrome","ChromeMobile"].includes(n)&&u(r,"54")>=0||"YandexBrowser"===n&&u(r,"17.4")>=0?new f(!0,{browser_name:n,browser_base:s,build_name:"chromium",browser_version:r}):new f(!0,{browser_name:n,browser_base:s,build_name:"legacy",browser_version:r}):o(t,h)}function c(t){var e=t.BrowserName,i=t.BrowserBase,n=t.BrowserVersion,o=t.BrowserBaseVersion,s=e&&"string"==typeof e,r=n&&("string"==typeof n||"number"==typeof n),a=i&&"string"==typeof i,l=o&&("string"==typeof o||"number"==typeof o),c=s&&r,u=a&&l;return c||u?{isValid:!0}:{isValid:!1,error:"BrowserName/BrowserBase and BrowserVersion/BrowserBaseVersion are required and must be strings or number"}}function u(t,e){if("string"==typeof t&&"string"==typeof e){for(var i=[t,e].map(function(t){var e=t.split(".");return e.map(function(t){return parseInt(t,10)})}),n=i[0],o=i[1],s=Math.min(n.length,o.length),r=0;s>r;r++){var a=n[r],l=o[r];if(a!==l)return a>l?1:-1}return 0}}var h=[{browser_base:"Chromium",min_browser_base_version:"54",build_name:"chromium"},{browser_name:"Firefox",min_browser_version:"51",build_name:"firefox"},{browser_name:"MSIE",min_browser_version:"11",build_name:"ie"},{browser_name:"Edge",min_browser_version:"13",build_name:"edge"},{browser_name:"Edge",min_browser_version:"12",build_name:"legacy"},{browser_base:"Chromium",min_browser_base_version:"42",build_name:"legacy"},{browser_name:"Firefox",min_browser_version:"45",build_name:"legacy"},{browser_name:"Safari",min_browser_version:"9",build_name:"legacy"}],d=[{os_name:"iOS",os_min_version:"7",build_name:"legacy"},{os_name:"Android",os_min_version:"4.4",build_name:"legacy"}],p=[{os_name:"iOS",os_min_version:"7",build_name:"legacy"},{os_name:"Android",os_min_version:"4.4",build_name:"legacy"}],f=function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,m),this.is_supported=t,this.is_mobile=e.is_mobile,this.browser_name=e.browser_name,this.browser_base=e.browser_base,this.build_name=e.build_name,this.browser_version=e.browser_version};t.exports={get_browser_support_info_desktop:s,get_browser_support_info_tablet:r,get_browser_support_info_mobile:a,get_browser_support_info_widget:l,get_browser_support_robots:n,has_valid_ua_traits:c,compare_versions:u}},function(t,e){var i={LIGHT:"white",DARK:"black"},n={no_amp_links:!0,forced_bulk_stats:!0,blurred_preview:!0,big_card_images:!0,complaints_with_reasons:!0,pass_experiments:!0,video_providers:["yandex-web","youtube","youtube-web"],screen:{dpi:241},need_background_image:!0,color_theme:i.LIGHT,no_small_auth:!0,need_main_color:!0,need_zen_one_data:!0,screens:["feed","categories","profile","switchable_subs","suggest","blocked"]};t.exports={REZEN_COLOR_THEMES:i,DEFAULT_REZEN_ZEN_FEATURES:n}},function(t,e,i){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(o,s){try{var r=e[o](s),a=r.value}catch(l){return void i(l)}return r.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r,a=i(61),l=i(123),c=i(131),u=i(65),h=i(134),d=i(62),p=i(63),f=i(18),m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),g={GET_BEFORE_NETWORK:["default"],GET_AFTER_NETWORK:["default","reload"],PUT_AFTER_NETWORK:["default","reload","no-cache"]},v={host:null,clid:null,countryCode:null,zenFeatures:null,clientExperiments:null,retryTimeouts:[3e4,18e4],apiResponseValidator:function(){return null},links:(r={},s(r,f.a.ONBOARDING,null),s(r,f.a.MORE,null),s(r,f.a.BULK,null),s(r,f.a.SUBS,null),s(r,f.a.PROFILE,null),s(r,f.a.BLOCKED,null),s(r,f.a.CATEGORIES,null),r),userInfo:{oauthToken:null,login:null,deviceId:null,profileId:null,yandexuid:null},cache:{type:f.b.SESSION_CACHE,namespace:"common",isPrefetchEnabled:!0}},b=function(){function t(e){var i=this;o(this,t),this._config=v,this._mediator=new a.a,this._cache=new l.a(this),this._network=new c.a(this),this._queue=Promise.resolve(),this._lastUsedPackId=null,this._retryableGetApiResponse=Object(h.a)(function(t,e,n){return i._addToQueue(function(){return i._getApiResponse(t,e,n)})}),e?this.configure(e):this._updateTimeouts()}return _(t,[{key:"_getApiRequestUrl",value:function(t){if(t===f.a.EXPORT){var e=this._config,i=e.host,n=e.clid,o=e.countryCode;if(!i)throw new Error("ZenApi host is not configured.");return Object(u.a)(i+"api/v3/launcher/export",{clid:n,country_code:o})}var s=this._config.links[t];if(!s)throw new Error("ZenApi "+t+" url is not configured.");return s}},{key:"_getApiResponseFromNetworkAndMaybePutItToCache",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e,n,o,s,r,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this._getApiRequestUrl(t),n=l.cache||"default",i.next=4,this._network.makeApiRequest(e,l);case 4:return o=i.sent,s=m({},o,{received_at:Date.now()}),r=Object(d.a)(s),this._config.apiResponseValidator(r),a=g.PUT_AFTER_NETWORK.includes(n),this._config.cache&&a&&this._cache.putNotShownPack(t,s)["catch"](function(t){}),i.abrupt("return",{apiResponse:r,source:f.d.NETWORK});case 11:case"end":return i.stop()}},i,this)}));return t}()},{key:"_getApiResponseFromCacheBeforeNetwork",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e,n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._cache.getNotShownPack();case 2:if(e=i.sent,n=Object(d.a)(e.apiResponse),t!==f.a.MORE||e.type!==f.a.EXPORT){i.next=6;break}throw new Error("Can not apply cache from export to more request.");case 6:if(this._lastUsedPackId!==n.id){i.next=8;break}throw new Error("Pack '"+n.id+"' has already been used.");case 8:return i.abrupt("return",{apiResponse:n,source:f.d.CACHE_BEFORE_NETWORK});case 9:case"end":return i.stop()}},i,this)}));return t}()},{key:"_getApiResponseFromCacheAfterNetwork",value:function(){function t(){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,this._cache.getNotShownPack({byStoreTtl:!0});case 4:t=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e["catch"](1),e.next=11,this._cache.getLastShownPack({byStoreTtl:!0});case 11:t=e.sent;case 12:return e.abrupt("return",{apiResponse:Object(d.a)(t.apiResponse),source:f.d.CACHE_AFTER_NETWORK});case 13:case"end":return e.stop()}},i,this,[[1,7]])}));return t}()},{key:"_getApiResponse",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=o.cache||"default",n=void 0,!this._config.cache||!g.GET_BEFORE_NETWORK.includes(e)){i.next=11;break}return i.prev=3,i.next=6,this._getApiResponseFromCacheBeforeNetwork(t);case 6:n=i.sent,i.next=11;break;case 9:i.prev=9,i.t0=i["catch"](3);case 11:if(n){i.next=31;break}return i.prev=12,i.next=15,this._getApiResponseFromNetworkAndMaybePutItToCache(t,o);case 15:n=i.sent,i.next=31;break;case 18:if(i.prev=18,i.t1=i["catch"](12),!this._config.cache||t!==f.a.EXPORT||!g.GET_AFTER_NETWORK.includes(e)){i.next=29;break}return i.prev=21,i.next=24,this._getApiResponseFromCacheAfterNetwork();case 24:n=i.sent,i.next=29;break;case 27:i.prev=27,i.t2=i["catch"](21);case 29:if(n){i.next=31;break}throw i.t1;case 31:return s&&this._updateNotShownPack(),i.abrupt("return",n);case 33:case"end":return i.stop()}},i,this,[[3,9],[12,18],[21,27]])}));return t}()},{key:"_hasValidNotShownPackInCache",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getApiResponseFromCacheBeforeNetwork(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",!1);case 9:case"end":return e.stop()}},i,this,[[0,6]])}));return t}()},{key:"_updateNotShownPack",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.invalidate,o=void 0!==i&&i;this._config.cache&&this._config.cache.isPrefetchEnabled&&this._addToQueue(n(regeneratorRuntime.mark(function s(){var e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=f.a.MORE,i.t0=o,i.t0){i.next=6;break}return i.next=5,t._hasValidNotShownPackInCache(e);case 5:i.t0=!i.sent;case 6:if(!i.t0){i.next=15;break}return i.prev=7,i.next=10,t._getApiResponseFromNetworkAndMaybePutItToCache(e);case 10:i.next=15;break;case 12:i.prev=12,i.t1=i["catch"](7),console.warn("Failed to update 'not-shown' pack: '"+i.t1.message+"'.");case 15:case"end":return i.stop()}},s,t,[[7,12]])})))}},{key:"_updateTimeouts",value:function(){var t=this._config.retryTimeouts;this._retryableGetApiResponse.setOptions({timeouts:t})}},{key:"_addToQueue",value:function(t){var e=this._queue=this._queue.then(function(){return t()},function(){return t()});return e["catch"](function(t){}),e}},{key:"configure",value:function(t){this._config="function"==typeof t?t(this._config):t,this._updateTimeouts()}},{key:"getConfig",value:function(){return this._config}},{key:"getExport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._retryableGetApiResponse.startSession(m({},t,{args:[f.a.EXPORT,t.options,t.shouldUpdateCache]}))}},{key:"getMore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._retryableGetApiResponse.startSession(m({},t,{args:[f.a.MORE]}))}},{key:"getSimilar",value:function(t){return this._network.makeApiRequest(t).then(p.e)}},{key:"getSubs",value:function(){function t(){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(){var t,e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=this._getApiRequestUrl(f.a.SUBS),i.next=3,this._network.makeApiRequest(t);case 3:return e=i.sent,i.abrupt("return",Object(p.f)(e));case 5:case"end":return i.stop()}},i,this)}));return t}()},{key:"getProfile",value:function(){function t(){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(){var t,e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=this._getApiRequestUrl(f.a.PROFILE),i.next=3,this._network.makeApiRequest(t);case 3:return e=i.sent,i.abrupt("return",Object(p.d)(e));case 5:case"end":return i.stop()}},i,this)}));return t}()},{key:"getSuggest",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e,n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this._getApiRequestUrl(f.a.SUGGEST),i.next=3,this._network.makeApiRequest(e,{params:{search_text:t}});case 3:return n=i.sent,i.abrupt("return",Object(p.b)(n));case 5:case"end":return i.stop()}},i,this)}));return t}()},{key:"getCategories",value:function(){function t(){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(){var t,e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=this._getApiRequestUrl(f.a.CATEGORIES),i.next=3,this._network.makeApiRequest(t);case 3:return e=i.sent,i.abrupt("return",Object(p.a)(e));case 5:case"end":return i.stop()}},i,this)}));return t}()},{key:"getCategory",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._network.makeApiRequest(t);case 2:return e=i.sent,i.abrupt("return",Object(p.b)(e));case 4:case"end":return i.stop()}},i,this)}));return t}()},{key:"getBlocked",value:function(){function t(){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(){var t,e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=this._getApiRequestUrl(f.a.BLOCKED),i.next=3,this._network.makeApiRequest(t);case 3:return e=i.sent,i.abrupt("return",Object(p.b)(e));case 5:case"end":return i.stop()}},i,this)}));return t}()},{key:"invalidateCache",value:function(){this._updateNotShownPack({invalidate:!0})}},{key:"packUsed",value:function(t){this._lastUsedPackId=t}},{key:"packShown",value:function(t){var e=this;this._mediator.emit(f.c.PACK_SHOWN,t),this._config.cache&&this._addToQueue(n(regeneratorRuntime.mark(function i(){var n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=void 0,i.prev=1,i.next=4,e._cache.getNotShownPack();case 4:n=i.sent,i.next=9;break;case 7:i.prev=7,i.t0=i["catch"](1);case 9:if(!n){i.next=19;break}if(o=Object(d.a)(n.apiResponse),o.id!==t){i.next=19;break}return i.prev=12,i.next=15,Promise.all([e._cache.removeNotShownPack(),e._cache.putLastShownPack(n.type,n.apiResponse)]);case 15:i.next=19;break;case 17:i.prev=17,i.t1=i["catch"](12);case 19:e._updateNotShownPack();case 20:case"end":return i.stop()}},i,e,[[1,7],[12,17]])})))}},{key:"addListener",value:function(t,e){this._mediator.addListener(t,e)}},{key:"removeListener",value:function(t,e){this._mediator.removeListener(t,e)}}]),t}();e.a=b},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(){n(this,t),this._events={}}return o(t,[{key:"emit",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;e>n;n++)i[n-1]=arguments[n];if(this._events[t]){var o=this._events[t];o.forEach(function(t){var e=t.listener,n=t.context;e.apply(n,i)})}}},{key:"addListener",value:function(t,e,i){this._events[t]||(this._events[t]=[]),this._events[t].push({listener:e,context:i})}},{key:"removeListener",value:function(t,e){if(this._events[t])for(var i=this._events[t],n=i.length,o=0;n>o;o++)if(i[o].listener===e)return void i.splice(o,1);
}}]),t}();e.a=s},function(t,e,i){"use strict";var n=i(63),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s=function(t){var e=void 0;if(t.items){var i=t.items.reduce(function(e,i){return i&&e.push(o({},Object(n.c)(i),{packId:t.rid})),e},[]);e=i.length>0?i:null}else e=null;return o({},t,{id:t.rid,receivedAt:t.received_at,ttl:1e3*t.ttl,storeTtl:1e3*t.store_ttl,source:t.sf,items:e,experimentsData:t.experiments_data||null})};e.a=s},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return t+"_"+Math.random()*Date.now()}function s(t){return t.image&&!t.big_card_image,{id:t.id,type:b.b,ad:t.ad,domain:t.domain,domainTitle:t.domain_title,link:t.link,isPromoted:t.is_promoted,title:t.title||" ",text:t.text||" ",logo:t.logo,image:t.image,bigImage:t.big_card_image||t.image,blurredPreview:t.blurred_preview,cardBackgroundImage:t.card_background_image,cardBackgroundWhiteImage:t.card_background_white_image,cardColors:t.card_colors&&{card:t.card_colors.card,text:t.card_colors.text},mainColor:t.main_color,similarLink:t.similar.link,bulkParams:t.bulk_params,statEvents:t.stat_events,read:t.read,feedback:a(t),isSubscribed:t.is_favorited,customUserFeedbackData:v(t),pixels:t.pixels,rocket:!!t.zen_logo}}function r(t){var e=s(t);return e.type=b.g,e.isPromoNarrative="narrative_promo_text"===t.narrative_style,e}function a(t){var e=t.feedback_info;return e&&e.is_liked?"liked":e&&e.is_disliked?"disliked":null}function l(t){return t.image&&!t.big_card_image&&console.warn("no big_card_image",t),{id:t.id,type:b.l,domain:t.domain,domainTitle:t.domain_title,link:t.link,title:t.title||" ",text:t.text||" ",logo:t.logo,image:t.image,bigImage:t.big_card_image||t.image,blurredPreview:t.blurred_preview,video:w(t.video),stats:t.stats,cardColors:t.card_colors&&{card:t.card_colors.card,text:t.card_colors.text},mainColor:t.main_color,similarLink:t.similar.link,bulkParams:t.bulk_params,statEvents:t.stat_events,read:t.read,started:!1,feedback:a(t),pixels:t.pixels}}function c(t){return t.image&&!t.big_card_image&&console.warn("no big_card_image",t),{id:t.id,type:b.c,domain:t.domain,domainTitle:t.domain_title,link:t.link,title:t.title||" ",text:t.text||" ",logo:t.logo,image:t.image,bigImage:t.big_card_image||t.image,blurredPreview:t.blurred_preview,video:w(t.video),stats:t.stats,cardColors:t.card_colors&&{card:t.card_colors.card,text:t.card_colors.text},mainColor:t.main_color,similarLink:t.similar.link,bulkParams:t.bulk_params,statEvents:t.stat_events,read:t.read,feedback:a(t),isSubscribed:t.is_favorited}}function u(t){if(!t.items||!t.items[0]||!t.items[0].content)return console.error("Ad parsing error: "+JSON.stringify(t)),null;var e=t.items[0],i=e.content,n=e.stat_events,s=e.bulk_params,r=!1;if(i.image&&i.image.length){var a=y(i.image,3),l=(a[0],a[1]),c=a[2],u=l/c;u>4/3&&(r=!0)}return{id:o(b.a),type:b.a,url:i.url,showUrl:i.linkHead+i.linkTail,domain:i.domain,title:i.title||" ",text:i.body,age:i.age,warning:i.warning,image:i.image,isWideImage:r,statEvents:n,bulkParams:s}}function h(t){var e={id:o(b.e),type:t.type,sources:t.sources.map(function(t){return d(t,!1)}),stats:t.stats,moreButton:void 0,bulkParams:t.bulk_params,statEvents:t.stat_events};return t.more_button&&(e.moreButton={link:t.more_button.click}),e}function d(t,e){var i=t.source_id,n=t.link,o=t.image,s=t.background_color,r=t.text_color,a=t.name,l=t.name_background_color,c=t.stat_events,u=t.bulk_params,h=t.feed_link,d=t.status;return{id:i,url:n,bulkParams:u,statEvents:c,image:o,imageBackgroundColor:s,text:a,textColor:r,textBackgroundColor:l,feedLink:h,userSubscribed:e||"subscribed"===d,userBlocked:!e&&"blocked"===d}}function p(t){var e={title:t.title||" ",text:t.text||" ",link:t.link,domainTitle:t.domain_title,image:t.images&&t.images.horizontal,bulkParams:t.bulk_params,statEvents:t.stat_events,ad:t.ad,rocket:!!t.zen_logo};return t.hasOwnProperty("card_colors")?e.cardColors=t.card_colors:t.hasOwnProperty("main_color")&&(e.mainColor=t.main_color),e}function f(t){var e=[],i=[];return t.forEach(function(t){switch(t.type){case"small_card":e.push(p(t));break;case"ad":i.push(u(t))}}),{docs:e,direct:i}}function m(t){return{id:t.id,type:t.type,source:t.domain_title,title:t.title,link:t.link,items:t.items.map(_),bulkParams:t.bulk_params,statEvents:t.stat_events}}function _(t){return{id:t.id,title:t.title,link:t.link,image:t.image_squared,text:t.text||" ",info:t.info,bulkParams:t.bulk_params,statEvents:t.stat_events,colors:{text:t.card_colors.text,card:t.card_colors.card}}}function g(t){return{id:t.item_id.toString(),type:t.type,statEvents:t.stat_events,bulkParams:t.bulk_params}}function v(t){if(!t.custom_user_feedback_data)return null;try{return{questions:t.custom_user_feedback_data.questions.map(function(t){return{id:t.id,text:t.text,answers:t.answers.map(function(t){return{id:t.id,text:t.text}})}})}}catch(e){return console.warn("Error parsing custom_user_feedback_data",e),null}}i.d(e,"f",function(){return k}),i.d(e,"b",function(){return M}),i.d(e,"a",function(){return x}),i.d(e,"d",function(){return A}),i.d(e,"e",function(){return R});var b=i(128),y=function(){function t(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(l){o=!0,s=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(t){var e=t.has_sound,i=t.heartbeat_pos,n=t.id,o=t.loop,s=t.player,r=t.provider,a=t.userAgent,l=t.heartbeat,c=t.end;return{hasSound:e,heartbeatTimes:i,id:n,loop:o,player:s,provider:r,userAgent:a,heartbeatLink:l,endLink:c}},k=function(t){var e,i=t.items.filter(function(t){var e=t.type;return"subscriptions"===e}).map(function(t){return t.sources.filter(function(t){var e=t.empty;return!e}).map(function(t){return d(t,!0)})});return{channels:(e=[]).concat.apply(e,n(i))}},E=function(t){var e=t.id,i=t.type,n=t.item_type,o=(t.title,t.normal_title),s=t.subtitle,r=t.text,a=t.link,l=t.stat_events,c=t.image,u=t.status,h=t.bulk_params,d=t.feed_link,p=t.description;return{id:e,type:i,itemType:n,title:o,description:p,subtitle:s,text:r,link:a,statEvents:l,image:c,userSubscribed:"subscribed"===u,userBlocked:"blocked"===u,bulkParams:h,feedLink:d}},M=function(t){return{channels:t.items.map(E)}},x=function(t){var e=t.items.filter(function(t){var e=t.type;return"carousel"===e}).map(function(t){var e=t.sources;return e}),i=void 0;if(0!==e.length){var o;i=(o=[]).concat.apply(o,n(e)).map(function(t){return d(t,!1)})}var s=t.items.filter(function(t){var e=t.type;return"list_item"===e}).map(T);return{channels:i,list:s}},T=function(t){var e=t.link,i=t.title,n=t.image,o=t.name,s=t.stat_events,r=t.bulk_params;return{link:e,title:i,image:n,name:o,statEvents:s,bulkParams:r}},S=function(t){var e=t.email,i=t.name,n=t.avatar;return{email:e,name:i,avatar:n}},C=function(t){var e=t.count,i=t.external_url;return{count:e,externalUrl:i}},P=function(t){var e=t.country,i=t.external_url;return{country:e,externalUrl:i}},I=function(t){var e=t.external_url;return{externalUrl:e}},B=function(t){var e=t.stat_events,i=t.bulk_params,n=t.disabled;return{statEvents:e,bulkParams:i,disabled:n}},D={"no-user":I,"user-info":S,"blocked-count":C,language:P,feedback:I,eula:I,logout:I,video:B},O={"no-user":"noUser","user-info":"userInfo","blocked-count":"blockedCount"},A=function(t){var e=t.items.reduce(function(t,e){if(D.hasOwnProperty(e.type)){var i=O[e.type]||e.type;t[i]=D[e.type](e)}return t},{});return e.userInfo||e.noUser||console.error("Inconsistent profile data"),e},R=function(t){return{id:o(b.i),type:b.i,items:f(t.items)}},j=function(t){switch(t.type){case b.b:return t.video?l(t):s(t);case b.c:return c(t);case"ad":return u(t);case b.e:return h(t);case b.f:return m(t);case b.d:return t;case b.g:return r(t);case b.h:return g(t);case b.j:return parseSubscriptions(t);default:return console.warn("Unsupported doc type: "+t.type),null}};e.c=j},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={STAT:"stat",PLACEHOLDER_UNMOUNT:"placeholderUnmount",PLACEHOLDER:"placeholder",PLACEHOLDER_SHOW:"placeholderShow",PRECACHE_MISS:"precacheMiss",TIMINGS:"timings",FIRST_PAINT:"firstPaint",PROMO_CARD:"promoCard",ROWS_CHANGED:"rowsChanged",CACHE_PUT:"cachePut"}},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o=function(){function t(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(l){o=!0,s=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=/[?&]([^&#]*)/,r=function(t){var e={},i=t.indexOf("?");if(-1===i)return e;for(var n=i;;){var r=t.slice(n).match(s);if(!r)break;n+=r[0].length;var a=r[1].split("="),l=o(a,2),c=l[0],u=l[1],h=void 0===u?"":u;c&&(e[decodeURIComponent(c)]=decodeURIComponent(h))}return e},a=function(t){var e=Object.keys(t);return 0===e.length?"":e.reduce(function(e,i){if(!i)return e;var n=t[i]?t[i]:"",o=0===e.length?"?":"&";return""+e+o+encodeURIComponent(i)+"="+encodeURIComponent(n)},"")},l=function(t,e){var i=n({},r(t),e),o=t.indexOf("?"),s=t.indexOf("#"),l=-1!==s?s:t.length,c=-1!==o?o:l;return t.slice(0,c)+a(i)+t.slice(l)}},function(t,e,i){"use strict";e.a=function(t){return new Promise(function(e){return setTimeout(function(){return e()},t)})}},function(t,e,i){i(68),i(69),i(70),t.exports=i(71)},function(t,e,i){window.fetch||(window.fetch=i(31)["default"]||i(31))},function(t,e,i){"use strict";var n=window,o=function(t,e,i){function o(t){return a.body?t():void setTimeout(function(){o(t)})}function s(){l.addEventListener&&l.removeEventListener("load",s),l.media=i||"all"}var r,a=n.document,l=a.createElement("link");if(e)r=e;else{var c=(a.body||a.getElementsByTagName("head")[0]).childNodes;r=c[c.length-1]}var u=a.styleSheets;l.rel="stylesheet",l.href=t,l.media="only x",o(function(){r.parentNode.insertBefore(l,e?r:r.nextSibling)});var h=function d(t){for(var e=l.href,i=u.length;i--;)if(u[i].href===e)return t();setTimeout(function(){d(t)})};return l.addEventListener&&l.addEventListener("load",s),l.onloadcssdefined=h,h(s),l};n.loadCSS=o;var s=o.relpreload={};if(s.support=function(){try{return n.document.createElement("link").relList.supports("preload")}catch(t){return!1}},s.poly=function(){for(var t=n.document.getElementsByTagName("link"),e=0;e<t.length;e++){var i=t[e];"preload"===i.rel&&"style"===i.getAttribute("as")&&(n.loadCSS(i.href,i,i.getAttribute("media")),i.rel=null)}},!s.support()){s.poly();var r=n.setInterval(s.poly,300);n.addEventListener&&n.addEventListener("load",function(){s.poly(),n.clearInterval(r)}),n.attachEvent&&n.attachEvent("onload",function(){n.clearInterval(r)})}},function(t,e){function i(t,e,i){function n(){!s&&e&&(s=!0,e.call(t))}function o(){!s&&i&&(s=!0,i.call(t))}var s;t.addEventListener&&(t.addEventListener("load",n),t.addEventListener("error",o)),t.attachEvent&&(t.attachEvent("onload",n),t.attachEvent("onerror",o)),"isApplicationInstalled"in navigator&&"onloadcssdefined"in t&&t.onloadcssdefined(n)}window.onloadCSS=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(i(72),i(114)),o=(i.n(n),i(115)),s=i(19),r=i(120),a=i(30),l=function(){function t(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(l){o=!0,s=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();if(!window||!window.Promise)throw new s.d({message:"window and promise must exist for zen-lib-loader",owner:s.b,sourceType:s.c});var c="LOADING",u="LOADED",h="READY",d=h,p=function(t,e){if(!window[n.NAMESPACE]||!window[n.NAMESPACE].lib)throw new s.d({message:"Error with Zen Library init",owner:s.b,sourceType:s.c});var i=window[n.NAMESPACE].lib;return i.init(t,e),i},f=function(t){return Promise.resolve().then(function(){if(d===c)throw new s.d({message:"Loader is in progress already",owner:s.b,sourceType:s.c});if(d===u)throw new s.d({message:"Lib has been loaded already",owner:s.b,sourceType:s.c});var e=Object(o.a)(t),i=e.lang,n=e.host,a=e.exps,f=e.cache,m=e.precacheKey,_=e.precacheRid,g=e.initialDisplayedRowsNumber,v=e.libType,b=e.userInfo,y=e.teethType,w=e.zenFeatures,k=e.clid,E=e.countryCode,M=e.staticHost,x=e.version,T=e.buildName,S=e.bundleName,C=e.notifiersPosition,P=e.styles,I=e.isAdblock,B=e.isMobile,D={host:n,clid:k,countryCode:E,lang:i,zenFeatures:w,exps:a,initialDisplayedRowsNumber:g,cache:f,libType:v,userInfo:b,teethType:y,notifiersPosition:C,styles:P,isMobile:B};return d=c,Object(r.a)({libType:v,host:n,clid:k,countryCode:E,exps:a,staticHost:M,version:x,lang:i,buildName:T,bundleName:S,zenFeatures:w,cache:f,precacheKey:m,precacheRid:_,userInfo:b,isAdblock:I}).then(function(t){var e=l(t.loadedResources,3),i=(e[0],e[1],e[2]);return p(D,i)}).then(function(t){return d=u,t})["catch"](function(t){throw d=h,Object(s.f)(t)})})},m={create:f,on:function(t,e,i){a.a.addListener(t,e,i)},removeListener:function(t,e){a.a.removeListener(t,e)},trigger:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;e>n;n++)i[n-1]=arguments[n];a.a.emit(t,i)}};window[n.NAMESPACE]||(window[n.NAMESPACE]={}),window[n.NAMESPACE].loader=m},function(t,e,i){"use strict";var n=i(73),o=(i.n(n),i(79)),s=(i.n(o),i(81)),r=(i.n(s),i(85)),a=(i.n(r),i(87)),l=(i.n(a),i(88)),c=(i.n(l),i(109));i.n(c)},function(t,e,i){i(74),t.exports=i(3).Object.assign},function(t,e,i){var n=i(1);n(n.S+n.F,"Object",{assign:i(75)})},function(t,e,i){"use strict";var n=i(21),o=i(78),s=i(41),r=i(42),a=i(36),l=Object.assign;t.exports=!l||i(11)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=n})?function(t,e){for(var i=r(t),l=arguments.length,c=1,u=o.f,h=s.f;l>c;)for(var d,p=a(arguments[c++]),f=u?n(p).concat(u(p)):n(p),m=f.length,_=0;m>_;)h.call(p,d=f[_++])&&(i[d]=p[d]);return i}:l},function(t,e,i){var n=i(6),o=i(15),s=i(37)(!1),r=i(24)("IE_PROTO");t.exports=function(t,e){var i,a=o(t),l=0,c=[];for(i in a)i!=r&&n(a,i)&&c.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~s(c,i)||c.push(i));return c}},function(t,e,i){var n=i(23),o=Math.max,s=Math.min;t.exports=function(t,e){return t=n(t),0>t?o(t+e,0):s(t,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){i(80),t.exports=i(3).Array.includes},function(t,e,i){"use strict";var n=i(1),o=i(37)(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(43)("includes")},function(t,e,i){i(44),t.exports=i(3).String.includes},function(t,e,i){var n=i(83),o=i(16);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(o(t))}},function(t,e,i){var n=i(4),o=i(22),s=i(0)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==o(t))}},function(t,e,i){var n=i(0)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(o){}}return!0}},function(t,e,i){i(44),t.exports=i(86)("String").includes},function(t,e,i){var n=i(3);t.exports=function(t){var e=n[t];return e.virtual||e.prototype}},function(t,e){!function(e){"use strict";function i(t,e,i,n){var s=e&&e.prototype instanceof o?e:o,r=Object.create(s.prototype),a=new p(n||[]);return r._invoke=c(t,i,a),r}function n(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(n){return{type:"throw",arg:n}}}function o(){}function s(){}function r(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(i,o,s,r){var a=n(t[i],t,o);if("throw"!==a.type){var l=a.arg,c=l.value;return c&&"object"==typeof c&&v.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,s,r)},function(t){e("throw",t,s,r)}):Promise.resolve(c).then(function(t){l.value=t,s(l)},r)}r(a.arg)}function i(t,i){function n(){return new Promise(function(n,o){e(t,i,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=i}function c(t,e,i){var o=x;return function(s,r){if(o===S)throw new Error("Generator is already running");if(o===C){if("throw"===s)throw r;return m()}for(i.method=s,i.arg=r;;){var a=i.delegate;if(a){var l=u(a,i);if(l){if(l===P)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===x)throw o=C,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=S;var c=n(t,e,i);if("normal"===c.type){if(o=i.done?C:T,c.arg===P)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o=C,i.method="throw",i.arg=c.arg)}}}function u(t,e){var i=t.iterator[e.method];if(i===_){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=_,u(t,e),"throw"===e.method))return P;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var o=n(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,P;var s=o.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=_),e.delegate=null,P):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function f(t){if(t){var e=t[y];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function o(){for(;++i<t.length;)if(v.call(t,i))return o.value=t[i],o.done=!1,o;return o.value=_,o.done=!0,o};return n.next=n}}return{next:m}}function m(){return{value:_,done:!0}}var _,g=Object.prototype,v=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},y=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",k=b.toStringTag||"@@toStringTag",E="object"==typeof t,M=e.regeneratorRuntime;if(M)return void(E&&(t.exports=M));M=e.regeneratorRuntime=E?t.exports:{},M.wrap=i;var x="suspendedStart",T="suspendedYield",S="executing",C="completed",P={},I={};I[y]=function(){return this};var B=Object.getPrototypeOf,D=B&&B(B(f([])));D&&D!==g&&v.call(D,y)&&(I=D);var O=r.prototype=o.prototype=Object.create(I);s.prototype=O.constructor=r,r.constructor=s,r[k]=s.displayName="GeneratorFunction",M.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},M.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,r):(t.__proto__=r,k in t||(t[k]="GeneratorFunction")),t.prototype=Object.create(O),t},M.awrap=function(t){return{__await:t}},a(l.prototype),l.prototype[w]=function(){return this},M.AsyncIterator=l,M.async=function(t,e,n,o){var s=new l(i(t,e,n,o));return M.isGeneratorFunction(e)?s:s.next().then(function(t){return t.done?t.value:s.next()})},a(O),O[k]="Generator",O[y]=function(){return this},O.toString=function(){return"[object Generator]"},M.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},M.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=_)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return s.type="throw",s.arg=t,i.next=e,n&&(i.method="next",i.arg=_),!!n}if(this.done)throw t;for(var i=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var r=v.call(o,"catchLoc"),a=v.call(o,"finallyLoc");if(r&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(r){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),d(i),P}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var o=n.arg;d(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:f(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=_),P}}}(function(){return this}()||Function("return this")())},function(t,e,i){i(45),i(46),i(48),i(96),i(105),i(107),i(108),t.exports=i(3).Set},function(t,e,i){var n=i(23),o=i(16);t.exports=function(t){return function(e,i){var s,r,a=String(o(e)),l=n(i),c=a.length;return 0>l||l>=c?t?"":void 0:(s=a.charCodeAt(l),55296>s||s>56319||l+1===c||(r=a.charCodeAt(l+1))<56320||r>57343?t?a.charAt(l):s:t?a.slice(l,l+2):(s-55296<<10)+(r-56320)+65536)}}},function(t,e){t.exports=!1},function(t,e,i){"use strict";var n=i(47),o=i(20),s=i(27),r={};i(7)(r,i(0)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(r,{next:o(1,i)}),s(t,e+" Iterator")}},function(t,e,i){var n=i(8),o=i(9),s=i(21);t.exports=i(5)?Object.defineProperties:function(t,e){o(t);for(var i,r=s(e),a=r.length,l=0;a>l;)n.f(t,i=r[l++],e[i]);return t}},function(t,e,i){var n=i(2).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(6),o=i(42),s=i(24)("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},function(t,e,i){"use strict";var n=i(43),o=i(49),s=i(13),r=i(15);t.exports=i(26)(Array,"Array",function(t,e){this._t=r(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,i):"values"==e?o(0,t[i]):o(0,[i,t[i]])},"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";var n=i(50),o=i(28),s="Set";t.exports=i(54)(s,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(o(this,s),t=0===t?0:t,t)}},n)},function(t,e,i){var n=i(9);t.exports=function(t,e,i,o){try{return o?e(n(i)[0],i[1]):e(i)}catch(s){var r=t["return"];throw void 0!==r&&n(r.call(t)),s}}},function(t,e,i){var n=i(13),o=i(0)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||s[o]===t)}},function(t,e,i){var n=i(25),o=i(0)("iterator"),s=i(13);t.exports=i(3).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||s[n(t)]:void 0}},function(t,e,i){"use strict";var n=i(2),o=i(8),s=i(5),r=i(0)("species");t.exports=function(t){var e=n[t];s&&e&&!e[r]&&o.f(e,r,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(0)("iterator"),o=!1;try{var s=[7][n]();s["return"]=function(){o=!0},Array.from(s,function(){throw 2})}catch(r){}t.exports=function(t,e){if(!e&&!o)return!1;var i=!1;try{var s=[7],r=s[n]();r.next=function(){return{done:i=!0}},s[n]=function(){return r},t(s)}catch(a){}return i}},function(t,e,i){var n=i(4),o=i(103).set;t.exports=function(t,e,i){var s,r=e.constructor;return r!==i&&"function"==typeof r&&(s=r.prototype)!==i.prototype&&n(s)&&o&&o(t,s),t}},function(t,e,i){var n=i(4),o=i(9),s=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i(12)(Function.call,i(104).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,i){return s(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:s}},function(t,e,i){var n=i(41),o=i(20),s=i(15),r=i(34),a=i(6),l=i(32),c=Object.getOwnPropertyDescriptor;e.f=i(5)?c:function(t,e){if(t=s(t),e=r(e,!0),l)try{return c(t,e)}catch(i){}return a(t,e)?o(!n.f.call(t,e),t[e]):void 0}},function(t,e,i){var n=i(1);n(n.P+n.R,"Set",{toJSON:i(55)("Set")})},function(t,e,i){var n=i(17);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){i(56)("Set")},function(t,e,i){i(57)("Set")},function(t,e,i){i(45),i(46),i(48),i(110),i(111),i(112),i(113),t.exports=i(3).Map},function(t,e,i){"use strict";var n=i(50),o=i(28),s="Map";t.exports=i(54)(s,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(o(this,s),t);return e&&e.v},set:function(t,e){return n.def(o(this,s),0===t?0:t,e)}},n,!0)},function(t,e,i){var n=i(1);n(n.P+n.R,"Map",{toJSON:i(55)("Map")})},function(t,e,i){i(56)("Map")},function(t,e,i){i(57)("Map")},function(t,e){var i="YandexZen";t.exports={NAMESPACE:i}},function(t,e,i){"use strict";var n=i(18),o=i(19),s=i(116),r=i(117),a=i(59),l=(i.n(a),i(29)),c=i(119),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},h=function f(t){var e=t.libType,i=t.uatraits,s=t.useLegacy,r=t.isDev,a=e||Object(l.d)(i),h=l.c[a];if(!h)throw new o.d({message:"Passed libType is not exist.",owner:o.b,sourceType:o.c});Object(c.a)(t,a);var m=u({},l.a,h,t),_=m.uatraitsType,g=m.columnCount,v=m.isVideoDisabled,b=m.rowPlaceholders,y=m.theme,w=p(i,g,v,b,y),k=t.cache&&t.cache.api,E=k&&k.storeId,M=k&&k.userId,x=void 0;x=M?{type:n.b.MULTI_SESSION_CACHE,namespace:"lib-"+(E||"default-zen-store")+"-"+(M||"empty"),isPrefetchEnabled:!0}:null;var f=u({},l.a,h,t,{buildName:d({uatraits:i,uatraitsType:_,useLegacy:s,isDev:r}),precacheKey:t.cache&&t.cache.precacheKey||null,precacheRid:t.cache&&t.cache.precacheRid||null,zenFeatures:w,cache:x});return f},d=function(t){var e=t.uatraits,i=t.uatraitsType,n=t.useLegacy,r=t.isDev;if(r)return"dev";if(!e&&n)return"legacy";var a=Object(s.d)(e),l=a.isValid,c=a.error;if(!l)throw new o.d({message:"UATraits: "+c,owner:o.b,sourceType:o.c});var u=void 0;switch(i){case"desktop":u=s.a;break;case"tablet":u=s.c;break;case"mobile":u=s.b;break;default:throw new o.d({message:"No uatraits type",owner:o.b,sourceType:o.c})}var h=u(e),d=h.is_supported,p=h.build_name;if(!d)throw new o.d({message:"Zen Library does not support current browser",owner:o.b,sourceType:o.c});return p},p=function(t,e,i,n,o){var s=Object(r.a)({browserName:t&&t.BrowserName}),l=Object.assign({},a.DEFAULT_REZEN_ZEN_FEATURES,s,{column_count:e,row_placeholders:n,color_theme:o});return i&&(l.no_videos=!0,delete l.video_providers),l};e.a=h},function(t,e,i){"use strict";i.d(e,"c",function(){return o});var n=i(58);i.n(n),i.o(n,"get_browser_support_info_desktop")&&i.d(e,"a",function(){return n.get_browser_support_info_desktop}),i.o(n,"get_browser_support_info_mobile")&&i.d(e,"b",function(){return n.get_browser_support_info_mobile}),i.o(n,"has_valid_ua_traits")&&i.d(e,"d",function(){return n.has_valid_ua_traits});var o=function(t){var e=Object(n.get_browser_support_info_tablet)(t);if(e.is_supported)return e;var i=Object(n.get_browser_support_info_mobile)(t);return i.is_supported?i:e}},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i(118),o=i(59),s=(i.n(o),"MSIE"),r="Windows",a="6.1",l=function(t){var e=t.browserName,i=void 0===e?s:e,l=t.OSFamily,c=void 0===l?r:l,u=t.OSVersion,h=void 0===u?a:u,d=o.DEFAULT_REZEN_ZEN_FEATURES.video_providers.slice(0);return Object(n.a)()?{video_providers:d}:i!==s||c!==r||h!==a?{video_providers:d}:{video_providers:d.filter(function(t){return"yandex-web"!==t})}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(){try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(t)return!0}catch(e){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1}},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",function(){return h});var o=i(19),s=i(29),r=["clid","lang"],a=function(t,e){e.forEach(function(e){if(!(e in t))throw new o.d({message:"Option '"+e+"' is not found in loader params.",owner:o.b,sourceType:o.c})})},l=function(t){a(t,[])},c=function(t){if(a(t,r),!t.uatraits&&!t.isDev&&!t.useLegacy)throw new o.d({message:"'uatraits' or 'isDev' or 'useLegacy' options must be passed in loader params.",owner:o.b,sourceType:o.c})},u=n({},s.b.yabro,l),h=function(t,e){u[e]?u[e](t):c(t)}},function(t,e,i){"use strict";i.d(e,"a",function(){return E});var n=i(121),o=i(30),s=i(136),r=i(137),a=i(66),l=i(64),c=i(29),u=i(19),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},d=3e4,p="bundle",f="js",m="css",_="api",g=function(t){return"/"===t[t.length-1]?t.slice(0,-1):t},v=function(t,e){return g(t)+(e?"/"+e:"")},b=new r.a,y=function(t){var e=t.staticHost,i=t.version,n=t.lang,o=t.buildName,r=t.bundleName,a=t.isAdblock;b.start(f);var l=v(e,i)+"/"+r+"/"+r+"."+o+"."+n+"."+p+".js",c=a;return Object(s.a)(l,{invalidate:!0,crossorigin:!0,useCredentials:c}).then(function(){b.finish(f)})["catch"](function(){throw new u.d({message:"Failed to load js bundle "+o,owner:u.b,sourceType:u.e})})},w=function(t){var e=t.staticHost,i=t.version,n=t.bundleName;b.start(m);var o=v(e,i)+"/"+n+"/"+n+".css";return new Promise(function(t,e){var i=window.loadCSS(o);window.onloadCSS(i,function(){b.finish(m),t()},function(){e(new u.d({message:"Failed to load css",owner:u.b,sourceType:u.e}))})})},k=function(t){var e=t.host,i=t.clid,s=t.countryCode,r=t.exps,a=t.zenFeatures,c=t.cache,d=t.precacheKey,p=t.precacheRid,f=t.userInfo;b.start(_),n.a.configure(function(t){return h({},t,{host:e,clid:i,countryCode:s,zenFeatures:a,cache:c,clientExperiments:r,withoutRetries:!0,retryTimeouts:null,userInfo:h({},t.userInfo,f)})});var m=n.a.getExport({options:{params:d?{key:d}:null,cache:d?"reload":"default",headers:p?{"zen-request-id":p}:null},shouldUpdateCache:!1});return m.retriesResult.then(function(t){var e=t.apiResponse;return b.finish(_),d&&e&&"cache"!==e.source&&o.a.emit(l.a.PRECACHE_MISS,{key:d,rid:p}),e})["catch"](function(t){var e=t.toString();throw new u.d({message:"Failed to fetch data from API. Reason: "+e,owner:u.a,
sourceType:-1!==e.indexOf("fetch")?u.e:u.c})})},E=function(t){var e=t.libType,i=t.host,n=t.clid,s=t.countryCode,r=t.exps,h=t.staticHost,p=t.version,f=t.lang,m=t.buildName,_=t.bundleName,g=t.zenFeatures,v=t.cache,E=t.precacheKey,M=t.precacheRid,x=t.userInfo,T=t.isAdblock;return new Promise(function(t,S){var C=e===c.b.yabro?null:k({host:i,clid:n,countryCode:s,exps:r,zenFeatures:g,cache:v,precacheKey:E,precacheRid:M,userInfo:x});Promise.race([Object(a.a)(d).then(function(){S(new u.d({message:"Timeout reached while loading critical resources",owner:u.a,sourceType:u.e}))}),Promise.all([y({staticHost:h,version:p,lang:f,buildName:m,bundleName:_,isAdblock:T}),w({staticHost:h,version:p,bundleName:_}),C])]).then(function(e){o.a.emit(l.a.TIMINGS,b.getResults()),t({loadedResources:e})})["catch"](function(t){S(t)})})}},function(t,e,i){"use strict";var n=i(122),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s=function(t){if(!(t.items&&t.more&&t.more.link&&t.bulk&&t.bulk.link)){var e="Invalid response from ZenApi"+(t.message?": '"+t.message+"'":"")+".",i=new Error(e);throw t.ttl&&(i.ttl=t.ttl),i}},r=new n.a(function(t){return o({},t,{apiResponseValidator:s})});e.a=r},function(t,e,i){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(o,s){try{var r=e[o](s),a=r.value}catch(l){return void i(l)}return r.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=i(60),l=i(135),c=i(18),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),d=function b(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:b(o,e,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},p=1e3,f=function(t){return t+"_"+Date.now()},m=function(t){return{stats:t.map(function(t){var e=t.event,i=t.params,n=t.ts,o=t.info,s={event:e,data:i,ts:n};return o&&(s.info=o),s}),bulk_ts:Date.now()}},_=function(){var t=void 0,e=void 0,i=0,n=0,o=!1,s=new Promise(function(e){t=e}),r=new Promise(function(t){e=t}),a=function(){o=!0,e()},l=function(){return t(),n===i&&a(),r},c=function(){n++,n===i&&a()},u=function(t){o||(i++,s.then(t).then(c,c))};return{trigger:l,extend:u}},g=Object(l.a)(),v=function(t){function e(){var t,i,n,r;o(this,e);for(var a=arguments.length,l=Array(a),c=0;a>c;c++)l[c]=arguments[c];return i=n=s(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),n._bulkEvents=[],n._sendingTimeoutId=null,n._bulkEventBatch=null,r=i,s(n,r)}return r(e,t),h(e,[{key:"_getApiResponseFromNetworkAndMaybePutItToCache",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e,n,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(g&&this._sendBulkEventsWithinQueue(),!g&&0!==this._bulkEvents.length&&!s.body){i.next=3;break}return i.abrupt("return",a.a.prototype._getApiResponseFromNetworkAndMaybePutItToCache.call(this,t,s));case 3:return e=this._bulkEvents,n=m(e),o=u({},s,{body:n}),this._bulkEvents=[],i.prev=7,i.abrupt("return",a.a.prototype._getApiResponseFromNetworkAndMaybePutItToCache.call(this,t,o));case 11:throw i.prev=11,i.t0=i["catch"](7),this._bulkEvents=this._bulkEvents.concat(e),i.t0;case 15:case"end":return i.stop()}},i,this,[[7,11]])}));return t}()},{key:"_addToQueue",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i&&(this._bulkEventBatch=null),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addToQueue",this).call(this,t)}},{key:"_sendBulkEvents",value:function(){function t(){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(){var t,e,n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==this._bulkEvents.length){i.next=2;break}return i.abrupt("return");case 2:return t=this._getApiRequestUrl(c.a.BULK),e=this._bulkEvents,n=m(e),this._bulkEvents=[],i.prev=6,i.next=9,this._network.makeApiRequest(t,{body:n});case 9:i.next=15;break;case 11:throw i.prev=11,i.t0=i["catch"](6),this._bulkEvents=this._bulkEvents.concat(e),i.t0;case 15:case"end":return i.stop()}},i,this,[[6,11]])}));return t}()},{key:"_planBulkEventsSending",value:function(){var t=this;null===this._sendingTimeoutId&&(this._sendingTimeoutId=setTimeout(function(){t._sendingTimeoutId=null,t._sendBulkEventsWithinQueue()},p))}},{key:"_sendBulkEventsWithinQueue",value:function(){var t=this;if(!this._bulkEventBatch){var e=this._bulkEventBatch=_();this._addToQueue(function(){return e.trigger().then(function(){t._bulkEventBatch===e&&(t._bulkEventBatch=null)})},!1)}this._bulkEventBatch&&this._bulkEventBatch.extend(function(){return t._sendBulkEvents()})}},{key:"logBulkEvent",value:function(t){var e=t.event,i=t.bulkParams,n=t.statMeta,o=t.info,s={id:f(e),event:e,params:i,ts:Date.now(),info:o};this._bulkEvents.push(s),this._planBulkEventsSending(),this._mediator.emit(c.c.BULK_EVENT_LOGGED,u({},s,{statMeta:n}))}},{key:"logNonBulkEvent",value:function(t,e){return this._network.makeApiRequest(t,{body:e})}}]),e}(a.a);e.a=v},function(t,e,i){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(o,s){try{var r=e[o](s),a=r.value}catch(l){return void i(l)}return r.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var r=i(124),a=i.n(r),l=i(125),c=i(126),u=i(62),h=i(129),d=i(18),p=i(30),f=i(64),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_="not-shown-pack",g="last-shown-pack",v=function(t){if(!(t&&t.type&&t.apiResponse&&t.params))throw new Error("Invalid cache record scheme.")},b=function(t,e){var i=t.receivedAt,n=t.ttl,o=t.storeTtl,s=e?o:n,r="number"==typeof i&&"number"==typeof s&&i+s>Date.now();if(!r)throw new Error("Invalid cache "+(e?"store-ttl":"ttl")+".")},y=function(t){if(!t.items)throw new Error("Invalid api response to put in cache.")},w=function(t,e){var i=[];return t&&Array.isArray(t.clientExperiments)&&i.push.apply(i,s(t.clientExperiments)),e.experimentsData&&Object.keys(e.experimentsData).forEach(function(t){var n=e.experimentsData[t];n&&n.exp&&i.push(t)}),i},k=function(t){var e=t.clid,i=t.countryCode,n=t.clientExperiments,o=t.userInfo,s=t.zenFeatures,r=o.oauthToken,a=o.login,l=o.deviceId,c=o.profileId,u=o.yandexuid,d=r||a||Object(h.a)()||l||c||u||Object(h.b)();return{clid:e,countryCode:i,clientExperiments:n,userId:d,zenFeatures:s}},E=function(t,e,i){var n=t&&t.userId&&e&&e.userId&&t.userId===e.userId&&("number"!=typeof t.clid||t.clid===e.clid)&&("string"!=typeof t.countryCode||t.countryCode===e.countryCode)&&a()(t.zenFeatures,e.zenFeatures),o=!0;if(t&&Array.isArray(t.clientExperiments)){var s=w(e,i);o=t.clientExperiments.every(function(t){return s.includes(t)})}if(!n||!o)throw new Error("ZenApi cache is not valid.")},M=function(){function t(e){o(this,t),this._zenApi=e}return m(t,[{key:"_getStorage",value:function(){var t=this._zenApi.getConfig();if(t.cache)switch(t.cache.type){case d.b.MULTI_SESSION_CACHE:if(c.a.isEnabled())return c.a;if(l.a.isEnabled())return l.a;break;case d.b.SESSION_CACHE:if(l.a.isEnabled())return l.a}throw new Error("ZenApi cache is not enabled.")}},{key:"_getRecordKey",value:function(t){var e=this._zenApi.getConfig(),i=e.cache&&e.cache.namespace;if(!i)throw new Error("ZenApi cache.namespace is not configured.");return i+"-"+t}},{key:"_get",value:function(){function t(t,i){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t,e){var n,o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=this._getStorage(),o=this._getRecordKey(t),i.next=4,n.get(o);case 4:return s=i.sent,this.validateRecord(s,e),i.abrupt("return",s);case 7:case"end":return i.stop()}},i,this)}));return t}()},{key:"_put",value:function(){function t(t,i,n){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t,e,n){var o,s,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=this._getStorage(),s=this._getRecordKey(t),r=this.createRecord(e,n),i.next=5,o.put(s,r);case 5:p.a.emit(f.a.CACHE_PUT,n);case 6:case"end":return i.stop()}},i,this)}));return t}()},{key:"_remove",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e,n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this._getStorage(),n=this._getRecordKey(t),i.next=4,e.remove(n);case 4:case"end":return i.stop()}},i,this)}));return t}()},{key:"createRecord",value:function(t,e){var i=this._zenApi.getConfig(),n=i.apiResponseValidator,o=Object(u.a)(e),s=k(i);return y(o),n(o),{type:t,apiResponse:e,params:s}}},{key:"validateRecord",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.byStoreTtl,n=void 0!==i&&i;v(t);var o=this._zenApi.getConfig(),s=o.apiResponseValidator,r=Object(u.a)(t.apiResponse),a=k(o);b(r,n),E(a,t.params,r),y(r),s(r)}},{key:"getNotShownPack",value:function(t){return this._get(_,t)}},{key:"getLastShownPack",value:function(t){return this._get(g,t)}},{key:"putNotShownPack",value:function(t,e){return this._put(_,t,e)}},{key:"putLastShownPack",value:function(t,e){return this._put(g,t,e)}},{key:"removeNotShownPack",value:function(){return this._remove(_)}},{key:"removeLastShownPack",value:function(){return this._remove(g)}}]),t}();e.a=M},function(t,e,i){"use strict";t.exports=function n(t,e){if(t===e)return!0;var i,o=Array.isArray(t),s=Array.isArray(e);if(o&&s){if(t.length!=e.length)return!1;for(i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}if(o!=s)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){var r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;var a=t instanceof Date,l=e instanceof Date;if(a&&l)return t.getTime()==e.getTime();if(a!=l)return!1;var c=t instanceof RegExp,u=e instanceof RegExp;if(c&&u)return t.toString()==e.toString();if(c!=u)return!1;for(i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=0;i<r.length;i++)if(!n(t[r[i]],e[r[i]]))return!1;return!0}return!1}},function(t,e,i){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(o,s){try{var r=e[o](s),a=r.value}catch(l){return void i(l)}return r.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}var o=this,s={},r=function(){var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s[t]);case 1:case"end":return e.stop()}},e,o)}));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=n(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s[t]=i;case 1:case"end":return e.stop()}},e,o)}));return function(e,i){return t.apply(this,arguments)}}(),l=function(){var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:delete s[t];case 1:case"end":return e.stop()}},e,o)}));return function(e){return t.apply(this,arguments)}}(),c=function(){return!0},u={get:r,put:a,remove:l,isEnabled:c};e.a=u},function(t,e,i){"use strict";var n=i(127),o=function(t){return n.a.get(t)},s=function(t,e){return n.a.set(t,e)},r=function(t){return n.a["delete"](t)},a=function(){return"undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)},l={get:o,put:s,remove:r,isEnabled:a};e.a=l},function(t,e,i){"use strict";function n(){return a?(l||(l=new Promise(function(t,e){var i=a.open(s,1);i.onerror=function(){e(i.error)},i.onupgradeneeded=function(){i.result.createObjectStore(r)},i.onsuccess=function(){t(i.result),i.result.onclose=function(){l=null}}})),l):Promise.reject(new Error("indexedDB is not supported."))}function o(t,e){return n().then(function(i){return new Promise(function(n,o){var s=i.transaction(r,t);s.oncomplete=function(){n()},s.onerror=function(){o(s.error)},e(s.objectStore(r))})})}var s="zen-db",r="zen-api-cache",a="undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),l=void 0,c={get:function(t){var e=void 0;return o("readonly",function(i){e=i.get(t)}).then(function(){return e.result})},set:function(t,e){return o("readwrite",function(i){i.put(e,t)})},"delete":function(t){return o("readwrite",function(e){e["delete"](t)})},clear:function(){return o("readwrite",function(t){t.clear()})},keys:function u(){var u=[];return o("readonly",function(t){var e=t.openKeyCursor?t.openKeyCursor():t.openCursor();e.onsuccess=function(){e.result&&(u.push(e.result.key),e.result["continue"]())}}).then(function(){return u})}};e.a=c},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"b",function(){return d}),i.d(e,"a",function(){return p}),i.d(e,"d",function(){return f}),i.d(e,"e",function(){return m}),i.d(e,"i",function(){return _}),i.d(e,"f",function(){return g}),i.d(e,"l",function(){return v}),i.d(e,"c",function(){return b}),i.d(e,"g",function(){return y}),i.d(e,"h",function(){return w}),i.d(e,"k",function(){return k}),i.d(e,"j",function(){return E});var o,s,r,a,l="one_column",c="two_column",u="two_column_small_cards",h="three_column",d="card",p="direct",f="hint_eula",m="iceboarding-grid",_="similar",g="magic_card",v="video",b="gif",y="story",w="placeholder",k="user-feedback-question",E="subscriptions",M="small",x="big",T="free ";new Set([_,k]),a={},n(a,l,{columnCount:1,layoutableTypes:[d,b,v,p,f,m,_,g,y],availableSizes:(o={},n(o,d,[M]),n(o,p,[M]),n(o,f,[M]),n(o,m,[M]),n(o,_,[M]),n(o,g,[M]),n(o,b,[M]),n(o,v,[M]),n(o,y,[M]),n(o,k,[M]),o),initialDisplayedRowsNumber:6,rowDisplayStep:8}),n(a,c,{columnCount:2,layoutableTypes:[v],availableSizes:n({},v,[x])}),n(a,u,{columnCount:2,layoutableTypes:[v],availableSizes:(s={},n(s,d,[M]),n(s,p,[M]),n(s,f,[M]),n(s,m,[M]),n(s,_,[M]),n(s,g,[M]),n(s,b,[M]),n(s,y,[M]),n(s,v,[M]),n(s,k,[M]),s)}),n(a,h,{columnCount:3,availableSizes:n({},v,[T])}),n(a,"common",{layoutableTypes:[d,p,g,b,y],availableSizes:(r={},n(r,d,[M,x]),n(r,p,[M]),n(r,f,[T]),n(r,m,[T]),n(r,_,[T]),n(r,g,[x]),n(r,b,[M]),n(r,y,[M]),n(r,w,[T]),n(r,k,[T]),r),initialDisplayedRowsNumber:6,rowDisplayStep:9}),a},function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return s});var n=i(130),o=(i.n(n),function(){var t="; "+document.cookie,e=t.match(/; yandexuid=([^;]*)/);return e&&e[1]}),s=function(){var t="; "+document.cookie,e=t.match(/; yandex_login=([^;]*)/);return e&&e[1]}},function(t,e,i){var n,o;!function(s){var r=!1;if(n=s,o="function"==typeof n?n.call(e,i,e,t):n,!(void 0!==o&&(t.exports=o)),r=!0,t.exports=s(),r=!0,!r){var a=window.Cookies,l=window.Cookies=s();l.noConflict=function(){return window.Cookies=a,l}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,o,s){var r;if("undefined"!=typeof document){if(arguments.length>1){if(s=t({path:"/"},n.defaults,s),"number"==typeof s.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}s.expires=s.expires?s.expires.toUTCString():"";try{r=JSON.stringify(o),/^[\{\[]/.test(r)&&(o=r)}catch(l){}o=i.write?i.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var c="";for(var u in s)s[u]&&(c+="; "+u,s[u]!==!0&&(c+="="+s[u]));return document.cookie=e+"="+o+c}e||(r={});for(var h=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<h.length;p++){var f=h[p].split("="),m=f.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var _=f[0].replace(d,decodeURIComponent);if(m=i.read?i.read(m,_):i(m,_)||m.replace(d,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(l){}if(e===_){r=m;break}e||(r[_]=m)}catch(l){}}return r}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e(function(){})})},function(t,e,i){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(o,s){try{var r=e[o](s),a=r.value}catch(l){return void i(l)}return r.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(132),a=(i(60),i(133)),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function(){function t(e){s(this,t),this._zenApiInstance=e}return c(t,[{key:"_getExtraHeaders",value:function(){var t={},e=this._zenApiInstance.getConfig(),i=e.userInfo,n=e.zenFeatures,s=e.clientExperiments;return i.oauthToken&&(t.Authorization="OAuth "+i.oauthToken),Object.keys(n).length>0&&(t["Zen-Features"]=JSON.stringify(n)),t["Zen-Client-Experiments"]=["zen-version:"+a.a].concat(o(Array.isArray(s)&&s.length>0?s:[])).join(", "),t}},{key:"makeApiRequest",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function i(t){var e,n,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this._getExtraHeaders(),n={params:s.params,headers:l({},e,s.headers)},o=void 0,!s.body){i.next=9;break}return i.next=6,Object(r.b)(t,l({},n,{body:s.body}));case 6:o=i.sent,i.next=12;break;case 9:return i.next=11,Object(r.a)(t,n);case 11:o=i.sent;case 12:return i.abrupt("return",o);case 13:case"end":return i.stop()}},i,this)}));return t}()}]),t}();e.a=u},function(t,e,i){"use strict";i.d(e,"a",function(){return d}),i.d(e,"b",function(){return p});var n=i(65),o=i(66),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r="application/json; charset=utf-8",a={credentials:"include",timeout:6e4},l={Accept:r},c=function(t){var e=t.headers.get("Content-Type");return e&&-1!==e.indexOf(r)?t.json():t.text()},u=function(t){var e=t.ok,i=t.url,n=t.status,o=t.statusText;if(!e)throw new Error(i+" "+n+" ("+o+")");return c(t)},h=function(t,e){var i=s({},a,e),r=i.params?Object(n.a)(t,i.params):t;return new Promise(function(t,e){fetch(r,i).then(u).then(t,e),Object(o.a)(i.timeout).then(function(){e(new Error("Request timeout."))})})},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s({},e,{method:"GET",params:s({},e.params||{},{rnd:Date.now()})});return h(t,i)},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s({},l,e.headers),n=e.body;i["Content-Type"]||(i["Content-Type"]=r,n&&"string"!=typeof n&&(n=JSON.stringify(n)));var o=s({},e,{method:"POST",headers:i,body:n});return h(t,o)}},function(t,e,i){"use strict";var n="2.5.308";e.a=n},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s={timeouts:[5e3,1e4,15e3]},r=function(t){return Array.isArray(t)?function(e){return e<t.length?t[e]:null}:"function"!=typeof t?function(){return t}:t},a=function(t){return"function"!=typeof t?function(){return t}:t},l=function(t,e){return t.then(function(t){return e(t),t},function(t){throw e(t),t})},c=function(t,e){var i=void 0,c=void 0,u=function(t){i=o({},s,t)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.args,s=e.timeouts,u=void 0===s?i.timeouts:s,h=e.withoutAction,d=void 0!==h&&h,p=e.withoutRetries,f=void 0!==p&&p,m=e.onTryComplete,_=void 0===m?function(t){if(t.isRejected)throw t.error;return t.value}:m,g=a(o),v=r(u),b=void 0,y=0,w=!1,k=!1,E=void 0,M=function(){return b===c},x=function(){return!w&&!k},T=function(){return!f&&x()&&M()},S=function(t){return new Promise(function(e,i){E=function(){E=null,i(new Error("Retries aborted."))},setTimeout(function(){E=null,e()},t)})},C=function(){x()&&(E&&E(),k=!0)},P=function(){var e=g(y),i=void 0;return Array.isArray(e)?i=t.apply(void 0,n(e)):(null!=e&&console.warn("Expected action arguments to be an array or null/undefined."),i=t()),i.then(function(t){return _({value:t,tryNumber:y,isFulfilled:!0,isRejected:!1,isLastSession:M,abortRetries:C})},function(t){return _({error:t,tryNumber:y,isFulfilled:!1,isRejected:!0,isLastSession:M,abortRetries:C})})},I=function O(t){if(T()){var e=v(y);if("number"==typeof e)return y++,S(e).then(function(){if(T())return P()["catch"](O);throw t});null!=e&&console.warn("Expected action timeout to be a number or null/undefined.")}throw t},B=d?Promise.reject(new Error("Generated error by 'withoutAction' call.")):P(),D=l(B["catch"](I),function(){w=!0});return c&&c.abortRetries(),c=b={actionResult:B,retriesResult:D,isLastSession:M,isInProgress:x,abortRetries:C}};u(e);var d=function(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];return h({args:e})};return d.startSession=h,d.setOptions=u,d};e.a=c},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(){return"undefined"!=typeof document?Boolean(document.cookie.match(new RegExp(atob("Ymx0c3I9MQ==")))):void 0}},function(t,e,i){"use strict";var n={},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.invalidate,o=void 0!==i&&i,s=e.crossorigin,r=void 0!==s&&s,a=e.useCredentials,l=void 0!==a&&a;if(n[t]&&!o)return n[t].promise;var c=document.createElement("script");c.src=t,c.async=!0,r&&(l?c.crossOrigin="use-credentials":c.crossOrigin="anonymous");var u=new Promise(function(e,i){c.onload=function(){n[t].loaded=!0,e()},c.onerror=function(e){n[t].error=e,i(e)}});return n[t]&&document.head&&document.head.removeChild(n[t].script),document.head&&document.head.appendChild(c),n[t]={script:c,promise:u,loaded:!1,error:null},u};o.isRequested=function(t){return Boolean(n[t])},o.isLoaded=function(t){return Boolean(n[t]&&n[t].loaded)},o.isFailed=function(t){return Boolean(n[t]&&n[t].error)},e.a=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(){n(this,t),this.starts={},this.results={}}return o(t,[{key:"start",value:function(t){this.starts[t]||this.results[t]||(this.starts[t]=Date.now())}},{key:"finish",value:function(t){this.starts[t]&&!this.results[t]&&(this.results[t]=Date.now()-this.starts[t])}},{key:"getResults",value:function(){return Object.assign({},this.results)}}]),t}();e.a=s}])}}),BEM.decl("blender-logger",{},{MAX_ZEN_ROW_COUNT:50,initBlock:function(){this._mediaRows=this._getMediaRows(),this._zenRows=[],this._zenInserter=BEM.blocks["zen-inserter"]},_getMediaRows:function(){var t=$(".media-grid__media-content>[data-blockname]"),e=[];return t.each(function(){var t=$(this),i=t.attr("data-blockname"),n=0;i&&t.is(":visible")&&(n=Math.floor(t.outerHeight(!0))),e.push({name:i,height:n})}),e},updateZenRowsAndSendStat:function(t){var e=this._getDefaultZenRowHeight(),i=this._zenInserter.ZEN_ROW_FOR_BLENDER;this._zenRows=t.map(function(t,n){return t.name===i?{name:t.name+".row"+n,height:e}:t}),this._sendStat()},_getDefaultZenRowHeight:function(){var t=336;if(this._defaultZenRowHeight)return this._defaultZenRowHeight;var e=$(".feed__row").first();return this._defaultZenRowHeight=e.length?e.outerHeight(!0):t,this._defaultZenRowHeight},_sendStat:function(){var t=[];t=t.concat(this._mediaRows),t=t.concat(this._zenRows),t.length>this.MAX_ZEN_ROW_COUNT&&(t=t.slice(0,this.MAX_ZEN_ROW_COUNT));var e=t.map(function(t){var e=home.view("zen-inserter__convert-to-stat-format",t.name);return e+"="+t.height}).join(",");home.stat.logPath("media_services_height",e)}}),BEM.DOM.decl({block:"collections",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard"]},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._scrollThrottledHandler=home.throttle(function(){this._loadVisibleImages(this._$panel)}.bind(this),this.__self._scrollLoadImageThrottle),this.elem("wrap").on("scroll",this._scrollThrottledHandler),this._onPanelChange(this._selectedKey,this.elem("panel"))}}},_getPanelHTML:function(t,e){return home.view("collections__panel",{list:e.list,title:e.title,id:t,logShow:t!==this._defaultKey})},_initialLoadImages:function(){},_loadVisibleImages:function(t){var e,i,n,o,s=this.findElem(t||this.domElem,"wrap"),r=s.scrollLeft(),a=s.width()+r+100;"channels"===this._selectedKey?(e=Math.ceil(a/this.__self._itemWidth),i=this.findElem(t||this.domElem,"item"),o=i.slice(0,e)):(n=this.findElem("column"),n=n.filter(function(){var t=$(this),e=t.outerWidth()+parseInt(t.css("margin-right"),10);return a>0?(a-=e,!0):void 0}),o=n.find(".collections__feed-item")),home.stat.logDOMShow(o,{visibilityCheck:!1}),this._loadImages(o)},_onPanelDraw:function(t,e){this.findElem(e,"wrap").on("scroll",this._scrollThrottledHandler)},_onPanelChange:function(t,e){this.__base.apply(this,arguments),this._loadVisibleImages(e),this.findBlockInside("carousel").setScrollMod(),this._calcOverflow(e)},_toggleMountPanel:function(t,e,i){i?this.__base.apply(this,arguments):e.detach()}},{_itemWidth:187,_scrollLoadImageThrottle:200}),BEM.DOM.decl("insert-loader",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.channel("i-reposition-event").on("reposition",this._onScroll,this),this._onScroll(null,BEM.DOM.win.scrollTop()),home.stat.logPath("show",this.__self.getName()+".loading")}},state:function(t,e){home.stat.logPath("show",this.__self.getName()+"."+e)}},_getDataUrl:function(){},_selectData:function(){},_checkData:function(){},_getHTML:function(){},_onScroll:function(t,e){var i=this.domElem.offset().top;e+BEM.DOM.win.height()>i-this.__self._initOffset&&(this.channel("i-reposition-event").un("reposition",this._onScroll,this),this._loadBlockData())},_loadBlockData:function(){$.ajax({url:this._getDataUrl(),xhrFields:{withCredentials:!0},dataType:"json",timeout:15e3}).then(function(t){return this._checkData(t)?void this._drawBlock(this._selectData(t)):$.Deferred().reject("Incorrect data")}.bind(this)).fail(function(t){home.error.logError({block:this.__self.getName(),message:t}),this.setMod("state","retry")}.bind(this))},_drawBlock:function(t){home.stat.logPath("tech",this.__self.getName()+".loaded"),t=$.extend(t,{retryButtonTheme:this.params.retryButtonTheme}),BEM.DOM.replace(this.domElem,this._getHTML(t))},_onRetryClick:function(){this.setMod("state","loading"),this._loadBlockData()}},{_initOffset:300,live:function(){return this.liveBindTo("retry-button","click",function(){return this._onRetryClick(),!1}),!1}}),BEM.DOM.decl({block:"collections-loader",baseBlock:"insert-loader"},{_getDataUrl:function(){return"/portal/api/data/1/?block=collections&content=api_data_big&limit=15&feed_top_size=20&lang="+this.params.locale},_checkData:function(t){return t.block&&t.block[0]&&t.block[0].data&&t.block[0].data.list&&t.block[0].data.list.length>=2},_selectData:function(t){return t.block[0].data},_getHTML:function(t){return home.view("collections",t)}}),function(){function t(t){var e="#"===t.charAt(0)?t.slice(1):t,i=6===e.length?[e.slice(0,2),e.slice(2,4),e.slice(4,6)]:[e.slice(0,1)+e.slice(0,1),e.slice(1,2)+e.slice(1,2),e.slice(2,3)+e.slice(2,3)];return i=i.map(function(t){return parseInt(t,16)}),{r:i[0],g:i[1],b:i[2]}}function e(t){var e,i,n=t.r/255,o=t.g/255,s=t.b/255,r=Math.max(n,o,s),a=Math.min(n,o,s),l=(r+a)/2;if(r===a)e=i=0;else{var c=r-a;switch(i=l>.5?c/(2-r-a):c/(r+a),r){case n:e=(o-s)/c+(s>o?6:0);break;case o:e=(s-n)/c+2;break;case s:e=(n-o)/c+4}e/=6}return{h:e,s:i,l:l}}function i(t){var e,i,n,o=t.h,s=t.s,r=t.l;if(0===s)e=i=n=r;else{var a=function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t},l=.5>r?r*(1+s):r+s-r*s,c=2*r-l;e=a(c,l,o+1/3),i=a(c,l,o),n=a(c,l,o-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*n)}}function n(t){return 1===t.length&&(t="0"+t),t}function o(t,e){return s(t,"l",e)}function s(t,n,o){var s=e(t);return s[n]+="l"===n&&o>0?(1-s.l)*o/100:s[n]*(o/100),i(s)}function r(){return 1===this.opacity?"#"+n(this.rgb.r.toString(16))+n(this.rgb.g.toString(16))+n(this.rgb.b.toString(16)):"rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+","+Number(this.opacity.toFixed(2))+")"}home.color=function(i){return{rgb:t(i),get hsl(){return e(this.rgb)},opacity:1,toString:r,lighter:function(t){return this.rgb=o(this.rgb,t),this}}},home.color.parseHex=t,home.color.rgbToHsl=e,home.color.hslToRgb=i}(),BEM.DOM.decl({block:"sports",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard"]},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._scrollThrottledHandler=home.throttle(function(){this._loadVisibleImages(this._$panel)}.bind(this),this.__self._scrollLoadImageThrottle),this.elem("wrap").on("scroll",this._scrollThrottledHandler),this._onPanelChange(this._selectedKey,this.elem("panel"))}}},_calcOverflow:function(t){BEM.blocks["i-multiline-overflow"].calcOverflow(t,6,this.__self.getName())},_getPanelHTML:function(t,e){return home.view("sports__panel",{list:e,title:t,id:t,logShow:t!==this._defaultKey
})},_initialLoadImages:function(){},_loadVisibleImages:function(t){var e,i,n,o=this.findElem(t||this.domElem,"wrap"),s=o.scrollLeft(),r=o.width()+s+100;e=Math.ceil(r/this.__self._itemWidth),i=this.findElem(t||this.domElem,"item"),n=i.slice(0,e),home.stat.logDOMShow(n,{visibilityCheck:!1}),this._loadImages(n)},_onPanelDraw:function(t,e){this.findElem(e,"wrap").on("scroll",this._scrollThrottledHandler)},_onPanelChange:function(t,e){this.__base.apply(this,arguments),this._loadVisibleImages(e),this.findBlockInside("carousel").setScrollMod(),this._calcOverflow(e)},_toggleMountPanel:function(t,e,i){i?this.__base.apply(this,arguments):e.detach()}},{_itemWidth:184,_scrollLoadImageThrottle:200}),BEM.DOM.decl({block:"sports-loader",baseBlock:"insert-loader"},{_getDataUrl:function(){return"/portal/api/data/1/?block=sportsru&content=api_data_big"},_checkData:function(t){var e=t&&t.block&&t.block[0],i=e&&e.data,n=i&&i.categories;return n&&n.length},_selectData:function(t){return t.block[0].data},_getHTML:function(t){return home.view("sports",t)}}),BEM.decl("zen-inserter",{},{EMPTY_PLACEHOLDER:"EMPTY",PLACEHOLDER_FROM_ZEN:"Placeholder",ZEN_ROW_FOR_BLENDER:"infinity-zen",CLASS_NAME:"zen-insert",BLOCK_NAME_TO_VIEW_NAME_MAP:{kinopoisk:"kinopoisk__zen-insert","tv-online":"tv-online__zen-insert",sportsru:"sports__zen-insert",collections:"collections__zen-insert"},RENDERED_BLOCKS:{},BLOCK_NAME_TO_HEIGHT:{},initBlock:function(){this._blocks=home.getData("zen.inserts.blocks",[]),this._blocks&&(this._blenderLogger=BEM.blocks["blender-logger"],this._blenderLogger.initBlock())},logRealShow:function(t){if(this._blocks){var e="realshow",i=t.index,n=this._blocks[i];if(n&&this.RENDERED_BLOCKS[n]){var o=home.view("zen-inserter__convert-to-stat-format",n);home.stat.logPath("show",o+"."+e)}}},onZenRowsUpdated:function(t){if(this._blocks){var e=0,i=t.map(function(t){if(t!==this.PLACEHOLDER_FROM_ZEN)return{name:this.ZEN_ROW_FOR_BLENDER,height:null};var i=this._blocks[e]||this.EMPTY_PLACEHOLDER,n=this.BLOCK_NAME_TO_HEIGHT[i]||0;return e++,{name:i,height:n}},this);this._blenderLogger.updateZenRowsAndSendStat(i)}},render:function(t){if(this._blocks){var e=t.container,i=t.index,n=this._blocks[i];if(n){var o=this._getHtml(n);if(o){var s=$(o),r=$(e);s.addClass(this.CLASS_NAME),r.append(s),BEM.DOM.init(s),home.stat.logDOMShow(s),this.BLOCK_NAME_TO_HEIGHT[n]=Math.floor(s.outerHeight(!0))}}}},_getHtml:function(t){var e=this.BLOCK_NAME_TO_VIEW_NAME_MAP[t];if(!e)return"";if(this.RENDERED_BLOCKS[t])return"";var i=home.view(e);return i&&i.length&&(this.RENDERED_BLOCKS[t]=!0),i},renderAllBefore:function(t){if(this._blocks){this._blenderLogger.updateZenRowsAndSendStat([]);var e=this._blocks.map(this._getHtml,this).join("");if(e){var i=$(e);i.insertBefore(t),BEM.DOM.init(i),home.stat.logDOMShow(i)}}}}),BEM.DOM.decl("infinity-zen",{onSetMod:{js:function(){this._zenLib=this.findBlockInside("zen-lib"),this._grid=$(".media-grid").bem("media-grid"),this._grid.hasMod("collapsed","yes")||this._onGridExpand(),this._grid.on("collapsed",this._onGridCollapse,this),this._grid.on("expanded",this._onGridExpand,this);var t=BEM.blocks["zen-inserter"];t.initBlock(),this._debouncedRowsUpdated=$.debounce(t.onZenRowsUpdated.bind(t),this.DEBOUNCE_ZEN_ROWS_UPDATED_TIMEOUT),this._zenRow=this.domElem.closest(".media-grid__row"),this._zenLib.on("placeholder",function(e,i){t.render(i)}),this._zenLib.on("rowsChanged",function(t,e){this._debouncedRowsUpdated(e)}.bind(this)),this._zenLib.on("placeholderShow",function(e,i){t.logRealShow(i)}),this._zenLib.on("lateRendering",this.changeThis(function(){t.renderAllBefore(this._zenRow)})),this._zenLib.on("error",function(){t.renderAllBefore(this._zenRow)}.bind(this)),this.params.needForceLoad&&this.forceLoad()}},forceLoad:function(){this._grid.hasMod("collapsed","yes")||this._zenLib.loadAndRender({isForceLoad:!0})},_appendContent:function(){this._grid.hasMod("collapsed","yes")||this._zenLib.loadAndRender()},_onGridCollapse:function(){this.channel("i-reposition-event").un("reposition",this._updateScroll,this)},_onGridExpand:function(){this.channel("i-reposition-event").on("reposition",this._updateScroll,this);var t=this.__self.HEADER_HEIGHT_PX-this.__self.SCROLL_PX;this._updateScroll(null,BEM.DOM.win.scrollTop()-t)},_updateScroll:function(t,e){var i=window.innerHeight;e-this.domElem.offset().top+i>this.__self.SCROLL_PX&&(t?this._appendContent():this.forceLoad())}},{SCROLL_PX:-200,HEADER_HEIGHT_PX:50,DEBOUNCE_ZEN_ROWS_UPDATED_TIMEOUT:1e3}),BEM.DOM.decl("media-infinity-footer",{onSetMod:{js:{inited:function(){this._$mediaGrid=$(".media-grid"),this._grid=this._$mediaGrid.bem("media-grid"),this._$zen=$(".infinity-zen"),this._$content=$(".media-infinity-footer__content"),this._grid.hasMod("collapsed","yes")||this._onGridExpand(),this._grid.on("collapsed",this._onGridCollapse,this),this._grid.on("expanded",this._onGridExpand,this),this.bindTo("up","click",this._scrollToTop),this.bindTo(this._$content.find(".media-infinity-footer__toggler"),"click",this._onTogglerClick),this.bindKeyTo(this._$content.find(".media-infinity-footer__toggler"),"space enter",this._onTogglerClick);var t="fixed"!==this._$content.css("position");t||this.bindToWin("scroll",this._updateHorizontalScroll),this.bindTo(this._$content,"focusin",this._onFocusIn)}}},_onGridCollapse:function(){this.channel("i-reposition-event").un("reposition",this._updateVerticalScroll,this)},_onGridExpand:function(){this.channel("i-reposition-event").on("reposition",this._updateVerticalScroll,this),this._updateVerticalScroll(null,BEM.DOM.win.scrollTop())},_updateHorizontalScroll:function(){var t=BEM.DOM.win.scrollLeft();this._prevScrollLeft!==t&&(this._prevScrollLeft=t,this._$content.css("margin-left",-t))},_updateVerticalScroll:function(t,e){if(!$(":focus").closest(this._$content).length){var i=this._$mediaGrid.offset().top,n=this._$zen.offset().top,o=window.innerHeight,s=document.body.scrollHeight,r=e>i||200>s-e-o,a=e>n;r!==this.hasMod(this._$content,"visible","yes")&&(this.toggleMod(this._$content,"visible","yes",r),this.trigger("toggleFooter",r)),this.toggleMod("arrow-visible","yes",a)}},_scrollToTop:function(){$("html,body").stop().animate({scrollTop:0},"fast")},_onTogglerClick:function(){this.trigger("toggle")},_onFocusIn:function(){this.hasMod(this._$content,"visible","yes")||(this.setMod(this._$content,"visible","yes"),this.trigger("toggleFooter",!0))}}),BEM.DOM.decl({block:"kinopoisk",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-loader","mix-tabber-loader-keyboard","mix-tabber-labels-preloader"]},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._scrollThrottledHandler=home.throttle(function(){this._loadVisibleImages(this._$panel)}.bind(this),this.__self._scrollLoadImageThrottle),this.elem("wrap").on("scroll",this._scrollThrottledHandler),this._loadVisibleImages(),this.findBlockInside("carousel").on("listOut",this._loadMoreFilms,this)}}},_getInitData:function(){return home.getData("kinopoisk.data.data",{})},_getPanelHTML:function(t,e){return home.view("kinopoisk__panel",{films:e.films,title:e.title,id:t,logShow:!0})},_loadData:function(t){return new Promise(function(e,i){$.ajax({url:"/portal/api/data/1/kinopoisk?kp_group_ids="+t+"&CountryAllowed="+this.params.country,xhrFields:{withCredentials:!0},dataType:"json",timeout:15e3}).then(e,i)}.bind(this)).then(function(t){return t.block[0].data.groups[0]})},_initialLoadImages:function(){},_loadVisibleImages:function(t){var e=this.findElem(t||this.domElem,"wrap"),i=e.width()+e.scrollLeft(),n=Math.ceil(i/this.__self._filmWidth),o=this.findElem(t||this.domElem,"film");this._loadImages(o.slice(0,n))},_selectImageUrl:function(t,e){return e+((window.devicePixelRatio||1)>1.1?"300x450":"150x225")},_onPanelDraw:function(t,e){this.__base.apply(this,arguments),this.findElem(e,"wrap").on("scroll",this._scrollThrottledHandler)},_onPanelChange:function(t,e){this.__base.apply(this,arguments),this._loadVisibleImages(e),this.findBlockInside("carousel").setScrollMod()},_loadMoreFilms:function(){var t=this._selectedKey,e=this._$panel,i=this.findElem("list"),n=this._data[this._defaultKey].films;this.findBlockInside("carousel").un("listOut",this._loadMoreFilms,this),i.append(home.view("kinopoisk__film-loader")),this._loadDataWrapped(t,{forceReload:!0}).then(function(){var o=this._filterLastFilms(n,this._data[t].films);this.findElem(i,"film-loader").remove(),i.append(home.view("kinopoisk__film-list",{films:o,title:this._data[t].title,id:t,logShow:!0,startIndex:i.children().length})),this._onPanelChange(t,e)}.bind(this))["catch"](function(){this.findElem(i,"film-loader").remove()}.bind(this))},_filterLastFilms:function(t,e){var i={};return t.forEach(function(t){i[t.contentGroupUuid]=!0}),e.filter(function(t){return!(t.contentGroupUuid in i)})}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("film","pointerclick",function(){window.defaultMetrikaCounter&&window.defaultMetrikaCounter.reachGoal("kp_films_click")}),this.liveBindKey("film","space enter",function(t){home.stat.logPath("click",t.data.domElem.attr(home.stat.attr)),window.defaultMetrikaCounter&&window.defaultMetrikaCounter.reachGoal("kp_films_click")})},_filmWidth:136,_scrollLoadImageThrottle:200}),BEM.DOM.decl({block:"kinopoisk-control",baseBlock:"player-control"},{},{LOAD_TIMEOUT:1e4,TIMINGSUFFIX:567,testOptions:function(t){return t.selectionId&&this.__base(t)},beforePlay:function(t){return this.__base(t).then(function(){var e=home.getData("kinopoisk-control");if(!e)throw new Error("invalid data");if(!e.enabled)throw new Error("disabled");var i=$.extend({filmId:t.filmId,selectionId:t.selectionId,from_block:t.fromBlock,from_position:t.fromPosition},e.query);return{urlBase:e.urlBase,query:i}})},deleteFrame:function(){this.frame&&($(window).off("message.kinopoisk"),BEM.DOM.destruct(this.frame),this.frame=null)},openFrame:function(t){return this.deleteFrame(),new Promise(function(e,i){var n=this.getContainer(),o=this.frame=$('<iframe name="kinopoisk-frame" class="kinopoisk-control__frame" width="100%" height="100%" gesture="media" allowfullscreen></iframe>'),s=setTimeout(function(){var t=Error("timeout");t.timeout=1,i(t)},this.LOAD_TIMEOUT);n.append(o),o.attr("src",home.makeUrl({path:t.urlBase,query:t.query})),$(window).on("message.kinopoisk",function(t){var i=t.originalEvent.data||{},n=t.originalEvent.source;n===o[0].contentWindow&&("show"===i.type&&(clearTimeout(s),e()),"hide"===i.type&&this.hide())}.bind(this)),o.one("error",function(t){$(window).off("message.kinopoisk"),i(t)})}.bind(this))},hide:function(){this.__base(),this.deleteFrame()},play:function(t){return this.openFrame(t)}}),BEM.DOM.decl("kinopoisk-control",{},{onPlaySuccess:function(){$("body").addClass("b-page_overflow_hidden"),this.__base()},hide:function(){$("body").removeClass("b-page_overflow_hidden"),this.__base()}}),home.prepareSpaces=function(t){return(t||"").replace(/(^|\s)(\S{1,2})(\s)/g,"$1$2&nbsp;")},function(){"use strict";var t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"j","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ъ":"","ы":"i","ь":"","э":"e","ю":"u","я":"ya"};home.transliterate=function(e){return e.replace(/[а-яё]/gi,function(e){var i=e.toLowerCase(),n=i!==e;return i in t&&(i=t[i],n&&(i=i.toUpperCase())),i})}}(),BEM.DOM.decl("desk-notif-card",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initDropDownMenu(),BEM.channel("desk-notif-card").on("ban",this._onBanMessage,this),this.elem("toggler").length&&(this.bindTo("toggler","pointerclick",this._togglerOnClick),this.bindKeyTo("toggler","space enter",function(t){this._togglerOnClick(),t.preventDefault()})),this.bindTo("mouseenter mouseleave",function(t){this.toggleMod("hovered","yes","mouseenter"===t.type)})},"inner-menu":function(){this.afterCurrentEvent(this._calcShift)},hovered:function(){this.afterCurrentEvent(this._calcShift)},focused:function(){this.afterCurrentEvent(this._calcShift)}},_togglerOnClick:function(){var t=this.hasMod("minified","yes");this.delMod("hovered"),this.toggleMod("minified","yes"),this._saveState(t?"expanded":"minified"),home.stat.logDOMShow(this.domElem),home.stat.logPath("click","notifications.mail.login.resize."+(t?"big":"small"))},_initDropDownMenu:function(){this.bindTo("popup-action","pointerclick",function(t){this.dropdown.hide(),this._onActionClick(t)}),this.bindKeyTo("popup-action","space enter",function(t){this.dropdown.hide(),this._onActionClick(t),t.preventDefault()}),this.dropdown=this.findBlockInside("dropdown-menu"),this.dropdown&&(this.dropdown.on("show",function(){this.setMod("inner-menu","toggled"),home.stat.logDOMShow(this.elem("options"),{visibilityCheck:!1})},this),this.dropdown.on("hide",function(){this.delMod("inner-menu")},this))},_onBanMessage:function(t,e){e.name===this.params.name&&e.type===this.params.type&&this._onAction("ban")},_toggleExpanded:function(t){var e=this.hasMod("expanded"),i=e?"expand":"collapse",n=home.l10n("desktopNotifications.menu."+i),o=this.elem("action","type","expand");t=t||{},o.attr("title",n),o.attr("aria-label",n),this.toggleMod("expanded","yes"),this.toggleMod("minified","yes"),t.save&&this._saveState(e?"minified":"expanded"),this.domElem.removeAttr("data-statlog")},_sendAction:function(t){var e=this.params&&this.params.actions;e&&e[t]&&((new Image).src=e[t])},_hideCard:function(){this.setMod("state","hidden")},_showClientCard:function(t){this.hasError||!this.hasMod("state","hidden")&&!this.hasMod("transparent","yes")||(this.delMod("loading"),this.domElem.appendTo(this.domElem.parent()),this.delMod("state"),this.delMod(t?"position":"transparent"),setTimeout(function(){this.delMod(t?"transparent":"position"),home.stat.logDOMShow(this.domElem)}.bind(this),0))},_saveState:function(t){var e=this.params.actions&&this.params.actions.expand&&this.params.actions.expand[t];e||(e=this.params.save&&this.params.save[t]),e&&setTimeout(function(){try{var t=$(".desk-notif-card__frame");t.length||(t=$('<iframe class="desk-notif-card__frame" name="desk-notif-card__frame" style="display:none"></iframe>'),$("body").append(t)),t.attr("src",e)}catch(i){}},300)},_onAction:function(t){switch(t){case"toggle":break;case"close":this._hideCard();break;case"ban":this._hideCard();break;case"expand":return void this._toggleExpanded({save:!0})}this._sendAction(t)},_onActionClick:function(t){var e=$(t.data.domElem),i=this.getMod(e,"type");"ban"===i?BEM.channel("desk-notif-card").trigger("ban",{name:this.params.name,type:this.params.type}):i&&this._onAction(i,t)},_calcShift:function(){var t=this._isShifted();this.toggleMod("shifted","yes",t)},_isShifted:function(){return(this.hasMod("inner-menu")||this.hasMod("hovered")||this.hasMod("focused"))&&this.hasMod("actions","yes")}},{live:function(){return this.liveBindTo("action","pointerclick",function(t){this._onActionClick(t)}),this.liveBindKey("action","space enter",function(t){this._onActionClick(t),t.preventDefault()}),this.liveBindTo("focusin focusout",function(t){var e=$("html").hasClass("utilityfocus");this.toggleMod("focused","yes","focusin"===t.type&&e)}),!1}}),BEM.DOM.decl({block:"desk-notif-card",modName:"stale",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.findBlockInside("domik3");t&&t.on("not-me",function(){this.delMod("stale")},this)}}}),function(){"use strict";var t=150,e="undefined"!=typeof detector&&!!detector.getCSS3TransformProperty();BEM.DOM.decl("domik3",{onSetMod:{js:function(){this.__base(this),this._logged=this.hasMod("logged","yes"),$(this.changeThis(function(){0===this.domElem.find(".domik3__dropdown-wrapper").length&&BEM.DOM.append(this.domElem,".domik3__dropdown-wrapper"),this._bindEvents()}))}},_bindEvents:function(){this._initSocial(),this._initStale()},_initSocial:function(){this.bindTo("social-elsemore","mousedown",this._preventSelection),this.bindTo("social-elsemore","click",this._toggleSocialExpander),this.bindTo("dropdown-wrapper","scroll",function(){this.elem("dropdown-wrapper").scrollLeft(0)})},_preventSelection:function(t){t.preventDefault()},_initStale:function(){var t=this.findBlockInside("stale-not-me","button");t&&t.on("click",this.changeThis(function(){var t=this.findBlockInside("auth");t.logout(),this._nextSlide(),this.trigger("not-me")}))},_afterAnimation:function(i,n){var o=this;!e||void 0!==n&&n!==!0?i.call(this):setTimeout(function(){i.call(o)},t)},_saveState:function(t){var e=t?"setOn":"setOff",i=this.params[e];if(i)try{var n=$(".domik3__frame");n.length||(n=$('<iframe class="domik3__frame" name="domik3__frame" style="display:none"></iframe>'),$("body").append(n)),n.attr("src",i)}catch(o){}},_sendStat:function(t){home.stat.logPath("click",this.params.counters&&this.params.counters[t])},_animateHeight:function(t){var e=parseInt(this.elem("slide","type","current").height(),10);this.elem("dropdown").css("height",e),this.afterCurrentEvent(function(){this.elem("dropdown").css("height",t)})},_toggleSocialExpander:function(){var t=!this.hasMod("social-expanded","yes"),e=parseInt(this.elem("slide","type","current").height(),10);if(e){var i=t?32:0;this._animateHeight(e+i)}return this.elem("qr-button").toggle(),this.toggleMod("social-expanded","yes"),this._sendStat("socialExpand"),this.setMod("social-expanded",t?"yes":"no"),this.elem("social-elsemore").attr("aria-checked",t?"true":"false"),this.elem("auth-button").attr("tabindex",t?-1:106),!1},_nextSlide:function(){var t=this.elem("slide","type","current"),e=t.next();this._animateHeight(e.height()),this.delMod(t,"type"),this.setMod(t,"animated","yes"),this.setMod(e,"visible","yes"),this._afterAnimation(function(){this.setMod(t,"hidden","yes"),this.setMod(e,"type","current")})}},{live:function(){return this.liveBindKey("social-elsemore","space",function(){return this._toggleSocialExpander()}),!1}})}(),BEM.DOM.decl({block:"input",modName:"forgot",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateForgot)._updateForgot()}}},_updateForgot:function(){this.toggleMod(this.elem("forgot"),"visible","no","yes",!!this._val)}}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){this.elem("control").prop("checked",e),this.trigger("change",{checked:Boolean(e)})},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return Boolean(this.elem("control").prop("checked"))},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.domElem[0]===t.target&&this._onChange(t),this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),function(){"use strict";BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base(),this.params.stat&&this.on("change",function(){home.stat.logPath("click",this.params.stat)})}}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("click",function(t){$(t.target).hasClass("checkbox")&&this.toggle()}),!1}})}(),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input"),this._password=this.findBlockInside("password","input"),this._button=this.findBlockInside("button","button2"),this._register=this.findBlockInside("register","button2"),this._remember=this.findBlockInside("remember","button2"),this._error=null,this._errorOwner=null,this._username.on("change",this._onInputChange,this),this._password.on("change",this._onInputChange,this),this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},_checkInput:function(t){var e=this,i=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),n=i.every(function(t){var i=t();return Array.isArray(i)?(e.showError(i[0],BEM.I18N("auth",i[1])),i[0].elem("control").attr("aria-invalid",!0),!1):!0});return n&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),n},_onInputChange:function(t){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),this._checkInput(!0)?(this._onSubmit(t),void this.trigger("submit",t)):!1},_onSubmit:function(t){this.disableButton(),this.elem("timestamp").val((new Date).getTime())},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var i=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,i.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this._register&&this._register.setUrl(this.getRegisterURL()),this._remember&&this._remember.setUrl(this.getRememberURL()),this},setRetpath:function(t){return this.elem("retpath").val(t),this},getRetpath:function(){return this.elem("retpath").val()},getRegisterURL:function(){return this._getPassportURL("registration")},getRememberURL:function(){return this._getPassportURL("restoration")},_getPassportURL:function(t){return this.params.passport+"/"+t+"?"+$.param({from:this.elem("from").val(),origin:this.elem("origin").val(),retpath:this.getRetpath()})},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{passport:BEM.blocks["i-global"].param("passport-host")}}},{_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[-а-яА-ЯёЁA-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,i,n){var o=n.checkEmpty,s=this;return[function(){return o&&0===e.length?[t._username,"fill-input"]:!0},function(){return o&&0===i.length?[t._password,"fill-input"]:!0},function(){return/[а-яА-ЯёЁ]/.test(i)?[t._password,"wrong-keyboard-layout"]:!0},function(){return s._isUsernameValid(e,!o)?!0:[t._username,"wrong-characters"]},function(){return s._isPasswordValid(i)?!0:[t._password,"wrong-characters"]},function(){return i&&i===e?[t._password,"wrong-password"]:!0}]}}),BEM.DOM.decl("auth",{logout:function(){if(this.params.logout){var t="frame"+parseInt(1e4*Math.random(),10),e=$('<form style="display:none" target="'+t+'" method="post" action="'+this.params.logout+'"></form>'),i=$('<iframe style="display:none" name="'+t+'"></iframe>');$("body").append(e,i),e.submit()}}}),BEM.DOM.decl("auth",{hideError:function(){this._error&&this._error.hide()},_onInputChange:function(){this.__base.apply(this),this._silentCheckInput(!0)?this.setMod(this.elem("button"),"color","yellow"):this.delMod(this.elem("button"),"color")},_silentCheckInput:function(t){var e=this,i=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),n=i.every(function(t){var e=t();return!Array.isArray(e)});return n}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._socialBroker=null,this._initSocialProviders()}}},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),i=this;if(e)i._createSocial(e);else{var n=t.param("social-host");if(!n)return;i._getSocialProviders(n,function(t){i._createSocial(t)})}},_getSocialProviders:function(t,e){$.getJSON(this.__self._getProvidersURL(t),function(t){e(t.providers)})},_createSocial:function(t){return t.length?(BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(t){var e=this;t.preventDefault(),this._socialDropdown&&this._socialDropdown.hide(),this._socialBroker&&this._socialBroker.destruct(),this._socialBroker=BEM.create("social-broker"),this._socialBroker.start(function(){var t=e.getRetpath(),i=this.__self._getTopWindow().location;t&&i.href!==t?i.href=t:i.reload()}.bind(this),$.noop,{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.liveBindTo("social-link","pointerclick",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){var e=t.keyCode===BEM.blocks.keycodes.SPACE;!e||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onSocialClick(t)}),this.__base(),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var i,n,o,s=[];return t=t.filter(function(t){return t.enabled}),n=this._buildSocialPrimary(t),s=s.concat(n),o=this._buildSocialSecondary(t),i=this._buildSocialMore(n,o,e,t),i&&s.push(i),s},_buildSocialPrimary:function(t){return t.filter(function(t){return t.primary}).map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}}}})},_buildSocialSecondary:function(t){return t.map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}},text:{mix:{block:"auth",elem:"social-text"},content:BEM.blocks["i-common__string"].escapeHTML(t.display_name)}}})},_buildSocialMore:function(t,e,i,n){if(t.length>=n.length)return!1;var o=BEM.I18N("auth","more");return{block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:o,"aria-label":o},content:"· · ·"},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:i}}],content:e}}]}},_getTopWindow:function(){return window.top}}),function(){"use strict";var t={SPACE:32};BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),Lego.params.statRoot&&this._socialDropdown&&this._socialDropdown.bindTo("switcher","click",function(){home.stat.logPath("click","mail.logout.domik.social_more")})}}},_onSocialClick:function(t){t.preventDefault();var e=BEM.blocks["i-global"],i=this.elemParams(t.data.domElem),n=i.provider;return this._socialDropdown&&this._socialDropdown.hide(),home.stat.logPath("click","mail.logout.domik.social_login."+n),i.url?(window.location=i.url,!1):void BEM.create("social-broker").start(function(){var t,i=e.param("retpath");return i&&top.location.href!==i?(t=setTimeout(function(){top.location.href=i},5e3),void $.ajax({url:Lego.params["pass-host"]+"/services",data:{locale:BEM.blocks["i-global"].param("lang"),yu:$.cookie("yandexuid")},dataType:"jsonp",success:function(e){clearTimeout(t);for(var n=0,o=e.length;o>n;n++){var s=e[n].url&&(e[n].url.match(/^(?:https?:)?\/\/([^\/]+)/)||[])[1]||"";if(-1!==i.indexOf(s))return void(top.location.href=i)}top.location.reload()}})):void top.location.reload()},function(){},{provider:n})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","keydown",function(e){e.which===t.SPACE&&this._onSocialClick(e)}),!1},_buildSocial:function(t){var e=this.__base.apply(this,arguments),i=e[e.length-1];"dropdown"===i.block&&(i.content[0].content="",i.content[0].attrs={"aria-haspopup":"true","aria-expanded":"false","aria-label":BEM.I18N("auth","more")},i.content[1].js={directions:{to:"bottom",axis:"right",offset:{left:10}}});var n={};return x.each(t,function(t){n[t.code]=t.display_name}),x.each(e,function(t){"social-link"===t.elem&&(t.attrs=t.attrs||{},t.attrs.title=t.attrs["aria-label"]=n[t.js.provider],t.attrs.role="button")}),e}})}(),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._salt=0}}},start:function(t,e,i){var n,o,s,r=this;if(this._onSuccess=t,this._onFailure=e,!this._hasLocalStorage())return void this.onFailure({status:"error"});this._cleanup(),i=$.extend({},r._getDefaultParams(),i),n=i.startUrl+"?",s=i.popupName,delete i.startUrl,delete i.popupName,o=i.display,this._salt=Math.floor(1e9*Math.random()).toString(16);var a=s+"_"+this._salt;return o&&"popup"!==o&&(i.retpath=i.retnopopup||i.retpath||window.location.href,delete i.retnopopup),i.retpath+=(-1!==i.retpath.indexOf("?")?"&":"?")+"social-broker_seed="+encodeURIComponent(a),n+=Object.keys(i).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(i[e])),t},[]).join("&"),o&&"popup"!==o?void this._navigate(n):(this._lsLoginStatusKey="login_status_from_"+a,this._window=window.open(n,a,this._getPopupParams(),!1),this._window?(this._window.focus(),clearInterval(this._timer),void(this._timer=setInterval(function(){var t;try{t=window.localStorage.getItem(r._lsLoginStatusKey)}catch(e){}if(r.isClosed()&&(clearInterval(r._timer),!t))return void r.onFailure({status:"error"});if(t){var i=r._deserialize(t);r._handleStatus(i)===!1&&r.onFailure({status:"error"})}},500))):void this.onFailure({status:"error"}))},_hasLocalStorage:function(){return Boolean(window.localStorage);
},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(i){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status?(this.onFailure(t),!0):!1},isClosed:function(){return this._window?this._window.closed:!0},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,i,n){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",i,", height=",n].join("")},_getPopupParams:function(){var t,e,i=this._windowWidth,n=this._windowHeight;return window.opera?(t=(screen.availWidth-i)/2,e=(screen.availHeight-n)/2):(t=(window.innerWidth-i)/2,e=(window.innerHeight-n)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,i,n)},_cleanup:function(){if(clearInterval(this._timer),this._lsLoginStatusKey)try{window.localStorage.removeItem(this._lsLoginStatusKey)}catch(t){}this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"auth",modName:"serverside",modValue:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._button=this.findBlockInside("button","button")}}},_createSocial:function(){}}),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"hint",modValue:"yes"},{_checkInput:function(t){var e=this,i=e.__self,n=e._username.val(),o=e._password.val();if(t){if(0===n.length)return e.showError(e._username,BEM.I18N("auth","fill-input")),!1;if(0===o.length)return e.showError(e._password,BEM.I18N("auth","fill-input")),!1}return i._isUsernameValid(n)?(e.hideError(),!0):(e.showError(e._username,BEM.I18N("auth","wrong-characters")),!1)}},{_isUsernameValid:function(t){return!/\s/.test(t)},_buildError:function(){var t=this.__base();return t.mods.theme="hint",t.mods["tail-size"]="xs",t.js.directions={to:"left",axis:"middle",offset:{left:-15}},t}})}(),BEM.DOM.decl({block:"desk-notif-card",modName:"disaster",modVal:["yes","fatal"]},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.popup=this.findBlockOn("disaster-popup","popup"),this.popup&&(this.bindTo("link","click",this._showPopup),this.bindKeyTo("link","space enter",this._showPopup))}},_showPopup:function(t){this.popup.show(),home.stat.logDOMShow(this.popup.domElem),t.preventDefault()}}),BEM.DOM.decl({block:"desk-notif-card",modName:"sport",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.football=BEM.blocks.football,this.hockey=BEM.blocks.hockey,!this.params.content_id&&this.football&&this.football.highlight?this.bindTo("link","click",this._showFootball):!this.params.content_id&&this.hockey&&this.hockey.highlight&&this.bindTo("link","click",this._showHockey),this.reloadTime=this.params.reloadTime,this.jsonUrl=this.params.jsonUrl,this.football&&this.params.eventId&&this._initAutoUpdater(),this.channel("football").on("spoilers",function(t,e){this.toggleMod("spoilers","no",!e)},this)}},_showFootball:function(t){this.football.highlight(),t.preventDefault()},_showHockey:function(t){this.hockey.highlight(),t.preventDefault()},_initAutoUpdater:function(){var t=BEM.blocks["football-updater"].getInstance();t.onVisible(),t.listen(this.params.eventId,!0,this._updateScoresAndInfo.bind(this))},_updateScoresAndInfo:function(t){if(t.m_result&&t.m_result.length){var e=t.m_result,i=t.m_result_shootout||[],n=!("not_started"===t.m_status||"canceled"===t.m_status||"postponed"===t.m_status);this.elem("sport-score").each(function(t){var o=e[t];if(void 0!==o)if(n){var s=void 0!==i[t]?"&nbsp;("+i[t]+")":"";$(this).html(o+s)}else $(this).html("&mdash;")});var o="";"not_started"!==t.m_status&&(o=home.view("football-match2__status",t));var s=!1;switch(t.m_status){case"finished":case"not_started":case"suspended":case"canceled":case"postponed":break;default:s=!0}o&&(this.elem("sport-status").replaceWith(home.view("desk-notif-card__sport-status",{round_title:this.params.round,phase_title:o,in_progress:s})),this.dropElemCache("sport-status"),this.toggleMod("match-result","yes",n))}}}),BEM.DOM.decl({block:"desk-notif-card",modName:"route",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.routes={},this.placeholder={gohome:this.elem("route-gohome"),gowork:this.elem("route-gowork")},this.bindTo("route-switch","click",this._switchDirection),this._changeDirectionTo(this._getDirection())}},_changeDirectionTo:function(t){return this.direction=t,this.from="gohome"===t?"gowork":"gohome",this.setMod("loading","yes"),this._getRouterData().then(this._renderRoute.bind(this)).then(this._showRoute.bind(this)).then(this._showClientCard.bind(this,this.isShowWithoutMotion)).fail(this._errorHandler.bind(this))},_errorHandler:function(t){this.hasError=!0,this.setMod("loading","no");var e=this.from;this.from=this.direction,this.direction=e,home.stat.logPath("tech","notifications.route.error"+t)},_switchDirection:function(){this._changeDirectionTo(this.from).then(this._saveDirection.bind(this))},_saveLastDirection:function(t){home.localStorage&&!home.localStorage.disabledLS&&home.localStorage.setItem("traffic."+this.params.id+".lastDirection",t)},_saveDirection:function(){if(home.localStorage&&!home.localStorage.disabledLS){var t;t="gowork"===this._getAutoDirectionTime()?this.__self._getWorkEnd():this.__self._getHomeEnd(),home.localStorage.setItem("traffic."+this.params.id,JSON.stringify({direction:this.direction,validUntil:t}))}},_showRoute:function(){var t=this.elem("route-placeholder");t.height(this.placeholder[this.direction].height()),this.setMod("direction",this.direction),this.setMod("loading","no")},_renderRoute:function(){var t,e=this.direction,i=this.placeholder[e],n=this.routes[e];n.jamsNumber>6?t="red":n.jamsNumber>3?t="yellow":n.jamsNumber>=0?t="green":n.isBlocked&&(t="blocked");var o=n.title+" "+n.timeText,s=n.otherWayShow&&n.inBypassText.replace("%s",n.otherWayTimeBenefitText);this.elem("link").attr({href:n.href,"aria-label":o,"data-statlog":"notifications.route."+e+".card"}),i.html(home.view("desk-notif-card__inner",{link:home.view("home-link",{href:n.href,mix:" desk-notif-card__link",attrs:{"aria-label":o,"data-statlog":"notifications.route."+e+".card",tabindex:-1},mods:{pseudo:"yes"}},{}),title:o,details:n.otherWayShow?home.view("home-link",{href:n.aroundHref,content:s,mix:" desk-notif-card__details-link",attrs:{"aria-label":s,"data-statlog":"notifications.route."+e+".bypass"},mods:{pseudo:"yes"}},{}):"",iconSrc:this.params.jamIcons[t]}))},_getDirection:function(){var t,e="traffic."+this.params.id;if(home.localStorage&&!home.localStorage.disabledLS){t=home.localStorage.getItem(e+".lastDirection");var i=home.localStorage.getItem(e);if(i){var n=JSON.parse(i);if(home.now().getTime()<n.validUntil)return this.isShowWithoutMotion=!0,n.direction}}var o=this._getAutoDirection();return t===o?this.isShowWithoutMotion=!0:this._saveLastDirection(o),o},_getRouterData:function(){return this.__self._getRouterDataOrCachedRawData(this.params.apiUrls[this.direction]).then(function(t){if(t.isBlocked)return void(this.routes[this.direction]={title:this.params.pointTitles[this.direction],timeText:t.description,href:t.direct&&t.direct.mapUrl,isBlocked:!0});var e,i;t.direct.isBlocked?e=t.bypass:(e=t.direct,i=t.bypass),this.routes[this.direction]={title:this.params.pointTitles[this.direction],timeText:e.timeText,inBypassText:i&&i.label,otherWayTimeBenefitText:i&&i.timeTextDelta,jamsNumber:t.jamsRate,href:e.mapUrl,aroundHref:i&&i.mapUrl,otherWayShow:!!i}}.bind(this))},_getAutoDirection:function(){return this.params.direction?this.params.direction:this._getAutoDirectionTime()},_getAutoDirectionTime:function(){if(this.params.directionTime)return this.params.directionTime;var t=home.now().getHours();return 15>t&&t>=3?"gowork":"gohome"}},{_getWorkEnd:function(){var t=home.now();return new Date(t.getFullYear(),t.getMonth(),t.getDate(),15).getTime()},_getHomeEnd:function(){var t=home.now();return t.getHours()<3?new Date(t.getFullYear(),t.getMonth(),t.getDate(),3).getTime():new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,3).getTime()},_getRouterDataOrCachedRawData:function(t){var e=3e5,i=this,n=i.cache[t];if(n&&n.timestamp>home.now().getTime())return $.when(JSON.parse(n.data));var o=1e4;return $.ajax({method:"get",url:t,cache:!1,timeout:o}).then(function(n){if(!n||!n.direct)return $.Deferred().reject("parseData").promise();if(!n.direct.time||n.bypass&&!n.bypass.time)return $.Deferred().reject("zeroResponse").promise();var o=n.bypass&&n.bypass.timeText;return n.isBlocked||n.direct.timeText||o?(i.cache[t]={data:JSON.stringify(n),timestamp:home.now().getTime()+e},n):$.Deferred().reject("parseData").promise()},function(e,i,n){return home.error.logAjaxError({block:"desk-notif-card",message:"notif-card._getRouterDataOrCahedRawData: ajax",url:t,source:"geohelper/router"},e,i,n),$.Deferred().reject("getData").promise()})},cache:{}}),BEM.DOM.decl({block:"desk-notif-card",modName:"domik",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initMailCountUpdate(),this._popup=this.findBlockInside("popup"),this._popup.on({show:function(){this._toggleSwitcherAttrs(!0)},hide:function(){this._toggleSwitcherAttrs(!1)}},this),this.bindTo("usermenu-switcher user-icon-link","pointerclick",this._onSwitcherClick),this.bindKeyTo("usermenu-switcher user-icon-link","space enter",this._onSwitcherClick)}},_initMailCountUpdate:function(){this.params.uid&&this.channel("mail").on("update",function(t,e){this.params.uid===e.uid&&this._updateMailCounter(t,e)}.bind(this))},_updateMailCounter:function(t,e){this.elem("mail-count").text(e.value||home.l10n("desktopNotifications.mail.empty"))},_onSwitcherClick:function(){return this._popup.toggle(this.elem("title")),!1},_toggleSwitcherAttrs:function(t){this.elem("usermenu-switcher").attr("aria-expanded",t?"true":"false")}}),function(t){var e=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?e=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(e=t.devicePixelRatio),"function"==typeof t.matchMedia){var n="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";i=t.matchMedia(n).matches}else i=e>=1.3;BEM.DOM.decl("i-ua",{},{dpr:e,hiDpi:i})}(window),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this.updateIcon(),this.setMod(this.elem("icon"),"loaded","yes")}}},_getIconPath:function(t){var e=this.params.avatarHost,i=this._getIconSize(),n=(this._isRetina?"/islands-retina-":"/islands-")+i;return[e,"/get-yapic/",t,n].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this.elem("icon").length&&this._setIconBackground(this._getIconPath(this.elemParams("icon").avatarId))},getDefaultParams:function(){return $.extend(this.__base(),{avatarHost:"//wayback.archive-it.org/all/20180620162258/https://avatars.mds.yandex.net"})}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("usermenu",{_getEmbeddedAuth:function(){return this.auth?this.auth:this.auth=BEM.create("i-embeddedauth",this.params.auth)},_selectUser:function(t){var e=t.closest(".usermenu__user").data("uid");if(e)return this._getEmbeddedAuth().setData({uid:e},this.changeThis(this._switchResponse)).submit(),!1},_logoutUser:function(t){var e=t.closest(".usermenu__user-exit"),i=e.parent(),n=e.data("uid");if(n)return this._$userWrapper=i,this._getEmbeddedAuth().setData({uid:n,action:"logout"},this.changeThis(this._logoutResponse)).submit(),!1},_switchResponse:function(t){switch(t.status){case"ok":case"action-not-required":return void window.location.reload();default:window.location.href=this.params.passport}},_logoutResponse:function(t){var e=this._$userWrapper;switch(this._$userWrapper=null,t.status){case"ok":case"action-not-required":return void(e&&e.hide());default:window.location.href=this.params.passport}}},{live:function(){var t=function(t){return this._selectUser($(t.target))},e=function(t){return this._logoutUser($(t.target))};this.liveBindTo({elem:"user",modName:"clickable",modVal:"yes"},"pointerclick",t),this.liveBindKey({elem:"user",modName:"clickable",modVal:"yes"},"enter",t),this.liveBindTo("user-exit","pointerclick",e),this.liveBindKey("user-exit","enter",e)}}),BEM.decl("i-embeddedauth",{addCallback:function(t){var e="cb"+Math.random();return this.callbacks||(this.callbacks={}),this.callbacks[e]=t,e},addQueryParam:function(t,e){var i=t.split("?"),n=i[1]?i[1].split("&"):[];return n.push(e),i[1]=n.join("&"),i.join("?")},bindCallback:function(){var t=this;window.mordaAuth={onResponse:function(e){if(!e)return void t.processResponse();for(var i=e.split("?")[1].split("&"),n={},o=0,s=i.length;s>o;o++){var r=i[o].split("=");n[r.shift()]=decodeURIComponent(r.join("="))}t.processResponse(n)}}},submit:function(){this.getForm().trigger("submit")},setData:function(t,e){if(t=$.extend({},this.params.params||{},t),this.idkey&&(t.idkey=this.idkey),e){var i=this.addCallback(e);t.retpath=this.addQueryParam(t.retpath,"from="+i)}return this.getForm().html(this.stringifyParams(t)),this},setDomain:function(){var t=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{document.domain=t}catch(e){}},stringifyParams:function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=this.getInputHtml(i,t[i]));return e},getInputHtml:function(t,e){return'<input name="'+t+'" value="'+e+'"/>'},getForm:function(){if(this.form)return this.form;this.setDomain(),this.bindCallback();var t="embeddedauthframe"+parseInt(1e4*Math.random(),10);return this.form=$('<form style="display:none" target="'+t+'" method="'+(this.params.method||"post")+'" action="'+this.params.action+'"></form>'),this.frame=$('<iframe style="display:none" name="'+t+'"></iframe>'),$("body").append(this.form,this.frame),this.form},processResponse:function(t){var e=function(){};if(!t)return void this.trigger("no-data");switch(t.from&&this.callbacks[t.from]&&(e=this.callbacks[t.from],this.callbacks[t.from]=!1),this.idkey=t.idkey,t.status){case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"action-not-required":case"ok":case"uid-empty":case"sessionid-invalid":case"session-no-uid":case"yu-empty":case"yu-invalid":case"captcha-invalid":case"captcha-required":return e(t),void this.trigger("data-received",t);case"internal-exception":return this.idkey="",this._interr?(e(t),void this.trigger("data-received",t)):(this._interr=!0,t.from&&(this.callbacks[t.from]=e),void this.submit());default:t.url?window.location=t.url:(e(t),this.trigger("data-received",t))}}}),BEM.DOM.decl({name:"desk-notif-card",modName:"zen",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=$(".infinity-zen");if(t.length){var e=$(".zen-lib");if(e.length){var i=e.bem("zen-lib");i.on("promoCards",function(t,e){this._showZenCard(this._choosePromoCard(e))},this);var n=t.bem("infinity-zen");n.forceLoad()}}}},_choosePromoCard:function(t){if(this.params.norotation)return t[0];var e="home:zen:promo-pack-id",i="home:zen:promo-show-count",n=t[0]&&t[0].id,o=home.localStorage.getItem(e),s=n===o?Number(home.localStorage.getItem(i))+1:0,r=s%t.length;return home.localStorage.setItem(i,s),n!==o&&home.localStorage.setItem(e,n),t[r]},_showZenCard:function(t){var e="notifications.zen.card";this.elem("card").append(home.view("desk-notif-card__zen-layout",{domainTitle:home.htmlFilter(t.domainTitle),title:home.htmlFilter(t.title)})),this._isLongText(t.title)&&this.setMod("small-text","yes"),this.bindTo("card","pointerclick",function(i){var n=75;t.sendPreviewClick();var o=0!==t.rowIndex?window.innerHeight/2-t.container.scrollHeight/2:n,s=$(".media-grid").bem("media-grid");s.hasMod("collapsed","yes")&&s.delMod("collapsed"),t.scrollTo({animate:!0,highlight:!0,offsetTop:o}),home.stat.logPath("click",e),i.preventDefault()}),this._showClientCard(!0),t.sendPreviewShow(),home.stat.logPath("show",e)},_isLongText:function(t){var e=t.split(/\s/).reduce(function(t,e){return Math.max(t,e.length)},0);return t.length>50||e>=20}}),BEM.DOM.decl({block:"desk-notif-card",modName:"promo",modVal:"yes"},{onSetMod:{js:function(){if(this.__base.apply(this,arguments),this.params.scroll){if(!$("."+this.params.scroll).length)return void home.error.logError({block:"desk-notif-card_promo_yes",message:"Block not found"});this.bindTo("link","click",this._onClick),this.bindKeyTo("link","space enter",this._onClick)}}},_onClick:function(t){var e=$("."+this.params.scroll),i=$(".media-grid"),n=i.bem("media-grid");t.preventDefault(),e.closest(i).length&&n.hasMod("collapsed")&&n.delMod("collapsed"),$("html,body").stop().animate({scrollTop:e.offset().top-40},"slow")}}),BEM.DOM.decl({block:"desk-notif-card",modName:"district",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("district-detail"),4,"desk-notif-card_district_yes")}}}),$(document).ready(function(){var t=$('<img src="//wayback.archive-it.org/all/20180620162258/https://kiks.yandex.ru/fu/" aria-hidden="true" style="position:absolute;top:0;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);">');$("body").append(t)}),$(function(){function t(){var t=i.height(),e=n.height(),a=$(window).height();o||(o=t,s=t-e),o+r>a?n.css({height:Math.max(a-r-s,200),overflowY:"auto",marginRight:7}):n.css({height:"auto",overflowY:"visible",marginRight:0})}function e(e){var n=e.is(".b-disaster")?e:$(".b-disaster",e);n.bind("pointerclick",function(){if(i){var e=i.bem("popup");e.isShown()?e.hide():(e.show(),home.stat.logDOMShow(e.domElem)),e.on("hide",function(){home.stat.logPath("show","head.disaster.popup.closed")})}t(),$(window).trigger("disasterpopup.show")})}var i=$(".b-disaster-popup"),n=$(".b-disaster-popup__content"),o=0,s=0,r=70;i.find(".b-disaster-content").each(function(){$(this).replaceWith(home.getData("b-disaster-popup.text",""))}),window.initDisasterPopup=e,$(window).resize(function(){t()})}),function(t){t(jQuery)}(function(t){function e(e){var r=e||window.event,a=l.call(arguments,1),c=0,h=0,d=0,p=0,f=0,m=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(d=-1*r.detail),"wheelDelta"in r&&(d=r.wheelDelta),"wheelDeltaY"in r&&(d=r.wheelDeltaY),"wheelDeltaX"in r&&(h=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(h=-1*d,d=0),c=0===d?h:d,"deltaY"in r&&(d=-1*r.deltaY,c=d),"deltaX"in r&&(h=r.deltaX,0===d&&(c=-1*h)),0!==d||0!==h){if(1===r.deltaMode){var _=t.data(this,"mousewheel-line-height");c*=_,d*=_,h*=_}else if(2===r.deltaMode){var g=t.data(this,"mousewheel-page-height");c*=g,d*=g,h*=g}if(p=Math.max(Math.abs(d),Math.abs(h)),(!s||s>p)&&(s=p,n(r,p)&&(s/=40)),n(r,p)&&(c/=40,h/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/s),h=Math[h>=1?"floor":"ceil"](h/s),d=Math[d>=1?"floor":"ceil"](d/s),u.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();f=e.clientX-v.left,m=e.clientY-v.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=s,e.offsetX=f,e.offsetY=m,e.deltaMode=0,a.unshift(e,c,h,d),o&&clearTimeout(o),o=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){s=null}function n(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var o,s,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=r.length;c;)t.event.fixHooks[r[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(){"use strict";BEM.DOM.decl("b-themes-catalog",{onSetMod:{js:{inited:function(){this._vars={scrollItemsCount:5,scrollSpeed:300,tabsScrollWidth:100,themeItemWidth:this.elem("theme-item").outerWidth(!0),leftGapWidth:this.elem("theme-item-gap").outerWidth(!0),rightGapWidth:this.elem("theme-item-gap").outerWidth(!0),bodyWidth:0,visibleThemesCount:0,buttonsWidth:0,categoriesTabsWidth:0,categoriesScrollWidth:0,notLoadThemes:this.elem("theme-img").toArray()};var t=this.getLocationHash(),e=this.elem("theme-item","id",this.params.activeTheme).position().left-this._vars.leftGapWidth,i=t.group||t.tab;this.updateResize(),this.setMod("active-theme",this.params.activeTheme),i&&this.elem("tab","name",i).length?this.setMod("current-group",i):this.setMod("current-group","all"),"groups_scroll_position"in t&&this.elem("tabs-scroll").scrollLeft(parseInt(t.groups_scroll_position)||0),"themes_scroll_position"in t&&(e=parseInt(t.themes_scroll_position||0)),this.elem("body").scrollLeft(e),this.updateView(),this.bindToWin("resize",$.throttle(function(){this.updateResize(),this.updateView(),this.loadImgPreview()}),100),this.bindTo("tab","click",function(t){this.setMod("current-group",this.getMod($(t.target),"name"))}),this.bindTo(this.elem("arrow","scroll","left"),"click",function(){var t=this._vars.themeItemWidth*this._vars.scrollItemsCount+this.elem("body").scrollLeft()%this._vars.themeItemWidth;this.elem("body").stop(),this.elem("body").animate({scrollLeft:"-="+t},this._vars.scrollSpeed)}),this.bindTo(this.elem("arrow","scroll","right"),"click",function(){var t=this._vars.themeItemWidth*this._vars.scrollItemsCount-this.elem("body").scrollLeft()%this._vars.themeItemWidth;this.elem("body").stop(),this.elem("body").animate({scrollLeft:"+="+t},this._vars.scrollSpeed)}),this.bindTo(this.elem("arrow","scroll-tab","left"),"click",function(){this.elem("tabs-scroll").stop(),this.elem("tabs-scroll").animate({scrollLeft:"-="+this._vars.tabsScrollWidth},"fast")}),this.bindTo(this.elem("arrow","scroll-tab","right"),"click",function(){this.elem("tabs-scroll").stop(),this.elem("tabs-scroll").animate({scrollLeft:"+="+this._vars.tabsScrollWidth},"fast")}),this.bindTo("body","mousewheel",function(t){var e=t.deltaFactor*(t.deltaY-t.deltaX);return e=this.params.isWinOperaPresto?t.originalEvent.wheelDelta/2:e,this.elem("body").scrollLeft(this.elem("body").scrollLeft()-e),!1}),this.bindTo("body","scroll",this.updateView),this.bindTo("body","scroll",this.loadImgPreview),this.bindTo("tabs-scroll","scroll",this.updateView),this.bindTo("tabs-scroll","mousewheel",function(t){var e=t.deltaFactor*(t.deltaY-t.deltaX);return e=this.params.isWinOperaPresto?t.originalEvent.wheelDelta/2:e,this.elem("tabs-scroll").scrollLeft(this.elem("tabs-scroll").scrollLeft()-e),!1}),this.bindTo("theme-item","click",function(t){var e=t.data.domElem;if(!e.hasClass("b-themes-catalog__theme-item_active_true"))return this.addHashToLink(e,{group:this.getMod("current-group"),groups_scroll_position:this.elem("tabs-scroll").scrollLeft(),themes_scroll_position:this.elem("body").scrollLeft()}),home.stat.redirect(e[0],e.data("statlog"))}),this.setMod(this.elem("bg"),"hidden","true"),this.loadImgPreview(),window.Ya&&window.Ya.share2||$.getScript("//wayback.archive-it.org/all/20180620162258/https://yastatic.net/share2/share.js",function(){this.setMod(this.elem("theme-item-share"),"enable","true")}.bind(this))}},"current-group":function(t,e){var i=this.elem("tab"),n=this.elem("tab","name",e),o=this.elem("theme-item"),s=this.elem("theme-item","group-"+e,"true");this.setMod(i,"active","false"),this.setMod(n,"active","true"),this.setMod(o,"hidden","yes"),this.delMod(s,"hidden"),this._vars.visibleThemesCount=s.length,this.elem("body").scrollLeft(0),this.updateView(),this.loadImgPreview()},"active-theme":function(t,e){this.setMod(this.elem("theme-item"),"active","false"),this.setMod(this.elem("theme-item","id",e),"active","true")}},updateResize:function(){this._vars.bodyWidth=this.elem("body").width(),this._vars.buttonsWidth=0,this.elem("button").each(function(t,e){this._vars.buttonsWidth+=$(e).outerWidth(!0)}.bind(this)),this._vars.categoriesTabsWidth=this.elem("categories-general").outerWidth(!0)+this.elem("categories-other").outerWidth(!0),this._vars.categoriesScrollWidth=this._vars.bodyWidth-this._vars.buttonsWidth},updateView:function(){var t=this._vars.visibleThemesCount*this._vars.themeItemWidth+this._vars.leftGapWidth+this._vars.rightGapWidth;this.setMod(this.elem("arrow","scroll","left"),"hidden",(this.elem("body").scrollLeft()<=0).toString()),this.setMod(this.elem("arrow","scroll","right"),"hidden",(this.elem("body").scrollLeft()+this._vars.bodyWidth===t||this._vars.bodyWidth>t).toString()),this.elem("tabs-scroll").css({width:this._vars.categoriesScrollWidth+"px"}),this.setMod(this.elem("arrow","scroll-tab","left"),"hidden",(this.elem("tabs-scroll").scrollLeft()<=0).toString()),this.setMod(this.elem("arrow","scroll-tab","right"),"hidden",(this.elem("tabs-scroll").width()>this._vars.categoriesTabsWidth||this.elem("tabs-scroll").scrollLeft()+this._vars.categoriesScrollWidth>=this._vars.categoriesTabsWidth).toString())},loadImgPreview:function(){this._vars.notLoadThemes.length&&(this._vars.notLoadThemes=this._vars.notLoadThemes.filter(function(t){var e=$(t),i=e.offset().left;return!e.closest(".b-themes-catalog__theme-item_hidden_yes").length&&i+this._vars.themeItemWidth>0&&i<this._vars.bodyWidth?(e.prepend($("<img />",{"class":"b-themes-catalog__theme-async-img",src:e.data("preview_url")})),!1):!0},this))},getLocationHash:function(){for(var t,e=window.location.hash?window.location.hash.substr(1).split("&"):[],i={},n=0;n<e.length;n++)t=e[n].split("="),i[t[0]]="undefined"!=typeof t[1]?t[1]:null;return i},addHashToLink:function(t,e){var i=[],n=t.attr("href");for(var o in e)e.hasOwnProperty(o)&&i.push(o+"="+e[o]);i.length&&(n+=(-1!==n.indexOf("#")?"":"#")+i.join("&")),t.attr("href",n)}})}(),BEM.DOM.decl("media-grid",{onSetMod:{js:function(){this._notInitedBlocks=this.params.blocks,this._notShowedBlocks=this._notInitedBlocks.slice(),this._sendRealShowDebounced=$.debounce(this._sendRealShow,400,this),this.bindTo("toggle-button","click",this.toggleCollapsed),this.bindKeyTo("toggle-button","space enter",this.toggleCollapsed),this.hasMod("collapsed")||(this._onScroll(null,BEM.DOM.win.scrollTop()),this.channel("i-reposition-event").on("reposition",this._onScroll,this));var t=this.findBlockInside("media-infinity-footer");t&&t.on("toggle",this.toggleCollapsed,this)},collapsed:{yes:function(){this.channel("i-reposition-event").un("reposition",this._onScroll,this),this.elem("toggle-button-content").text(home.l10n("a11y.expand")),this.elem("toggle-line").toggleClass("media-grid__row"),this.findBlockInside("media-footer").setMod("slim","yes"),$("body").removeClass("b-page_media-footer-collapsed_no").addClass("b-page_media-footer-collapsed_yes"),home.stat.logPath("show",this.params.counters.expand),this.trigger("collapsed")},"":function(){this.channel("i-reposition-event").on("reposition",this._onScroll,this),this.elem("toggle-button-content").text(home.l10n("a11y.collapse")),this.elem("toggle-line").toggleClass("media-grid__row"),this.findBlockInside("media-footer").delMod("slim"),$("body").removeClass("b-page_media-footer-collapsed_yes").addClass("b-page_media-footer-collapsed_no"),home.stat.logPath("show",this.params.counters.collapse),this.afterCurrentEvent(function(){this._onScroll(null,BEM.DOM.win.scrollTop()),home.stat.logDOMShow(this.domElem),this.domElem.find("[data-stream-stat]").each(function(t,e){home.stat.logPath("show",$(e).data("stream-stat"))}),this.trigger("expanded")})}}},_requestInit:function(t){this._notInitedBlocks=this._notInitedBlocks.filter(function(e){return t<this.elem(e).offset().top?!0:(this.setMod("visible","yes"),$("html").hasClass("fonts_loaded_yes")||this.setMod("fonts","no"),void this.findBlockOn(e,e))},this)},_getRealShowStatPath:function(t){var e={stream:"tv_online",vod:"tv_online",video:"tv_online"},i=t.replace("media-",""),n=e[i]?e[i]+".":"";return n+i+".realshow"},_sendRealShow:function(t,e){this._notShowedBlocks=this._notShowedBlocks.filter(function(i){this.dropElemCache(i);var n,o=this.elem(i),s=o.height(),r=o.offset().top,a=r+s;if(n=r>=t&&e>=a||t>=r&&e>=a&&(a-t)/s>.5||r>=t&&a>=e&&(e-r)/s>.5,!n)return!0;this.findBlockOn(i,i).setMod("visible","yes");var l=this._getRealShowStatPath(i);home.stat.logPath("show",l)},this),this._notShowedBlocks.length||this.channel("i-reposition-event").un("reposition",this._onScroll,this)},_onScroll:function(t,e){var i=window.innerHeight+e;this._requestInit(i),this._sendRealShowDebounced(e,i),!this._shown&&i>this.domElem.offset().top+this.__self.MIN_VISIBLE_HEIGHT&&(this._shown=!0,home.stat.logPath("show","mediafooter.realshow"))},toggleCollapsed:function(){var t=this.hasMod("collapsed");this.toggleMod("collapsed","yes",!t),t?(home.stat.logPath("click",this.params.counters.expand),(new Image).src=this.params.expandModSaveUrl):(home.stat.logPath("click",this.params.counters.collapse),(new Image).src=this.params.collapseModSaveUrl)}},{MIN_VISIBLE_HEIGHT:62}),BEM.DOM.decl({block:"football",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-labels-preloader","mix-tabber-loader","mix-tabber-loader-keyboard","mix-tabber-slide"]},{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),this._selectedMatch=null,this._matchCache={},this.params.interestingOffset){var t=this.elem("nearest-panel").eq(this.params.interestingOffset);t.parent().scrollLeft(t.prop("offsetLeft"))}this._restoreState(),this.bindToWin("popstate",this._onHistoryChange),this.domElem.on("pointerclick","[data-football-match]",this._onMatchClick.bind(this)),this.domElem.on("keydown","[data-football-match]",this._onMatchKeydown.bind(this)),this.findBlockInside("football-checkbox").on("change",function(t,e){if(this.toggleMod("spoilers","","off",e),e){var i=this.findBlocksInside("football-match2");i.forEach(function(t){t.delMod("spoilers")})}this.channel("football").trigger("spoilers",e),(new Image).src=this.params.cookie_set_link+"&gif=1&hks="+(e?0:1),home.stat.logPath("click","football.spoilers."+(e?"on":"off"))},this);var e=this.findBlockOutside("media-grid");e.hasMod("collapsed","yes")?e.onFirst("expanded",function(){BEM.blocks["football-updater"].getInstance().onVisible()},this):(this.channel("i-reposition-event").on("reposition",this._onScroll,this),this._onScroll(void 0,BEM.DOM.win.scrollTop())),this._onMatchUpdate=this._onMatchUpdate.bind(this)}},visible:{yes:function(){this._syncTags()}}},_syncTags:function(){if(this.params.needToSyncTag){var t=BEM.blocks["sup-manager"].getInstance();if(t.supported())return t.sync("sportEvent2","2018-07-18")}return Promise.resolve()},_afterPanelChange:function(t){this.__base.apply(this,arguments),this.trigger("changeTab",t)},_changeTab:function(t){this._showSide=this._selectedKey<t?"right":"left",this._hideSide=this._selectedKey<t?"left":"right",
this.__base.apply(this,arguments)},_toggleMountPanel:function(t,e,i){this._panelMap=this._panelMap||{},this._panelMap[t]=i,i?(e.parent().length||this.elem("panels").append(e),this.setMod(e,"hide-side",this._showSide).setMod(e,"hidden","yes").delMod(e,"no-place"),setTimeout(function(){this._panelMap[t]===i&&this.delMod(e,"hide-side").delMod(e,"hidden")}.bind(this),200)):this.setMod(e,"hide-side",this._hideSide).setMod(e,"hidden","yes").setMod(e,"no-place","yes")},_getHistoryState:function(){try{return null===history.state?null:history.state&&history.state.footballMatch?{matchId:history.state.footballMatch}:void 0}catch(t){}},_restoreState:function(){var t=this._getHistoryState();if(t)this._selectMatch(t.matchId,"history");else if(this.params.storedMatchId){this._selectMatch(this.params.storedMatchId,"history");try{history.replaceState({footballMatch:this.params.storedMatchId},document.title,location.href),history.scrollRestoration="manual"}catch(e){}this._scrollToTop(!0)}else this.params.scrollTo&&this._scrollToTop(!0)},_onHistoryChange:function(){var t,e,i=this._getHistoryState();i?(t=i.matchId,e=this.findBlockOutside("media-grid"),e.hasMod("collapsed","yes")&&e.toggleCollapsed()):t=null,t!==this._selectedMatch&&(t?this._selectMatch(t,"history"):this._closeMatch("history"))},_onMatchClick:function(t){var e=$(t.target).closest("[data-football-match]"),i=e.data("football-match");i&&(this._selectMatch(i,"click"),t.preventDefault())},_onMatchKeydown:function(t){t.which!==BEM.KEYS.SPACE&&t.which!==BEM.KEYS.ENTER||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||this._onMatchClick(t)},_selectMatch:function(t,e){this._selectedMatch||(this._selectedMatch=t,"history"!==e&&this._updateHistory("match"),this._loadMatchAndDraw(t,e))},_updateHistory:function(){var t="pushState",e=location.href;if(e=this._updateHrefByMatchId(e,this._selectedMatch),t in history)try{history[t]({footballMatch:this._selectedMatch},document.title,e),history.scrollRestoration="manual"}catch(i){}},_updateHrefByMatchId:function(t,e){var i=home.parseUrl(t);return i.query.football2018_match=e||void 0,home.makeUrl(i)},_loadMatchAndDraw:function(t,e){var i,n="/portal/sport/event?sport=FB&id="+t;this.setMod("match-mode","loading"),this._scrollToTop(),i=t in this._matchCache&&Date.now()-this._matchCache[t].ts<this.__self.MATCH_CACHE_TIMEOUT?this._matchCache[t].deferred:$.ajax({dataType:"json",url:n,timeout:this.__self.AJAX_DATA_TIMEOUT}).then(function(e){return this._matchCache[t]={ts:Date.now(),deferred:i},e}.bind(this),function(t,e,i){return home.error.logAjaxError({block:"football",message:"_loadEvent: ajax",url:n,source:"portal"},t,e,i),$.Deferred().reject()}),i.then(function(i){try{this._appendMatchPage(i,e)}catch(n){return home.error.logError({block:"football",message:n,meta:{id:t},sourceType:"render"}),$.Deferred().reject()}}.bind(this)).fail(function(){this._appendMatchRetry(e)}.bind(this))},_appendMatchPage:function(t,e){var i=home.view("football__match-page",t,this.params.req),n=$(i);"history"===e&&this.setMod("nav-history","yes");var o=this.elem("main-content"),s=o.height();BEM.DOM.append(o,n);var r=n.height();o.height(s),this.setMod("match-mode","show"),o.prop("offsetHeight"),this.afterCurrentEvent(function(){o.height(r).onceAnimationEnd("transition",350,function(){o.height(""),this.delMod("nav-history"),home.stat.logDOMShow(n,{visibilityCheck:!1}),BEM.blocks["i-reposition-event"].trigger()}.bind(this))}),this._appendMatchPageShare(n,t),BEM.blocks["football-updater"].getInstance().listen(t.id,!1,this._onMatchUpdate)},_onMatchUpdate:function(t){var e=this.findElem("match-block").filter("[data-block]"),i={lineup:"football__lineup",vods:"football__match-vods",goals:"football__goals",players:"football__top-players","text-stream":"football__text-stream"};e.each(function(e,n){var o,s,r=$(n),a=r.data("block");i[a]&&(o=r.height(),BEM.DOM.update(r,home.view(i[a],t)),s=r.height(),r.height(o),setTimeout(function(){r.height(s).onceAnimationEnd("animation",350,function(){r.height(""),BEM.blocks["i-reposition-event"].trigger()})},50))})},_appendMatchRetry:function(t){var e=this.elem("main-content"),i=e.height();"history"===t&&this.setMod("nav-history","yes");var n=$(home.view("football__match-retry"));e.append(n);var o=n.height();e.height(i),this.setMod("match-mode","show"),e.prop("offsetHeight"),this.afterCurrentEvent(function(){e.height(o).onceAnimationEnd("transition",350,function(){e.height(""),this.delMod("nav-history"),BEM.blocks["i-reposition-event"].trigger()}.bind(this))})},_appendMatchPageShare:function(t,e){if(!this._shareDeferred){var i="//wayback.archive-it.org/all/20180620162258/https://yastatic.net/share2/share.js";this._shareDeferred=$.ajax({url:i,dataType:"script"}).fail(function(t,e,n){home.error.logAjaxError({block:"football",message:"_loadShare: ajax",url:i},t,e,n)})}this._shareDeferred.then(function(){var i=$('<div class="football__match-page-share"></div>')[0],n="https://wayback.archive-it.org/all/20180620162258/https://yandex."+this.params.share.zone+"/?football2018_match="+e.id;try{var o,s,r=home.l10n("football.share_title");o=e.has_stream?home.l10n("football.share_text_stream").replace("%team0",e.teams[0].country_name).replace("%team1",e.teams[1].country_name):home.l10n("football.share_text_no_stream").replace("%team0",e.teams[0].country_name).replace("%team1",e.teams[1].country_name),s=r+(o?". "+o:""),new Ya.share2(i,{theme:{services:"vkontakte,facebook,odnoklassniki,twitter",counter:!1,lang:this.params.share.locale},content:{url:n,title:r,description:o,image:"https://wayback.archive-it.org/all/20180620162258/https://yastatic.net/s3/home/football/2018/"+e.id+"/social.png"},contentByService:{vkontakte:{url:n,title:s,image:"https://wayback.archive-it.org/all/20180620162258/https://yastatic.net/s3/home/football/2018/"+e.id+"/vk.png"},twitter:{url:n,title:s,image:"https://wayback.archive-it.org/all/20180620162258/https://yastatic.net/s3/home/football/2018/"+e.id+"/social.png"}}}),t.find(".football__match-page-top").append(i)}catch(a){}}.bind(this))},_closeMatch:function(t){var e=this._selectedMatch,i=this.elem("main-content"),n=i.height(),o=this.findElem("match-page"),s=this.elem("tabs-content").height();"history"===t&&this.setMod("nav-history","yes"),i.height(n),i.prop("offsetHeight"),this.delMod("match-mode"),this.setMod(o,"fade-out","yes"),this._selectedMatch=null,"history"!==t&&"retry"!==t&&"outside"!==t&&this._updateHistory("match"),this.afterCurrentEvent(function(){i.height(s).onceAnimationEnd("transition",350,function(){BEM.DOM.destruct(o),i.height(""),this.delMod("nav-history"),BEM.blocks["i-reposition-event"].trigger()}.bind(this))}),BEM.blocks["football-updater"].getInstance().stopListen(e,!1,this._onMatchUpdate)},_onMatchRetryClick:function(){var t;t=this._selectedMatch,this._closeMatch("retry"),this._selectedMatch=t,this._loadMatchAndDraw(t,"retry")},_scrollToTop:function(t){var e=this.domElem.offset().top;(t||$(window).scrollTop()>e)&&BEM.blocks.football.highlight()},_loadData:function(t){var e=this;return"group"===t?new Promise(function(t,i){$.ajax({url:"/portal/sport/table?sport=FB",xhrFields:{withCredentials:!0},dataType:"json",timeout:e.__self.AJAX_DATA_TIMEOUT}).then(t,function(t){i("Network error: "+this.url+", status: "+t.status)})}):"fav"===t?this._loadFav():Promise.reject("Not implemented")},_loadFav:function(){var t=this;return this._syncTags().then(function(){return t.params.req.pushSupported?BEM.blocks["sup-manager"].getInstance().getAllTags():void 0})["catch"](function(t){home.error.logError({block:"football",message:"get tags error",sourceType:"indexeddb"},t)}).then(function(e){var i=(e||[]).filter(function(t){return"sportEvent2"===t.name}).map(function(t){return t.value}).filter(function(t){return/m\d+/.test(t)});return t.params.req.pushSupported||(i=BEM.blocks["football-fav-manager"].getInstance().getMatches()),new Promise(function(e,n){$.ajax({url:"/portal/sport/starred?sport=FB",xhrFields:{withCredentials:!0},data:{events:i.length?i.join(","):void 0},dataType:"json",timeout:t.__self.AJAX_DATA_TIMEOUT}).then(function(t){return t.teams&&t.teams.length?void e(t):(home.error.logError({block:"football",message:"empty teams",sourceType:"network"}),void n("Empty teams: "+this.url))},function(t){n("Network error: "+this.url+", status: "+t.status)})})})},_getPanelHTML:function(t,e){if("group"===t)return e.groups.forEach(function(t){home.view("football__store-matches-data",t.events)}),home.view("football-group-tabs",e,this.params.req);if("fav"===t)return e.events&&e.events.length&&home.view("football__store-matches-data",e.events),home.view("football-fav",e,this.params.req);throw new Error("Not implemented")},_toggleLabelSelection:function(t,e){this.__base.apply(this,arguments),t.toggleClass("football-hover",!e),e&&t.find(".football-hover__bg").remove()},_onScroll:function(t,e){var i=window.innerHeight+e;i>this.domElem.offset().top+this.__self.MIN_VISIBLE_HEIGHT&&(this.channel("i-reposition-event").un("reposition",this._onScroll,this),BEM.blocks["football-updater"].getInstance().onVisible())}},{AJAX_DATA_TIMEOUT:7e3,MATCH_CACHE_TIMEOUT:6e4,MIN_VISIBLE_HEIGHT:140,live:function(){return this.__base.apply(this,arguments),this.liveBindTo("match-retry-button","pointerclick",function(){return this._onMatchRetryClick(),!1}),this.liveBindTo("back","pointerclick",function(){return this._closeMatch("click"),!1}),!1}}),BEM.DOM.decl("dist-popup",{onSetMod:{js:function(){this.__base(),setTimeout(function(){BEM.blocks["i-message-locker"].acquireLock("dist-popup",this._hide.bind(this)).then(this._onShow.bind(this),this.destruct.bind(this))}.bind(this),this.__self.SHOW_TIMEOUT)}},_getPopupPosition:function(){return{top:12,left:18}},_onShow:function(){var t=this.params,e=t.counters,i=detector.isSVGSupported()&&t.icons.icon_svg||t.icons.icon;this.elem("image-wrapper").prepend(home.view("dist-popup__image",{image:i})),this.popup=this.findBlockOn("popup").show(this._getPopupPosition()),this.popup.on({"before-hide":this._onBeforeHide,hide:this._onHide},this),this.popup._unbindFocusEvents(),home.getData("common.reportVisibilityCheck")?BEM.blocks["i-visibilitychange"].waitForVisible(function(){this._sendCounter(e.show)}.bind(this)):this._sendCounter(e.show),this.bindTo("no close","click",this._onNoClick),this.bindKeyTo("close","space enter",this._onNoClick),this.bindTo("yes","click",this._onYesClick)},_onBeforeHide:function(t,e){e&&"esc-key"===e.source&&this.afterCurrentEvent(this._countCancel)},_onHide:function(){BEM.blocks["i-message-locker"].releaseLock("dist-popup"),setTimeout(this.destruct.bind(this),this.__self.DESTRUCT_TIMEOUT)},_onYesClick:function(){this._closeFlag(this.params.close_url)},_onNoClick:function(){return this.popup.hide(),this._countCancel(),!1},_hide:function(){this.popup.hide()},_countCancel:function(){this._closeFlag(this.params.close_url),this._closeFlag(this.params.quarantineUrl),this._sendCounter(this.params.counters.no),window.home.gaCounter.trackCancelPopup()},_closeFlag:function(t){t&&((new Image).src=t)},_sendCounter:function(t){t&&t.length&&t.forEach(function(t){"path"===t.type?csh_ifmsid(t.content):"image"===t.type&&((new Image).src=t.content)})},destruct:function(){return this.popup&&this.popup.destruct(),this.__base.apply(this,arguments)}},{SHOW_TIMEOUT:1e3,DESTRUCT_TIMEOUT:1e3}),BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"inline"},{_onYesClick:function(){this.__base.apply(this,arguments),this._sendCounter(this.params.counters.yes);var t=this,e=this.params;return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:e.api}},$.extend(e,{callbacks:{yes:function(){this._sendCounter(e.counters.install),this.popup.hide()}.bind(this),no:function(){this.popup.hide()}.bind(this)}}))),this._inlineInstall.request().fail(function(){t.popup.hide()}),!1}}),BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"download"},{_onYesClick:function(){return this.__base.apply(this,arguments),this._sendCounter(this.params.counters.yes),this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),this._hide(),!1}}),BEM.DOM.decl("news-popup",{onSetMod:{js:function(){var t=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.$customTabLink=$(".news__custom-tab"),this.$tab=this.$customTabLink.closest(".content-tabs__head-item"),this.news=this.findBlockOn(this.$tab.closest(".content-tabs"),"content-tabs"),this.widget=this.news.findBlockOutside("widget"),this.turnReloadOff(),this.popup.on("show",function(){home.stat.logDOMShow(t.popup.domElem)}),this.bindTo("add","click",this.add),this.bindTo("cancel","click",this.cancel),this.popup.on("hide",this.changeThis(this.hideTab)),this.show()}},show:function(){this.popup.setRelativeContainer(this.widget),this.popup.show(this.$customTabLink),this.channel("widget").on("showPreferences",this.hideOnOpenSettings,this),$(window).scrollTop(this.$tab.offset().top),this.elem("add").focus()},hide:function(){this.popup.hide()},add:function(){this.saveNewPattern(),this.saveWidgetSettings()},cancel:function(){this.hide()},hideTab:function(){var t=this.widget.getInstance();this.actualData||t._prefs.customCatId||(this.news.hasMod(this.$tab,"active","true")&&this.news.selectRelative(-1),this.$tab.hide()),this.turnReloadOn()},hideOnOpenSettings:function(t,e){e.elem.instance===this.widget.getInstance()&&this.hide()},saveNewPattern:function(){var t=this.widget.findBlockOutside("widgets");t.params.settings&&t.params.settings.newpattern&&t.save()},saveWidgetSettings:function(){var t=this.widget.getInstance(),e=this.params.customId,i=t._prefs;i.customCatId=e,t.saveValues(i,this.afterSave.bind(this))},afterSave:function(t){"ok"===t.result&&((new Image).src=this.params.coockieUrl,this.actualData=!0),this.hide()},turnReloadOff:function(){this.widget.getInstance().pauseReload=!0},turnReloadOn:function(){var t=this.widget.getInstance();t.pauseReload=!1,!this.actualData&&t._prefs.customCatId?t.reload():Widget.Framework.addToReloadQueue(t,t.onload)}},{live:!1}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"relative"},{setRelativeContainer:function(t){this._parentContainer=t},_findParent:function(){return this._parentContainer},setParent:function(t){return this._parent=t,this}}),BEM.decl({name:"dataprovider-geo",baseBlock:"i-request_type_ajax"},{get:function(t,e){var i=Lego.params.locale||"ru",n=(location.host.match(/yandex\.(\w\w)$/)||["","ru"])[1].toUpperCase();return this.__base({v:9,search_type:"tune",results:15,lang:i+"_"+n,part:t,spn:[.01,.01].join()},function(t){e.call(this,t.results.filter(function(t){return t.geoid}).map(function(t){return["geo"].concat(t)}),t.meta)})}}),BEM.DOM.decl("b-wdgt-preferences",{onSetMod:{js:function(){var t=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.popup.delMod("position"),this.bindTo("save","click",this.save),this.bindTo("cancel","click",this.cancel),this.bindTo("reset","click",this.reset),Widget.Init({hidePreferencesHandler:this.changeThis(function(){this.hide()})}),this.bindToWin("widgetSettingsTuned",function(e){t.widget&&e.id===t.widget.getId()&&t.widget.markChanged(!1,!0)}),this.popup.on("show",function(){this._skipReturnFocus=!0}),this.popup.on("hide",function(){this.channel("widget").trigger("hidePreferences",{elem:t.widget}),t._resetPopup()}),this.popup.on("show",function(){this.channel("widget").trigger("showPreferences",{elem:t.widget})}),this.baseTitle||(this.baseTitle=this.elem("head").text())}},show:function(t,e){this.widget=t,this.callback=e||function(){},this.setMod("loading","yes"),BEM.DOM.destruct(this.elem("form"),!0),Widget.Framework.showEditForm(t.getId(),this.elem("form"),this.changeThis(this.updateForm)),this.popup.show(this._setPopupParams()),this.bindToWin("resize",$.debounce(this.changeThis(function(){this.popup.repaint(this._setPopupParams())}),100))},hide:function(){this.widget=null,this.callback=null,this.popup.hide()},_resetPopup:function(){this.elem("head").text(this.baseTitle),this.unbindFromWin("resize")},_getPopupPos:function(){var t=this.domElem.width(),e=this.domElem.height(),i=$(window).height();return{left:($(window).width()-t)/2,top:Math.max(50,$(window).scrollTop()+(i-e)/2)}},_setPopupParams:function(){var t=this._getPopupPos();return this.popup.params.top=t.top,this.popup.params.left=t.left,t},updateForm:function(t){var e;t&&(this.delMod("loading"),t.title&&this.elem("head").text(t.title),t.form?e=t.form:t.prefs&&(e=this.buildForm(t.prefs)),e?(BEM.DOM.update(this.elem("form"),e),BEM.DOM.init(this.elem("form")),this.elem("controls").show()):this.elem("controls").hide(),this.popup.hasMod("visibility","visible")&&this.popup.repaint(this._setPopupParams()))},buildForm:function(t){return BEMHTML.apply({block:"b-wdgt-preferences",elem:"data",list:t})},save:function(){for(var t=this.elem("form").find("form")[0],e={},i=0;i<t.length;i++){var n=t[i];n.name&&("checkbox"===n.type?e[n.name]=!!n.checked:"radio"===n.type?n.checked&&(e[n.name]=n.value):e[n.name]=n.value)}this.widget.markChanged(!1,!0);var o=this.widget.getInstance();o.saveValues(e,this.callback.bind(this.widget)),this.hide()},cancel:function(){this.hide()},reset:function(){var t=this.widget.getInstance();t.dropValues(this.callback.bind(this.widget)),this.channel("catalog").trigger("enableAction"),this.hide()}},{live:!0}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),BEM.DOM.decl({block:"popup",modName:"wrapped",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.__base(),this._wrap()},"":function(){this.__base(),this._unwrap()}},wrapped:{"":function(){this._unwrap()}}},_wrap:function(){this._wrapper||(this._wrapper=this.elem("wrapper").detach()),this._wrapper&&this.domElem.wrap(this._wrapper)},_unwrap:function(){this._wrapper&&this.domElem.unwrap()},_captureZIndex:function(){var t=this._zIndex,e=this.__base.apply(this,arguments);return this._zIndex!==t&&this.elem("wrapper").css("z-index",this._zIndex),e},destruct:function(){this._unwrap(),this.__base()}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl({block:"popup",modName:"behaviour",modVal:"scrollable"},{getDefaultParams:function(){var t=this.__base();return t.top=20,t}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){this.elem("control").prop("disabled",e),this._getButton().setMod(t,e),e&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return this.hasMod("disabled")?!1:(this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),void this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(e))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if("undefined"==typeof t)return this.elem("control").val();var i,n=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(i=$(this).parent("optgroup")[0],!(i&&i.disabled))&&(n=e)}),n>-1&&this._selectedIndex(n,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var i=this._getSelectedIndex();return"undefined"==typeof t||t===i?i:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:i},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){var t;return this._isParentPopup()&&(t=this._popup._parent,(t.repaint||t.redraw).call(t)),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._setButtonText(t._getSelectedText()),t.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode===e.UP,n=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,s=t.keyCode===e.SPACE;if(i||n){if(t.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,a=this._curItemIndex;if(i&&0===a||n&&a>r-2)return;if(r){var l,c=n?1:-1;for(l=a;l>=0&&r>=l;)if(l+=c,this._isSelectableItem(this._items.eq(l))){a=l;break}this._onEnterItem(this._items.eq(a),!0)}}(o||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,i){this.elem("button").attr("aria-activedescendant",t.attr("id"));var n=this._curItemIndex,o=this._getItemIndex(t),s=this._items;n>-1&&this.delMod(s.eq(n),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),i&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do e=e.parent(),t=e.css("overflow-y");while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=!this.hasMod(t,"disabled","yes")&&!this.hasMod(t,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(t){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()})},useNativeControl:null,_buildOption:function e(t,i,n){var o={};return"option"===t.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:t.value},content:t.content},t.disabled&&(o.attrs.disabled="disabled"),t.selected&&(o.attrs.selected="selected")):"optgroup"===t.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:t.label}},t.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(t.content)?t.content.map(e):t.content),o.block="select",o}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,i=this._getPopup().domElem;return BEM.DOM.update(this.findElem(i,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(i,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){function e(t,e,i){var n={block:"select",elem:"item",content:{elem:"text",tag:"span",content:{tag:!1,html:e}||"   "},elemMods:{}};return i&&(n.elemMods=i),n}function i(t,n){var l=t.length;if(l){var c=0;do{var u=$(t[c]),h=u.attr("disabled")&&{disabled:"yes"};if(u.is("optgroup")){a=!0,!u.prev().is("optgroup")&&c>0&&s.push(o),r.push(s),s=[],s.push(e(u,u.attr("label"),$.extend({label:"yes"},h,n))),i(u.children(),$.extend({inner:"yes"},h,n));var d=s;s=r.pop(),s.push({block:"select",elem:"group",content:d})}else s.push(e(u,u.html(),$.extend(h,u.is(":selected")&&{selected:"yes"},n)))}while(++c<l||(a=!1))}}var n="select",o={block:n,elem:"separator",tag:"i"},s=[],r=[],a=!1;return i(t),BEMHTML.apply(s)}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,i=t.__self.getName(),n=this._getPopupContent(i),o=this._getPopupMix(i),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:n}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,i){t._isOutsideClicked(e,i)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,i){t._popup.containsDomElem($(i.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var i=parseInt(e.domElem.css("height"),10),n=t*this._rowHeight;i!==n&&(e.setSize({height:n}),i>n&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,i=this._popupContent,n=i.scrollTop(),o=e-n,s=2*this._rowHeight;o>i.height()-s?t=e-s:n&&s>o&&(t=e-i.height()+s),t&&i.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(t,e){var i=$(e),n=this.__self._getRadioByElem(i);i.isFocused()&&this.setMod(n,"focused","yes"),i.prop("checked")&&this.setMod(n,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");e.isFocused()||e.focus(),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur",{prev:t})})}},checked:{yes:function(t){var e=this.elem("radio","checked","yes"),i=this.findElem(t,"control"),n=this._val;this._willSwitch=!0,this.delMod(e,"checked"),this._willSwitch=!1,i.prop("checked",!0),this._val=i.val(),this.trigger("change",{current:t,currentVal:this._val,prev:e,prevVal:n})},"":function(t){var e=this.findElem(t,"control"),i=this._val;e.prop("checked",!1),this._val=void 0,this._willSwitch||this.trigger("change",{current:$(),currentVal:void 0,prev:t,prevVal:i})}},hovered:function(t){return!this.isDisabled(t)},pressed:function(t){return!this.isDisabled(t)},disabled:function(t,e,i){t.find(this.buildSelector("control")).prop("disabled",i),i&&this.delMod(t,"hovered").delMod(t,"pressed");
}}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if("undefined"==typeof t)return this._val;var e=this;return this.elem("control").each(function(i,n){return n.value===t?(e.setMod(e.__self._getRadioByElem($(n)),"checked","yes"),!1):void 0}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onRadioLeave:function(t){this.delMod(t.data.domElem,"hovered")},_onRadioClick:function(t,e){this.isDisabled(t)||this.setMod(t,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")},_onPointerpress:function(t){var e=t.data.domElem;this.setMod(e,"pressed","yes").bindToDoc("pointerrelease",function(){this.delMod(e,"pressed").unbindFromDoc("pointerrelease")})}},{live:function(){this.liveBindTo("radio","pointerclick",function(t){this._onRadioClick(t.data.domElem,t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","pointerover pointerout",function(t){t.data.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onRadioEnter(t):this._onRadioLeave(t))}).liveBindTo("control","focusin focusout",function(t){var e=this.__self._getRadioByElem(t.data.domElem);this.setMod(e,"focused","focusin"===t.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&t.preventDefault()}).liveBindTo("radio","pointerpress",function(t){this.hasMod(t.data.domElem,"disabled")||this._onPointerpress(t)})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}}),BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(t){this._pressedRadio=t.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(t){var e=this._pressedRadio;delete this._pressedRadio,this.delMod(e,"pressed"),this.afterCurrentEvent(function(){if(this.domElem){var i=this.findElem(e,"control");i.prop("checked")||!e.is(t.target)&&!e.find(t.target).length||i.trigger("change").focus()}}),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",function(t){this._onPointerPress(t)}),this.__base()}}),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(t){},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)})},highlight:function(t,e){if(!$.isArray(e))return t;var i,n=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",l=-1!==t.indexOf(a),c=function(){for(var e,i=/\&(#\d+|#x[a-f\d]+|\w+);/gi;e=i.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},u=function(t){if(l)return t;for(;-1!==t.indexOf(a)&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!l&&c(),s.forEach(function(e){i=o>e[0]?o:e[0],n.push({tag:"span",elem:"span",content:u(t.slice(o,i))}),n.push({tag:"em",elem:"em",content:u(t.slice(i,o=e[1]))})},this),n.push({tag:"span",elem:"span",content:u(t.slice(o))}),n}}),BEM.DOM.decl("b-autocomplete-item",{},{live:function(){return this.liveBindTo("mouseover mouseout mousedown mouseup pointerover pointerout pointerdown pointerup",function(t){this.trigger(t.type)}),this.__base()}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(t){var e=t.param("data"),i=BEM.blocks["i-common__string"].escapeHTML($.isArray(e)?e[1]:e);$.isArray(t.param("search_cgi"))&&t.js({cgi:t.param("search_cgi")}),t.tag("li").mod("pers",t.param("pers")?"yes":!1).content(BEM.blocks["b-autocomplete-item"].highlight(i,t.param("hl"))).js(!0)}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"geo"},{val:function(){return this.elem("reg").text()},enter:function(){},select:function(t){$(".input__geo").val(this.domElem.data("id"))}}),BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var e=t._focused;e&&t.delMod("focused"),t.elem("control").attr("autocomplete","off"),t._preventRequest=!1,e&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=$.debounce(t._doRequest,t.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))}},focused:{yes:function(){this.__base();var t=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",t)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},destruct:function(){var t=this._popup;return t&&t.domElem&&(this._popup=null,BEM.DOM.destruct(t.domElem)),this.__base.apply(this,arguments)},getDataprovider:function(){var t=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:t,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(t){var e=BEM.blocks.keycodes.is(t.which,"UP","DOWN");if(e&&!t.shiftKey){t.preventDefault();var i=this._items.length,n=!1;if(i){var o=t.which-39,s=this._curItemIndex,r=0;do n=(0===s&&-1===o||s+o>=i)&&this._onLeaveItem(this._items[s],!0),s+=o,0>s?s=i-1:s>=i&&(s=0);while(!n&&this._onEnterItem(this._items[s],!0)===!1&&++r<i)}}},_onKeyPress:function(t){t.which===BEM.blocks.keycodes.ENTER&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(t.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var e=t.__self.getName(),i=[{elem:"items",tag:"ul",mix:[{block:e,elem:"popup-items"}]}],n=Array.isArray(t.params.popupMixs)?t.params.popupMixs:[],o={directions:"bottom-left"};t._hasPopupFade()&&i.push({block:e,elem:"fade"}),$.extend(o,t.params.popupParams),n.push({block:e,elem:"popup",elemMods:t.params.popupMods,js:{uniqId:t._uniqId}}),t._popup=$(BEMHTML.apply({block:"popup",mods:{animate:"no"},mix:n,js:o,content:{elem:"content",content:i}})).bem("popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo("keydown",t._onKeyDown)},hide:function(){t.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({pointerover:t._onEnterItem,pointerout:t._onLeaveItem,pointerdown:t._onSelectItem,pointerup:t._onItemMouseUp},function(e,i){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){i.call(t,e.block)})}),BEM.DOM.init(t._popup.domElem)}return t._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(t,e){if(t.hasMod("enterable","no"))return!1;var i=this._items,n=this._curItemIndex;n>-1&&i[n].delMod("hovered"),n=this._getItemIndex(t),n>-1&&i[n].setMod("hovered","yes"),this._curItemIndex=n,this._isCurItemEnteredByKeyboard=Boolean(e),e&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(t.enter()!==!1?t.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(t,e){var i=this._curItemIndex;return i>-1&&i===this._getItemIndex(t)&&(this._items[i].delMod("hovered"),this._curItemIndex=-1),e&&this.val(this._userVal),!0},_onSelectItem:function(t,e){var i=t.select(e||!1),n="object"==typeof i?i.needUpdate:i!==!1,o="object"==typeof i&&i.needEvent;this._preventRequest=!0,n&&(this._userVal=t.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),e?this.del("_preventRequest")._getPopup().hide():(this._returnFocus=!0,this.bindToDoc("pointerrelease",this._onDocMouseUp),n||(this._preventHide=!0),this.afterCurrentEvent(function(){this.domElem&&this.setMod("focused","yes").del("_preventRequest","_preventHide")})),(n||o)&&this.trigger("select",{item:t,byKeyboard:e})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("pointerrelease").del("_returnFocus")._getPopup().hide()},_getItemIndex:function(t){return $.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(e){t.trigger("data-received",e);var i=t._getPopup(),n=e.items||e;t.foot&&n.length&&-1===$.inArray(t.foot,n)&&n.push(t.foot),n.length?(t._curItemIndex=-1,BEM.DOM.update(i.elem("items"),t._buildItemsHtml(n),function(){i.isShown()||(i.show(t.elem("box")),t._setWidth()),t._items=i.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):i.hide()})},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(t){var e=this;return BEMHTML.apply($.map(t,function(t,i){var n,o={block:"b-autocomplete-item",data:t,mods:{type:$.isArray(t)?t[0]:"text"},suggestVersion:e.params.dataprovider.version||4};return $.isArray(t)&&$.isPlainObject(n=t.concat().pop())&&$.extend(o,n),o}))},setFoot:function(t){return this.foot=t,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}}),BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},function(t){e.call(this,{items:t[1],metainfo:t[2]})})}}),BEM.DOM.decl("multiselect",{onSetMod:{js:function(){var t=this.elem("selected").val().split(","),e={};t.forEach(function(t){""!==t&&(e[t]=!0)}),this._lockUnlock(t),this.selected=e}},_onChange:function(t,e){var i=this.selected,n=[];i[t.val()]=e.checked;for(var o in i)i.hasOwnProperty(o)&&i[o]&&n.push(o);this._lockUnlock(n),this.elem("selected").val(n.join(","))},_lockUnlock:function(t){1===t.length?(this._locked=this.findBlockInside({block:"checkbox",modName:"checked",modVal:"yes"}),this._locked.setMod("disabled","yes")):this._locked&&(this._locked.delMod("disabled"),this._locked=null)}},{live:function(){return this.liveInitOnBlockInsideEvent("change","checkbox",function(t,e){this.afterCurrentEvent(function(){this._onChange(t.target,e)})}),!1}}),BEM.DOM.decl("b-wdgt-remove",{onSetMod:{js:function(){this.popup=this.findBlockOn("popup"),this.bindTo("do","click",this.yes),this.popup.on("hide",this.no,this),this.bindTo("cancel","click",this.hide),this.findBlockInside("blame","link").bindTo("click",this.changeThis(this.complain))}},show:function(t,e,i){return this.accepted=!1,this.yes=e,this.no=i,this.popup.show(t.domElem),this.updateBlameUrl(t),this},hide:function(){this.popup.hide(),this._complainUrl=""},updateBlameUrl:function(t){var e=this.findBlockInside("blame","link"),i=t.getInstance();this._complainUrl="/wcomplain/?wauth="+i.getAuth(),e.domElem.attr("href","https://wayback.archive-it.org/all/20180620162258/https://forms.yandex.ru/surveys/2449/?form2449-widget_id="+i.classId)},no:function(){return this.accepted||this.no(),this.no=this.yes=null,this},yes:function(){return this.yes(),this.accepted=!0,this.popup.hide(),this},complain:function(){if(this._complainUrl){var t=this.findBlockInside("blame","link").domElem.attr("href");return $.get(this._complainUrl,function(){window.location=t}),!1}}},{live:!0}),BEM.DOM.decl("b-wdgt-share",{onSetMod:{js:function(){this.bindTo("close","click",this.hide),this.bindTo("link","click",this.linkClick)}},show:function(t){this.updateLinks(t);var e=this.getPopup();e.show(),home.stat.logDOMShow(e.domElem)},hide:function(){this.getPopup().hide()},updateLinks:function(t){var e=t.id.substr(0,t.id.lastIndexOf("-")),i=location.protocol+"//wayback.archive-it.org/all/20180620162258/https://yandex.#d#/?add=#id#&from=shared".replace(/#d#/,document.domain.split(".").pop()).replace(/#id#/,e),n=this.params.shareText;this.findBlockOn("url","input").val(i),this.elem("link").each(function(){var e=$(this),o=e.data("service"),s=e.data("title")||n;e.attr("href","//wayback.archive-it.org/all/20180620162258/https://share.yandex.ru/go.xml?service="+encodeURIComponent(o)+"&url="+encodeURIComponent(i)+"&title="+encodeURIComponent(s.replace("%s","«"+t.params.title+"»").replace("(URL)",i)))})},linkClick:function(t){var e=t.currentTarget;if("_blank"!==e.target)return window.open(e.href,"shareWindow","status=1, toolbar=0, menubar=0, resizable=1, scrollbars=1, width=800px, height=500px"),!1},getPopup:function(){return this.popup||(this.popup=this.findBlockOn(this.domElem,"popup"))}},{live:!0}),BEM.DOM.decl("stream-promo-popup",{onSetMod:{js:{inited:function(){BEM.blocks["i-message-locker"].acquireLock("stream-promo-popup",this._hide.bind(this)).then(this._show.bind(this)),BEM.channel("suggest2").on("show",this._hide,this),$(window).on("keyboardOpened.lego",this._hide.bind(this))}}},_show:function(){this.setMod("visible","yes"),this.bindTo("inner","click",this._onClose),this.bindTo("close","click",this._onClose),this.bindTo("mouseenter",this._onMouseEnter),this.bindTo("mouseleave",this._onMouseLeave),home.stat.logDOMShow(this.domElem),this.params.counters.show&&((new Image).src=this.params.counters.show),this._hideTimeout=setTimeout(this._hide.bind(this),this.__self.HIDE_TIMEOUT);var t=$(".media-infinity-footer");t.length&&t.bem("media-infinity-footer").on("toggleFooter",function(){this._hovered||this._hide()},this),BEM.blocks["i-multiline-overflow"].calcAutoOverflow(this.domElem)},_hide:function(){this.delMod("visible"),BEM.blocks["i-message-locker"].releaseLock("stream-promo-popup")},_onClose:function(t){this._hide(),this.params.counters.close&&((new Image).src=this.params.counters.close),this.elem("close").is(t.data.domElem)&&t.stopPropagation()},_onMouseEnter:function(){this._hovered=!0,clearTimeout(this._hideTimeout)},_onMouseLeave:function(){this._hovered=!1,clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this._hide.bind(this),this.__self.HIDE_TIMEOUT)}},{HIDE_TIMEOUT:1e4}),$(function(){var t=window.home&&home.getData&&home.getData("stream-promo-popup.etalon-counter");t&&BEM.blocks["i-message-locker"].acquireLock("stream-promo-popup").then(function(){(new Image).src=t,BEM.blocks["i-message-locker"].releaseLock("stream-promo-popup")})}),BEM.DOM.decl({block:"stream-promo-popup",modName:"exp",modVal:"yes"},{_show:function(){this._button=this.findBlockInside("button"),this.__base.apply(this,arguments)},_onMouseEnter:function(){this.__base.apply(this,arguments),this._button.setMod("hovered","yes")},_onMouseLeave:function(){this.__base.apply(this,arguments),this.hasMod("visible")&&this._button.delMod("hovered")}}),function(){var t=function(){var t=home.getData("delayed-reporter"),e=function(t){"undefined"!=typeof t.timeout?setTimeout(function(){(new Image).src=t.url},1e3*t.timeout):(new Image).src=t.url},i=function(t){t&&(t="string"==typeof t?{url:t}:t,home.getData("common.reportVisibilityCheck")&&document.visibilityState&&"visible"!==document.visibilityState?document.addEventListener("visibilitychange",function i(){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",i),e(t))}):e(t))};if(t)for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];o instanceof Array||(o=[o]),o.forEach(i)}};window.$?$(t):"addEventListener"in document&&document.addEventListener("DOMContentLoaded",t,!1)}(),function(){"use strict";function t(t){return t?new Date(t).getTime():(new Date).getTime()}function e(t,e){return t.reverse().splice(0,e).reverse()}var i=12096e5,n=3,o="#hs"===window.location.hash;o&&(window.history&&history.replaceState?history.replaceState(history.state,"",location.pathname+location.search):location.hash="");var s=home.localStorage,r=!home.disabledLS&&s,a=$(window);r&&BEM.DOM.decl("b-hs-balloon",{onSetMod:{js:function(){var t=this;if(o)return void t._setDoNotShowFlag();if(!t._getDoNotShowFlag()&&90!==Math.abs(window.orientation)){var e=t._getData();e.length<n&&BEM.blocks["i-message-locker"].acquireLock("b-hs-balloon").then(function(){t.show(),t._updateShownDates(e),t.adjustBalloonPosition(),t._bindScroll(),t.elem("close").on("click",function(){t.forceHideBalloon()})})}}},adjustBalloonPosition:function(){var t=a.scrollTop();this.domElem.css("top",t)},_bindScroll:function(){a.on("scroll.balloon",this.changeThis(this.adjustBalloonPosition))},_unbindScroll:function(){a.off("scroll.balloon")},show:function(){var t=this;window.setTimeout(function(){t.setMod("display","yes"),t.adjustBalloonPosition(),t.setMod("opacity","visible"),home.stat.logDOMShow(t.domElem)},0),window.setTimeout(function(){t.hide()},15e3),window.location.hash="hs"},hide:function(){var t=this;this.setMod("opacity","hidden"),setTimeout(function(){t._unbindScroll(),t.setMod("display","no"),BEM.blocks["i-message-locker"].releaseLock("b-hs-balloon")},500)},immediateHide:function(){this._unbindScroll(),this.setMod("display","no"),this.setMod("opacity","hidden"),BEM.blocks["i-message-locker"].releaseLock("b-hs-balloon")},forceHideBalloon:function(){this._setDoNotShowFlag(),this.hide()},_getData:function(){var e;try{e=JSON.parse(s.getItem("balloonShownDates")).filter(function(e){return!isNaN(t(e))&&t()-t(e)<i})}catch(n){e=[]}return e},_updateShownDates:function(i){i.push(t());var o=e(i,n);s.setItem("balloonShownDates",JSON.stringify(o))},_setDoNotShowFlag:function(){s.setItem("doNotShowHSBalloon",1)},_getDoNotShowFlag:function(){return s.getItem("doNotShowHSBalloon")}})}(),function(t,e,i){function n(){f&&m&&console.log.apply(console,arguments)}function o(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?u+t.elem:"")+(t.modName?c+t.modName+c+t.modVal:"")}function s(t){var e={};return t.split(u).forEach(function(t,i){var n=[i?"elem":"block","mod","val"];t.split(c).forEach(function(t,i){e[n[i]]=t})}),e}function r(t){return t?p.push(t):!1}function a(){return p.length&&p.pop()}function l(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=e;var c="_",u="__",h="ru",d={},p=[],f=!1,m="undefined"!=typeof console&&"function"==typeof console.log;l.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&r(this._keyset),this._keyset=o(t),this},key:function(t){return this._key=t,this},decl:function(t){var e=s(this._keyset),i="i-tanker"===e.block?"tanker":this._prj,n=e.elem||this._keyset,o=this._key;i=i18n[i]||(i18n[i]={}),n=i[n]||(i[n]={}),n[o]="function"==typeof t?t:function(e){return t};var r=d[this._lang]||(d[this._lang]={}),a=r[this._keyset]||(r[this._keyset]={});a[o]=t},val:function(t,e){var i=d[this._lang]&&d[this._lang][this._keyset],o="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!i)return n("[I18N_NO_KEYSET] %s",o),"";i=i[this._key];var s=typeof i;return"undefined"===s?(n("[I18N_NO_VALUE] %s",o),""):"string"===s?i:(e||(e=this),i.call(e,t))},_cache:function(){return d}},e.I18N=function(t){var e=function(t,i,n){return e.keyset(t).key(i,n)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,i){var n,o,s=this._proto;return s.lang(this._lang).key(t),n=s.val.call(s,i,e),o=a(),o&&s.keyset(o,!1),n},e.decl=function(t,e,i){var n,o=this._proto;i||(i={}),i.lang&&o.lang(i.lang),o.keyset(t);for(n in e)e.hasOwnProperty(n)&&o.key(n).decl(e[n]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){f=!!t},e.lang(h),e}(new l)}(this,"undefined"==typeof BEM?{}:BEM),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("auth",{auth:"Авторизация","fill-input":"Заполните это поле",login:"Логин",logon:"Войти",more:"Ещё",password:"Пароль",register:"Регистрация",remember:"Вспомнить пароль","social-log-in":"Войти при помощи социальной сети",temporary:"Чужой компьютер","wrong-characters":"Недопустимый ввод","wrong-keyboard-layout":"Смените раскладку","wrong-password":"Пароль не может совпадать с логином"},{lang:"ru"}),BEM.I18N.decl("b-keyboard-popup",{close:"закрыть"},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appmetrica:"AppMetrica",appsearch:"Приложения",audience:"Аудитории",auto:"Авто",autoru:"Авто.ру",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",clickhouse:"ClickHouse",collection:"Коллекция",company:"Компания",contest:"Contest",delivery:"Доставка",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",display:"Дисплей",ege:"ЕГЭ",expert:"Эксперт",feedback:"Обратная связь",feedback2:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",kassa:"Касса",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",master:"Мастер",metrika:"Метрика",metro:"Метро",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",notifications:"Нотификационная панель",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Переводчик",probki:"Пробки",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",radar:"Радар",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",shtrafi:"Штрафы",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",telephony:"Телефония",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toloka:"Яндекс.Толока",toster:"Тосты",translate:"Переводчик",tune:"Настройки",tv:"ТВ",uslugi:"Услуги",video:"Видео","video-com":"Видео",vno:"ВНО",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер","webmaster-api":"API Вебмастера",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,i=e%10,n=e%100;return 1==i&&11!=n?t.one:i>1&&5>i&&(10>n||n>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t["true"]:t["false"]}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("popup",{add:"Добавить",cancel:"Отмена",revert:"Вернуть",apply:"Применить"},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"Найти","search-input-label":"Запрос","search-service-label":"Поиск по сервису","search-web-label":"Поиск в интернете"},{lang:"ru"}),BEM.I18N.decl("suggest2",{fact:"Факты",group:"Группа подсказок",nah:"Вы искали",nav:"Сайт",on_other_devices:"На других устройствах",text:"Поиск",traffic:"Пробки",weather:"Погода"},{lang:"ru"}),BEM.I18N.decl("suggest2-item",{"quick-answer":"Быстрый ответ"},{lang:"ru"}),BEM.I18N.decl("suggest2-view",{"delete":"Удалить"},{lang:"ru"}),BEM.I18N.decl("user",{enter:"Войти",exit:"Выйти",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},letter_compose:"Написать письмо",passport:"Паспорт",tune:"Настройка",upload_files:"Мой Диск"},{lang:"ru"}),BEM.I18N.lang("ru"));var BEMHTML;!function(t){function e(e){var i={},n=function(e,i){return function(n){if("object"==typeof i&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this,o.bemhtml=n()}}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){function n(t){this.bemxjst=t,this.jsClass=null,this.tag=new s(this,"tag"),this.attrs=new s(this,"attrs"),this.mod=new s(this),this.js=new s(this,"js"),this.mix=new s(this,"mix"),this.bem=new s(this,"bem"),this.cls=new s(this,"cls"),r.apply(this,arguments)}var o=t("inherits"),s=t("../bemxjst/match").Match,r=t("../bemxjst/entity").Entity;o(n,r),i.Entity=n,n.prototype.init=function(t,e){this.block=t,this.elem=e,this.jsClass=this.bemxjst.classBuilder.build(this.block,this.elem)},n.prototype._initRest=function(t){"default"===t?this.rest[t]=this.def:"tag"===t||"attrs"===t||"js"===t||"mix"===t||"bem"===t||"cls"===t||"content"===t?this.rest[t]=this[t]:this.rest.hasOwnProperty(t)||(this.rest[t]=new s(this,t))},n.prototype.defaultBody=function(t){var e,i=this.tag.exec(t);t.ctx.js!==!1&&(e=this.js.exec(t));var n=this.bem.exec(t),o=this.cls.exec(t),s=this.mix.exec(t),r=this.attrs.exec(t),a=this.content.exec(t);return this.bemxjst.render(t,this,i,e,n,o,s,r,a)}},{"../bemxjst/entity":5,"../bemxjst/match":8,inherits:11}],2:[function(t,e,i){function n(t){a.apply(this,arguments);var e="undefined"==typeof t.xhtml?!0:t.xhtml;this._shortTagCloser=e?"/>":">",this._elemJsInstances=t.elemJsInstances}var o=t("inherits"),s=t("../bemxjst/utils"),r=t("./entity").Entity,a=t("../bemxjst");o(n,a),e.exports=n,n.prototype.Entity=r,n.prototype.runMany=function(t){var e="",i=this.context,n=i.position,o=i._notNewList;if(o?i._listLength+=t.length-1:(i.position=0,i._listLength=t.length),i._notNewList=!0,this.canFlush)for(var s=0;s<t.length;s++)e+=i._flush(this._run(t[s]));else for(var s=0;s<t.length;s++)e+=this._run(t[s]);return o||(i.position=n),e},n.prototype.render=function(t,e,i,n,o,r,a,l,c){var u=t.ctx;if(void 0===i&&(i="div"),!i)return this.renderNoTag(t,n,o,r,a,l,c);var h="<"+i,d=u.js;d!==!1&&(n===!0&&(n={}),n&&n!==u.js?d!==!0&&(n=s.extend(d,n)):d===!0&&(n={}));var p;n&&(p={},p[e.jsClass]=n);var f=o;void 0===f&&(f=void 0===u.bem?e.block||e.elem:u.bem),f=!!f,void 0===r&&(r=u.cls);var m=p&&(this._elemJsInstances?e.block||e.elem:e.block&&!e.elem);if(!f&&!r)return this.renderClose(h,t,i,l,f,u,c);if(h+=' class="',f){var _=e.elem?t.elemMods:t.mods;if(h+=e.jsClass,h+=this.buildModsClasses(e.block,e.elem,_),u.mix&&a&&a!==u.mix&&(a=[].concat(a,u.mix)),a){var g=this.renderMix(e,a,p,m);h+=g.out,p=g.jsParams,m=g.addJSInitClass}r&&(h+=" "+("string"==typeof r?s.attrEscape(r).trim():r))}else r&&(h+=r.trim?s.attrEscape(r).trim():r);return h+=m?' i-bem"':'"',f&&p&&(h+=" data-bem='"+s.jsAttrEscape(JSON.stringify(p))+"'"),this.renderClose(h,t,i,l,f,u,c)},n.prototype.renderClose=function(t,e,i,n,o,r,a){var l=t,c=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&null!==t};if(c(n)||c(r.attrs)){n=s.extend(n,r.attrs);for(var u in n){var h=n[u];void 0!==h&&h!==!1&&null!==h&&(l+=h===!0?" "+u:" "+u+'="'+s.attrEscape(s.isSimple(h)?h:this.context.reapply(h))+'"')}}return s.isShortTag(i)?(l+=this._shortTagCloser,this.canFlush&&(l=e._flush(l))):(l+=">",this.canFlush&&(l=e._flush(l)),(a||0===a)&&(l+=this.renderContent(a,o)),l+="</"+i+">"),this.canFlush&&(l=e._flush(l)),l},n.prototype.renderMix=function(t,e,i,n){var o={},r=this.context,a=i,l=n;o[t.jsClass]=!0,s.isArray(e)||(e=[e]);for(var c=this.classBuilder,u="",h=0;h<e.length;h++){var d=e[h];if(d){"string"==typeof d&&(d={block:d,elem:void 0});var p=!1;d.elem?p=d.elem!==t.elem&&d.elem!==r.elem||d.block&&d.block!==t.block:d.block&&(p=!(d.block===t.block&&d.mods)||d.mods&&t.elem);var f=d.block||d._block||r.block,m=d.elem||d._elem||r.elem,_=c.build(f,m),g=d.elem||d._elem||(d.block?void 0:r.elem);if(p&&(u+=" "+c.build(f,g)),u+=this.buildModsClasses(f,g,d.elem||!d.block&&(d._elem||r.elem)?d.elemMods:d.mods),d.js&&(a||(a={}),a[c.build(f,d.elem)]=d.js===!0?{}:d.js,l||(l=f&&!d.elem)),p&&!o[_]){o[_]=!0;var v=this.entities[_];if(v){var b=r.block,y=r.elem,w=v.mix.exec(r);if(r.elem=y,r.block=b,w)for(var k=0;k<w.length;k++){var E=w[k];if(E&&(!E.block&&!E.elem||!o[c.build(E.block,E.elem)])){if(E.block)continue;E._block=f,E._elem=m,e=e.slice(0,h+1).concat(E,e.slice(h+1))}}}}}}return{out:u,jsParams:a,addJSInitClass:l}},n.prototype.buildModsClasses=function(t,e,i){if(!i)return"";var n,o="";for(n in i)if(i.hasOwnProperty(n)&&""!==n){var s=i[n];if(s||0===s){"boolean"!=typeof s&&(s+="");var r=this.classBuilder;o+=" "+(e?r.buildElemClass(t,e,n,s):r.buildBlockClass(t,n,s))}}return o},n.prototype.renderNoTag=function(t,e,i,n,o,s,r){return r||0===r?this._run(r):""}},{"../bemxjst":7,"../bemxjst/utils":10,"./entity":1,inherits:11}],3:[function(t,e,i){function n(t){this.modDelim=t.mod||"_",this.elemDelim=t.elem||"__"}i.ClassBuilder=n,n.prototype.build=function(t,e){return e?t+this.elemDelim+e:t},n.prototype.buildModPostfix=function(t,e){var i=this.modDelim+t;return e!==!0&&(i+=this.modDelim+e),i},n.prototype.buildBlockClass=function(t,e,i){var n=t;return i&&(n+=this.buildModPostfix(e,i)),n},n.prototype.buildElemClass=function(t,e,i,n){var o=this.buildBlockClass(t)+this.elemDelim+e;return n&&(o+=this.buildModPostfix(i,n)),o},n.prototype.split=function(t){return t.split(this.elemDelim,2)}},{}],4:[function(t,e,i){function n(t){this._bemxjst=t,this.ctx=null,this.block="",this._currBlock="",this.elem=null,this.mods={},this.elemMods={},this.position=0,this._listLength=0,this._notNewList=!1,this.escapeContent=t.options.escapeContent===!0,this._onceRef={}}var o=t("./utils");i.Context=n,n.prototype._flush=null,n.prototype.isArray=o.isArray,n.prototype.isSimple=o.isSimple,n.prototype.isShortTag=o.isShortTag,n.prototype.extend=o.extend,n.prototype.identify=o.identify,n.prototype.xmlEscape=o.xmlEscape,n.prototype.attrEscape=o.attrEscape,n.prototype.jsAttrEscape=o.jsAttrEscape,n.prototype.isFirst=function(){return 1===this.position},n.prototype.isLast=function(){return this.position===this._listLength},n.prototype.generateId=function(){return o.identify(this.ctx)},n.prototype.reapply=function(t){return this._bemxjst.run(t)}},{"./utils":10}],5:[function(t,e,i){function n(t,e,i,n){this.bemxjst=t,this.block=null,this.elem=null,this.options={},this.canFlush=!0,this.def=new r(this),this.content=new r(this,"content"),this.rest={},this.init(e,i),this.initModes(n)}function o(){return this.ctx.content}var s=t("./utils"),r=t("./match").Match,a=t("./tree"),l=a.Template,c=a.PropertyMatch,u=a.CompilerOptions;
i.Entity=n,n.prototype.init=function(t,e){this.block=t,this.elem=e},n.prototype.initModes=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],n=i.predicates.length-1;n>=0;n--){var o=i.predicates[n];if(o instanceof c&&"_mode"===o.key){i.predicates.splice(n,1),this._initRest(o.value),this.rest[o.value].push(i);break}}-1===n&&this.def.push(i);for(var n=i.predicates.length-1;n>=0;n--){var o=i.predicates[n];o instanceof u&&(this.options=s.extend(this.options,o.options))}}},n.prototype.prepend=function(t){for(var e=Object.keys(this.rest),i=0;i<e.length;i++){var n=e[i];t.rest[n]&&this.rest[n].prepend(t.rest[n])}e=Object.keys(t.rest);for(var i=0;i<e.length;i++){var n=e[i];this.rest[n]||(this._initRest(n),this.rest[n].prepend(t.rest[n]))}},n.prototype.run=function(t){return 0!==this.def.count?this.def.exec(t):this.defaultBody(t)},n.prototype.setDefaults=function(){if(0!==this.content.count&&this.content.push(new l([],o)),0!==this.def.count){this.canFlush=this.options.flush||!1;var t=this;this.def.push(new l([],function(){return t.defaultBody(this)}))}}},{"./match":8,"./tree":9,"./utils":10}],6:[function(t,e,i){function n(t,e){this.name="BEMXJSTError",this.message=t,Error.captureStackTrace?Error.captureStackTrace(this,e||this.constructor):this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,i.BEMXJSTError=n},{}],7:[function(t,e,i){function n(t){this.options=t||{},this.entities=null,this.defaultEnt=null,this.tree=null,this.match=null,this.contextConstructor=function(t){a.call(this,t)},o(this.contextConstructor,a),this.context=null,this.classBuilder=new l(this.options.naming||{}),this.depth=0,this.canFlush=!1,this.oninit=null,this.defaultEnt=new this.Entity(this,"","",[]),this.defaultElemEnt=new this.Entity(this,"","",[])}var o=t("inherits"),s=t("./tree").Tree,r=t("./tree").PropertyMatch,a=t("./context").Context,l=t("./class-builder").ClassBuilder,c=t("./utils");e.exports=n,n.prototype.locals=s.methods.concat("local","applyCtx","applyNext","apply"),n.prototype.compile=function(t){function e(){return r._run(r.context.ctx)}function i(t,i){return i?r.local(i,function(){return r.local({ctx:t},e)}):r.local({ctx:t},e)}function n(t,e){return r.applyMode(t,e)}function o(t){return function(e){return r.local(t,e)}}var r=this,a=new s({refs:{applyCtx:i,local:o}}),l=this.recompileInput(t),c=a.build(l,[o,i,function h(t){return t?r.local(t,h):r.applyNext()},n]);this.tree&&(c={templates:c.templates.concat(this.tree.templates),oninit:this.tree.oninit.concat(c.oninit)}),this.tree=c;var u=this.groupEntities(c.templates);u=this.transformEntities(u),this.entities=u,this.oninit=c.oninit},n.prototype.recompileInput=function(t){var e=n.prototype.locals;if("function"==typeof t&&t.length===e.length)return t;var i=t.toString();return i=i.replace(/^function[^{]+{|}$/g,""),i=new Function(e.join(", "),i)},n.prototype.groupEntities=function(e){for(var i={},n=0;n<e.length;n++){var o,s=e[n].clone(),a=null;o=void 0;for(var l=0;l<s.predicates.length;l++){var c=s.predicates[l];if(c instanceof r){if("block"===c.key)a=c.value;else{if("elem"!==c.key)continue;o=c.value}s.predicates.splice(l,1),l--}}if(null===a){for(var u="block(…) subpredicate is not found.\n    See template with subpredicates:\n     * ",l=0;l<s.predicates.length;l++){var c=s.predicates[l];0!==l&&(u+="\n     * "),u+="_mode"===c.key?c.value+"()":Array.isArray(c.key)?c.key[0].replace("mods","mod").replace("elemMods","elemMod")+"('"+c.key[1]+"', '"+c.value+"')":c.value&&c.key?c.key+"('"+c.value+"')":"match(…)"}throw u+="\n    And template body: \n    ("+("function"==typeof s.body?s.body:JSON.stringify(s.body))+")","undefined"==typeof BEMXJSTError&&(BEMXJSTError=t("./error").BEMXJSTError),new BEMXJSTError(u)}var h=this.classBuilder.build(a,o);i[h]||(i[h]=[]),i[h].push(s)}return i},n.prototype.transformEntities=function(t){for(var e=[],i=Object.keys(t),n=0;n<i.length;n++){var o=i[n],s=this.classBuilder.split(o),r=s[0],a=s[1];"*"===a&&e.push(r),t[o]=new this.Entity(this,r,a,t[o])}if(t.hasOwnProperty("*")){for(var l=t["*"],n=0;n<i.length;n++){var o=i[n];"*"!==o&&t[o].prepend(l)}this.defaultEnt.prepend(l),this.defaultElemEnt.prepend(l)}for(var n=0;n<e.length;n++){for(var r=e[n],c=this.classBuilder.build(r,"*"),l=t[c],n=0;n<i.length;n++){var o=i[n];if(o!==c){var u=t[o];u.block===r&&void 0!==u.elem&&t[o].prepend(l)}}this.defaultElemEnt.prepend(l)}for(var n=0;n<i.length;n++){var o=i[n];t[o].setDefaults(),this.defaultEnt.setDefaults(),this.defaultElemEnt.setDefaults()}return t},n.prototype._run=function(t){var e;return e=void 0===t||""===t||null===t?this.runEmpty():c.isArray(t)?this.runMany(t):"string"!=typeof t.html||t.tag||"undefined"!=typeof t.block||"undefined"!=typeof t.elem||"undefined"!=typeof t.cls||"undefined"!=typeof t.attrs?c.isSimple(t)?this.runSimple(t):this.runOne(t):this.runUnescaped(t.html)},n.prototype.run=function(t){var e=this.match,i=this.context;this.match=null,this.context=new this.contextConstructor(this),this.canFlush=null!==this.context._flush,this.depth=0;var n=this._run(t);return this.canFlush&&(n=this.context._flush(n)),this.match=e,this.context=i,n},n.prototype.runEmpty=function(){return this.context._listLength--,""},n.prototype.runUnescaped=function(t){return this.context._listLength--,""+t},n.prototype.runSimple=function(t){this.context._listLength--;var e="";return(t&&t!==!0||0===t)&&(e+="string"==typeof t&&this.context.escapeContent?c.xmlEscape(t):t),e},n.prototype.runOne=function(t){var e=this.context,i=e.ctx,n=e.block,o=e._currBlock,s=e.elem,r=e.mods,a=e.elemMods;t.block||t.elem?e._currBlock="":e._currBlock=e.block,e.ctx=t,t.block?(e.block=t.block,t.mods?e.mods=t.mods:t.block===n&&t.elem||(e.mods={})):t.elem?o&&(e.block=o):e.block="",e.elem=t.elem,t.elemMods?e.elemMods=t.elemMods:e.elemMods={};var l=e.block||"",c=e.elem;l||c?e.position++:e._listLength--,this.depth++;var u=this.classBuilder.build(l,c),h=!1,d=this.entities[u];d?this.canFlush&&!d.canFlush&&(h=!0,this.canFlush=!1):(d=this.defaultEnt,void 0!==c&&(d=this.defaultElemEnt),d.init(l,c));var p=this.options.production===!0?this.tryRun(e,d):d.run(e);return e.ctx=i,e.block=n,e.elem=s,e.mods=r,e.elemMods=a,e._currBlock=o,this.depth--,h&&(this.canFlush=!0),p},n.prototype.tryRun=function(t,e){try{return e.run(t)}catch(i){return console.error("BEMXJST ERROR: cannot render "+["block "+t.block,"elem "+t.elem,"mods "+JSON.stringify(t.mods),"elemMods "+JSON.stringify(t.elemMods)].join(", "),i),""}},n.prototype.renderContent=function(t,e){var i=this.context,n=i.position,o=i._listLength,s=i._notNewList;i._notNewList=!1,e&&(i.position=0,i._listLength=1);var r=this._run(t);return i.position=n,i._listLength=o,i._notNewList=s,r},n.prototype.local=function(t,e){for(var i=Object.keys(t),n=[],o=0;o<i.length;o++){for(var s=i[o],r=s.split("."),a=this.context,l=0;l<r.length-1;l++)a=a[r[l]];n.push({parts:r,value:a[r[l]]}),a[r[l]]=t[s]}for(var c=e.call(this.context),o=0;o<n.length;o++){for(var r=n[o].parts,a=this.context,l=0;l<r.length-1;l++)a=a[r[l]];a[r[l]]=n[o].value}return c},n.prototype.applyNext=function(){return this.match.exec(this.context)},n.prototype.applyMode=function(t,e){var i=this.match.entity.rest[t];if(!i)return this.context.ctx[t];if(!e)return i.exec(this.context);var n=this,o=function(){return i.exec(n.context)};return this.local(e,o)},n.prototype.exportApply=function(t){var e=this;t.apply=function(t){return e.run(t)},t.compile=function(t){return e.compile(t)};var i={};t.BEMContext=this.contextConstructor,i.BEMContext=t.BEMContext;for(var n=0;n<this.oninit.length;n++){var o=this.oninit[n];o(t,i)}}},{"./class-builder":3,"./context":4,"./error":6,"./tree":9,"./utils":10,inherits:11}],8:[function(t,e,i){function n(t,e){this.template=t,this.key=e.key,this.value=e.value}function o(t,e){this.template=t,this.keys=e.key,this.value=e.value}function s(t,e){this.template=t,this.key=e.key}function r(t,e){this.template=t,this.body=e.body}function a(t){this.template=t,this.once=null}function l(t){this.template=t,this.wrap=null}function c(t,e){this.mode=t,this.predicates=new Array(e.predicates.length),this.body=e.body;for(var i=[],c=0,u=0;c<this.predicates.length;c++,u++){var d=e.predicates[c];d instanceof p?h.isArray(d.key)?this.predicates[u]=new o(this,d):this.predicates[u]=new n(this,d):d instanceof _?this.predicates[u]=new s(this,d):d instanceof g?this.predicates[u]=new r(this,d):d instanceof f?(u--,i.push(new a(this))):d instanceof m?(u--,i.push(new l(this))):u--}for(var c=0;c<i.length;c++,u++)this.predicates[u]=i[c];this.predicates.length!==u&&(this.predicates.length=u)}function u(t,e){this.entity=t,this.modeName=e,this.bemxjst=this.entity.bemxjst,this.templates=[],this.mask=[0],this.maskSize=0,this.maskOffset=0,this.count=0,this.depth=-1,this.thrownError=null}var h=t("./utils"),d=t("./tree"),p=d.PropertyMatch,f=d.OnceMatch,m=d.WrapMatch,_=d.PropertyAbsent,g=d.CustomMatch;n.prototype.exec=function(t){return t[this.key]===this.value},o.prototype.exec=function(t){for(var e=t,i=0;i<this.keys.length-1;i++)if(e=e[this.keys[i]],!e)return!1;return e[this.keys[i]]===this.value},s.prototype.exec=function(t){return!t[this.key]},r.prototype.exec=function(t){return this.body.call(t,t,t.ctx)},a.prototype.exec=function(t){var e=this.once!==t._onceRef;return this.once=t._onceRef,e},l.prototype.exec=function(t){var e=this.wrap!==t.ctx;return this.wrap=t.ctx,e},i.MatchTemplate=c,i.Match=u,u.prototype.clone=function(t){var e=new u(t,this.modeName);return e.templates=this.templates.slice(),e.mask=this.mask.slice(),e.maskSize=this.maskSize,e.count=this.count,e},u.prototype.prepend=function(t){for(this.templates=t.templates.concat(this.templates),this.count+=t.count;Math.ceil(this.count/31)>this.mask.length;)this.mask.push(0);this.maskSize=this.mask.length},u.prototype.push=function(t){this.templates.push(new c(this,t)),this.count++,Math.ceil(this.count/31)>this.mask.length&&this.mask.push(0),this.maskSize=this.mask.length},u.prototype.tryCatch=function(t,e){try{return t.call(e,e,e.ctx)}catch(i){this.thrownError=i}},u.prototype.exec=function(t){for(var e,i=this.checkDepth(),n=this.maskOffset,o=this.mask[n],s=1,r=0;r<this.count;r++){if(0===(o&s)){e=this.templates[r];for(var a=0;a<e.predicates.length;a++){var l=e.predicates[a];if(!l.exec(t))break}if(a===e.predicates.length)break}1073741824===s?(n++,o=this.mask[n],s=1):s<<=1}if(r===this.count)return t.ctx[this.modeName];var c=o,u=this.bemxjst.match;this.mask[n]|=s,this.bemxjst.match=this,this.thrownError=null;var h;h="function"==typeof e.body?this.tryCatch(e.body,t):e.body,this.mask[n]=c,this.bemxjst.match=u,this.restoreDepth(i);var d=this.thrownError;if(null!==d)throw this.thrownError=null,d;return h},u.prototype.checkDepth=function(){if(-1===this.depth)return this.depth=this.bemxjst.depth,-1;if(this.bemxjst.depth===this.depth)return this.depth;var t=this.depth;for(this.depth=this.bemxjst.depth,this.maskOffset+=this.maskSize;this.mask.length<this.maskOffset+this.maskSize;)this.mask.push(0);return t},u.prototype.restoreDepth=function(t){-1!==t&&t!==this.depth&&(this.maskOffset-=this.maskSize),this.depth=t}},{"./tree":9,"./utils":10}],9:[function(t,e,i){function n(t,e){this.predicates=t,this.body=e}function o(){}function s(t,e){this.conditions=[],this.children=[];for(var i=e.length-1;i>=0;i--){var n=e[i];n instanceof o?this.conditions.push(n):n===t.boundBody?this.children[i]=t.queue.pop():this.children[i]=n}}function r(){o.call(this)}function a(t){o.call(this),this.refs=t}function l(t){o.call(this),this.refs=t}function c(t){o.call(this),this.refs=t}function u(t){o.call(this),this.options=t}function h(t,e){o.call(this),this.key=t,this.value=e}function d(t){o.call(this),this.key=t}function p(t){o.call(this),this.body=t}function f(t){this.options=t,this.refs=this.options.refs,this.boundBody=this.body.bind(this);for(var e=this.methods("body"),i=0;i<e.length;i++){var n=e[i];this.boundBody[f.methods[i]]=n}this.queue=[],this.templates=[],this.initializers=[]}function m(t,e,i){var n=t[i],o=t.boundBody;return"body"!==e?"replace"===i||"extend"===i||"wrap"===i?function(){return n.apply(t,arguments)}:function(){return n.apply(t,arguments),o}:function(){var e=n.apply(t,arguments),s=t.queue.pop(),r=t.queue[t.queue.length-1];return r.conditions=r.conditions.concat(s.conditions),r.children=r.children.concat(s.children),"replace"===i||"extend"===i||"wrap"===i?e:o}}var _=t("minimalistic-assert"),g=t("inherits");i.Template=n,n.prototype.wrap=function(){for(var t=this.body,e=0;e<this.predicates.length;e++){var i=this.predicates[e];t=i.wrapBody(t)}this.body=t},n.prototype.clone=function(){return new n(this.predicates.slice(),this.body)},i.MatchBase=o,o.prototype.wrapBody=function(t){return t},g(r,o),i.OnceMatch=r,g(a,o),i.WrapMatch=a,a.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},g(l,o),i.ReplaceMatch=l,l.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},g(c,o),i.ExtendMatch=c,c.prototype.wrapBody=function(t){var e=this.refs.applyCtx,i=this.refs.local;return"function"!=typeof t?function(){for(var n={},o=Object.keys(t),s=0;s<o.length;s++)n["ctx."+o[s]]=t[o[s]];return i(n)(function(){return e(this.ctx)})}:function(){for(var n={},o=t.call(this),s=Object.keys(o),r=0;r<s.length;r++)n["ctx."+s[r]]=o[s[r]];return i(n)(function(){return e(this.ctx)})}},g(u,o),i.CompilerOptions=u,g(h,o),i.PropertyMatch=h,g(d,o),i.PropertyAbsent=d,g(p,o),i.CustomMatch=p,i.Tree=f,f.methods=["match","once","wrap","block","elem","mode","mod","elemMod","def","tag","attrs","cls","js","bem","mix","content","replace","extend","oninit","xjstOptions"],f.prototype.build=function(t,e){var i=this.methods("global").concat(e);return i[0]=this.match.bind(this),t.apply({},i),{templates:this.templates.slice().reverse(),oninit:this.initializers}},f.prototype.methods=function(t){for(var e=new Array(f.methods.length),i=0;i<e.length;i++){var n=f.methods[i];e[i]=m(this,t,n)}return e},f.prototype.flush=function(t,e){var i;i=e.conditions?t.concat(e.conditions):e.conditions;for(var o=0;o<e.children.length;o++){var r=e.children[o];if(r instanceof s)this.flush(i,e.children[o]);else{var a=new n(t,r);a.wrap(),this.templates.push(a)}}},f.prototype.body=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];var i=new s(this,t);return this.queue[this.queue.length-1].children.push(i),1===this.queue.length&&this.flush([],this.queue.shift()),this.boundBody},f.prototype.match=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++){var i=arguments[e];"function"==typeof i&&(i=new p(i)),_(i instanceof o,"Wrong .match() argument"),t[e]=i}return this.queue.push(new s(this,t)),this.boundBody},f.prototype.once=function(){if(arguments.length)throw new Error("Predicate once() should not have arguments");return this.match(new r)},f.prototype.applyMode=function(t,e){if(t.length)throw new Error("Predicate should not have arguments but "+JSON.stringify(t)+" passed");return this.mode(e)},f.prototype.wrap=function(){return this.def.apply(this,arguments).match(new a(this.refs))},f.prototype.xjstOptions=function(t){return this.queue.push(new s(this,[new u(t)])),this.boundBody},f.prototype.block=function(t){return this.match(new h("block",t))},f.prototype.elem=function(t){return this.match(new h("elem",t))},f.prototype.mode=function(t){return this.match(new h("_mode",t))},f.prototype.mod=function(t,e){return this.match(new h(["mods",t],e))},f.prototype.elemMod=function(t,e){return this.match(new h(["elemMods",t],e))},f.prototype.def=function(){return this.applyMode(arguments,"default")},f.prototype.tag=function(){return this.applyMode(arguments,"tag")},f.prototype.attrs=function(){return this.applyMode(arguments,"attrs")},f.prototype.cls=function(){return this.applyMode(arguments,"cls")},f.prototype.js=function(){return this.applyMode(arguments,"js")},f.prototype.bem=function(){return this.applyMode(arguments,"bem")},f.prototype.mix=function(){return this.applyMode(arguments,"mix")},f.prototype.content=function(){return this.applyMode(arguments,"content")},f.prototype.replace=function(){return this.def.apply(this,arguments).match(new l(this.refs))},f.prototype.extend=function(){return this.def.apply(this,arguments).match(new c(this.refs))},f.prototype.oninit=function(t){this.initializers.push(t)}},{inherits:11,"minimalistic-assert":12}],10:[function(t,e,i){function n(){return c+ ++r}var o=Object.prototype.toString;i.isArray=Array.isArray,i.isArray||(i.isArray=function(t){return"[object Array]"===o.call(t)}),i.xmlEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},i.attrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")},i.jsAttrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/'/g,"&#39;")},i.extend=function(t,e){if(!t||!e)return t||e;var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n};var s={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};i.isShortTag=function(t){return s.hasOwnProperty(t)},i.isSimple=function u(t){return t&&t!==!0&&(t.block||t.elem||t.tag||t.cls||t.attrs||!t.hasOwnProperty("html")||!u(t.html))?"string"==typeof t||"number"==typeof t:!0};var r=0,a=+new Date,l="__"+a,c="uniq"+a;i.getUniq=n,i.identify=function(t,e){if(!t)return n();if(e||t[l])return t[l];var i=n();return t[l]=i,i}},{}],11:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],12:[function(t,e,i){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}e.exports=n,n.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},{}]},{},[2])(2)}),e.exports||i.BEMHTML}({},{}),o=new n({});return o.compile(function(t,i,n,o,s,r,a,l,c,u,h,d,p,f,m,_,g,v,b,y,w,k,E,M){b(function(t){var e=t.BEMContext.prototype,i=t["i-global"]=e["i-global"]=e.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//wayback.archive-it.org/all/20180620162258/https://clck.yandex.ru","passport-host":"https://wayback.archive-it.org/all/20180620162258/https://passport.yandex.ru","pass-host":"https://wayback.archive-it.org/all/20180620162258/https://pass.yandex.ru","social-host":"https://wayback.archive-it.org/all/20180620162258/https://social.yandex.ru","export-host":"https://wayback.archive-it.org/all/20180620162258/https://export.yandex.ru",login:"","lego-static-host":"https://wayback.archive-it.org/all/20180620162258/https://yastatic.net/lego/2.10-142"},e["i-global"]);i._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},i.makePublic=function(t,n){return"object"==typeof t?void(i._public=e.extend(i._public,t)):("undefined"==typeof n&&(n=!0),void(i._public[t]=n))},i.isPublic=function(t){return Boolean(i._public[t])},i.setTld=function(t){var e="tr"===t?"yandex.com.tr":"yandex."+t,n=-1!==["ua","by","kz"].indexOf(t)?"yandex.ru":e;i.tld=t,i["content-region"]=t,i["click-host"]="//wayback.archive-it.org/all/20180620162258/https://clck."+n,i["passport-host"]="https://wayback.archive-it.org/all/20180620162258/https://passport."+n,i["pass-host"]="https://wayback.archive-it.org/all/20180620162258/https://pass."+e,i["social-host"]="https://wayback.archive-it.org/all/20180620162258/https://social."+e,i["export-host"]="https://wayback.archive-it.org/all/20180620162258/https://export."+e},e._iGlobalBackup={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=e.extend({},i)},restore:function(){var t;for(t in i)delete i[t];for(t in this._backup)i[t]=this._backup[t]}}}),o("i-global")(u()(""),c()(function(){var t=this.ctx.params||{},e=this["i-global"];this._iGlobalBackup.exists()?this.ctx.reset!==!1&&this._iGlobalBackup.restore():this._iGlobalBackup.save(),t.tld&&t.tld!==e.tld&&e.setTld(t.tld);for(var i in t)e[i]=t[i];return""})),b(function(t){t.BEMContext.prototype.cleverSubstring=function(t,e,i){return t.length>e+i?t.substring(0,e-1)+"…":t}}),o("input")(u()("span"),r("live")(!1),r("getLive")(function(){var t=M("live"),e=this.ctx.js,i=this.mods,n={autofocus:"yes",width:"content","tap-ahead":"yes"};return e?(void 0!==e.live?Boolean(e.live):t)&&!e.autoFocus&&!Object.keys(n).some(function(t){return i[t]===n[t]}):t}),p()(function(){return{live:this._live}}),c()(function(){var t,e=M("value",{ctx:this.ctx.value}),i=this.ctx.id||this.generateId(),n=this.mods,o=M("getLive",{}),s=this.ctx.placeholder;return n.theme=n.theme||"normal",this.ctx.hasOwnProperty("placeholder")&&(t=this.isSimple(s)?s:this.reapply(s)),E({_inputId:i,_labelId:"label"+i,_hintId:"hint"+i,_name:this.ctx.name||"",_value:e,_inputLink:!0,_iconLeft:this.ctx.icon||this.ctx.iconLeft,_iconRight:this.ctx.iconRight,_disabled:n.disabled,_live:o,_placeholder:t,_hasClear:"no"!==n.clear})}),r("value")("",t(function(){return this.ctx})(function(){return this.reapply(this.ctx)}),t(function(){return this.isSimple(this.ctx)})(function(){return this.ctx}))),o("input").elem("box")(u()("span"),_()(function(){return[this._iconLeft&&{elem:"icon",icon:this._iconLeft,elemMods:{side:"left"}},this._iconRight&&{elem:"icon",icon:this._iconRight,elemMods:{side:"right"}},this._hasClear&&{elem:"clear",elemMods:this._value||0===this._value?{visibility:"visible"}:void 0,content:" "},this.ctx.content].filter(Boolean)})),o("input").elem("control")(u()("input"),h()(function(){var t=this.extend({id:this._inputId,name:this._name,placeholder:this._placeholder},this.ctx.controlAttrs);return(this._value||0===this._value||""===this._value)&&(t.value=this._value),this.mods.disabled&&(t.disabled=!0),this._live&&(t.autocomplete="off"),t["aria-labelledby"]=this._labelId+" "+this._hintId,t}),n()(function(){return{elem:"box",content:this.ctx}})),o("input").elem("clear")(u()("span"),h()(function(){return{unselectable:"on"}}),_().match(function(){return!this.ctx.content})("")),b(function(t){t.BEMContext.prototype.util||(t.BEMContext.prototype.util={})}),b(function(t){function e(t){return"object"==typeof t&&"[object Object]"===o.call(t)}function i(t,n,o){var s,r;t=Object(t),n=Object(n);for(s in n)r=o&&o(t[s],n[s],s),void 0!==r?t[s]=r:e(t[s])&&e(n[s])?t[s]=i(t[s],n[s],o):t[s]=n[s];return t}function n(t,e){return i(t,e,function(t,e,i){return"mix"===i?[].concat(t,e):void 0})}var o=Object.prototype.toString;t.BEMContext.prototype.util.merge=i,t.BEMContext.prototype.util.mergeBemjson=n}),o("i-ua")(f()(!1),u()("script"),h()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),_()(function(){var t=[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("");return[{html:t}]})),o("i-ua").content()(function(){var t=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("");return[].concat(E(),{html:t})}),o("link")(c()(function(){var t=(this.mods,this.ctx.url);return void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),this._url=this.isSimple(t)?t:this.reapply(t),E()}),u()(function(){return void 0!==this._url?"a":"span"}),p()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0,_url:this.mods.disabled?this._url:void 0}}),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx,e=t.attrs,i=void 0!==Object(e).rel,n=i?String(e.rel):"";return n&&-1===n.indexOf("noopener")&&(e.rel=n+" noopener"),this.extend(E(),{rel:"noopener"})}),h()(function(){var t=this.ctx,e=this._url,i=void 0!==e,n=Boolean(this.mods.disabled),o=n?i&&-1:t.tabindex;return this.extend(E(),{id:t.id,name:t.name,title:t.title,target:t.target,tabindex:o,href:i&&!n?e:void 0,role:i?void 0:"button","aria-disabled":n?"true":void 0})}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=this.ctx,e=Boolean(t.text),i=Boolean(t.icon),n=function(t){return function(e){return"string"==typeof e?{html:t(e)}:e}}(this.xmlEscape);return[i&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon"}},t.icon),e&&(this.isSimple(t.text)?i?{elem:"inner",content:n(t.text)}:n(t.text):t.text.block?this.util.mergeBemjson({mix:{block:"link",elem:"inner"}},t.text):this.extend({block:"link",elem:"inner"},t.text))]}),s("inner").tag()("span")),o("popup")(c().match(function(){return!this._popupDefaults})(function(){var t=this.ctx,e=this.mods;if(e.hasOwnProperty("theme")||(e.theme="ffffff"),e.hasOwnProperty("autoclosable")||(e.autoclosable="yes"),e.hasOwnProperty("adaptive")||(e.adaptive="yes"),e.hasOwnProperty("animate")||(e.animate="yes"),t.zIndex){var i=t.attrs||(t.attrs={});i.style=(i.style||"")+";z-index:"+t.zIndex+";"}return M("default",{_popupDefaults:!0})}),_()(function(){return delete this._popupDefaults,[{elem:"under",elemMods:this.ctx.underMods},this.ctx.content]})),o("suggest2")(s("items").tag()("ul")),o("i-bem").elem("i18n").def()(function(){if(!this.ctx)return"";var t=this.ctx,e=t.keyset,i=t.key,n=t.params||{};return e||i?(t.content&&(n.content=this.reapply(t.content)),BEM.I18N(e,i,n)):""}),b(function(){!function(t,e){if(!e.I18N){t.BEM=e;var i=e.I18N=function(t,e){return e};i.keyset=function(){return i},i.key=function(t){return t},i.lang=function(){}}}(this,"undefined"==typeof BEM?{}:BEM)}),o("suggest2-item")(u()("li"),p()(!0),s("text")(u()(function(){return this.ctx.tag||"span"}),_()(function(){return Array.isArray(this.ctx.content)?this.ctx.content.map(function(t){return"string"==typeof t?this.xmlEscape(t):t},this):this.xmlEscape(this.ctx.content)})),s("fact").tag()("span")),o("suggest2").mod("theme","normal").elem("content").tag()("ul"),o("suggest2-item").elem("highlight")(u()("b"),f()(!1),_()(function(){return this.xmlEscape(this.ctx.content)})),o("suggest2-item").elem("fact")(t(function(){return this.ctx.color}).def()(function(){return this.ctx.attrs=this.extend(Object(this.ctx.attrs),{style:";color:"+this.ctx.color+";"+(Object(this.ctx.attrs).style||"")}),E()}),_()(function(){return[{block:"suggest2",elem:"a11y",content:BEM.I18N("suggest2-item","quick-answer")+": "},{html:this.xmlEscape(this.ctx.content)}]})),o("suggest2").elem("a11y").tag()("span"),o("suggest2-item").elem("bullet")(u()("span"),h()({"aria-hidden":!0})),o("suggest2-item").mod("type","nav").elem("fact").content()(function(){return this.xmlEscape(this.ctx.content)}),o("suggest2-item").mod("interact","link")(_()(function(){return{elem:"link",url:this.ctx.url,target:this.ctx.target||"_blank",content:this.ctx.content}}),t(function(){return"nav"===this.mods.type||"icon"===this.mods.type}).elem("text").mix()({mods:{type:"url"}})),o("suggest2-item").elem("link")(u()("a"),h()(function(){return{href:this.ctx.url,target:this.ctx.target}})),o("suggest2-item").elem("icon")(c()(function(){var t=BEM.blocks["suggest2-detect"]&&BEM.blocks["suggest2-detect"].isSupportInlineSVG()?"svg":"png";this.ctx.autoType&&(this.ctx[t]="//wayback.archive-it.org/all/20180620162258/https://yastatic.net/suggest-flag-icons/icon."+this.ctx.autoType+t);var e=this.ctx.png&&this.ctx.svg?this.ctx[t]:this.ctx.svg||this.ctx.png;return e&&(this.ctx.attrs=this.extend(Object(this.ctx.attrs),{style:'background-image:url("'+e+'");'+(Object(this.ctx.attrs).style||"")})),E()}),u()("span")),o("suggest2-item").elem("icon").match(function(){return this.elemMods.traffic}).def()(function(){return E({"ctx.autoType":"traffic."+this.elemMods.traffic+"."})}),o("suggest2-item").elem("icon").match(function(){return this.elemMods.weather}).def()(function(){var t=this.elemMods.weather.replace("-","minus-").replace("+","plus-").replace(/_/g,"-");return E({"ctx.autoType":"weather."+t+".","elemMods.weather":t})}),o("suggest2-item")(s("thumb").match(function(){return!this.ctx.content}).content()(function(){return{elem:"thumb-wrapper",attrs:{style:this.ctx.bgColor?"background-color: "+this.ctx.bgColor+";border: none;":""},content:{elem:"thumb-img",attrs:{src:this.ctx.src,alt:this.ctx.alt}}}}),s("thumb-img").tag()("img")),o("suggest2-item").elem("img").def()(function(){var t=this.ctx.attrs||{};return this.ctx.src&&(t.style="background-image: url('"+this.ctx.src+"');"+(t.style||"")),E({"ctx.attrs":t})}),o("suggest2-item").elem("text").elemMod("type","title-url").tag()("div"),o("suggest2-item").elem("text").elemMod("type","green-url").tag()("div"),o("widget").elem("control-icon")(u()(function(){return this.ctx.href?"a":"span"}),h()(function(){var t=this.ctx.attrs||{};return this.ctx.href?t.href=this.ctx.href:(t.role="button",t.tabindex="0"),t}),_()(function(){return{cls:"b-ico b-ico-"+this.ctx.icon}})),o("button")(c()(function(){this.mods;return E()}),u()("button"),t(function(){return this.ctx.url}).tag()("a"),p()(!0),h()(t(function(){return!0})(function(){var t=this.ctx,e={};return e.tabindex=t.tabindex,e}),t(function(){return this.ctx.url})(function(){var t=this.ctx,e=t.attrs,i=E(),n={href:t.url,target:t.target},o=void 0!==Object(e).rel,s=o?String(e.rel):"",r="_blank"===n.target;return r&&(n.rel="noopener",s&&-1===s.indexOf("noopener")&&(e.rel=s+" noopener")),this.extend(i,n)}),t(function(){return!this.ctx.url})(function(){var t=this.ctx,e=E(),i={type:t.type||"button",autocomplete:"off",name:t.name,value:t.value};return this.extend(e,i)})),_()(function(){return{elem:"text",tag:"span",content:this.ctx.content}})),o("button").mod("disabled","yes").attrs()(function(){var t=this.ctx,e={};return t.url?e["aria-disabled"]="true":e.disabled=!0,this.extend(E(),e)}),o("popup").mod("has-close","yes").content()(function(){return[E(),{elem:"close"}]}),o("popup").elem("close").tag()("i"),o("b-wdgt-preferences")(s("data")(u()("form"),_()(function(){return{elem:"table",content:this.ctx.list.filter(function(t){return t.elem="pref",t.name})}})),s("pref").content()(function(){return[this.ctx.name,this.ctx.value,this.ctx.label,this.ctx.type].join(", ")}),s("pref").match(function(){return"hidden"===this.ctx.type})(u()("input"),h()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.value}})),s("pref").match(function(){return"bool"===this.ctx.type||"boolean"===this.ctx.type}).content()(function(){return{elem:"pref-col",content:{block:"checkbox",mods:{size:"s",theme:"normal",checked:"true"===this.ctx.value?"yes":""},text:this.ctx.label,checkboxAttrs:{value:1,name:this.ctx.name}}}}),s("pref").match(function(){return"list"===this.ctx.type}).content()(function(){return[{elem:"pref-col",elemMods:{labeled:"yes"},content:[{tag:"span",elem:"label",content:this.ctx.label},{block:"select",name:this.ctx.name,mods:{theme:"normal",size:"s",layout:"fixed",width:200},js:{live:!0,elemPopupMods:{width:200}},content:[{block:"button",content:""},{elem:"control",content:this.ctx.options.map(function(t){return{elem:"option",attrs:{value:t.value,selected:t.value==(this.ctx.value||this.ctx["default"])?"selected":void 0},content:t.label}},this)}]}]}]}),s("pref").match(function(){return"comment"===this.ctx.type}).content()(function(){return[{elem:"comment-cell",content:{elem:"comment-title",tag:"span",content:this.ctx.value}}]}),s("pref").match(function(){return"radio-button"===this.ctx.type}).content()(function(){return{elem:"pref-col",elemMods:{labeled:"yes"},content:[{tag:"span",elem:"label",content:this.ctx.label},{block:"radio-button",mods:{size:"xs",view:"classic",theme:"normal"},content:this.ctx.options.map(function(t){return{elem:"radio",tag:"label",content:[{elem:"control",tag:"input",attrs:{value:t.value,checked:t.value==(this.ctx.value||this.ctx["default"])?"checked":void 0,type:"radio",name:this.ctx.name}},t.label]}},this)}]}}),s("pref").match(function(){return"multi"===this.ctx.type}).content()(function(){return{elem:"pref-col",content:[{elem:"label",tag:"span",content:this.ctx.label},{block:"multiselect",name:this.ctx.name,
mods:{theme:"normal",size:"s"},selected:this.ctx.value,groups:this.ctx.groups,options:this.ctx.options}]}}),s("pref").match(function(){return"geoselect"===this.ctx.type||"geo"===this.ctx.type||"text"===this.ctx.type}).content()(function(){return[{tag:"table",elem:"pref-table",content:[{tag:"td",elem:"pref-td",elemMods:{labeled:"yes"},content:{tag:"span",elem:"label",content:this.ctx.label}},{tag:"td",elem:"pref-td",content:{block:"input",mods:{size:"s",suggest:"yes"},js:{dataprovider:{name:"dataprovider-geo",url:"https://wayback.archive-it.org/all/20180620162258/https://suggest-maps."+document.domain.replace(/[\w\d-.]+\.(yandex\.[.\w]+)/,"$1")+"/suggest-geo"},popupMods:{fade:"yes"}},content:[{elem:"control",attrs:{value:this.ctx.geoname}},{elem:"geo",tag:"input",attrs:{type:"hidden",name:this.ctx.name,value:this.ctx.value||this.ctx["default"]}}]}}]}]}),s("pref").match(function(){return"text"===this.ctx.type}).content()(function(){return[{tag:"table",elem:"pref-table",content:[{tag:"td",elem:"pref-td",elemMods:{labeled:"yes"},content:{tag:"span",elem:"label",content:this.ctx.label}},{tag:"td",elem:"pref-td",content:{block:"input",mods:{size:"s"},content:{elem:"control",attrs:{name:this.ctx.name,value:this.ctx.value||this.ctx["default"]}}}}]}]})),o("popup").mod("wrapped","yes").content()(function(){return[E(),{elem:"wrapper",elemMods:this.ctx.wrapperMods}]}),o("popup").mod("behaviour","scrollable").def()(function(){return this.mods.wrapped="yes",this.mods["body-scroll"]="no",this.ctx.wrapperMods={behaviour:"scrollable"},E()}),o("select")(c()(function(){var t=this.ctx,e=t.id||this.generateId();return E({_controlAttrs:{id:e,name:t.name},_formSelect:{block:this.block,mods:this.mods,tabindex:t.tabindex}})}),p()(function(){return this.extend({live:!1},this.ctx.js)}),u()("span"),s("option").tag()("option"),s("option-group").tag()("optgroup"),s("text").tag()("span")),o("select").def()(function(){var t=this.ctx,e=(M("js")||{}).live;if(e){var i=t.content.filter(function(t){return"control"===t.elem})[0].content;if(i.length){var n=function(t){for(var e,i,o=0;o<t.length&&(e=t[o],"option"===e.elem&&Object(e.attrs).selected?i=e:"option-group"===e.elem&&(i=n(e.content)),!i);o++);return i},o=n(i);return o||(o=i[0],"option-group"===o.elem&&(o=o.content[0])),E({_initValue:o.attrs.value,_initText:o.content})}}return E()}),o("select").elem("item").attrs()(function(){return{id:this.generateId()}}),o("select").elem("item").match(function(){return this.elemMods.label}).attrs()(function(){var t=E()||{};return this._labelId&&(t.id=this._labelId),t["aria-hidden"]="true",t}),o("button").match(function(){return this._formSelect})(h()(function(){var t=E()||{};t.role="listbox",t.type="button",t["aria-haspopup"]="true",t["aria-expanded"]="false";var e=this._formSelect.tabindex;return"undefined"!=typeof e&&(t.tabindex=e),t}),c()(function(){var t=this.ctx,e=this._formSelect.mods,i=this.mods;return i.arrow="down",e.theme&&(i.theme=e.theme),e.size&&(i.size=e.size),e.disabled&&(i.disabled="yes"),this._initText&&(t.content=this._initText),E({"ctx._theme":!0})}),m()(function(){return[{block:this._formSelect.block,elem:"button"}]})),o("select").elem("group")(h()(function(){return{role:"group","aria-labelledby":this._labelId}}),m()(function(){var t=this.isFirst()?this.isLast()?"both":"first":this.isLast()?"last":"middle";return{elemMods:{position:t}}}),c()(function(){return E({_labelId:this.generateId()})})),o("select").elem("control")(t(function(){return this._initValue}).def()(function(){var t=this.ctx;return t.attrs=this.extend(t.attrs,{value:this._initValue}),E()}),u()("select"),h()(function(){var t={};return["id","name","tabindex"].forEach(function(e){this._controlAttrs[e]&&(t[e]=this._controlAttrs[e])}.bind(this)),t.disabled=Boolean(this.mods.disabled),t.tabindex=-1,t["aria-hidden"]="true",this.ctx.controlAttrs||t})),o("checkbox")(c()(function(){var t=this.ctx;return t.controlAttrs=this.extend({id:this.generateId(),checked:Boolean(this.mods.checked),disabled:Boolean(this.mods.disabled),tabindex:t.tabindex,name:t.name,value:t.value},void 0===t.controlAttrs?t.checkboxAttrs:t.controlAttrs),t.controlAttrs["aria-labelledby"]="label"+t.controlAttrs.id,void 0===this.mods.view&&(this.mods.view="classic"),void 0===this.mods.lines&&(this.mods.lines="multi"),E({_labelAttrs:{id:t.controlAttrs["aria-labelledby"],"for":t.controlAttrs.id}})}),u()("span"),p()(function(){return this.extend({live:!1},this.ctx.js)}),t(function(){return void 0===this.ctx.content}).content()(function(){return[this.util.merge({elem:"box",tag:"span",content:[this.util.merge({elem:"control",attrs:this.ctx.controlAttrs},this.ctx.control),{elem:"tick",tag:"i"}]},this.ctx.box),void 0!==this.ctx.text&&this.util.merge({elem:"label"},this.isSimple(this.ctx.text)?{content:{html:this.xmlEscape(this.ctx.text)}}:this.ctx.text)].filter(Boolean)})),o("checkbox").elem("control")(u()("input"),h()(function(){return{type:"checkbox",autocomplete:"off"}})),o("checkbox").elem("label")(u()("label"),h()(function(){return this.extend({"aria-hidden":"true"},this._labelAttrs)})),o("radiobox")(c()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),E({_disabled:e.disabled,_name:t.name,_value:t.value})}),u()("span"),p()(function(){return this.extend({live:!1},this.ctx.js)})),o("radiobox").elem("radio")(c()(function(){var t=this.ctx,e=this.elemMods,i=this.extend({id:this.generateId(),type:"radio",name:this._name,value:t.value},t.controlAttrs),n=void 0!==i.value&&i.value===this._value;return e.disabled||(e.disabled=this._disabled),e.checked||(e.checked=n?"yes":""),e.disabled&&(i.disabled=!0,i.tabindex=-1),e.checked&&(i.checked=!0),E({_controlAttrs:i})}),u()("label"),h()(function(){return{"for":this._controlAttrs.id}}),_()(function(){return[{elem:"box",tag:"span",content:{elem:"control"}},{elem:"text",tag:"span",content:E()}]})),o("radiobox").elem("control")(u()("input"),h()(function(){return this._controlAttrs})),o("radio-button")(c()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),E({_radioButton:{name:t.name,value:t.value,disabled:Boolean(e.disabled)}})}),u()("span"),p()(function(){return this.extend({live:!1},this.ctx.js)}),_()(function(){var t=this.ctx.content;return Array.isArray(t)?t.filter(function(t){return!this.isSimple(t)&&t},this):t})),o("radio-button").elem("radio")(c()(function(){var t=this.elemMods,e=this._radioButton,i=e.disabled,n=this.extend({},this.ctx.controlAttrs),o=void 0!==n.value&&n.value===e.value;return o&&(t.checked="yes"),i&&(t.disabled="yes"),"default"===this.mods.view||t.side||(t.side=["","right","left","both"][2*this.isFirst()+this.isLast()]),n.checked=Boolean(t.checked),n.disabled=Boolean(t.disabled),n.id||(n.id=this.generateId()),E({_controlAttrs:n})}),u()("label"),h()(function(){return{"for":this._controlAttrs.id}}),_()(function(){return[{elem:"control"},{elem:"text",tag:"span",content:this.ctx.content}]})),o("radio-button").elem("control")(u()("input"),h()(function(){var t=this._controlAttrs;return t.checked=Boolean(t.checked),t.disabled=Boolean(t.disabled),t.disabled&&(t.tabindex="-1"),t.type="radio",t.name=this._radioButton.name,t})),o("b-autocomplete-item")(u()("li"),t(function(){return this.ctx.search_cgi&&Array.isArray(this.ctx.search_cgi)}).js()(function(){return{cgi:this.ctx.search_cgi}}),p()(!0),m()(function(){return[{mods:{pers:this.ctx.pers?"yes":""}}]}),_()(function(){var t=this.ctx.data,e=BEM.blocks["b-autocomplete-item"].highlight,i=this.xmlEscape(Array.isArray(t)?t[1]:t);return e(i,this.ctx.hl)})),o("b-autocomplete-item").match(function(){return this.mods&&"geo"===this.mods.type})(h()(function(){return{"data-id":this.ctx.geoid}}),_()(function(){var t=this.ctx,e=t.subtitle,i=BEM.blocks["i-common__string"];return[{tag:"span",elem:"reg",content:i.escapeHTML(t.title)},e?{tag:"span",elem:"details",mix:e?{elem:"full"}:!1,content:" ("+i.escapeHTML(e)+")"}:!1]})),o("multiselect")(p()(!0),n()(function(){var t=this.ctx.selected.split(","),e={};t.forEach(function(t){e[t]=!0}),this.__selected=e;var i=this.ctx.groups||[{options:this.ctx.options}];return this.ctx.content=i.map(function(t){return t.elem="group",t}).concat({elem:"selected",name:this.ctx.name,selected:this.ctx.selected}),this.ctx}),s("group").content()(function(){var t=this.ctx.label?{elem:"label",content:this.ctx.label}:"",e=3,i=[],n=Math.ceil(this.ctx.options.length/e);return this.ctx.options.forEach(function(t,e){var o=Math.floor(e/n);i[o]||(i[o]=[]),t.elem="item",t.size=this.mods.size,t.theme=this.mods.theme,i[o].push(t)},this),[t,{elem:"items",cls:home.cls.full("row"),content:i.map(function(t){return{elem:"column",cls:home.cls.full("col"),content:t}})}]}),s("item").content()(function(){return{block:"checkbox",checkboxAttrs:{value:this.ctx.value},mods:{size:this.mods.size,theme:this.mods.theme,checked:this.__selected[this.ctx.value]?"yes":""},text:this.ctx.label}}),s("selected")(u()("input"),h()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.selected}}))),b(function(t,i){var n=t.BEMContext||i.BEMContext;n.prototype.require=function(t){return e[t]}})}),o.exportApply(i),i}var i=!0;"object"==typeof module&&"object"==typeof module.exports&&(exports.BEMHTML=e({}),i=!1),"object"==typeof modules&&(modules.define("BEMHTML",[],function(t){t(e({}))}),i=!1),i&&(BEMHTML=e({}),t.BEMHTML=BEMHTML)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this),home.lang={a11y:{collapse:"Свернуть",expand:"Развернуть"},catalog:{returnToCatalog:"Вернуться в каталог"},desktopNotifications:{menu:{ban:"Не показывать",close:"Закрыть",collapse:"Свернуть",expand:"Развернуть",setup:"Настроить",toggle:"Опции"}},direct:{bought_already:"Уже купил",not_interest:"Не интересуюсь",spam:"Спам"},football:{absence:"неявка соперника",canceled:"матч отменен",fav_add_match:"Добавить в мои матчи",fav_remove_match:"Удалить из моих матчей",finished:"матч завершен",penalted:"матч завершен по пенальти",penaltying:"серия пенальти",postponed:"матч отложен",share_text_no_stream:"Следите за матчем %team0-%team1 на Яндексе",share_text_stream:"Смотрите матч %team0-%team1",share_title:"Чемпионат мира по футболу 2018",stage:{"105_minutes":"перерыв","120_minutes":"перерыв","1st_extra_time":"1-й доп. тайм","1st_half":"первый тайм","2nd_extra_time":"2-й доп. тайм","2nd_half":"второй тайм","90_minutes":"перерыв",absence:"неявка соперника",canceled:"матч отменен",finished:"матч завершен",halftime:"перерыв",penalty:"Пенальти",penalty_shootout:"серия пенальти",postponed:"матч отложен",shootout:"серия пенальти",stopped:"матч остановлен",suspended:"матч приостановлен",timeout:"перерыв"},stats:{ball_posession:"Владение мячом",corners:"Угловые",red_cards:"Красные карточки",shots_on_goal:"Удары в створ ворот",shots_wide:"Удары по воротам",yellow_cards:"Жёлтые карточки"},stopped:"матч остановлен",suspended:"матч приостановлен",timeout:"перерыв",top_country_vods:"Лучшие моменты матчей сборной %country",top_fav_vods:"Лучшие моменты матчей ваших команд",top_vods:"Лучшие моменты матчей чемпионата"},informationsMessages:{beforeReset:"Вы уверены, что хотите сбросить все настройки на стандартные? Это действие нельзя будет отменить.",cannotSaveSettings:"Извините, ваши настройки не получилось сохранить. Попробуйте позднее.",maxCount:"Установлено максимальное количество виджетов",settingsNotSaved:"Настройки главной страницы Яндекса пока не сохранены."},media:{broadcast:{yac2018:{title:"Секретный доклад Яндекса"}},direct:{title:"Яндекс.Директ"},zen:{desc:"Публикации на&nbsp;основе ваших интересов",desc_ice:"Популярное в&nbsp;интернете",dislike:"Не нравится",like:"Нравится"}},promo:{"themes-promo__close":"Закрыть промо"},pushes:{notice:{error:{cancel:"Закрыть",text:"Проверьте, разрешены ли уведомления в настройках.",title:"Что-то пошло не так"},prompt:{cancel:"Нет, спасибо",text:"Яндекс может сообщать о начале трансляций, результатах и других событиях.<br>Для этого разрешите ему присылать уведомления. Их всегда можно отключить в настройках.",title:"Уведомления о событиях"},wait:{title:"Нажмите <b>«Разрешить»</b><br>во всплывающем окне."}},sup_button:{remove:"Удалить",restore:"Вернуть",subscribe:"Подписаться",unsubscribe:"Отписаться"}},rates:{newalt:{ceni:"%s: динамика цен",index:"%s: динамика индекса",korz:"Бивалютная корзина",kurs:"%s: динамика курса"}},securityMessages:{noYandexWidgetAddedA:"Яндекс не имеет прямого отношения к содержимому виджета."},spok_yes:{month_accus:{1:"января",10:"октября",11:"ноября",12:"декабря",2:"февраля",3:"марта",4:"апреля",5:"мая",6:"июня",7:"июля",8:"августа",9:"сентября"}},"time-alert":{date_format_long:"%day %month %year года",date_format_short:"%day %month"},traffic:{personal:{hour_abbr:"&nbsp;ч&nbsp;",minutes_abbr:"&nbsp;мин"}},"voice-search":{popup:{"chrome-permission":{subtitle:"Чтобы разблокировать микрофон, нажмите на иконку %icon% в строке браузера"},connectionproblem:{subtitle:"Ошибка соединения",title:"Проверьте соединение с интернетом"},noaccess:{subtitle:"Как включить голосовой поиск, можно узнать в помощи",title:"Вы заблокировали доступ к микрофону"},unknownerror:{title:"Неизвестная ошибка"}}},widgetbaloon:{cancel:"Отмена",keep:"Сохранить"},widgetcontrol:{"delete":"Удалить",setup:"Настроить",share:"Поделиться виджетом"}},function(){function t(t,e,o){function s(t,e){var n=t instanceof Function?t:i[t],o="";return n&&(o=n.cached?n(r,s):n(e,r,s)),o}var r=o||e||{};for(var a in n)r.hasOwnProperty(a)||(r[a]=n[a]);return s(t,e)}function e(t,e){if(e){var n=i[t];e instanceof Function?i[t]=e:i[t]=home.templateGenerator(e,t),n&&(i[t].base=n)}}!function(){"use strict";home.parseRules={l10n:function(t,e,i){return e.l10n||home.error("Can't proccess 'l10n:"+i+"', check context of template"),e.l10n&&e.l10n(i)},baseViews:function(t,e,i){return e.baseViews(i,t)},bem:function(t,e,i){i=i.split("."),t=t||{};var n=i.pop(),o=i.pop(),s=i.pop();switch(n){case"class":var r=home.getBEMClassname(o,(s?t[s]:t)||{});return e&&e.cls&&e.cls.contains(o)?e.cls.full(r):r;case"js":return home.getBEMParams(t[o||"js"]||{});case"attrs":return home.getAttributes(t[o||"attrs"])}},cls:function(t,e,i){return e&&e.cls?e.cls.full(i):i}}}();var i=home.view?Object.create(home.view.templates):{},n={l10n:home.l10n,stat:{logShow:function(t){home.stat.logPath("show",t)},getAttr:function(t,e,i){return i=i||{},t?' data-statlog="'+t+'"'+(i.isRedirect!==!1?"":' data-statlog-redir="0"'):""},getAdaptiveCounter:function(t,e){return t?' data-statlog="'+t+'"'+(e?' data-statlog-redir="0"':"")+' data-statlog-autoshow="1"':""},getClientCounter:function(t,e){return t?' data-statlog="'+t+'"'+(e?' data-statlog-redir="0"':""):""}},settingsJs:{add:function(t,e,i){home["export"][i]||(home["export"][i]={}),home["export"][i][t]=e}},beget:function(t){return x.beget(this,t)}};e.cached=function(t,n){n&&(e(t,n),i[t].cached=!0)},home.view=t,home.view.templates=i,home.view.define=e,e("promo-curtain__message",function(t,e,i){var n,o;return'<div class="promo-curtain__message" style="top:'+(n=t.offset,n&&(n=n.top),n!==o?n:"")+'px"><div class="promo-curtain__arrow" style="left:'+(n=t.offset,n&&(n=n.left),n!==o?n:"")+'px"></div><div class="promo-curtain__header">'+(n=t.langs,n&&(n=n.header),n!==o?n:"")+'</div><div class="promo-curtain__line">'+(n=t.langs,n&&(n=n.line1),n!==o?n:"")+'</div><div class="promo-curtain__line">'+(n=t.langs,n&&(n=n.line2),n!==o?n:"")+"</div></div>"}),e("promo-curtain__layout",function(t,e,i){var n,o;return'<div class="'+home.parseRules.bem(t,e,"promo-curtain.class")+'"><div class="promo-curtain__agreement-text">'+(n=t.langs,n&&(n=n.agreement),n!==o?n:"")+"</div></div>"}),e("consistency-popup__html",function(t,e,i){var n,o;return"<div "+(t.className!==o?t.className:e.className!==o?e.className:(n=i("className",t),n!==o?n:""))+' style="position:fixed;z-index:'+(t.zIndex!==o?t.zIndex:e.zIndex!==o?e.zIndex:(n=i("zIndex",t),n!==o?n:""))+';bottom:16px;right:16px;width:340px;color:#FFF;background-color:#E26A68;padding:16px;"><div style="font-size:120%;margin-top:5px;margin-bottom:10px;">'+(t.title!==o?t.title:e.title!==o?e.title:(n=i("title",t),n!==o?n:""))+'</div><div style="line-height: 18px;">'+(t.text!==o?t.text:e.text!==o?e.text:(n=i("text",t),n!==o?n:""))+'</div><div style="margin-top: 30px;text-align: right"><a class="button_theme_cpopup" style="margin-right: 16px;" role="button" href="'+(t.yesLink!==o?t.yesLink:e.yesLink!==o?e.yesLink:(n=i("yesLink",t),n!==o?n:""))+'"><div class="button_theme_cpopup__text b-inline" style="background-color: #EB9796;">'+(t.yesButton!==o?t.yesButton:e.yesButton!==o?e.yesButton:(n=i("yesButton",t),n!==o?n:""))+'</div></a><a class="button_theme_cpopup" role="button" href="'+(t.noLink!==o?t.noLink:e.noLink!==o?e.noLink:(n=i("noLink",t),n!==o?n:""))+'"><div class="button_theme_cpopup__text b-inline">'+(t.noButton!==o?t.noButton:e.noButton!==o?e.noButton:(n=i("noButton",t),n!==o?n:""))+'</div></a></div><div class="button_theme_cpopup__close"><div class="button_theme_cpopup__close_img"></div></div></div>'}),e("media-event-promo__layout",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"media-event-promo.class")+'" title="'+(t.title!==n?t.title:"")+'"><div class="media-event-promo__wrapper"><div class="media-event-promo__inner"><div class="media-event-promo__icon"></div></div></div></div>'}),e("yac-promo__layout",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"yac-promo.class")+'" title="'+(t.title!==n?t.title:"")+'"><div class="yac-promo__inner"></div></div>'}),e("b-time-banner__text",function(t){var e="";return e+='<span class="b-time-banner__text">',e+=t.text.replace("%local_date","<b>("+t.now+")</b>").replace("%current_date","<b>("+t.timestamp+")</b>")+(t.helpQuery?" "+t.helpQuery:""),e+="</span>"}),e("b-time-banner__inner",function(t,e,i){var n=i("b-time-banner__text",t);return t.helpUrl?i("link",{content:n,stat:e.stat.getAdaptiveCounter("wrong_date."+t.type+".url"),href:t.helpUrl,mod:"b-time-banner__link"}):n}),e("link",function(t,e,i){var n={};return t.mod=t.mod?["link",t.mod.trim()].join(" "):"link",t.title&&(n.title=t.title),t.target&&(n.target=t.target),t.attrs=(t.attrs||"")+home.getAttributes(n),i("link__tmpl",t)}),e("link__tmpl",function(t,e,i){var n,o;return'<a href="'+(t.href!==o?t.href:"")+'" class="'+(t.mod!==o?t.mod:"")+'"'+(t.attrs!==o?t.attrs:"")+(t.stat!==o?t.stat:"")+(t.link__target!==o?t.link__target:"")+(t.link__title!==o?t.link__title:"")+">"+(t.link__icon!==o?t.link__icon:e.link__icon!==o?e.link__icon:(n=i("link__icon",t),n!==o?n:""))+(t.content!==o?t.content:"")+"</a>"}),e("datetime__date",function(t,e,i){var n,o;return'<span class="datetime__date"><span class="datetime__day">'+(t.day!==o?t.day:e.day!==o?e.day:(n=i("day",t),n!==o?n:""))+' </span><span class="datetime__month">'+(t.month!==o?t.month:e.month!==o?e.month:(n=i("month",t),n!==o?n:""))+', </span><span class="datetime__wday">'+(t.wday!==o?t.wday:e.wday!==o?e.wday:(n=i("wday",t),n!==o?n:""))+" </span></span>"}),e("inline-stocks__head",function(t){if(!t.col2&&!t.col4)return"";for(var e=[t.col2,t.col4],i="",n=0;n<e.length;n++)e[n]&&(i+='<th class="inline-stocks__cell" colspan="2">'+e[n]+"</th>");return'<tr class="inline-stocks__head">'+i+"</tr>"}),e("inline-stocks__t-title",function(t,e,i){var n,o;switch(t.type){case"currency":n="сегодня",o="завтра";break;case"cash":n="покупка",o="продажа"}return i("inline-stocks__head",{col2:n,col4:o})}),e("inline-stocks__date",function(t){var e=t.datetime||t.time||t.date;return e?'<td><i class="inline-stocks__cell_datetime">'+e+"</i></td>":""}),e("inline-stocks__delta",function(t,e){var i,n=t.data;return t.klimit&&(i="Значение изменилось более чем на %d%%".replace(/%d%(%)/,t.klimit+"$1")),n.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(n.is_hot?"hot":"small text_gray_yes")+'"'+(i&&n.is_hot?' title="'+i+'"':"")+' aria-hidden="true">'+n.delta+'</i><span class="a11y-hidden">'+String(n.delta).replace("−","-")+"</span></td>":""}),e("inline-stocks__rows-by-type",function(t,e,i){var n=t.klimit;switch(t.type){case"cash":return t.rows.map(function(t){return i("inline-stocks__val",t)}).join("");case"currency":return t.rows.map(function(t,e){return(e?i("inline-stocks__delta",{data:t,klimit:n}):"")+i("inline-stocks__val",t)}).join("");case"indexes":var o=t.rows[0];return i("inline-stocks__date",o)+i("inline-stocks__delta",{data:o,klimit:n})+i("inline-stocks__val",o)}}),e("inline-stocks__replaceCaps",function(t){return t.text.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,i){switch(e){case"c":return'<span class="inline-stocks__caps">'+i+"</span>";case"d":return'<span class="inline-stocks__numbers">'+i+"</span>";default:return t}})}),e("inline-stocks__block-content",function(t,e,i){for(var n="",o=t.rows,s=0,r=o.length;r>s;s++){var a=o[s],l=e.l10n("rates.newalt."+a.alt).replace(/%s/,a.text);n+='<tr class="inline-stocks__row_id_'+a.id+'" data-klimit="'+a.klimit+'"><td class="inline-stocks__row-title">'+i("home-link",{href:!e.nolinks&&a.href,mix:"home-link_blue_yes",attrs:{title:l,"data-statlog":"news_rates_manual.popup."+a.id},content:i("inline-stocks__replaceCaps",{text:a.text_caps})})+(a.nscale?'<span class="inline-stocks__row-nscale">'+a.nscale+"</span>":"")+"</td>"+i("inline-stocks__rows-by-type",{type:t.type,rows:a.data,klimit:a.klimit})+"</tr>"}return'<h2 class="inline-stocks__table-title">'+t.text+'</h2><table class="inline-stocks__table inline-stocks__table_type_'+t.type+" inline-stocks__table_id_"+t.i+'">'+i("inline-stocks__t-title",t)+n+"</table>"}),e("inline-stocks__grid",function(t){var e,i=t.data,n=i.length/2,o="",s="";for(e=0;n>e;e++)o+='<div class="inline-stocks__grid-item inline-stocks__grid-item_first">'+i[2*e]+"</div>",s+=i[2*e+1]?'<div class="inline-stocks__grid-item">'+i[2*e+1]+"</div>":"";return'<tr class="inline-stocks__grid-row"><td>'+o+"</td><td>"+s+"</td></tr>"}),e("inline-stocks__tables",function(t,e,i){var n,o=t.blocks;return o?(n=o.map(function(t,e){return t.i=e,"cash_rate"===t.type&&(t.type="cash"),i("inline-stocks__block-content",t)}),i("inline-stocks__grid",{data:n})):""}),e("inline-stocks__nscale",function(t,e,i){var n,o;return'<span class="inline-stocks__nscale text_gray_yes">('+(t.nscale!==o?t.nscale:e.nscale!==o?e.nscale:(n=i("nscale",t),n!==o?n:""))+")</span>"}),e("inline-stocks__val",function(t,e,i){var n,o;return'<td><i class="inline-stocks__cell">'+(t.value!==o?t.value:e.value!==o?e.value:(n=i("value",t),n!==o?n:""))+"</i></td>"}),e("home-link",function(t,e,i){var n="a",o=t.attrs||{},s=t.mods||{},r=t.inlineIcon||"";return t.href?o.href=t.href:n="span",t.title&&(o.title=t.title),t.target&&(o.target=t.target),i("home-link__tmpl",{attrs:o,tag:n,mix:t.mix,mods:s,content:t.content,stat:t.stat,icon:r})}),e("home-link__tmpl",function(t,e,i){var n;return"<"+(t.tag!==n?t.tag:"")+' class="'+home.parseRules.bem(t,e,"home-link.class")+'"'+home.parseRules.bem(t,e,"attrs")+(t.stat!==n?t.stat:"")+">"+(t.icon!==n?t.icon:"")+(t.content!==n?t.content:"")+"</"+(t.tag!==n?t.tag:"")+">"}),e("i-install-download__content",function(t,e,i){var n,o;return'<div class="'+home.parseRules.bem(t,e,"i-install-download__content.class")+'" '+home.parseRules.bem(t,e,"attrs")+' data-bem="'+home.parseRules.bem(t,e,"js")+'"><div class="i-install-download__target-pointer"><div class="i-install-download__arrow"><div class="i-install-download__stick"></div></div></div><div class="i-install-download__install-text">'+(t.text!==o?t.text:e.text!==o?e.text:(n=i("text",t),n!==o?n:""))+'</div><div class="i-install-download__agreement">'+(t.legalText!==o?t.legalText:e.legalText!==o?e.legalText:(n=i("legalText",t),n!==o?n:""))+' <a href="'+(t.legalLink!==o?t.legalLink:e.legalLink!==o?e.legalLink:(n=i("legalLink",t),n!==o?n:""))+'" class="link link_gray_yes i-install-download__legal">'+(t.legalLinkText!==o?t.legalLinkText:e.legalLinkText!==o?e.legalLinkText:(n=i("legalLinkText",t),n!==o?n:""))+"</a></div></div>"}),e("popup",function(t){var e=t.mods||{},i=t.attrs||{};return e.theme=e.theme||"ffffff",void 0===e.autoclosable&&(e.autoclosable="yes"),void 0===e.adaptive&&(e.adaptive="yes"),void 0===e.animate&&(e.animate="yes"),t.zIndex&&(i.style=i.style||"",i.style+="z-index:"+t.zIndex),'<div class="i-bem '+home.getBEMClassname("popup",{mods:e,mix:t.mix})+'" data-bem="{&quot;popup&quot;:'+home.getBEMParams(t.js?t.js:[])+(t.jsMix?","+t.jsMix:"")+'}"'+home.getAttributes(i)+'><div class="'+home.getBEMClassname("popup__under",{mods:t.underMods,mix:t.underMix})+'"></div>'+(t.tail?'<i class="popup__tail"></i>':"")+(t.content?'<div class="'+home.getBEMClassname("popup__content",{mods:t.contentMods,mix:t.contentMix})+'">'+t.content+"</div>":"")+("yes"===e["has-close"]?'<i class="popup__close"'+(t.statClose||"")+">"+(t.closeText?'<div class="popup__close-text">'+t.closeText+"</div>":"")+"</i>":"")+"</div>"}),e("home-tabs__more-tabs-bottom",function(t,e,i){return t.bottom.map(function(t){var n=t.id,o=i("home-link",{href:t.href,mix:"home-tabs__more-link home-link_black_yes"+(t.search?" home-tabs__search":""),content:t.title,stat:e.stat.getAdaptiveCounter("tabsPopup."+n),attrs:{"data-id":n}});return i("home-tabs__more-item",{content:o,mix:" home-tabs__more-item_bottom"})}).join("")}),e("home-tabs__more-tabs-top",function(t,e,i){return t.top.map(function(t){var n=t.id,o=i("home-link",{href:t.href,mix:"home-tabs__more-link home-link_black_yes"+(t.search?" home-tabs__search":""),content:t.title,stat:e.stat.getAdaptiveCounter("tabsPopup."+n),attrs:{"data-id":n}});return i("home-tabs__more-item",{content:o,mix:t.adaptive?" i-adaptive__"+t.adaptive:""})}).join("")}),e("home-tabs__more-item",function(t,e,i){var n;return'<div class="home-tabs__more-item'+(t.mix!==n?t.mix:"")+'" role="menuitem">'+(t.content!==n?t.content:"")+"</div>"}),e("home-tabs__more",function(t,e,i){var n;return'<div class="home-tabs__more"><div class="home-tabs__more-top">'+(t.top!==n?t.top:"")+'</div><div class="home-tabs__more-bottom">'+(t.bottom!==n?t.bottom:"")+"</div></div>"}),e("input__ahead",function(t,e,i){return'<div class="input__ahead"><input class="input__ahead-hint" type="text" disabled="disabled" aria-hidden="true"><span class="input__ahead-filler"></span><div class="input__ahead-hintholder"></div></div>'}),e("voice-search-popup__buttons",function(t,e,i){return i("button",{mods:{size:"m",theme:"action"},mix:"voice-search-popup__continue-button voice-search-popup__error-button",content:"Продолжить поиск",attrs:{"data-statlog":"voice.popup.continue-search"}})}),e("voice-search-popup",function(t,e,i){return i("voice-search-popup__layout",{js:{"voice-search-popup":{}},startLetters:"Говорите...".split("").map(function(t,e,n){var o=.3;return i("voice-search-popup__start-text-span",{letter:t,delay:o/n.length*e,duration:o})}).join(""),errorButtons:i("voice-search-popup__buttons",t),showMicHelper:t.showMicHelper})}),e("voice-search-popup__start-text-span",function(t,e,i){var n;return'<span class="voice-search-popup__letter" style="-webkit-animation-delay: '+(t.delay!==n?t.delay:"")+"s; -webkit-animation-duration: "+(t.duration!==n?t.duration:"")+"s; animation-delay: "+(t.delay!==n?t.delay:"")+"s; animation-duration: "+(t.duration!==n?t.duration:"")+'s;">'+(t.letter!==n?t.letter:"")+"</span>"}),e("voice-search-popup__text",function(t,e,i){return'<div class="voice-search-popup__text"></div>'}),e("voice-search-popup__layout",function(t,e,i){var n,o;return'<div class="voice-search-popup__paranja" data-statlog="voice.popup.paranja"></div><div class="voice-search-popup voice-search-popup_state_closed i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'" data-statlog="voice.popup.popup"><div class="voice-search-popup__close" data-statlog="voice.popup.close"></div><div class="voice-search-popup__content"><div class="voice-search-popup__init">Секунду</div><div class="voice-search-popup__start">'+(t.startLetters!==o?t.startLetters:"")+'</div><div class="voice-search-popup__error"><div class="voice-search-popup__title voice-search-popup__error-title"></div><div class="voice-search-popup__subtitle voice-search-popup__error-subtitle"></div><div class="voice-search-popup__error-actions">'+(t.errorButtons!==o?t.errorButtons:"")+"</div></div>"+(n=i("voice-search-popup__text",t),n!==o?n:"")+'<div class="voice-search-popup__indicator"></div>'+(n=i("voice-search-popup__access",t),n!==o?n:"")+"</div></div>"}),e("button",function(t){var e=t.mods||{},i="button",n=t.attrs||{};return t.url?i="a":t.tag&&(i=t.tag),e.theme||("yes"===e.pseudo?e.theme="pseudo":e.theme="normal"),n.role="button",t.tabindex&&(n.tabindex=t.tabindex),t.url?(n.href=t.url,t.target&&(n.target=t.target),e.disabled&&(n["aria-disabled"]=!0)):(n.type=t.type||"button",t.name&&(n.name=t.name),t.value&&(n.value=t.value),e.disabled&&(n.disabled="disabled")),"<"+i+' class="'+home.getBEMClassname("button",{mods:e,mix:t.mix})+' i-bem" data-bem="{&quot;button&quot;:{}}"'+home.getAttributes(n)+(t.stat||"")+'><span class="button__text">'+(t.content||"")+"</span></"+i+">"}),e("voice-search-popup__access",function(t,e,i){return t.showMicHelper?i("voice-search-popup__access-layout",t):void 0}),e("voice-search-popup__buttons",function o(t,e,i){return i(o.base,t)+i("button",{mods:{size:"m"},mix:"voice-search-popup__help-button voice-search-popup__error-button",url:"https://wayback.archive-it.org/all/20180620162258/https://yandex.ru/support/search/how-to-search/voice-search.html",content:"Как настроить микрофон",target:"_blank",attrs:{"data-statlog":"voice.popup.help-button"}})}),e("voice-search-popup__access-layout",function(t,e,i){return'<div class="voice-search-popup__access"><div class="voice-search-popup__title">Разрешите доступ к микрофону</div><div class="voice-search-popup__subtitle">Голосовой поиск позволяет задавать запросы голосом, для этого необходим доступ к вашему микрофону</div></div>'}),e("direct-close-block",function(t,e,i){if(e.options&&parseInt(e.options.direct_cross_disable,10))return"";var n={};return t.theme=t.theme||e.cls.part("direct"),n.mod=e.cls.part("direct-close-block")+"_"+t.theme,t.isDark&&(n.mod+=" "+e.cls.full("direct-close-block_dark")),n.js={},n.js[e.cls.full("direct-close-block")]={name:e.cls.full("direct-close-block"),id:t.directId},t.isTouch||(n.tooltip=i("direct-close-block__tooltip")),i("direct-close-block__layout",n)}),e("direct-close-block__close-block",function(t,e,i){var n;return'<div class="'+home.parseRules.cls(t,e,"direct-close-block__close-popup")+'"><div class="'+home.parseRules.cls(t,e,"direct-close-block__close-popup-content-wrapper")+'"><div class="'+home.parseRules.cls(t,e,"direct-close-block__close-popup-content")+'"><span class="'+home.parseRules.cls(t,e,"direct-close-block__close-popup-capture")+'">Скрыть рекламу:</span>'+(t.buttons!==n?t.buttons:"")+"</div></div></div>"}),e("direct-close-block__confirm-block",function(t,e,i){return'<div class="'+home.parseRules.cls(t,e,"direct-close-block__confirm-popup")+'"><div class="'+home.parseRules.cls(t,e,"direct-close-block__confirm-popup-content")+'"><div class="'+home.parseRules.cls(t,e,"direct-close-block__check-icon")+'"></div>Спасибо, объявление скрыто</div></div>'}),e("direct-close-block__layout",function(t,e,i){var n;return'<div class="'+home.parseRules.cls(t,e,"direct-close-block")+" "+home.parseRules.cls(t,e,"direct-close-block_state_idle")+" "+(t.mod!==n?t.mod:"")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'"><div class="'+home.parseRules.cls(t,e,"direct-close-block__close-button")+'"><div class="'+home.parseRules.cls(t,e,"direct-close-block__close-icon-wrapper")+'"><div class="'+home.parseRules.cls(t,e,"direct-close-block__close-icon")+'"></div></div></div>'+(t.tooltip!==n?t.tooltip:"")+"</div>"}),e("b-banner__sizernd",function(t,e){if(e.isOperaPresto)return{width:t.width+"px",height:t.height+"px"};var i=Math.floor(Math.random()*Number(t.width)/10),n=Math.floor(Math.random()*Number(t.height)/10);return{width:"calc("+(Number(t.width)-i)+"px + "+i+"px)",height:"calc("+(Number(t.height)-n)+"px + "+n+"px)"}}),e("b-banner__link",function(t,e,i){var n;return'<a href="'+(t.url!==n?t.url:"")+'" target=_blank>'+(t.content!==n?t.content:"")+"</a>"}),e("b-banner__imgrnd",function(t,e,i){
var n,o;return'<img class="'+(t.cls!==o?t.cls:e.cls!==o?e.cls:(n=i("cls",t),n!==o?n:""))+'" alt="'+(t.alt!==o?t.alt:e.alt!==o?e.alt:(n=i("alt",t),n!==o?n:""))+'" src="'+(t.src!==o?t.src:e.src!==o?e.src:(n=i("src",t),n!==o?n:""))+'">'}),e("b-banner__img",function(t,e,i){return"<img "+home.parseRules.bem(t,e,"attrs")+">"}),e("b-banner__iframe",function(t,e,i){var n;return'<iframe class="banner-iframe" name="'+(t.name!==n?t.name:"")+'" src="'+(t.src!==n?t.src:"")+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"  width="728" height="90"></iframe>'}),e.cached("widgets__check-arrow-middle",function(t){var e=t.Widgets&&t.Widgets.NotEmptyColumns&&!t.Widgets.NotEmptyColumns.Column1&&!t.Widgets.NotEmptyColumns.Column2,i=t.Widgets&&t.Widgets.NotEmptyColumns&&!t.Widgets.NotEmptyColumns.Column3&&!t.Widgets.NotEmptyColumns.Column4&&!t.Widgets.NotEmptyColumns.Column5;return t.Skin||t.SkinsCatalog&&"default"!==t.DefskinArg||e&&i}),e("player-control__loader",function(t,e,i){return'<div class="player-control__loader"><div class="player-control__close" role="button" tabindex="0" title="Закрыть"></div><span class="player-control__spin loader"></span></div>'}),e("stream-control__loader",function(t,e,i){return'<div class="stream-control__loader"><div class="stream-control__close" role="button" tabindex="0" title="Закрыть"></div><div class="stream-control__spin loader loader_size_l"></div></div>'}),e("etrains__draw",function(t,e,i){var n,o,s="",r=[],a=(t.from||"").replace(/\s*\(.*$/,""),l=(t.to||"").replace(/\s*\(.*$/,""),c=t.today,u=t.tomorrow,h="rasp."+t.counterType+".track";if(c&&c.length||u&&u.length){if(c&&c.length)for(n=0,o=c.length;o>n;n++)r.push(i("etrains__onerow",{row:c[n],host:t.host,counter:h}));if(u&&u.length)for(n=0,o=u.length;o>n;n++)r.push(i("etrains__onerow",{row:u[n],host:t.host,counter:h}));s=i("etrains__track",{direction:i("etrains__directionLayout",{stfrom:a,stto:l}),times:r.join(""),trackClass:t.direction?"fwd":"rev"})}return s}),e("etrains__onerow",function(t,e,i){var n,o=t.row;return n=o.uid?t.host+"thread/"+o.uid:"javascript:void(0)",i("etrains__time",{href:n,hint:i("etrains__hint",{express:o.express?"Экспресс&#32;":"",name:o.name||o.title}),time:o.stime||o.departure,timeClass:o.express?" etrains__time_express":"",stat:e.stat.getAdaptiveCounter(t.counter)})}),e("etrains__hint",function(t,e,i){var n,o;return'<div class="etrains__hint"><span class="etrains__hint-baloon"><i class="etrains__hint-baloon-tail-bd"></i><i class="etrains__hint-baloon-tail"></i><span class="inline-stocks__item__baloon_inner">'+(t.express!==o?t.express:e.express!==o?e.express:(n=i("express",t),n!==o?n:""))+(t.name!==o?t.name:e.name!==o?e.name:(n=i("name",t),n!==o?n:""))+"</span></span></div>"}),e("etrains__directionLayout",function(t,e,i){var n,o;return'<span class="etrains__direction link link_black_yes">&#8203;'+(t.stfrom!==o?t.stfrom:e.stfrom!==o?e.stfrom:(n=i("stfrom",t),n!==o?n:""))+"&nbsp;→ "+(t.stto!==o?t.stto:e.stto!==o?e.stto:(n=i("stto",t),n!==o?n:""))+"</span>"}),e("etrains__time",function(t,e,i){var n,o;return'<li class="etrains__track-time"><a href="'+(t.href!==o?t.href:e.href!==o?e.href:(n=i("href",t),n!==o?n:""))+'" class="link link_black_yes etrains__time'+(t.timeClass!==o?t.timeClass:e.timeClass!==o?e.timeClass:(n=i("timeClass",t),n!==o?n:""))+'"'+(t.stat!==o?t.stat:e.stat!==o?e.stat:(n=i("stat",t),n!==o?n:""))+(t.target!==o?t.target:e.target!==o?e.target:(n=i("target",t),n!==o?n:""))+">"+(t.time!==o?t.time:e.time!==o?e.time:(n=i("time",t),n!==o?n:""))+"</a>"+(t.hint!==o?t.hint:e.hint!==o?e.hint:(n=i("hint",t),n!==o?n:""))+"</li>"}),e("etrains__trackEmpty",function(t,e,i){var n,o;return'<div class="etrains__track">'+(t.text!==o?t.text:e.text!==o?e.text:(n=i("text",t),n!==o?n:""))+"</div>"}),e("etrains__track",function(t,e,i){var n,o;return'<span class="etrains__track etrains__track-'+(t.trackClass!==o?t.trackClass:e.trackClass!==o?e.trackClass:(n=i("trackClass",t),n!==o?n:""))+'">'+(t.direction!==o?t.direction:e.direction!==o?e.direction:(n=i("direction",t),n!==o?n:""))+'<ul class="etrains__times-list">'+(t.times!==o?t.times:e.times!==o?e.times:(n=i("times",t),n!==o?n:""))+"</ul></span>"}),e("themes-promo__inner-header",function(t,e,i){var n,o;return"<a "+home.parseRules.bem(t,e,"attrs")+' class="themes-promo__link link'+(t.textMix!==o?t.textMix:e.textMix!==o?e.textMix:(n=i("textMix",t),n!==o?n:""))+'"><span class="themes-promo__text">'+(t.text!==o?t.text:e.text!==o?e.text:(n=i("text",t),n!==o?n:""))+'</span></a><span class="themes-promo__close'+(t.textMix!==o?t.textMix:e.textMix!==o?e.textMix:(n=i("textMix",t),n!==o?n:""))+'" '+(t.closeAttrs!==o?t.closeAttrs:e.closeAttrs!==o?e.closeAttrs:(n=i("closeAttrs",t),n!==o?n:""))+'>&#10005;</span><div class="themes-promo__tail"></div><div class="themes-promo__top-wing"></div><div class="themes-promo__bottom-wing"></div><div class="themes-promo__top-arrow"></div><div class="themes-promo__bottom-arrow"></div>'}),e("media-service__more",function(t,e,i){return t&&t.more?i("home-link",{mix:"media-service__more "+(t.more.mix||""),mods:{black:"yes",pseudo:"yes"},stat:t.more.stat,href:t.more.href,attrs:t.more.href?t.more.attrs:home.deepExtend(t.more.attrs,{role:"button",tabindex:"0"}),content:i("media-service__more-layout",{text:t.more.content})}):void 0}),e("media-service__title",function(t,e,i){return i("home-link",{mix:t.block+"__title media-service__title-text"+(t.titleMix?" "+t.titleMix:""),href:t.href,content:t.title,attrs:t.titleAttrs,stat:t.titleStat})}),e("media-service",function(t,e,i){return i("media-service__layout",home.deepExtend(t,{descTmpl:t.desc?i("media-service__desc",t):"",headerMod:t["title-after"]?" media-service__header_align_center":""}))}),e("media-service__more-layout",function(t,e,i){var n;return'<span class="media-service__more-text">'+(t.text!==n?t.text:"")+'</span><span class="media-service__more-icon"></span>'}),e("media-service__desc",function(t,e,i){var n;return'<div class="media-service__desc '+(t.block!==n?t.block:"")+'__desc">'+(t.desc!==n?t.desc:"")+"</div>"}),e("media-service__layout",function(t,e,i){var n,o;return'<div class="'+(t.rootMod!==o?t.rootMod:"")+" media-grid__"+(t.block!==o?t.block:"")+" "+home.parseRules.bem(t,e,"media-service.class")+'" '+home.parseRules.bem(t,e,"attrs")+'><div class="media-service__header'+(t.headerMod!==o?t.headerMod:"")+'"><div><h1 class="media-service__title">'+(n=i("media-service__title",t),n!==o?n:"")+"</h1>"+(t.descTmpl!==o?t.descTmpl:"")+"</div>"+(t["title-after"]!==o?t["title-after"]:"")+(n=i("media-service__more",t),n!==o?n:"")+'</div><div class="'+(t.block!==o?t.block:"")+"__content media-service__content "+(t.contentMix!==o?t.contentMix:"")+'">'+(t.content!==o?t.content:"")+"</div></div>"}),e("zen__direct-type",function(t,e,i){return i("zen__direct_type_"+t.mods.type,t)}),e("zen__item-content",function(t,e,i){return i("zen__item_type_"+t.mods.type,t)}),e("zen__direct-type_small-img",function(t,e,i){return'<span class="media-service__image zen__direct-image_type_small" '+home.parseRules.bem(t,e,"smallImageAttrs.attrs")+"></span>"}),e("zen__direct-age",function(t,e,i){var n;return'<div class="zen__direct-age">'+(t.age!==n?t.age:"")+"</div>"}),e("zen__direct-warning",function(t,e,i){var n;return'<div class="zen__direct-warning">'+(t.warning!==n?t.warning:"")+"</div>"}),e("zen__direct-footer",function(t,e,i){var n,o;return'<div class="zen__direct-footer">'+(n=i("zen__direct-warning",t),n!==o?n:"")+(n=i("zen__direct-age",t),n!==o?n:"")+"</div>"}),e("zen__direct-body",function(t,e,i){var n,o;return'<span class="zen__direct-title '+home.parseRules.bem(t,e,"title.zen__item-title.class")+' i-multiline-overflow">'+(n=t.title,n&&(n=n.title),n!==o?n:"")+'</span><span class="zen__direct-domain">'+(t.domain!==o?t.domain:"")+'</span><div class="zen__direct-body"><span class="zen__direct-text">'+(t.smallImage!==o?t.smallImage:"")+(t.text!==o?t.text:"")+"</span></div>"}),e("zen__direct_type_small",function(t,e,i){var n,o;return'<div class="zen__direct-content">'+(n=i("zen__direct-body",t),n!==o?n:"")+"</div>"+(n=i("zen__direct-footer",t),n!==o?n:"")}),e("zen__direct_type_big",function(t,e,i){var n,o;return'<span class="media-service__image zen__item-image" '+home.parseRules.bem(t,e,"bigImageAttrs.attrs")+'></span><span class="zen__item-curtain" style="background-image:-webkit-linear-gradient('+(t.from_color!==o?t.from_color:"")+", "+(t.to_color!==o?t.to_color:"")+" 50%);background-image:linear-gradient("+(t.from_color!==o?t.from_color:"")+", "+(t.to_color!==o?t.to_color:"")+' 50%);"></span><div class="zen__direct-content">'+(n=i("zen__direct-body",t),n!==o?n:"")+(n=i("zen__direct-footer",t),n!==o?n:"")+"</div>"}),e("zen__direct",function(t,e,i){var n,o;return'<div class="zen__item '+home.parseRules.bem(t,e,"zen__direct.class")+'" role="listitem" data-id="'+(t.id!==o?t.id:"")+'"><a class="zen__item-link" '+home.parseRules.bem(t,e,"attrs")+'><object><a class="zen__direct-label" href="'+(n=t.label,n&&(n=n.href),n!==o?n:"")+'" target="_blank">'+(n=t.label,n&&(n=n.text),n!==o?n:"")+"</a></object>"+(n=i("zen__direct-type",t),n!==o?n:"")+"</a></div>"}),e("zen__item_type_text",function(t,e,i){var n,o;return'<span class="zen__item-text-content"><span class="'+home.parseRules.bem(t,e,"title.zen__item-title.class")+' i-multiline-overflow">'+(n=t.title,n&&(n=n.title),n!==o?n:"")+'</span><span class="zen__item-text i-multiline-overflow">'+(t.text!==o?t.text:"")+"</span></span>"}),e("zen__item_type_image",function(t,e,i){var n,o;return'<span class="'+home.parseRules.bem(t,e,"title.zen__item-title.class")+' i-multiline-overflow">'+(n=t.title,n&&(n=n.title),n!==o?n:"")+'</span><span class="media-service__image zen__item-image" '+home.parseRules.bem(t,e,"imageAttrs.attrs")+'></span><span class="zen__item-curtain" style="background-image:-webkit-linear-gradient('+(t.from_color!==o?t.from_color:"")+", "+(t.to_color!==o?t.to_color:"")+" 50%);background-image:linear-gradient("+(t.from_color!==o?t.from_color:"")+", "+(t.to_color!==o?t.to_color:"")+' 50%);"></span>'}),e("zen__item-control",function(t,e,i){var n;return'<span class="zen__item-control '+(t.mix!==n?t.mix:"")+'" role="button" tabindex="0" '+home.parseRules.bem(t,e,"attrs")+"></span>"}),e("zen__item",function(t,e,i){var n,o;return'<div class="'+home.parseRules.bem(t,e,"zen__item.class")+'" role="listitem" data-id="'+(t.id!==o?t.id:"")+'"><a class="zen__item-link" '+home.parseRules.bem(t,e,"attrs")+">"+(n=i("zen__item-content",t),n!==o?n:"")+'<span class="'+home.parseRules.bem(t,e,"domain.zen__item-domain.class")+'" '+home.parseRules.bem(t,e,"domainAttrs.attrs")+">"+(n=t.domain,n&&(n=n.title),n!==o?n:"")+'<span class="zen__item-domain-fadeout" style="background-image:-webkit-linear-gradient(left, '+(t.from_color!==o?t.from_color:"")+", "+(t.to_color!==o?t.to_color:"")+" 20%);background-image:linear-gradient(to right, "+(t.from_color!==o?t.from_color:"")+", "+(t.to_color!==o?t.to_color:"")+' 20%);"></span></span></a>'+(t.like!==o?t.like:"")+(t.dislike!==o?t.dislike:"")+"</div>"}),e("mix-tabber__panel",function(t,e,i){var n;return'<div class="'+(t.block!==n?t.block:"")+'__panel" role="tabpanel" id="'+(t.id!==n?t.id:"")+"_panel_"+(t.key!==n?t.key:"")+'" data-key="'+(t.key!==n?t.key:"")+'"'+home.parseRules.bem(t,e,"attrs")+">"+(t.content!==n?t.content:"")+"</div>"}),e("arrowed-list__layout_theme_football",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"arrowed-list.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'"><div class="arrowed-list__top"><h2 class="arrowed-list__title">'+(t.title!==n?t.title:"")+'</h2><div class="arrowed-list__arrows"><div class="arrowed-list__left arrowed-list__control'+(t.leftArrowMix!==n?t.leftArrowMix:"")+'" '+(t.prevStat!==n?t.prevStat:"")+' tabindex="0"><svg class="arrowed-list__arrow-inner" width="11" height="13" viewBox="0 0 11 13"><path class="arrowed-list__arrow-path" d="M4 2l3 4.5L4 11" fill="none" stroke="#000" stroke-width="2"></path></svg></div><div class="arrowed-list__right arrowed-list__control'+(t.rightArrowMix!==n?t.rightArrowMix:"")+'" '+(t.nextStat!==n?t.nextStat:"")+' tabindex="0"><svg class="arrowed-list__arrow-inner" width="11" height="13" viewBox="0 0 11 13"><path class="arrowed-list__arrow-path" d="M4 2l3 4.5L4 11" fill="none" stroke="#000" stroke-width="2"></path></svg></div></div></div><div class="arrowed-list__content scroller i-bem" data-bem="{&quot;scroller&quot;:{}}" style="-ms-scroll-snap-points-x:snapInterval(0,'+(t.snapPoints!==n?t.snapPoints:"")+");-webkit-scroll-snap-points-x: repeat("+(t.snapPoints!==n?t.snapPoints:"")+");scroll-snap-points-x: repeat("+(t.snapPoints!==n?t.snapPoints:"")+')">'+(t.elems!==n?t.elems:"")+"</div></div>"}),e("mix-tabber-loader__retry-button",function(t,e,i){return i("button",{mods:{theme:t.theme,size:"s"},mix:"mix-tabber-loader__retry-button "+t.block+"__retry-button",content:"Попробовать ещё раз",attrs:{"data-statlog":t.block+".retry","data-key":t.key}})}),e("mix-tabber-loader__retry",function(t,e,i){var n,o;return'<div class="mix-tabber-loader__retry '+(t.block!==o?t.block:"")+'__retry">Не удалось загрузить данные'+(n=i("mix-tabber-loader__retry-button",t),n!==o?n:"")+"</div>"}),e("football__tournament-table",function(t,e,i){for(var n=!1,o=0;o<t.teams.length;++o)if(0!==Number(t.teams[o].games)){n=!0;break}return i("football__tournament-table-layout",{title:t.name_format.replace("%s",t.group),rows:t.teams.map(function(t){return t.flag=i("football-flag",{iso:t.country_iso,mix:"football__tournament-flag"}),t.name=i("football__tournament-table-name",{mix:t.user_country?" football__tournament-name-text_user":"",name:t.country_name}),n&&(t.placeElem=i("football__tournament-table-place",t)),i("home-link",{href:t.url,mix:"football__tournament-row"+(t.url?" football-hover football-hover_complex-pos":""),content:i("football__tournament-table-row",t),stat:e.stat.getAttr("football.group.row")})}).join("")})}),e("football__tournament-table-name",function(t,e,i){var n;return'<span class="football__tournament-name-text'+(t.mix!==n?t.mix:"")+'">'+(t.name!==n?t.name:"")+"</span>"}),e("football__tournament-table-place",function(t,e,i){var n;return'<span class="football__tournament-place">'+(t.place!==n?t.place:"")+"</span>"}),e("football__tournament-table-row",function(t,e,i){var n;return'<div class="football__tournament-name">'+(t.placeElem!==n?t.placeElem:"")+(t.flag!==n?t.flag:"")+(t.name!==n?t.name:"")+'</div><div class="football__tournament-val">'+(t.games!==n?t.games:"")+'</div><div class="football__tournament-val">'+(t.win!==n?t.win:"")+'</div><div class="football__tournament-val">'+(t.draw!==n?t.draw:"")+'</div><div class="football__tournament-val">'+(t.lose!==n?t.lose:"")+'</div><div class="football__tournament-val">'+(t.points!==n?t.points:"")+"</div>"}),e("football__tournament-table-layout",function(t,e,i){var n;return'<div class="football__tournament-table"><div class="football__tournament-row"><div class="football__tournament-head football__tournament-head_title">'+(t.title!==n?t.title:"")+'</div><div class="football__tournament-head" title="Игры">И</div><div class="football__tournament-head" title="Выигрыши">В</div><div class="football__tournament-head" title="Ничьи">Н</div><div class="football__tournament-head" title="Поражения">П</div><div class="football__tournament-head" title="Очки">О</div></div>'+(t.rows!==n?t.rows:"")+"</div>"}),e("football__group-event",function(t,e,i){return t?(t.counter="groups",t.mix=" football__group-event",i("football-match2_mini_yes",t)):void 0}),e("football__group-events",function(t,e,i){for(var n=[],o=0;o<t.length;o+=2)n.push(i("football__group-event-row",{first:i("football__group-event",t[o]),second:i("football__group-event",t[o+1])}));return i("football__group-events-layout",{rows:n.join(i("football__group-event-splitter"))})}),e("football__group",function(t,e,i){return i("football__group-layout",{left:i("football__group-events",t.events),right:i("football__tournament-table",t),bottom:t.vods&&t.vods.length?i("football__vods",{mix:"football__group-bottom",title:"Лучшие моменты матчей группы %s".replace("%s",t.group),vods:t.vods,counter:"group"}):""})}),e("football__group-event-splitter",function(t,e,i){return'<div class="football__group-event-splitter"></div>'}),e("football__group-event-row",function(t,e,i){var n;return'<div class="football__group-event-row">'+(t.first!==n?t.first:"")+(t.second!==n?t.second:"")+"</div>"}),e("football__group-events-layout",function(t,e,i){var n;return'<div class="football__group-events"><div class="football__group-events-table">'+(t.rows!==n?t.rows:"")+'</div><div class="football__group-separator"></div></div>'}),e("football__group-layout",function(t,e,i){var n;return'<div class="football__group"><div class="football__group-top"><div class="football__group-top-left">'+(t.left!==n?t.left:"")+'</div><div class="football__group-top-right">'+(t.right!==n?t.right:"")+'</div><div class="football__group-separator"></div></div>'+(t.bottom!==n?t.bottom:"")+"</div>"}),e("sup-notice__default-ok-text",function(t,e){return"Разрешить уведомления"}),e("sup-notice_type_default",function(t,e,i){return i("sup-notice__layout_type_default",{ok:i("button2",{mods:{theme:"action",size:"n",view:"default",tone:"default"},mix:"sup-notice__ok sup-notice__ok_type_default",content:i("sup-notice__default-ok-text")}),cancel:i("button2",{mods:{theme:"normal",size:"n",view:"default",tone:"default"},mix:"sup-notice__cancel sup-notice__cancel_type_default",content:"Нет, спасибо"})})}),e("sup-notice__layout_type_default",function(t,e,i){var n;return'<div class="sup-notice sup-notice_type_default sup-notice_hidden_yes i-bem"><div class="sup-notice__title">Уведомления о событиях</div><div class="sup-notice__text">Яндекс может сообщать о начале трансляций, результатах и других событиях.<br>Для этого разрешите ему присылать уведомления. Их всегда можно отключить в настройках.</div><div class="sup-notice__buttons">'+(t.ok!==n?t.ok:"")+(t.cancel!==n?t.cancel:"")+"</div></div>"}),e("button2__icons",function(t,e,i){var n=[];return t.icon&&n.push(i("button2__icon",{mod:t.icon})),t.iconLeft&&n.push(i("button2__icon",{mod:"button2__icon_side_left "+t.iconLeft})),t.iconRight&&n.push(i("button2__icon",{mod:"button2__icon_side_right "+t.iconRight})),n.join("")}),e("button2__default_mods",function(t,e,i){return"i-bem"}),e("button2",function(t,e,i){var n=t.mods||{},o="button",s=t.attrs||{};return t.url?o="a":t.tag&&(o=t.tag),n.theme||("yes"===n.pseudo?n.theme="pseudo":n.theme="normal"),s.role="button",t.tabindex&&(s.tabindex=t.tabindex),t.url?(s.href=t.url,t.target&&(s.target=t.target),n.disabled&&(s["aria-disabled"]=!0)):(s.type=t.type||"button",t.name&&(s.name=t.name),t.value&&(s.value=t.value),n.disabled&&(s.disabled="disabled")),n.view||(n.view="classic"),"<"+o+' class="'+home.getBEMClassname("button2",{mods:n,mix:t.mix})+" "+i("button2__default_mods",t)+'" data-bem="{&quot;button2&quot;:{}}"'+home.getAttributes(s)+(t.stat||"")+">"+i("button2__icons",t)+'<span class="button2__text">'+(t.content||"")+"</span></"+o+">"}),e("button2__icon",function(t,e,i){var n,o;return'<span class="icon button2__icon '+(t.mod!==o?t.mod:e.mod!==o?e.mod:(n=i("mod",t),n!==o?n:""))+'" aria-hidden="true"></span>'}),e("sup-notice_type_popup",function(t,e,i){return i("sup-notice__layout_type_popup",{ok:i("button2",{mods:{theme:"action2",size:"n",view:"default"},mix:"sup-notice__ok sup-notice__ok_type_default",content:"Хорошо"}),cancel:i("button2",{mods:{theme:"clear",size:"n",view:"default"},mix:"sup-notice__cancel sup-notice__cancel_type_default",content:"Нет, спасибо"})})}),e("sup-notice__layout_type_popup",function(t,e,i){var n;return'<div class="sup-notice sup-notice_type_popup sup-notice_hidden_yes i-bem"><div class="sup-notice__text">Яндекс будет присылать уведомления об этом событии.</div><div class="sup-notice__buttons">'+(t.cancel!==n?t.cancel:"")+(t.ok!==n?t.ok:"")+"</div></div>"}),e("promo-sup-button__text",function(t){return t.text?'<div class="promo-sup-button__text">'+t.text+"</div>":void 0}),e("promo-sup-button",function(t,e,i){var n,o;return'<div class="'+home.parseRules.bem(t,e,"promo-sup-button.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'" title="Подписаться"><svg class="promo-sup-button__icon" width="100%" height="100%" viewBox="0 0 18 18"><g fill="none"><path class="promo-sup-button__base" d="M2.5 14h13v-.382l-2-1V12l.002-3.938c-.152-2.44-1.12-4.02-3.262-4.596l-.74-.2V2h-1v1.267l-.74.199C5.669 4.028 4.658 5.66 4.5 8v4.618l-2 1V14z" stroke="#FFF" stroke-width="2"/><path class="promo-sup-button__base" d="M9 17c.986 0 1.5-.514 1.5-1.5V15h-3v.5c0 .986.514 1.5 1.5 1.5z" fill="#FFF"/><path class="promo-sup-button__path" d="M2.5 14h13v-.382l-2-1V12l.002-3.938c-.152-2.44-1.12-4.02-3.262-4.596l-.74-.2V2h-1v1.267l-.74.199C5.669 4.028 4.658 5.66 4.5 8v4.618l-2 1V14z" stroke="#FFF" stroke-width="2"/></g></svg><div class="promo-sup-button__icon-active"></div>'+(n=i("promo-sup-button__text",t),n!==o?n:"")+"</div>"}),e("football-fav-button__text",function(t){return t.text?'<div class="football-fav-button__text">'+t.text+"</div>":void 0}),e("football-fav-button",function(t,e,i){var n,o;return'<div class="'+home.parseRules.bem(t,e,"football-fav-button.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'" title="Добавить в мои матчи"><div class="football-fav-button__icon"></div>'+(n=i("football-fav-button__text",t),n!==o?n:"")+"</div>"}),e("football-match2_mini_yes",function(t,e,i){var n,o,s,r,a,l={},c="",u=i("football-match2__status",t);n=!("canceled"===t.m_status||"postponed"===t.m_status||"not_started"===t.m_status),n?(o=u,s=" football-match2__mini-status_result",r=i("football-match2__mini-result",{result0:t.m_result&&t.m_result[0]||0,result1:t.m_result&&t.m_result[1]||0})):"canceled"===t.m_status||"postponed"===t.m_status?(o=u,r="—"):(a=i("football-match2__date",t),o=a.dateFull,r="—");var h;e.pushSupported?h="promo-sup-button":t.fallbackPush&&(h="football-fav-button");var d;if(!n&&t.push?d="default":t.fav&&(d="outdated"),h&&d){var p={};p[h]={counter:"football."+t.counter+".event."+t.id},"promo-sup-button"===h?p[h].tags=[{name:"sportEvent2",value:t.id,expiryDate:"2018-07-18"}]:p[h].matchId=t.id,c=i(h,{mods:{outdated:"outdated"===d?"yes":null},mix:"football-match2__mini-sup"+("outdated"===d?" football-match2__mini-sup_outdated_yes":""),js:p,text:"outdated"===d?"Вернуть":""}),l.push="outdated"===d?"outdated":"add"}return l.mini="yes","none"!==t.link_type&&(t.url||t.card_enabled)&&(l.action="yes"),i("football-match2__outer_mini_yes",{mods:l,mix:t.mix,content:i("football-match2__link",{card:!!l.action,event:t,stream:!1,mix:"football-match2__mini-link"+(l.action?" football-hover":""),counter:"football."+t.counter+".event."+t.id,content:i("football-match2__layout_mini_yes",{flag0:i("football-flag",{iso:t.teams[0].country_iso,mix:"football-match2__mini-flag"}),team0Name:t.teams[0].country_short_name||t.teams[0].country_name,flag1:i("football-flag",{iso:t.teams[1].country_iso,mix:"football-match2__mini-flag"}),team1Name:t.teams[1].country_short_name||t.teams[1].country_name,status:o,statusMix:s,center:r,stadium:t.stadium||""})}),push:c,js:{"football-match2":{matchId:t.id,drawParams:{counter:t.counter,fav:t.fav,fallbackPush:t.fallbackPush,card:t.card,stream:t.stream}}}})}),e("football-match2__mini-result",function(t,e,i){var n;return'<span class="football-match2__mini-result">&nbsp;'+(t.result0!==n?t.result0:"")+' </span>–<span class="football-match2__mini-result"> '+(t.result1!==n?t.result1:"")+"&nbsp;</span>"}),e("football-match2__layout_mini_yes",function(t,e,i){var n;return'<div class="football-match2__mini-top"><div class="football-match2__mini-flags">'+(t.flag0!==n?t.flag0:"")+(t.flag1!==n?t.flag1:"")+'</div><div class="football-match2__mini-status'+(t.statusMix!==n?t.statusMix:"")+'">'+(t.status!==n?t.status:"")+'</div></div><div class="football-match2__mini-center">'+(t.team0Name!==n?t.team0Name:"")+" "+(t.center!==n?t.center:"")+" "+(t.team1Name!==n?t.team1Name:"")+'</div><div class="football-match2__mini-stadium">'+(t.stadium!==n?t.stadium:"")+"</div>"}),e("football-match2__outer_mini_yes",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"football-match2.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'">'+(t.content!==n?t.content:"")+(t.push!==n?t.push:"")+"</div>"}),e("football-match2__date",function(t,e){function i(t,e){return t.getYear()===e.getYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}var n=e.Local,o=0;n&&(n=new Date(n.year,n.mon-1,n.mday,n.hour,n.min,n.sec),o=n-1e3*e.Timestamp);var s,r,a=new Date(1e3*t.timestamp+o),l=new Date(1e3*(t.stream_start_time||t.timestamp)+o),c=n||home.now(),u=864e5,h=a.getHours(),d=a.getMinutes(),p=h+":"+(10>d?"0":"")+d;return i(c,a)?(s=home.capitalize("сегодня"),r="Сегодня в %time".replace("%time",p)):i(c,new Date(+a-u))?(s=home.capitalize("завтра"),r="Завтра в %time".replace("%time",p)):(s=a.getDate()+" "+e.l10n("spok_yes.month_accus."+(a.getMonth()+1)),r="%date в %time".replace("%date",s).replace("%time",p)),{date:s,dateFull:r,time:p,streamNearStart:c>=l,stream:"Трансляция Первого канала"}}),e("football-match2__custom-bg",function(t){return{style:"background-image:url("+t.img+")"}}),e("football-match2__link",function(t,e,i){var n=t.event,o=(n.content_id||n.channel_id)&&t.stream!==!1&&n.stream!==!1&&"stream"===n.link_type,s={"data-stream-id":o&&n.content_id,"data-stream-channel":o&&n.channel_id,"data-from-block":"football-match2","data-stream-active":"overlay","data-bem":o?home.getBEMParams({"stream-control":{}}):""};return n.card===!1||t.card===!1||"card"!==n.link_type&&("stream"!==n.link_type||o)||(s["data-football-match"]=n.id),t.attrs&&(s=home.deepExtend(s,t.attrs)),i("home-link",{mix:(t.mix||"")+(o?" stream-control stream-control__link i-bem":""),stat:e.stat.getAttr(t.counter,null,{isRedirect:"url"===n.link_type}),href:"none"!==n.link_type&&n.url,content:t.content,attrs:s})}),e("football-match2__status",function(t,e){var i={"105_minutes":"stage.105_minutes","120_minutes":"stage.120_minutes","1st_extra_time":"stage.1st_extra_time","1st_half":"stage.1st_half","2nd_extra_time":"stage.2nd_extra_time","2nd_half":"stage.2nd_half","90_minutes":"stage.90_minutes",halftime:"stage.halftime",penalty_shootout:"stage.penalty_shootout",shootout:"stage.shootout",postponed:"stage.postponed",absence:"stage.absence"},n="football."+(i[t.m_status]||t.m_status);return"finished"===t.m_status&&"shootout"===t.m_end_status&&(n="football.penalted"),e.l10n(n)}),e("football-match2",function(t,e,i){var n,o,s,r,a,l,c,u,h,d=t.has_stream,p=(t.content_id||t.channel_id)&&t.stream!==!1&&"stream"===t.link_type,f=t.mods||{},m=t.size,_=t.img,g=!1,v=p||t.url||t.card_enabled,b=i("football-match2__date",t),y=i("football-match2__status",t),w="",k="",E="",M="",x="",T="";if(u="canceled"===t.m_status||"postponed"===t.m_status||"not_started"===t.m_status?"not_started":"finished"===t.m_status?"finished":"in_progress",!d&&t.has_vod&&p&&t.vod_img&&(t.img=t.vod_img),o=d&&"finished"!==u?p?"red":"white":"","not_started"===t.m_status&&d&&b.stream?w=b.stream:"in_progress"===u&&p&&d?w="Трансляция Первого канала":"finished"!==u&&"canceled"!==t.m_status&&"postponed"!==t.m_status||"small"===m||(w=home.capitalize(y)),"long"===m&&!w&&t.phase_title){var S=[t.phase_title,t.stadium].filter(Boolean);w=S.join(". ")}return"postponed"!==t.m_status&&"not_started"!==t.m_status||(k=b.date||""),s="canceled"===t.m_status?"&mdash;":"postponed"===t.m_status||"not_started"===t.m_status?b.time||"":(t.m_result&&t.m_result[0]||0)+" – "+(t.m_result&&t.m_result[1]||0),"in_progress"===u&&"small"!==m&&(E=home.capitalize(y)),"not_started"===u?n=t.push&&(i("sup-manager__supported")||e.pushSupported)&&i("promo-sup-button",{title:"Подписаться",mix:"football-match2__sup",js:{"promo-sup-button":{counter:"football.event.sup",tags:[{name:t.push.tag,value:t.push.value,expiryDate:t.push.expire}]}}})||"":t.card!==!1&&t.card_enabled&&("big"===m?n=i("button2",{mods:{theme:"white"},content:"Подробнее",mix:"football-match2__details-button",attrs:{"data-football-match":t.id},stat:e.stat.getAttr("football.event.details")}):"long"===m&&(n=i("button2",{mods:{theme:"white-text"},content:"Подробнее "+i("football-match2__arrow"),mix:"football-match2__details-link",attrs:{"data-football-match":t.id},stat:e.stat.getAttr("football.event.details")}))),"finished"===u&&t.m_result_shootout&&2===t.m_result_shootout.length&&(g=!0,r="shootout","small"===m?(s+=" ("+(t.m_result_shootout[0]||0)+" – "+(t.m_result_shootout[1]||0)+")",E="по пенальти"):E=home.capitalize("%d – %d по&nbsp;пенальти").replace("%d",t.m_result_shootout[0]).replace("%d",t.m_result_shootout[1])),"in_progress"===u&&("long"===m?(w=(w?w+", ":"")+'<span class="football-match2__hint-status">'+E+"</span>",E=""):r="score"),(d&&"not_started"===u&&"big"===m||p)&&(a=i("football-match2__play",t)),"big"===m?M=a:x=a,"small"===m&&("finished"===u&&t.has_vod&&p?T=i("football-match2__footer",{text:"Смотреть лучшие моменты"}):"not_started"!==t.m_status&&(T=i("football-match2__footer",{text:home.capitalize(y)}))),g&&(h=" football-match2__main_type_small"),l=i("football-match2__center",{mix:x?" football-match2__center_play_yes":"",mainMix:h,play:x,date:k,center:s,gameInfo:E,gameInfoType:r}),w&&(c=i("football-match2__hint",{text:w})),f.size=m,f.dot=o,f.online=p?"yes":void 0,f["custom-bg"]=_?"yes":void 0,f.action=v?"yes":void 0,f.status=u.replace("_",""),i("football-match2__layout",{mods:f,mix:t.mix,inner:i("football-match2__link",{event:t,mix:"football-match2__inner"+i("football-match2__inner-mix",t),attrs:_&&i("football-match2__custom-bg",t),counter:"football.event."+t.id,content:i("football-match2__inner",{playPart:M,flag0:i("football-flag",{iso:t.teams[0].country_iso,size:"big",mix:"football-match2__flag"}),team0Name:t.teams[0].country_short_name||t.teams[0].country_name,flag1:i("football-flag",{iso:t.teams[1].country_iso,size:"big",mix:"football-match2__flag"}),team1Name:t.teams[1].country_short_name||t.teams[1].country_name,centerPart:l,hint:c})+T}),details:n,reveal:"big"!==m&&"long"!==m||"not_started"===u?"":i("football-match2__reveal",{counter:"football.event.reveal"}),js:{"football-match2":{matchId:t.id,drawParams:{stream:t.stream,card:t.card}}}})}),e("football-match2__reveal",function(t,e,i){var n;return'<div class="football-match2__reveal" data-statlog="'+(t.counter!==n?t.counter:"")+'">показать счёт</div>'}),e("football-match2__hint",function(t,e,i){var n;return'<div class="football-match2__hint">'+(t.text!==n?t.text:"")+"</div>"}),e("football-match2__center",function(t,e,i){var n;return'<div class="football-match2__center'+(t.mix!==n?t.mix:"")+'"><div class="football-match2__center-inner"><div class="football-match2__play-outer">'+(t.play!==n?t.play:"")+'</div><div class="football-match2__date">'+(t.date!==n?t.date:"")+'</div><div class="football-match2__main'+(t.mainMix!==n?t.mainMix:"")+'">'+(t.center!==n?t.center:"")+'</div><div class="football-match2__game-info football-match2__game-info_type_'+(t.gameInfoType!==n?t.gameInfoType:"")+'">'+(t.gameInfo!==n?t.gameInfo:"")+"</div></div></div>"}),e("football-match2__play",function(t,e,i){return'<div class="football-match2__play"><svg class="football-match2__play-inner" viewBox="0 0 56 56"><circle class="football-match2__play-circle" cx="28" cy="28" r="27"/><path class="football-match2__play-arrow" d="M21.5 17.5v21l18-10.5z"/></svg></div>'}),e("football-match2__inner",function(t,e,i){var n;return'<div class="football-match2__play-part">'+(t.playPart!==n?t.playPart:"")+'</div><div class="football-match2__teams"><div class="football-match2__team football-match2__team_first">'+(t.flag0!==n?t.flag0:"")+'<div class="football-match2__team-name">'+(t.team0Name!==n?t.team0Name:"")+"</div></div>"+(t.centerPart!==n?t.centerPart:"")+'<div class="football-match2__team football-match2__team_second">'+(t.flag1!==n?t.flag1:"")+'<div class="football-match2__team-name">'+(t.team1Name!==n?t.team1Name:"")+'</div></div></div><div class="football-match2__complementary">'+(t.hint!==n?t.hint:"")+"</div>";
}),e("football-match2__layout",function(t,e,i){var n,o;return'<div class="'+home.parseRules.bem(t,e,"football-match2.class")+(n=i("football-match2__mix",t),n!==o?n:"")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'">'+(t.inner!==o?t.inner:"")+(t.details!==o?t.details:"")+(t.reveal!==o?t.reveal:"")+"</div>"}),e("football-flag",function(t,e,i){var n=t.mods||{},o=i("football-flag__map"),s=t.iso&&o[t.iso],r=t.country_name;return s?"no"!==n.shaded&&(n.shaded="yes"):s=[0,0],t.size&&(n.size=t.size),i("football-flag__html",{mods:n,mix:t.mix,name:r,data:t,x:s[0]+"%",y:s[1]+"%"})}),e.cached("football-flag__map",function(){var t={},e=4,i=9;return["0empty","ar","au","be","br","ch","co","cr","de","dk","eg","gb-eng","es","fr","hr","ir","is","jp","kr","ma","mx","ng","pa","pe","pl","pt","rs","ru","sa","se","sn","tn","uy"].forEach(function(n,o){var s=o%e,r=Math.floor(o/e);t[n]=[(100*s/(e-1)).toFixed(2),(100*r/(i-1)).toFixed(2)]}),t}),e("football-flag__html",function(t,e,i){var n;return'<span class="'+home.parseRules.bem(t,e,"football-flag.class")+'" title="'+(t.name!==n?t.name:"")+'" style="background-position:'+(t.x!==n?t.x:"")+" "+(t.y!==n?t.y:"")+'"></span>'}),e("football__lineup",function(t,e,i){var n,o=t.lineup;if(o&&o.length&&o[0]&&o[0].length&&o[1]&&o[1].length&&t.teams[0].tactics&&t.teams[1].tactics){var s=["343","352","442","4312","433","4213","451","532","541"],r={4312:"442",4213:"433"},a=[t.teams[0].tactics.replace(/-/g,""),t.teams[1].tactics.replace(/-/g,"")];if(!(s.indexOf(a[0])<0||s.indexOf(a[1])<0)){for(var l=a.map(function(t){return t=r[t]||t,t.split("").map(function(t){return Number(t)}).reduce(function(t,e){return t.length<2&&t.push(e+(t.length?t[t.length-1]:0)),t},[])}),c={"0_0":[],"1_0":[],"2_0":[],"3_0":[],"0_1":[],"1_1":[],"2_1":[],"3_1":[]},u=0,h=0;2>h;++h){var d={};for(n=0;n<o[h].length;++n){var p=o[h][n];if("lineup"===p.type&&null!==p.position&&!(p.position in d)){d[p.position]=!0;var f,m=l[h];f=1===p.position?0:p.position<=m[0]+1?1:p.position<=m[1]+1?2:3;var _=f+"_"+h;_ in c&&(++u,c[_].push({shirt:t.teams[h].shirt,num:p.person.shirt_nr,name:p.person.name,position:p.position}))}}}if(22===u){var g=[0,1,2,3],v=[];for(n=0;2>n;++n){var b=a[n],y=g.map(function(t){return i("football__lineup-column",{col:t,persons:c[t+"_"+n].sort(function(t,e){return t.position-e.position*(0===n?-1:1)}).map(function(t){return i("football__lineup-person",t)}).join("")})});1===n&&(y=y.reverse()),v.push(i("football__lineup-half",{side:0===n?"left":"right",tactic:b,rows:y.join("")}))}return i("football__lineup-layout",{halves:v.join("")})}}}}),e("football__lineup-person",function(t,e,i){var n;return'<div class="football__lineup-person football__lineup-person_p_'+(t.position!==n?t.position:"")+'"><div class="football__lineup-shirt" style="background-image:url(https://yastatic.net/s3/home/football/2018/shirts/'+(t.shirt!==n?t.shirt:"")+'.svg)"></div><div class="football__lineup-name">'+(t.num!==n?t.num:"")+'</div><div class="football__lineup-tooltip-wrapper2"><div class="football__lineup-tooltip-wrapper"><div class="football__lineup-tooltip">'+(t.name!==n?t.name:"")+"</div></div></div></div>"}),e("football__lineup-column",function(t,e,i){var n;return'<div class="football__lineup-column football__lineup-column_col_'+(t.col!==n?t.col:"")+'">'+(t.persons!==n?t.persons:"")+"</div>"}),e("football__lineup-half",function(t,e,i){var n;return'<div class="football__lineup-half football__lineup-half_side_'+(t.side!==n?t.side:"")+" football__lineup-half_tactic_"+(t.tactic!==n?t.tactic:"")+'">'+(t.rows!==n?t.rows:"")+"</div>"}),e("football__lineup-layout",function(t,e,i){var n;return'<div class="football__lineup">'+(t.halves!==n?t.halves:"")+"</div>"}),e("football__goals",function(t,e,i){var n=t.actions;if(n&&2===n.length){var o=[],s=[],r=function(t,e,n){var o=(n._action||"").toLowerCase();if(("goal"===o||"own goal"===o)&&n.time&&n.name)return n.shirt="own goal"===o?e:t,n.time=String(n.time),-1===n.time.indexOf("'")&&(n.time+="'"),i("football__goals-row",n)};if(n[0]&&(o=n[0].map(r.bind(null,t.teams[0].shirt,t.teams[1].shirt)).filter(Boolean)),n[1]&&(s=n[1].map(r.bind(null,t.teams[1].shirt,t.teams[0].shirt)).filter(Boolean)),o.length||s.length)return i("football__goals-html",{left:i("football__goals-column",{flag:i("football-flag",{iso:t.teams[0].country_iso,size:"medium",mix:"football__goals-flag"}),name:t.teams[0].country_name,rows:o.join("")}),right:i("football__goals-column",{flag:i("football-flag",{iso:t.teams[1].country_iso,size:"medium",mix:"football__goals-flag"}),name:t.teams[1].country_name,rows:s.join("")})})}}),e("football__goals-row",function(t,e,i){var n;return'<div class="football__goals-row"><div class="football__goals-time">'+(t.time!==n?t.time:"")+'</div><div class="football__goals-shirt-outer"><div class="football__goals-shirt" style="background-image:url(https://yastatic.net/s3/home/football/2018/shirts/'+(t.shirt!==n?t.shirt:"")+'.svg)"></div></div><div class="football__goals-name">'+(t.name!==n?t.name:"")+"</div></div>"}),e("football__goals-column",function(t,e,i){var n;return'<div class="football__goals-column"><div class="football__goals-country">'+(t.flag!==n?t.flag:"")+(t.name!==n?t.name:"")+'</div><div class="football__goals-rows">'+(t.rows!==n?t.rows:"")+"</div></div>"}),e("football__goals-html",function(t,e,i){var n;return'<div class="football__goals"><div class="football__goals-title">Забитые голы</div><div class="football__goals-table">'+(t.left!==n?t.left:"")+(t.right!==n?t.right:"")+"</div></div>"}),e("football__stats",function(t,e,i){return t.mix="football__match-block",t.theme="match",i("football-stats",t)}),e("football-stats__stat",function(t){var e,i=t.teams,n=t.stat,o=i[0][n],s=i[1][n],r=i[0][n]+i[1][n],a=o,l=s,c="ball_posession"===n,u=!1;return 0===r&&(r=1),void 0===i[0][n]||void 0===i[1][n]||null===i[0][n]||null===i[1][n]?(a="",l="",o=0,s=0,r=1,u=!0):(e=Math.max(o,s)/r,!c&&e>2/3&&(r*=3*e/2),c&&(a+="%",l+="%")),{hidden:u,leftStr:a,rightStr:l,leftPercent:(o/r*100).toFixed(2)+"%",rightPercent:(s/r*100).toFixed(2)+"%"}}),e("football-stats",function(t,e,i){var n=t.teams;if(n&&2===n.length){var o=["ball_posession","shots_wide","shots_on_goal","corners","yellow_cards","red_cards"],s=0;o.forEach(function(t){(n[0][t]||n[1][t])&&++s});var r=t.theme||"match",a=2>s;return i("football-stats__layout_theme_"+r,{mods:{theme:r,hidden:a?"yes":void 0},mix:(t.mix||"")+(a&&"match"===r?" football__match-block_hidden_yes":""),rows:o.map(function(t){var o=i("football-stats__stat",{teams:n,stat:t});return i("football-stats__row_theme_"+r,{mods:{hidden:o.hidden?"yes":void 0},key:t,name:e.l10n("football.stats."+t),left:o.leftStr,right:o.rightStr,leftPercent:o.leftPercent,rightPercent:o.rightPercent})}).filter(Boolean).join(""),js:{"football-stats":{matchId:t.id}}})}}),e("football-stats__row_theme_match",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"football-stats__row.class")+'" data-key="'+(t.key!==n?t.key:"")+'"><div class="football-stats__val">'+(t.left!==n?t.left:"")+'</div><div class="football-stats__bar-cell"><div class="football-stats__bar"><div class="football-stats__bar-inner football-stats__bar-inner_left" style="width:'+(t.leftPercent!==n?t.leftPercent:"")+'"></div></div></div><div class="football-stats__name">'+(t.name!==n?t.name:"")+'</div><div class="football-stats__bar-cell"><div class="football-stats__bar"><div class="football-stats__bar-inner football-stats__bar-inner_right" style="width:'+(t.rightPercent!==n?t.rightPercent:"")+'"></div></div></div><div class="football-stats__val">'+(t.right!==n?t.right:"")+"</div></div>"}),e("football-stats__layout_theme_match",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"football-stats.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'"><div class="football-stats__title">Статистика</div><div class="football-stats__table">'+(t.rows!==n?t.rows:"")+"</div></div>"}),e("football__text-stream",function(t,e,i){var n=t.text_stream;if(n)return i("football__text-stream-layout",{items:n.items.map(function(t){return i("football__text-stream-item",{time:home.htmlFilter(t.time),text:home.htmlFilter(t.text)})}).join(""),more:n.more_link?i("home-link",{href:n.more_link,stat:e.stat.getAttr("football.text_stream.more"),content:"Подробнее на Яндекс Новости",mix:"football__text-stream-more football__link"}):""})}),e("football__text-stream-item",function(t,e,i){var n;return'<div class="football__text-stream-item"><div class="football__text-stream-time">'+(t.time!==n?t.time:"")+'</div><div class="football__text-stream-text">'+(t.text!==n?t.text:"")+"</div></div>"}),e("football__text-stream-layout",function(t,e,i){var n;return'<div class="football__text-stream"><div class="football__text-stream-title">Текстовая трансляция</div><div class="football__text-stream-items">'+(t.items!==n?t.items:"")+"</div>"+(t.more!==n?t.more:"")+"</div>"}),e("football__top-players",function(t,e,i){var n=t.top_players;if(n&&n.length){var o=n.map(function(t){return t.flag=i("football-flag",{iso:t.country_iso,country_name:t.country_name,size:"narrow",mix:"football__top-player-flag"}),i("football__top-player",t)});return i("arrowed-list__layout_theme_football",{mix:"football__top-players"+(n.length<=2?" arrowed-list_hide-arrows_yes":""),title:"Лучшие игроки",leftArrowMix:" arrowed-list__left_hidden_yes",rightArrowMix:n.length<=2?" arrowed-list__right_hidden_yes":"",prevStat:e.stat.getAttr("football.match.players.left"),nextStat:e.stat.getAttr("football.match.players.right"),snapPoints:"215px",mods:{aligned:"yes",theme:"football"},elems:o.join(""),js:{"arrowed-list":{live:!1,nativeSnap:!0}}})}}),e("football__top-player",function(t,e,i){var n;return'<div class="football__top-player"><div class="football__top-player-photo" style="background-image:url('+(t.photo!==n?t.photo:"")+')"></div><div class="football__top-player-right"><div class="football__top-player-name">'+(t.name!==n?t.name:"")+'</div><div class="football__top-player-info">'+(t.flag!==n?t.flag:"")+(t.position!==n?t.position:"")+"</div></div></div>"}),e("football-match2__transparent-rating",function(t,e,i){var n=t.rating_icon;if(("gold"===n||"silver"===n||"bronze"===n||"star"===n)&&t.rating_text)return i("football-match2__transparent-rating-layout",{icon:n,text:t.rating_text})}),e("football-match2_transparent_yes",function(t,e,i){var n=t.mods||{},o=i("football-match2__status",t);n.transparent="yes","none"!==t.link_type&&(t.url||t.card_enabled)&&(n.action="yes");var s,r,a,l,c="";return"canceled"===t.m_status?c=i("football-match2__transparent-center-start",{date:o}):"not_started"===t.m_status||"postponed"===t.m_status?(a=i("football-match2__date",t),r=t.phase_title||"",s="postponed"===t.m_status?o:r,c=i("football-match2__transparent-center-start",{date:a.dateFull,info:s&&i("football-match2__transparent-center-info",{info:s})||""})):(s=t.m_result_shootout&&2===t.m_result_shootout.length?i("football-match2__transparent-center-info",{info:home.capitalize("%d – %d по&nbsp;пенальти").replace("%d",t.m_result_shootout[0]).replace("%d",t.m_result_shootout[1])}):i("football-match2__transparent-center-start",{date:o}),c=i("football-match2__transparent-center-score",{score:(t.m_result&&t.m_result[0]||0)+" – "+(t.m_result&&t.m_result[1]||0)})+s,n.result="yes"),l=("canceled"===t.m_status||"not_started"===t.m_status||"postponed"===t.m_status)&&t.push&&(i("sup-manager__supported")||e.pushSupported)&&i("promo-sup-button",{title:"Подписаться",mix:"football-match2__transparent-sup",js:{"promo-sup-button":{counter:"football.list_event.sup",tags:[{name:t.push.tag,value:t.push.value,expiryDate:t.push.expire}]}}})||"",l&&(n.push="yes"),i("football-match2__layout_transparent_yes",{mods:n,link:i("football-match2__link",{card:!!n.action,event:t,stream:!1,mix:"football-match2__transparent-inner"+(n.action?" football-hover":""),counter:"football.list_event."+t.id,content:i("football-match2__transparent-inner",{center:c,flag0:i("football-flag",{iso:t.teams[0].country_iso,mix:"football-match2__transparent-flag"}),team0Name:t.teams[0].country_short_name||t.teams[0].country_name,rating0:i("football-match2__transparent-rating",t.teams[0]),flag1:i("football-flag",{iso:t.teams[1].country_iso,mix:"football-match2__transparent-flag"}),team1Name:t.teams[1].country_short_name||t.teams[1].country_name,rating1:i("football-match2__transparent-rating",t.teams[1])})}),push:l,reveal:"not_started"===t.m_status||"postponed"===t.m_status||"canceled"===t.m_status?"":i("football-match2__reveal",{counter:"football.list_event.reveal"}),js:{"football-match2":{matchId:t.id,drawParams:{stream:t.stream,card:t.card}}}})}),e("football-match2__transparent-rating-layout",function(t,e,i){var n;return'<div class="football-match2__transparent-rating football-match2__transparent-rating_icon_'+(t.icon!==n?t.icon:"")+'"><div class="football-match2__transparent-rating-tooltip-outer"><div class="football-match2__transparent-rating-tooltip">'+(t.text!==n?t.text:"")+"</div></div></div>"}),e("football-match2__transparent-center-info",function(t,e,i){var n;return'<div class="football-match2__transparent-info">'+(t.info!==n?t.info:"")+"</div>"}),e("football-match2__transparent-center-score",function(t,e,i){var n;return'<div class="football-match2__transparent-score">'+(t.score!==n?t.score:"")+"</div>"}),e("football-match2__transparent-center-start",function(t,e,i){var n;return'<div class="football-match2__transparent-date">'+(t.date!==n?t.date:"")+"</div>"+(t.info!==n?t.info:"")}),e("football-match2__transparent-inner",function(t,e,i){var n;return'<div class="football-match2__transparent-team football-match2__transparent-left">'+(t.flag0!==n?t.flag0:"")+(t.team0Name!==n?t.team0Name:"")+(t.rating0!==n?t.rating0:"")+'</div><div class="football-match2__transparent-center">'+(t.center!==n?t.center:"")+'</div><div class="football-match2__transparent-team football-match2__transparent-right">'+(t.flag1!==n?t.flag1:"")+(t.team1Name!==n?t.team1Name:"")+(t.rating1!==n?t.rating1:"")+"</div>"}),e("football-match2__layout_transparent_yes",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"football-match2.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'">'+(t.link!==n?t.link:"")+(t.push!==n?t.push:"")+(t.reveal!==n?t.reveal:"")+"</div>"}),e("football-group-tabs",function(t,e,i){if(t.groups&&t.groups.length){for(var n="football-group-tabs_"+home.rnd().substr(0,5),o={},s=[],r=0;r<t.groups.length;++r)s.push(r),o[r]=t.groups[r],o[r].name_format=t.name_format;return e.settingsJs.add("keys",s,"football-group-tabs"),e.settingsJs.add("data",o,"football-group-tabs"),i("football-group-tabs__layout",{tabs:t.groups.map(function(e,o){var s=0===o;return i("football-group-tabs__tab",{mods:{selected:s?"yes":"no"},content:t.name_format.replace("%s",e.group),attrs:{tabindex:s?"0":"-1",role:"tab","data-statlog":"football.groups.tab","aria-selected":s?"true":"false","aria-controls":s?n+"_panel_"+o:void 0,"data-key":o,id:n+"_tab_"+o}})}).join(""),panel:i("mix-tabber__panel",{block:"football-group-tabs",id:n,key:0,attrs:{"aria-labelledby":n+"_tab_0"},content:i("football__group",t.groups[0])}),js:{"football-group-tabs":{uniqId:n,selectedTab:0,req:{pushSupported:e.pushSupported}}}})}}),e("football-group-tabs__tab",function(t,e,i){var n;return'<h3 class="'+home.parseRules.bem(t,e,"football-group-tabs__tab.class")+'"'+home.parseRules.bem(t,e,"attrs")+">"+(t.content!==n?t.content:"")+"</h3>"}),e("football-group-tabs__layout",function(t,e,i){var n;return'<div class="football-group-tabs i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'"><div class="football-group-tabs__top"><h2 class="football-group-tabs__title">Матчи</h2><div class="football-group-tabs__tabs">'+(t.tabs!==n?t.tabs:"")+'</div></div><div class="football-group-tabs__panels">'+(t.panel!==n?t.panel:"")+"</div></div>"}),e("football-fav__retry-button",function(t,e,i){return i("button",{mods:{theme:"normal",size:"s"},mix:"football-fav__retry-button",content:"Попробовать ещё раз",attrs:{"data-statlog":"football-fav.retry","data-key":t.key}})}),e("football-fav__right-panels",function(t,e,i){var n=t.events,o=[],s=[];if(0===t.events.length)return i("football-fav__right-empty",{text:"Нажмите на иконку %icon рядом с матчем и оставайтесь<br>в курсе интересных событий".replace("%icon",'<span class="football-fav__promo-icon"></span>')});s.push(i("div",{mix:"football-fav__panel-separator"})),s.push(i("div",{mix:"football-fav__panel-separator football-fav__panel-separator_type_second"}));for(var r=0;r<n.length;r+=9){var a=[];a.push([n[r],n[r+1],n[r+2]]),a.push([n[r+3],n[r+4],n[r+5]]),a.push([n[r+6],n[r+7],n[r+8]]),o.push(i("football-fav__panel",{rows:a.map(function(e){return i("football-fav__panel-row",{events:e.map(function(e){return e?(e.counter="fav",e.mix="football-fav__event",e.fav=!!t.fav,e.fallbackPush=!0,i("football-match2_mini_yes",e)):'<div class="football-fav__event"></div>'}).join("")})}).join(""),separators:s.join("")}))}return o.join("")}),e("football-fav",function(t,e,i){t.events&&t.events.length?t.events=t.events.filter(function(t){return t&&t.teams&&2===t.teams.length&&t.teams[0].country_iso&&t.teams[1].country_iso}):t.events=[];var n=i("arrowed-list__layout_theme_football",{mix:"football-fav__right-list",leftArrowMix:" arrowed-list__left_hidden_yes",rightArrowMix:t.events.length<=9?" arrowed-list__right_hidden_yes":"",prevStat:e.stat.getAttr("football.fav.left"),nextStat:e.stat.getAttr("football.fav.right"),snapPoints:"100%",mods:{aligned:"yes",theme:"football"},elems:i("football-fav__right-panels",{events:t.events,fav:!0}),js:{"arrowed-list":{live:!1,nativeSnap:!0}}});return e.settingsJs.add("initial",{fav:{ts:Date.now(),events:t.events,vods:t.vods}},"football-fav"),e.settingsJs.add("countries",t.teams.reduce(function(t,e){return t[e.iso]=e,t},{}),"football-fav"),i("football-fav__layout",{mods:{push:e.pushSupported?"yes":"no"},input:i("input",{mods:{theme:"football-search"},control:{attrs:{autocomplete:"off","aria-autocomplete":"list",role:"combobox","aria-owns":"football-fav__search-list"}},placeholder:"Страна"}),list:i("football-fav__item",{id:"football-fav__item_fav",mods:{selected:"yes"},type:"predefined",key:"fav",text:"Мои матчи",selected:"true"})+t.teams.map(function(t){return i("football-fav__item",{id:"football-fav__item_country-"+t.iso,mix:"football-hover",type:"country",key:t.iso,before:i("football-flag",{iso:t.iso,mix:"football-fav__flag"}),text:t.name,selected:"false"})}).join(""),right:n,vods:t.vods&&t.vods.length?i("football__vods",{title:t.events&&t.events.length?"Лучшие моменты матчей ваших команд":"Лучшие моменты матчей чемпионата",vods:t.vods,mix:"football-fav__vods-list",counter:"fav"}):"",js:{"football-fav":{req:{pushSupported:e.pushSupported}}}})}),e("football-fav__retry",function(t,e,i){var n,o;return'<div class="football-fav__retry">Не удалось загрузить данные'+(n=i("football-fav__retry-button",t),n!==o?n:"")+"</div>"}),e("football-fav__loader",function(t,e,i){return'<div class="football-fav__loader"><div class="football-fav__loader-inner loader"></div></div>'}),e("football-fav__right-empty",function(t,e,i){var n;return'<div class="football-fav__right-empty"><div class="football-fav__promo-logo"><div class="football-fav__promo-logo-sub"></div></div><h3 class="football-fav__promo-title">Здесь пока ничего нет</h3><div class="football-fav__promo-text">'+(t.text!==n?t.text:"")+"</div></div>"}),e("football-fav__panel-row",function(t,e,i){var n;return'<div class="football-fav__panel-row">'+(t.events!==n?t.events:"")+"</div>"}),e("football-fav__panel",function(t,e,i){var n;return'<div class="football-fav__panel">'+(t.separators!==n?t.separators:"")+(t.rows!==n?t.rows:"")+"</div>"}),e("football-fav__item",function(t,e,i){var n;return'<li class="'+home.parseRules.bem(t,e,"football-fav__item.class")+'" data-key="'+(t.key!==n?t.key:"")+'" data-type="'+(t.type!==n?t.type:"")+'" id="'+(t.id!==n?t.id:"")+'" role="listitem" tabindex="0" aria-selected="'+(t.selected!==n?t.selected:"")+'">'+(t.before!==n?t.before:"")+'<span class="football-fav__item-text">'+(t.text!==n?t.text:"")+"</span></li>"}),e("football-fav__layout",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"football-fav.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"js")+'"><h2 class="football-fav__title">Мои матчи</h2><div class="football-fav__content"><div class="football-fav__left">'+(t.input!==n?t.input:"")+'<div class="football-fav__scroll-wrapper"><ul class="football-fav__search-list" id="football-fav__search-list" role="list">'+(t.list!==n?t.list:"")+'</ul><div class="football-fav__scroll-bar"></div></div></div><div class="football-fav__right">'+(t.right!==n?t.right:"")+'</div></div><div class="football-fav__vods">'+(t.vods!==n?t.vods:"")+"</div></div>"}),e("football__match-retry",function(t,e,i){return i("football__match-retry-layout",{back:i("button2",{mods:{theme:"white-transparent"},content:'<span class="football__back-arrow"></span>Назад',mix:"football__back football-hover"}),retry:i("button2",{content:"Попробовать ещё раз",mix:"football__match-retry-button",mods:{theme:"white"}})})}),e("football__match-page",function(t,e,i){return t.size="big",t.mix="football__match-hero",t.card=!1,i("football__match-page-layout",{back:i("button2",{mods:{theme:"white-transparent"},content:'<span class="football__back-arrow"></span>Назад',mix:"football__back football-hover"}),hero:i("football-match2",t),lineup:i("football__lineup",t),vods:i("football__match-vods",t),goals:i("football__goals",t),topPlayers:i("football__top-players",t),stats:i("football__stats",t),textStream:i("football__text-stream",t)})}),e("football__match-vods",function(t,e,i){return t.vods&&t.vods.length?i("football__narrow-vods",{title:"Лучшие моменты",vods:t.vods,counter:"match"}):void 0}),e("football__narrow-vods",function(t,e,i){for(var n=[],o=0,s=0;s<t.vods.length;s+=6)n.push([t.vods[s],t.vods[s+3]]),n.push([t.vods[s+1],t.vods[s+4]]),n.push([t.vods[s+2],t.vods[s+5]]);return n=n.map(function(e){return e=e.filter(Boolean),i("div",{mix:"football__narrow-vod-column",content:e.map(function(e){return e.mods={narrow:"yes"},e.mix="arrowed-list__item",e.counter=t.counter,e.index=o++,i("football-vod",e)}).join("")})}),i("arrowed-list__layout_theme_football",{title:t.title,leftArrowMix:" arrowed-list__left_hidden_yes",rightArrowMix:t.vods.length<=6?" arrowed-list__right_hidden_yes":"",prevStat:e.stat.getAttr("football.vods."+(t.counter||"unknown")+".left"),nextStat:e.stat.getAttr("football.vods."+(t.counter||"unknown")+".right"),snapPoints:"151px",mods:{aligned:"yes",theme:"football"},mix:"football__narrow-vods"+(t.mix?" "+t.mix:""),elems:n.join(""),js:{"arrowed-list":{live:!1,nativeSnap:!0,moveRatio:1}}})}),e("football__vods",function(t,e,i){return i("arrowed-list__layout_theme_football",{title:t.title,leftArrowMix:" arrowed-list__left_hidden_yes",rightArrowMix:t.vods.length<=5?" arrowed-list__right_hidden_yes":"",prevStat:e.stat.getAttr("football.vods."+(t.counter||"unknown")+".left"),nextStat:e.stat.getAttr("football.vods."+(t.counter||"unknown")+".right"),snapPoints:"183px",mods:{aligned:"yes",theme:"football"},mix:t.mix,elems:t.vods.map(function(e,n){return e.mix="arrowed-list__item",e.counter=t.counter,e.index=n,i("football-vod",e)}).join(""),js:{"arrowed-list":{live:!1,nativeSnap:!0}}})}),e("football__store-matches-data",function(t,e){function i(t,e,i){if(e)for(var n=0;n<i.length;++n)i[n]in e&&(t[i[n]]=e[i[n]])}t&&t.length&&t.forEach(function(t){var n={};i(n,t,["has_stream","content_id","img","url","card_enabled","timestamp","stream_start_time","m_status","has_vod","vod_img","phase_title","stadium","push","link_type","id"]),n.teams=[{},{}];var o=["country_iso","country_short_name","country_name","shirt","rating_icon","rating_text"];i(n.teams[0],t.teams[0],o),i(n.teams[1],t.teams[1],o),n.m_result=t.m_result,n.m_result_shootout=t.m_result_shootout,e.settingsJs.add("upd_"+t.id,n,"football")})}),e("football__match-retry-layout",function(t,e,i){var n;return'<div class="football__match-page"><div class="football__match-page-top">'+(t.back!==n?t.back:"")+'</div><div class="football__match-page-content">'+(t.retry!==n?t.retry:"")+"</div></div>"}),e("football__match-page-layout",function(t,e,i){var n;return'<div class="football__match-page"><div class="football__match-page-top">'+(t.back!==n?t.back:"")+'</div><div class="football__match-page-content"><div class="football__match-page-left">'+(t.hero!==n?t.hero:"")+'<div class="football__match-block" data-block="lineup">'+(t.lineup!==n?t.lineup:"")+'</div><div class="football__match-block" data-block="vods">'+(t.vods!==n?t.vods:"")+'</div></div><div class="football__match-page-right"><div class="football__match-block" data-block="goals">'+(t.goals!==n?t.goals:"")+'</div><div class="football__match-block" data-block="players">'+(t.topPlayers!==n?t.topPlayers:"")+"</div>"+(t.stats!==n?t.stats:"")+'<div class="football__match-block" data-block="text-stream">'+(t.textStream!==n?t.textStream:"")+"</div></div></div></div>"}),e("football-vod",function(t,e,i){var n,o,s=home.prepareSpaces(home.htmlFilter(t.title)),r="";return"videogoals"===t.type&&(r=i("football-vod__overlay-icon",{type:"goal"})),t.duration&&(n=i("football-vod__duration",{text:t.duration})),t.mods&&t.mods.narrow||(o=i("football-vod__text",{title:s})),i("football-vod__layout",{mods:t.mods,mix:t.mix,img:t.thumbnail,text:o,overlayIcon:r,duration:n,attrs:home.deepExtend({"data-stream-id":t.content_id,"data-stream-channel":t.channel_id,"data-from-block":"football-vod","data-stream-active":"overlay","data-bem":home.getBEMParams({"stream-control":{}})},t.attrs||{}),stat:e.stat.getAttr("football.vod"+(t.counter?"."+t.counter:"")+(void 0!==t.index?"."+t.index:""))})}),e("football-vod__custom-bg",function(t,e,i){var n;return' data-image="'+(t.img!==n?t.img:"")+'"'}),e("football-vod__duration",function(t,e,i){var n;return'<div class="football-vod__duration">'+(t.text!==n?t.text:"")+"</div>"}),e("football-vod__overlay-icon",function(t,e,i){var n;return'<div class="football-vod__overlay-icon football-vod__overlay-icon_type_'+(t.type!==n?t.type:"")+'"></div>'}),e("football-vod__inline-icon",function(t,e,i){var n;return'<div class="football-vod__inline-icon football-vod__inline-icon_type_'+(t.type!==n?t.type:"")+'"></div>'}),e("football-vod__text",function(t,e,i){var n;return'<div class="football-vod__text i-multiline-overflow">'+(t.title!==n?t.title:"")+"</div>"}),e("football-vod__layout",function(t,e,i){var n,o;return'<div class="'+home.parseRules.bem(t,e,"football-vod.class")+" stream-control stream-control__link i-bem"+(n=i("football-vod__mix",t),n!==o?n:"")+'"'+home.parseRules.bem(t,e,"attrs")+'><div class="football-vod__inner'+(n=i("football-vod__inner-mix",t),n!==o?n:"")+'"'+(n=i("football-vod__custom-bg",t),n!==o?n:"")+(t.stat!==o?t.stat:"")+'><div class="football-vod__play"><svg class="football-vod__play-inner" viewBox="0 0 56 56"><circle class="football-vod__play-circle" cx="28" cy="28" r="27"/><path class="football-vod__play-arrow" d="M21.5 17.5v21l18-10.5z"/></svg></div>'+(t.overlayIcon!==o?t.overlayIcon:"")+(t.duration!==o?t.duration:"")+"</div>"+(t.text!==o?t.text:"")+"</div>"}),e("input",function(t,e,i){var n=t.mods||{},o=t.js||{};return n.theme||(n.theme="normal"),t.keyboard&&(n.keyboard="yes"),"gradient"===n.popup&&(o.popupMods={gradient:"yes"}),t.mods=n,'<span class="'+home.getBEMClassname("input",t)+' i-bem" data-bem="{&quot;input&quot;:'+home.getBEMParams(o)+'}">'+(t.before||"")+'<span class="input__box">'+(t.noclear?"":'<span class="input__clear" unselectable="on">&nbsp;</span>')+(t.forgot?'<span class="input__forgot input__forgot_visible_yes" unselectable="on">'+t.forgot+"</span>":"")+("yes"===n.keyboard?i("keyboard-loader",{mix:"input__keyboard-button"}):"")+("yes"===n["voice-search"]?i("input__voice-search",t):"")+i("input__control",t)+"</span>"+(t.after||"")+"</span>"}),e("input__control",function(t){var e=t.control&&t.control.attrs||{},i=t.mods,n="textarea"===i.type,o=n?"textarea":"input",s=n?">"+(t.value||"")+"</textarea":"/",r=t.control&&t.control.mix&&" "+t.control.mix||"";switch(t.value&&!n&&(e.value=t.value),t.name&&(e.name=t.name),i.disabled&&(e.disabled="disabled"),t.placeholder&&(e.placeholder=t.placeholder),i.type){case"password":case"search":e.type=i.type}return"<"+o+' class="input__control input__input'+r+'"'+home.getAttributes(e)+s+">"}),e("div",function(t,e,i){var n,o;return'<div class="'+(t.mix!==o?t.mix:e.mix!==o?e.mix:(n=i("mix",t),n!==o?n:""))+'"'+home.parseRules.bem(t,e,"attrs")+">"+(t.content!==o?t.content:e.content!==o?e.content:(n=i("content",t),n!==o?n:""))+"</div>"}),e("media-video__thumb-url",function(t){var e=t.url,i=t.isRetina,n=248,o=140;return i&&(n=496,o=280),e+=-1!==e.indexOf(".yandex.net/get-video")?"/"+n+"x"+o:"&w="+n+"&h="+o}),e("media-video__content",function(t,e,i){var n=e.MediaFooterCollapsed||!1,o=t.zenInsert,s=t.isRetina,r=t.videoLink,a=t.items.map(function(t,n){return i("media-video__item",{mods:t.mods,stat:e.stat.getAttr("tv_online.video.item."+n,null,{logShow:!e.MediaFooterCollapsed}),corner:t.duration+(t.is_hd?i("media-video__hd"):""),video_url:t.video_url,image_url:i("media-video__thumb-url",{url:t.image_url,isRetina:s}),name:home.prepareSpaces(t.name),mediaPlay:i("media-play")})});return i("media-service",{block:"media-video",rootMod:"i-bem media-video",href:r,title:"Видео",titleStat:e.stat.getAttr("tv_online.video.title",null,{logShow:!n}),content:a.join(""),mods:t.mods,more:{href:r,stat:e.stat.getAttr("tv_online.video.more",null,{logShow:!n}),content:"Другие видеоролики"},attrs:{role:"complementary","aria-label":"Видео","data-bem":home.getBEMParams({"media-video":{live:!o}})}})}),e("media-video__client-view",function(t,e,i){var n=home.getData("media-video.data");return n?i("media-video__content",n):void 0}),e("media-video__hd",function(t,e,i){return'<span class="media-video__hd">HD</span>'}),e("media-video__item",function(t,e,i){var n;return'<a href="'+(t.video_url!==n?t.video_url:"")+'" class="'+home.parseRules.bem(t,e,"media-service__item.class")+' media-video__item media-play__container"'+(t.stat!==n?t.stat:"")+'><div class="media-service__bg media-service__shadow"><div class="media-video__corner">'+(t.corner!==n?t.corner:"")+'</div><div class="media-service__image" data-image="'+(t.image_url!==n?t.image_url:"")+'"></div></div>'+(t.mediaPlay!==n?t.mediaPlay:"")+'<div class="media-service__item-title i-multiline-overflow">'+(t.name!==n?t.name:"")+"</div></a>"}),e("media-play",function(t,e,i){var n=t&&t.mods;return i("media-play__layout",{mods:n||{}})}),e("media-play__layout",function(t,e,i){return'<div class="'+home.parseRules.bem(t,e,"media-play.class")+'"></div>'}),e("media-stream__content",function(t,e,i){var n=t.items,o=t.assetsPath,s=e.MediaFooterCollapsed||!1,r=t.zenInsert,a=t.moreLength,l=t.more,c=n.map(function(t,n){var r={},a="tv_online.stream.items."+n,l=t.current.HHMM+"&nbsp;&nbsp;"+(t.current.title||t.current.subtitle||t.title);return i("media-stream__item",{attrs:{"data-stream-id":t.content_id,"data-stream-channel":t.channel_id,"data-from-block":"media-footer_stream_item"},stat:e.stat.getAttr(a,null,{logShow:!s}),mods:t.mods,streamItemMods:{mods:r},bg:{"data-image":o+t.channel_id+"-back.jpg"},thumbnail:{"data-image":o+t.channel_id+"-front.png"},title:home.prepareSpaces(l),mediaPlay:i("media-play")})}).join("");return a>0&&(l={mix:"stream-control__link",attrs:{"data-from-block":"media-footer_stream_more","data-stream-default":1},stat:e.stat.getAttr("tv_online.stream.more",null,{logShow:!s}),content:"Все каналы"}),i("media-service",{block:"media-stream",rootMod:"i-bem media-stream stream-control",title:"ТВ онлайн",titleMix:"stream-control__link home-link_pseudo_yes",titleAttrs:{role:"button",tabindex:0,"data-from-block":"media-footer_stream_title","data-stream-default":1},titleStat:e.stat.getAttr("tv_online.stream.title",null,{logShow:!s}),content:c,mods:t.mods,more:l,attrs:{role:"complementary","aria-label":"ТВ онлайн","data-bem":home.getBEMParams({"media-stream":{live:!r
},"stream-control":{}})}})}),e("media-stream__client-view",function(t,e,i){var n=home.getData("media-stream.data");return n?i("media-stream__content",n):void 0}),e("media-stream__item",function(t,e,i){var n;return'<div class="stream-control__link media-play__container '+home.parseRules.bem(t,e,"media-service__item.class")+" "+home.parseRules.bem(t,e,"streamItemMods.media-stream__item.class")+'" tabindex="0" role="button" '+home.parseRules.bem(t,e,"attrs")+(t.stat!==n?t.stat:"")+'><div class="media-service__bg media-service__shadow"><div class="media-service__image media-stream__rich-bg" '+home.parseRules.bem(t,e,"bg.attrs")+'></div><div class="media-service__image media-stream__thumbnail" '+home.parseRules.bem(t,e,"thumbnail.attrs")+"></div></div>"+(t.mediaPlay!==n?t.mediaPlay:"")+'<div class="media-service__item-title i-multiline-overflow">'+(t.title!==n?t.title:"")+"</div></div>"}),e("media-vod__content",function(t,e,i){var n=e.MediaFooterCollapsed||!1,o=t.zenInsert,s=t.items,r=t.disableVodChannelIcons,a=t.contentIdMap,l=t.libraryToEpisodeMap,c=t.linkVideo,u=s.map(function(o,s){var c="tv_online.vod.items."+s,u="";return r||(u=i("channel-icon",{mods:{channel:a[o.parent_id],size:"full"===t.mods.width?"small":"xs"},mix:"media-vod__icon"})),i("media-vod__item",{attrs:{"data-stream-id":l[o.content_id],"data-stream-type":"vod","data-from-block":"media-footer_vod_item"},stat:e.stat.getAttr(c,null,{logShow:!n}),mods:o.mods,image_url:o.thumbnail.replace(/(\/get-vh\/.*)\/orig$/,"$1/400x300"),name:home.prepareSpaces(o.title),icon:u,mediaPlay:i("media-play")})});return i("media-service",{block:"media-vod",rootMod:"i-bem media-vod stream-control",href:c,title:i("media-vod__title",{title:"Популярные телепередачи",title2:"Телепередачи"}),titleMix:"stream-control__link home-link_pseudo_yes",titleAttrs:{role:"button",tabindex:0,"data-stream-active":"start","data-stream-default":1,"data-from-block":"media-footer_vod_title"},titleStat:e.stat.getAttr("tv_online.vod.title",null,{logShow:!n}),content:u.join(""),mods:t.mods,more:{mix:"stream-control__link",attrs:{"data-stream-active":"start","data-stream-default":1,"data-from-block":"media-footer_vod_more"},stat:e.stat.getAttr("tv_online.vod.more",null,{logShow:!n}),content:"Все передачи"},attrs:{role:"complementary","aria-label":"Популярные телепередачи","data-bem":home.getBEMParams({"media-vod":{live:!o}})}})}),e("media-vod__client-view",function(t,e,i){var n=home.getData("media-vod.data");return n?i("media-vod__content",n):void 0}),e("media-vod__title",function(t,e,i){var n;return'<span class="media-vod__title_full">'+(t.title!==n?t.title:"")+'</span><span class="media-vod__title_min">'+(t.title2!==n?t.title2:"")+"</span>"}),e("media-vod__item",function(t,e,i){var n;return'<div class="stream-control__link media-play__container '+home.parseRules.bem(t,e,"media-service__item.class")+'" tabindex="0" role="button" '+home.parseRules.bem(t,e,"attrs")+(t.stat!==n?t.stat:"")+'><div class="media-service__bg media-service__shadow"><div class="media-service__image" data-image="'+(t.image_url!==n?t.image_url:"")+'"></div>'+(t.icon!==n?t.icon:"")+"</div>"+(t.mediaPlay!==n?t.mediaPlay:"")+'<div class="media-service__item-title i-multiline-overflow">'+(t.name!==n?t.name:"")+"</div></div>"}),e("channel-icon",function(t,e,i){return'<div class="'+home.parseRules.bem(t,e,"channel-icon.class")+'"><div class="channel-icon__icon"></div></div>'}),e("tv-online__zen-insert",function(t,e,i){var n=home.getData("tv-online.data");return i("media-grid__tv-online",{hasStream:n.hasStream,hasVod:n.hasVod,streamBlock:"media-stream__client-view",vodBlock:"media-vod__client-view"}).content}),e("collections__image-type",function(t){var e=[{name:"vertical",size:"280x404"},{name:"square",size:"404x404"},{name:"horizontal",size:"300x192"}];t.exclude&&(e=e.filter(function(e){return e.name!==t.exclude}));var i=Math.round(Math.random()*(e.length-1));return t.prev&&e[i].name===t.prev.name&&(i=i<e.length-1?i+1:i-1),e[i]}),e("collections__feed-items",function(t,e,i){function n(t,e){return t.length>e&&(t=t.substr(0,e-1).replace(/\s+$/,"")+"…"),t}var o,s=null;return t.list.map(function(r,a){var l,c,u,h=a===t.list.length-1;return l=s?o:i("collections__image-type",{prev:o,exclude:h&&!s?"horizontal":""}),o=l,c=i("collections__feed-item",{mod:" collections__feed-item_type_"+l.name,stat:e.stat.getClientCounter("collections.feed."+a+"(id="+r.channel_id+")"),img:r.images[l.size],href:r.card_link,title:home.htmlFilter(n(r.title||"",30)),color:r.color_wiz.back}),"horizontal"!==l.name||s?(u=i("collections__column",{items:(s?s:"")+c}),s=null):(u="",s=c),u}).join("")}),e("collections__items",function(t,e,i){return t.list.map(function(t,n){return i("collections__item",{href:t.link,stat:e.stat.getClientCounter("collections.channel."+n+"(id="+t.channel_id+")"),color1:t.color_wiz.back,color2:home.color(t.color_wiz.back).lighter(40),img:t.image||t.images["296x296"],title:home.htmlFilter(t.title||"")})}).join("")}),e("collections__panel",function(t,e,i){var n="";return"dummy"===t.id?n=t.items:t.list&&(n="channels"===t.id?i("collections__items",t):i("collections__feed-items",t)),i("collections__panel-layout",{id:t.id,mods:{feed:"feed"===t.id?"yes":null},mix:t.mix,carouselMods:{mods:{theme:"zen",size:"xs"}},carouselParams:{carousel:{counter:"collections",step:746,offset:1120}},items:n})}),e("collections",function(t,e,i){var n="collections_"+home.rnd().substr(0,5),o=t.list[0],s=t.retryButtonTheme,r={};return t.list.forEach(function(t){r[t.id]=t}),i("media-service",{block:"collections",rootMod:home.getBEMClassname("collections",t)+" i-bem media-grid__collections mix-tabber_theme_media",href:t.url,title:"Коллекции",titleAttrs:{tabindex:0},titleStat:e.stat.getAttr("collections.title"),content:i("collections__layout",{tabs:t.list.map(function(t,o){var s=0===o;return i("collections__tab",{mods:{selected:s?"yes":"no"},tabber:{mods:{selected:s?"yes":"no"}},content:t.title,stat:e.stat.getAttr("collections."+t.id),attrs:{tabindex:s?"0":"-1","aria-selected":s?"true":"false","aria-controls":s?n+"_panel_"+t.id:void 0,"data-key":t.id,id:n+"_tab_"+t.id}})}).join(""),panel:i("mix-tabber__panel",{block:"collections",id:n,key:o.id,attrs:{"aria-labelledby":n+"_tab_"+o.id},content:i("collections__panel",{id:o.id,list:o.list})})}),attrs:{role:"complementary","aria-label":"Коллекции","data-bem":home.getBEMParams({collections:{data:r,retryButtonTheme:s,live:!1,uniqId:n}})}})}),e("collections__client-view",function(t,e,i){var n=home.getData("collections.data");return n?i("collections-loader",n):void 0}),e("collections__zen-insert",function(t,e,i){return i("media-grid__service-row",{block:"collections",view:"collections__client-view"}).content}),e("collections__column",function(t,e,i){var n;return'<div class="collections__column">'+(t.items!==n?t.items:"")+"</div>"}),e("collections__feed-item",function(t,e,i){var n;return'<a class="collections__feed-item media-service__item'+(t.mod!==n?t.mod:"")+'" href="'+(t.href!==n?t.href:"")+'"'+(t.stat!==n?t.stat:"")+' aria-label="'+(t.title!==n?t.title:"")+'"><div class="collections__feed-img media-service__image media-service__shadow" data-image="'+(t.img!==n?t.img:"")+'" style="background-color:'+(t.color!==n?t.color:"")+'"></div></a>'}),e("collections__item_dummy",function(t,e,i){return'<div class="collections__item collections__item_dummy_yes"><div class="collections__item-shadows collections__item-shadows_2"></div><div class="collections__item-shadows collections__item-shadows_1"></div><div class="collections__item-img"></div><div class="collections__item-title media-service__item-title i-multiline-overflow"></div></div>'}),e("collections__item",function(t,e,i){var n;return'<a class="collections__item media-service__item" href="'+(t.href!==n?t.href:"")+'"'+(t.stat!==n?t.stat:"")+'><div class="collections__item-shadows collections__item-shadows_2" style="background-color:'+(t.color2!==n?t.color2:"")+'"></div><div class="collections__item-shadows collections__item-shadows_1" style="background-color:'+(t.color1!==n?t.color1:"")+'"></div><div class="collections__item-img media-service__image media-service__shadow" data-image="'+(t.img!==n?t.img:"")+'" style="background-color:'+(t.color1!==n?t.color1:"")+'"></div><div class="collections__item-title media-service__item-title i-multiline-overflow">'+(t.title!==n?t.title:"")+"</div></a>"}),e("collections__panel-layout",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"collections__list-wrapper.class")+" "+home.parseRules.bem(t,e,"carouselMods.carousel.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"carouselParams.js")+'"><div class="collections__wrap carousel__wrap"><div class="collections__items">'+(t.items!==n?t.items:"")+'</div></div><div class="carousel__control carousel__control_side_left"></div><div class="carousel__control carousel__control_side_right"></div></div>'}),e("collections__tab",function(t,e,i){var n;return"<div"+(t.stat!==n?t.stat:"")+' class="'+home.parseRules.bem(t,e,"collections__tab.class")+" "+home.parseRules.bem(t,e,"tabber.mix-tabber__tab.class")+'" role="tab"'+home.parseRules.bem(t,e,"attrs")+">"+(t.content!==n?t.content:"")+"</div>"}),e("collections__layout",function(t,e,i){var n;return'<div class="collections__tabs" role="tablist">'+(t.tabs!==n?t.tabs:"")+'</div><div class="collections__panels">'+(t.panel!==n?t.panel:"")+"</div>"}),e("collections-loader",function(t,e,i){var n,o=[],s=[];for(n=0;2>n;++n)o.push(i("collections__tab",{mods:{dummy:"yes"},content:"&nbsp;"}));for(n=0;5>n;++n)s.push(i("collections__item_dummy",{}));return i("media-service",{block:"collections",rootMod:home.getBEMClassname("collections",t)+" "+home.getBEMClassname("collections-loader",{mods:{state:"loading"}})+" i-bem media-grid__collections mix-tabber_theme_media",title:"Коллекции",titleAttrs:{tabindex:0},content:i("collections__layout",{tabs:o.join(""),panel:i("collections__panel",{mix:"collections-loader__panel",id:"dummy",items:s.join("")})+i("mix-tabber-loader__retry",{theme:t.retryButtonTheme,block:"collections-loader"})}),attrs:{role:"complementary","aria-label":"Коллекции","data-bem":home.getBEMParams({"collections-loader":{retryButtonTheme:t.retryButtonTheme,locale:t.Locale}})}})}),e("sports__items",function(t,e,i){return t.list.map(function(n){return i("sports__item",{href:n.url,stat:e.stat.getClientCounter("sportsru.item."+t.id),image:n.image?'<div class="sports__item-img media-service__image" data-image="'+n.image+'"></div>':"",title:home.prepareSpaces(home.htmlFilter(n.title||"")),text:!n.image&&n.text?'<div class="sports__item-text i-multiline-overflow">'+home.prepareSpaces(home.htmlFilter(n.text||""))+"</div>":"",date:n.pretty_pub_date||""})}).join("")}),e("sports__panel",function(t,e,i){var n="";return"dummy"===t.id?n=t.items:t.list&&(n=i("sports__items",t)),i("sports__panel-layout",{id:t.id,mix:t.mix,carouselMods:{mods:{theme:"zen",size:"s"}},carouselParams:{carousel:{counter:"sports",step:746,offset:1120}},items:n})}),e("sports",function(t,e,i){var n="Спорт",o="//wayback.archive-it.org/all/20180620162258/https://sports.ru/?utm_source=yamorda",s=t.categories[0],r="sports_"+home.rnd().substr(0,5),a=t.retryButtonTheme,l={};return t.categories.forEach(function(t){l[t.category_id]=t.data}),i("media-service",{block:"sports",rootMod:home.getBEMClassname("sports",t)+" i-bem media-grid__sports mix-tabber_theme_media",href:o,title:n,titleAttrs:{rel:"noopener",target:"_blank",tabindex:0},titleStat:e.stat.getAttr("sportsru.title"),content:i("sports__layout",{tabs:t.categories.map(function(t,n){var o=0===n;return i("sports__tab",{mods:{selected:o?"yes":"no"},tabber:{mods:{selected:o?"yes":"no"}},content:t.category,stat:e.stat.getAttr("sportsru.tab."+t.category_id),attrs:{tabindex:o?"0":"-1","aria-selected":o?"true":"false","aria-controls":o?r+"_panel_"+t.category_id:void 0,"data-key":t.category_id,id:r+"_tab_"+t.category_id}})}).join(""),panel:i("mix-tabber__panel",{block:"sports",id:r,key:s.category_id,attrs:{"aria-labelledby":r+"_tab_"+s.category_id},content:i("sports__panel",{id:s.category_id,list:s.data})})}),attrs:{role:"complementary","aria-label":n,"data-bem":home.getBEMParams({sports:{data:l,selectedKey:s.category_id,retryButtonTheme:a,live:!1,uniqId:r}})}})}),e("sports__client-view",function(t,e,i){var n=home.getData("sports.data");return n?i("sports-loader",n):void 0}),e("sports__zen-insert",function(t,e,i){return i("media-grid__service-row",{block:"sports",view:"sports__client-view"}).content}),e("sports__item_dummy",function(t,e,i){return'<div class="sports__item sports__item_dummy_yes media-service__shadow"></div>'}),e("sports__column",function(t,e,i){var n;return'<div class="sports__column">'+(t.items!==n?t.items:"")+"</div>"}),e("sports__item",function(t,e,i){var n;return'<a class="sports__item media-service__item media-service__shadow" rel="noopener" target="_blank" href="'+(t.href!==n?t.href:"")+'"'+(t.stat!==n?t.stat:"")+">"+(t.image!==n?t.image:"")+'<div class="sports__item-content"><div class="sports__item-title i-multiline-overflow">'+(t.title!==n?t.title:"")+"</div>"+(t.text!==n?t.text:"")+'<div class="sports__item-date">'+(t.date!==n?t.date:"")+"</div></div></a>"}),e("sports__panel-layout",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"sports__list-wrapper.class")+" "+home.parseRules.bem(t,e,"carouselMods.carousel.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"carouselParams.js")+'"><div class="sports__wrap carousel__wrap"><div class="sports__items">'+(t.items!==n?t.items:"")+'</div></div><div class="carousel__control carousel__control_side_left"></div><div class="carousel__control carousel__control_side_right"></div></div>'}),e("sports__tab",function(t,e,i){var n;return"<div"+(t.stat!==n?t.stat:"")+' class="'+home.parseRules.bem(t,e,"sports__tab.class")+" "+home.parseRules.bem(t,e,"tabber.mix-tabber__tab.class")+'" role="tab"'+home.parseRules.bem(t,e,"attrs")+">"+(t.content!==n?t.content:"")+"</div>"}),e("sports__layout",function(t,e,i){var n;return'<div class="sports__tabs" role="tablist">'+(t.tabs!==n?t.tabs:"")+'</div><div class="sports__panels">'+(t.panel!==n?t.panel:"")+"</div>"}),e("sports-loader",function(t,e,i){var n="Спорт",o="//wayback.archive-it.org/all/20180620162258/https://sports.ru/?utm_source=yamorda",s=Array(4).join(i("sports__tab",{mods:{dummy:"yes"},content:"&nbsp;"})),r=Array(7).join(i("sports__item_dummy",{}));return i("media-service",{block:"sports",rootMod:home.getBEMClassname("sports",t)+" "+home.getBEMClassname("sports-loader",{mods:{state:"loading"}})+" i-bem media-grid__sports mix-tabber_theme_media",href:o,title:n,titleAttrs:{rel:"noopener",target:"_blank",tabindex:0},titleStat:e.stat.getAttr("sports-loader.title"),content:i("sports__layout",{tabs:s,panel:i("sports__panel",{mix:"sports-loader__panel",id:"dummy",items:r})+i("mix-tabber-loader__retry",{theme:t.retryButtonTheme,block:"sports-loader"})}),attrs:{role:"complementary","aria-label":n,"data-bem":home.getBEMParams({"sports-loader":{retryButtonTheme:t.retryButtonTheme}})}})}),e("zen-inserter__convert-to-stat-format",function(t){return t.replace(/-/g,"_").replace(/\./g,"#")}),e("zen-inserter__convert-to-frontend-format",function(t){return t.replace(/_/g,"-")}),e("kinopoisk__rating-color",function(t){var e=t.rating;return e>=8?"#32ba43":e>=7?"#89c939":e>=5?"#91a449":e>=3?"#85855d":"#727272"}),e("kinopoisk__film-list",function(t,e,i){var n=home.transliterate(t.title.toLowerCase()).replace(/,/g,"").replace(/\s/g,"-"),o="kinopoisk.film."+n.replace(/-/g,"_");return t.logShow!==!1&&e.stat.logShow(o),t.films.map(function(s,r){var a,l,c="",u="";return s.kpRating&&(a=parseFloat(s.kpRating),l=a.toFixed(1).replace(".",","),c="Рейтинг %s".replace("%s",l),u=i("kinopoisk__film-rating",{rating:l,color:i("kinopoisk__rating-color",{rating:a})})),i("kinopoisk__film",{rating:u,ratingLabel:c,stat:e.stat.getAttr(o,null,{logShow:!1}),title:home.prepareSpaces(s.title),poster:s.poster.replace("/orig","/"),bgColor:s.medianColor||"#dfdcd7",mediaPlay:i("media-play",{mods:{type:"kinopoisk"}}),attrs:{"data-film-id":s.contentGroupUuid,"data-selection-id":String(t.id),"data-from-block":n,"data-from-position":r+1+(t.startIndex||0),"data-stat":"kinopoisk.link"}})}).join("")}),e("kinopoisk__films",function(t,e,i){return i("kinopoisk__films-layout",{content:i("kinopoisk__film-list",t)})}),e("kinopoisk__panel",function(t,e,i){return i("kinopoisk__panel-layout",{id:t.id,carouselMods:{mods:{theme:"zen",size:"xs"}},carouselParams:{carousel:{counter:"kinopoisk",step:746,offset:1120}},items:t.films?i("kinopoisk__films",t):""})}),e("kinopoisk__content",function(t,e,i){var n=t.retryButtonTheme,o=t.defaultTabId,s=t.data[o],r=t.groups,a=t.zenInsert,l=e.MediaFooterCollapsed||!1,c="kinopoisk_"+home.rnd().substr(0,5);return i("media-service",{block:"kinopoisk",rootMod:home.getBEMClassname("kinopoisk",t)+" i-bem kinopoisk-control media-grid__kinopoisk mix-tabber_theme_media",title:"Фильмы",titleMix:"kinopoisk-control__link home-link_pseudo_yes",titleAttrs:{"data-stat":"kinopoisk.link","data-selection-id":String(s.id),"data-from-block":"block_title",tabindex:0},titleStat:e.stat.getAttr("kinopoisk.title",null,{logShow:!l}),content:i("kinopoisk__layout",{tabs:r.map(function(t){var n=t["default"],o=home.transliterate(t.title.toLowerCase()).replace(/,/g,"").replace(/\s/g,"-"),s="kinopoisk.tab."+o.replace(/-/g,"_");return i("kinopoisk__tab",{mods:{selected:n?"yes":"no"},tabber:{mods:{selected:n?"yes":"no"}},content:t.title,stat:e.stat.getAttr(s,null,{logShow:!l}),attrs:{tabindex:n?"0":"-1","aria-selected":n?"true":"false","aria-controls":n?c+"_panel_"+t.id:void 0,"data-key":t.id,id:c+"_tab_"+t.id}})}).join(""),panel:i("mix-tabber__panel",{block:"kinopoisk",id:c,key:o,attrs:{"aria-labelledby":c+"_tab_"+s.id},content:i("kinopoisk__panel",{id:s.id,title:s.title,films:s.films,logShow:!l,retryButtonTheme:n})})}),attrs:{role:"complementary","aria-label":"Фильмы","data-bem":home.getBEMParams({kinopoisk:{selectedTab:o,retryButtonTheme:n,live:!a,uniqId:c,country:t.country},"kinopoisk-control":{}})}})}),e("kinopoisk__client-view",function(t,e,i){var n=home.getData("kinopoisk.data");return n?i("kinopoisk__content",n):void 0}),e("kinopoisk__zen-insert",function(t,e,i){return i("media-grid__service-row",{block:"kinopoisk",view:"kinopoisk__client-view"}).content}),e("kinopoisk__film-loader",function(t,e,i){return'<div class="kinopoisk__film kinopoisk__film-loader"><div class="kinopoisk__film-loader-inner loader"></div></div>'}),e("kinopoisk__film-rating",function(t,e,i){var n;return'<span class="kinopoisk__film-rating" style="background-color:'+(t.color!==n?t.color:"")+'" aria-hidden="true">'+(t.rating!==n?t.rating:"")+"</span>"}),e("kinopoisk__film",function(t,e,i){var n;return"<div"+(t.stat!==n?t.stat:"")+' class="kinopoisk__film media-service__item kinopoisk-control__link media-play__container"'+home.parseRules.bem(t,e,"attrs")+' role="listitem" tabindex="0"><span class="kinopoisk__film-inner"><span class="kinopoisk__film-bg media-service__shadow"><span class="kinopoisk__film-image media-service__image" data-image="'+(t.poster!==n?t.poster:"")+'" style="background-color:'+(t.bgColor!==n?t.bgColor:"")+'"></span>'+(t.rating!==n?t.rating:"")+(t.mediaPlay!==n?t.mediaPlay:"")+'</span></span><span class="kinopoisk__film-title media-service__item-title">'+(t.title!==n?t.title:"")+'</span><span class="a11y-hidden">'+(t.ratingLabel!==n?t.ratingLabel:"")+"</span></div>"}),e("kinopoisk__films-layout",function(t,e,i){var n;return'<div class="kinopoisk__list carousel__list" role="list">'+(t.content!==n?t.content:"")+"</div>"}),e("kinopoisk__panel-layout",function(t,e,i){var n;return'<div class="kinopoisk__list-wrapper '+home.parseRules.bem(t,e,"carouselMods.carousel.class")+' i-bem" data-bem="'+home.parseRules.bem(t,e,"carouselParams.js")+'"><div class="kinopoisk__wrap carousel__wrap">'+(t.items!==n?t.items:"")+'</div><div class="carousel__control carousel__control_side_left"></div><div class="carousel__control carousel__control_side_right"></div></div>'}),e("kinopoisk__tab",function(t,e,i){var n;return"<div"+(t.stat!==n?t.stat:"")+' class="'+home.parseRules.bem(t,e,"kinopoisk__tab.class")+" "+home.parseRules.bem(t,e,"tabber.mix-tabber__tab.class")+'" role="tab"'+home.parseRules.bem(t,e,"attrs")+">"+(t.content!==n?t.content:"")+"</div>"}),e("kinopoisk__layout",function(t,e,i){var n;return'<div class="kinopoisk__tabs" role="tablist">'+(t.tabs!==n?t.tabs:"")+'</div><div class="kinopoisk__panels">'+(t.panel!==n?t.panel:"")+"</div>"}),e("desk-notif-card__sport-status",function(t,e,i){var n=[],o=t.round_title,s=t.phase_title;return t.subtitle?n.push(t.subtitle):(o&&n.push(o),s&&n.push(s)),n.length?i("desk-notif-card__sport-status-layout",{inProgress:"in_progress"===t.status?"yes":"no",text:n.join(", ")}):""}),e("desk-notif-card__sport-status-layout",function(t,e,i){var n;return'<div class="desk-notif-card__sport-status desk-notif-card__sport-progress_'+(t.inProgress!==n?t.inProgress:"")+'">'+(t.text!==n?t.text:"")+"</div>"}),e("desk-notif-card__icon-src",function(t,e){var i=t.iconSrc;if(i){var n=".svg";return e.isOperaPresto&&(n=".png"),home.getAttributes({style:"background-image: url("+i+n+")"})}}),e("desk-notif-card__inner",function(t,e,i){var n="";return n+=t.link||"",n+=t.title?i("desk-notif-card__title",t):"",n+=t.details?i("desk-notif-card__details",t):"",t.iconSrc&&(t.iconSrc=i("desk-notif-card__icon-src",t)),n+=t.iconSrc||t.iconClass?i("desk-notif-card__icon",t):"",n+=t.extraElems||""}),e("desk-notif-card__icon",function(t,e,i){var n,o;return'<div class="desk-notif-card__icon '+(t.iconClass!==o?t.iconClass:e.iconClass!==o?e.iconClass:(n=i("iconClass",t),n!==o?n:""))+'" '+(t.iconSrc!==o?t.iconSrc:"")+"></div>"}),e("desk-notif-card__details",function(t,e,i){var n;return'<div class="desk-notif-card__details">'+(t.details!==n?t.details:"")+"</div>"}),e("desk-notif-card__title",function(t,e,i){var n;return'<div class="desk-notif-card__title">'+(t.title!==n?t.title:"")+"</div>"}),e("desk-notif-card__zen-layout",function(t,e,i){var n;return'<div class="desk-notif-card__zen-icon desk-notif-card__icon"></div><div class="desk-notif-card__zen-domain">'+(t.domainTitle!==n?t.domainTitle:"")+'</div><div class="desk-notif-card__zen-text">'+(t.title!==n?t.title:"")+"</div>"}),e("media-grid__row",function(t,e,i){var n,o=t.block,s=t.blockName,r={};return o?(t.firstRow&&(r.first="yes"),Array.isArray(o)?(n=o.map(function(t){return i("media-grid__cell",{content:i(t,{mods:{width:"half"}})})}).join(""),r.splitted="yes"):n=i(o,{mods:{width:"full"}}),n?i("media-grid__row-layout",{mods:r,content:n,attrs:{"data-blockname":s}}):""):""}),e("media-grid__tv-online",function(t,e,i){var n="tv_online",o="",s=t.firstRow,r=i("media-grid__tv-online-active-blocks",t);return 3===r.length?(o+=i("media-grid__row",{blockName:n,block:[r[0],r[1]],firstRow:s}),o+=i("media-grid__row",{blockName:n,block:r[2]})):2===r.length?o+=i("media-grid__row",{blockName:n,block:[r[0],r[1]],firstRow:s}):1===r.length&&(o+=i("media-grid__row",{blockName:n,block:r[0],firstRow:s})),{content:o,activeBlocks:r}}),e("media-grid__tv-online-active-blocks",function(t){var e=t.hasVideo,i=t.hasStream,n=t.hasVod,o=t.videoBlock||"media-video",s=t.streamBlock||"media-stream",r=t.vodBlock||"media-vod";return[e&&o,i&&s,n&&r].filter(Boolean)}),e("media-grid__service-row",function(t,e,i){var n=t.firstRow,o=t.block,s=i("media-grid__row",{block:t.view||o,firstRow:n,blockName:o}),r=[];return s&&r.push(o),{content:s,activeBlocks:r}}),e("media-grid__hide-media-footer-mode",function(t){var e=t.notEmptyColumns||{},i=e.Column3||e.Column4||e.Column5;return i?void 0:"full"}),e("media-grid__cell",function(t,e,i){var n;return'<div class="media-grid__cell">'+(t.content!==n?t.content:"")+"</div>"}),e("media-grid__row-layout",function(t,e,i){var n;return'<div class="'+home.parseRules.bem(t,e,"media-grid__row.class")+'" '+home.parseRules.bem(t,e,"attrs")+">"+(t.content!==n?t.content:"")+"</div>"}),e("dist-popup__image",function(t,e,i){var n;return'<img class="dist-popup__image" alt="" src="'+(t.image!==n?t.image:"")+'"/>'})}();if(window.Ya&&Ya.Rum){Ya.Rum.sendTimeMark("2095.1428");}

 }

/*
     FILE ARCHIVED ON 16:22:58 Jun 20, 2018 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 10:03:00 Jun 04, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  RulesEngine.query: 28.991
  PetaboxLoader3.resolve: 20.015
  PetaboxLoader3.datanode: 13.313
*/